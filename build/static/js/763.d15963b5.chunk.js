"use strict";(self.webpackChunkhuts4u=self.webpackChunkhuts4u||[]).push([[763],{45763:(e,t,o)=>{o.d(t,{A:()=>le});var r=o(89379),n=o(91082),a=o(96509),s=o(41209),l=o(79484),i=o(19749),c=o(34535),d=o(84511),u=o(71828),p=o(85442),x=o(7353),h=o(94496),m=o(60446),f=o.n(m),g=o(90246),y=o(65043),b=o(73216),A=o(33580),j=o(31716),v=o(58390),C=o(72138),w=o(89302),S=o(70579);const k=e=>{let{date:t,setDate:o,label:r}=e;return(0,S.jsx)(v.$,{dateAdapter:w.R,children:(0,S.jsxs)(x.A,{sx:{display:"flex",flexDirection:"column",bgcolor:A.A.thirdColor,borderRadius:2,p:1,textAlign:"left",color:A.A.firstColor},children:[(0,S.jsx)(h.A,{sx:{px:"10px",fontSize:{xs:"14px",md:"16px"},fontFamily:"CustomFontM"},children:r}),(0,S.jsx)(C.$,{value:t,onChange:o,shouldDisableDate:e=>e.isBefore(f()(),"day"),slotProps:{textField:{sx:{bgcolor:A.A.thirdColor,borderRadius:2,maxWidth:"200px",border:"none",outline:"none",boxShadow:"none","& fieldset":{border:"none"},"&:hover":{bgcolor:"#f5f5f5"},"& .MuiInputBase-input":{padding:"0px 10px",color:A.A.firstColor,fontFamily:"CustomFontB",fontSize:{xs:"18px",md:"20px"}}}}}})]})})};var T=o(73285);const R=e=>{let{time:t,setTime:o,label:r,bookingType:n="hourly",checkinDate:a=null}=e;return(0,S.jsx)(v.$,{dateAdapter:w.R,children:(0,S.jsxs)(x.A,{sx:{display:"flex",flexDirection:"column",bgcolor:A.A.thirdColor,borderRadius:2,p:1,textAlign:"left",color:A.A.firstColor,minWidth:{xs:"80%",md:"auto"}},children:[(0,S.jsx)(h.A,{sx:{px:"10px",fontSize:{xs:"14px",md:"16px"},fontFamily:"CustomFontM"},children:r}),(0,S.jsx)(T.o,{value:t,onChange:e=>{o(e)},views:["hours"],slotProps:{textField:{sx:{bgcolor:A.A.thirdColor,borderRadius:2,width:"100%",border:"none",outline:"none",boxShadow:"none","& fieldset":{border:"none"},"&:hover":{bgcolor:"#f5f5f5"},"& .MuiInputBase-input":{padding:"0px 10px",color:A.A.firstColor,fontFamily:"CustomFontB",fontSize:{xs:"18px",md:"20px"}}}}}})]})})};var z=o(67784),D=o(51787),_=o(17392),M=o(95953),B=o(61596),F=o(35721),P=o(30681),W=o(48734),I=o(2050),O=o(83462),E=o(26600),L=o(35316),H=o(98533),Y=o(29347),G=o(11906),N=o(49800);var V=o(59007),q=o(69995),$=o(26372),U=o(99390),K=o(84770),Q=o(59275),X=o(17289),Z=o(33438);const J=V.AQ,ee=e=>{let{label:t,onSelect:o,value:r,setValue:a}=e;const s=(0,y.useRef)(!0),[l,i]=(0,y.useState)(""),[c,d]=(0,y.useState)([]),[u,p]=(0,y.useState)([]),[m,f]=(0,y.useState)(null),[g,b]=(0,y.useState)(!1),[j,v]=(0,y.useState)(!1),[C,w]=(0,y.useState)(!0),[k,T]=(0,y.useState)(!1),[R,ee]=(0,y.useState)(!1),[te,oe]=(0,y.useState)([]),[re,ne]=(0,y.useState)(!1),ae=(0,y.useRef)(null),se=((0,y.useRef)(null),(0,y.useRef)(null)),le=(0,y.useRef)(!1),ie=V.j6;(0,y.useEffect)(()=>{(async()=>{try{var e,t;const o={data:{filter:"",status:"Approved"},page:0,pageSize:1e3,order:[["createdAt","ASC"]]},r=await(0,q.Vy)(o),n=((null===r||void 0===r||null===(e=r.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.rows)||[]).map(e=>({id:e.id,propertyName:e.propertyName||"",address:e.address||"",city:e.city||"",latitude:e.latitude||0,longitude:e.longitude||0,propertyType:e.propertyType||""}));oe(n),ne(!0),console.log("Hotels loaded for search:",n.length)}catch(o){console.error("Error fetching hotels:",o)}})()},[]),(0,y.useEffect)(()=>{s.current&&(r?i(r):(i("Bhubaneswar"),a("Bhubaneswar"),o({display_name:"Bhubaneswar",lat:20.2961,lon:85.8245,place_id:null,name:"Bhubaneswar",type:"location"})),s.current=!1)},[r,a,o]);const ce=(0,y.useCallback)(e=>{if(le.current)return void e();if(document.querySelector('script[src*="maps.googleapis.com/maps/api/js"]'))return le.current=!0,void setTimeout(e,100);b(!0);const t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=".concat(J,"&libraries=places&callback=initMap"),t.async=!0,t.defer=!0,window.initMap=()=>{console.log("Google Maps initialized"),le.current=!0,b(!1),e()},t.onerror=()=>{console.error("Failed to load Google Maps script"),b(!1)},document.head.appendChild(t)},[]),de=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),ue=async()=>{v(!0);try{const e=await(async()=>{try{return navigator.geolocation?new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(t=>{const{latitude:o,longitude:r}=t.coords;e({latitude:o,longitude:r})},e=>{t(new Error(e.message))},{enableHighAccuracy:!0})}):"granted"===(await N.L.requestPermissions({permissions:["location"]})).location?(await N.L.getCurrentPosition({enableHighAccuracy:!0})).coords:null}catch(e){return null}})();let t,n;if(e&&"object"===typeof e&&("latitude"in e&&"longitude"in e?(t=e.latitude,n=e.longitude):"coords"in e&&e.coords?(t=e.coords.latitude,n=e.coords.longitude):"lat"in e&&"lng"in e&&(t=e.lat,n=e.lng)),void 0!==t&&void 0!==n)try{const e=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(n,",").concat(t,".json?access_token=").concat(ie)),r=await e.json();if(r.features&&r.features.length>0){let e=r.features[0].place_name;const s=r.features[0];if(s.text&&(e=s.text,s.context)){const t=s.context.find(e=>e.id.includes("locality")||e.id.includes("place"));t&&(e=t.text)}i(e),a(e),o({display_name:e,lat:t,lon:n,place_id:null,name:r.features[0].text,geometry:{location:{lat:()=>t,lng:()=>n}}})}}catch(r){console.error("Error fetching current location name:",r)}else console.warn("Could not extract coordinates from location:",e),w(!1),de()||R||T(!0)}catch(r){var e,t;console.error("Error getting current location:",r),w(!1);(1===r.code||(null===(e=r.message)||void 0===e?void 0:e.includes("permission"))||(null===(t=r.message)||void 0===t?void 0:t.includes("denied")))&&(ee(!0),de()?console.log("Mobile location permission denied - user must enable in browser settings"):T(!0))}finally{v(!1)}},pe=()=>{T(!1),w(!1)};(0,y.useEffect)(()=>{if(J)return ce(()=>{if(window.google&&window.google.maps&&window.google.maps.places)try{const e=document.createElement("div");se.current=new google.maps.places.PlacesService(e),console.log("Google Places Service initialized successfully")}catch(e){console.error("Error initializing Google Places Service:",e)}else console.error("Google Maps Places library not available")}),()=>{se.current=null}},[ce]);const xe=async e=>{try{var t;const o="85.74,20.21,85.9,20.32",r=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json?access_token=").concat(ie,"&autocomplete=true&bbox=").concat(o,"&limit=10&proximity=85.8245,20.2961")),n=(null===(t=(await r.json()).features)||void 0===t?void 0:t.map(e=>{let t=e.place_name||"";return t=t.replace(/,\s*Bhubaneswar.*$/i,"").trim(),{place_id:e.id,formatted_address:t||e.text,name:e.text,geometry:{location:{lat:()=>e.center[1],lng:()=>e.center[0]}}}}))||[];d(n)}catch(o){console.error("Error fetching Mapbox suggestions:",o),d([])}},he=e=>{if("hotel"!==e.type){const t=e.data.types||[];return t.includes("hotel")||t.includes("lodging")?(0,S.jsx)($.A,{sx:{color:"#2196f3"}}):t.includes("restaurant")||t.includes("food")?(0,S.jsx)(X.A,{sx:{color:"#4caf50"}}):t.includes("shopping_mall")||t.includes("store")?(0,S.jsx)(K.A,{sx:{color:"#ff9800"}}):(0,S.jsx)(n.A,{sx:{color:"#f44336"}})}var t;switch(null===(t=e.data.propertyType)||void 0===t?void 0:t.toLowerCase()){case"hotel":return(0,S.jsx)($.A,{sx:{color:"#1976d2"}});case"villa":return(0,S.jsx)(U.A,{sx:{color:"#4caf50"}});case"resort":return(0,S.jsx)(K.A,{sx:{color:"#ff9800"}});case"apartment":return(0,S.jsx)(Q.A,{sx:{color:"#9c27b0"}});default:return(0,S.jsx)($.A,{sx:{color:"#757575"}})}},me=[...u.map(e=>({type:"hotel",data:e,displayText:e.propertyName,address:e.address,city:e.city,propertyType:e.propertyType})),...c.map(e=>({type:"location",data:e,displayText:e.formatted_address||e.name,address:e.formatted_address,name:e.name,types:e.types||[]}))].sort((e,t)=>{if("hotel"===e.type&&"hotel"!==t.type)return-1;if("hotel"===t.type&&"hotel"!==e.type)return 1;const o=e.displayText.toLowerCase(),r=t.displayText.toLowerCase(),n=l.toLowerCase();return o===n&&r!==n?-1:r===n&&o!==n?1:o.startsWith(n)&&!r.startsWith(n)?-1:r.startsWith(n)&&!o.startsWith(n)?1:o.includes(n)&&!r.includes(n)?-1:r.includes(n)&&!o.includes(n)?1:o.localeCompare(r)});return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(x.A,{sx:{display:"flex",flexDirection:"column",bgcolor:A.A.thirdColor,borderRadius:2,p:1,textAlign:"left",color:A.A.firstColor,position:"relative"},children:[(0,S.jsxs)(h.A,{sx:{px:"10px",fontSize:{xs:"14px",md:"16px"},fontFamily:"CustomFontM",display:"flex",alignItems:"center",gap:1},children:[t,g&&" (loading Google Maps...)",j&&" (getting your location...)"]}),(0,S.jsx)(x.A,{sx:{display:"flex",alignItems:"center",color:A.A.firstColor,borderRadius:2,minWidth:{xs:"250px",md:"300px"},position:"relative"},children:(0,S.jsx)(z.A,{variant:"standard",InputProps:{disableUnderline:!0,endAdornment:l&&""!==l.trim()&&(0,S.jsx)(D.A,{position:"end",children:(0,S.jsx)(_.A,{onClick:()=>{i(""),a(""),d([]),p([])},size:"small",sx:{color:A.A.firstColor,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:(0,S.jsx)(Z.A,{fontSize:"small"})})}),inputProps:{autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":me.length>0,"aria-controls":"location-suggestions-list"}},type:"text",value:l,onChange:async e=>{const t=e.target.value;if(i(t),f(e.currentTarget),t.trim())if(t.length>1){const e=(e=>{if(!e.trim()||!re)return[];const t=e.toLowerCase().trim();return te.filter(e=>e.propertyName.toLowerCase().includes(t)).slice(0,10)})(t);if(p(e),se.current)try{const e=await(async e=>se.current&&e.trim()?new Promise(t=>{var o;const r={query:e,location:new google.maps.LatLng(20.2961,85.8245),radius:5e4};null===(o=se.current)||void 0===o||o.textSearch(r,(e,o)=>{if(o===google.maps.places.PlacesServiceStatus.OK&&e){const o=e.map(e=>{let t=e.formatted_address||"";return t=t.replace(/,\s*Bhubaneswar.*$/i,"").trim(),{place_id:e.place_id,formatted_address:t||e.name,name:e.name,geometry:e.geometry,types:e.types||[]}});t(o)}else console.log("Google Places search status:",o),t([])})}):[])(t);d(e)}catch(o){console.error("Error fetching Google Places suggestions:",o),le.current&&window.google||xe(t)}else le.current&&window.google||xe(t)}else d([]),p([]);else a(""),d([]),p([])},placeholder:"Search hotels or locations in Bhubaneswar...",inputRef:ae,fullWidth:!0,sx:{bgcolor:A.A.thirdColor,borderRadius:2,width:"100%",border:"none",outline:"none",boxShadow:"none","& fieldset":{border:"none"},"&:hover":{bgcolor:"#f5f5f5"},"& .MuiInputBase-input":{color:A.A.firstColor,fontFamily:"CustomFontB",fontSize:{xs:"18px",md:"20px"},width:"100%",paddingRight:"40px","&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px white inset",WebkitTextFillColor:A.A.firstColor}}}})}),!j&&!C&&(0,S.jsx)(x.A,{sx:{mt:1,px:"10px"},children:(0,S.jsx)(h.A,{onClick:()=>{de()?alert("Please enable location services in your browser settings to use this feature."):ue()},sx:{color:"primary.main",cursor:"pointer",textDecoration:"underline",fontSize:"12px",fontFamily:"CustomFontB",display:"inline-block"},children:"Use my current location"})}),me.length>0&&(0,S.jsx)(M.A,{open:me.length>0,anchorEl:m,placement:"bottom-start",modifiers:[{name:"preventOverflow",enabled:!0,options:{altAxis:!0,altBoundary:!0,tether:!0,rootBoundary:"document",padding:8}},{name:"offset",options:{offset:[0,8]}}],style:{zIndex:9999,position:"absolute"},sx:{width:"fit-content",maxWidth:"90vw",minWidth:{xs:"calc(100vw - 32px)",sm:"400px",md:"500px"},translate:{xs:"0 0",md:"-40px 10px"}},children:(0,S.jsx)(B.A,{id:"location-suggestions-list",sx:{width:"100%",maxHeight:"400px",overflow:"auto",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",borderRadius:"8px",border:"1px solid #e0e0e0"},children:(0,S.jsxs)(F.A,{dense:!0,sx:{py:0},children:[(0,S.jsx)(P.Ay,{sx:{bgcolor:"#f8f9fa",borderBottom:"1px solid #e9ecef",py:.75,px:2},children:(0,S.jsx)(W.A,{primary:(0,S.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,S.jsx)(h.A,{sx:{fontSize:"12px",fontWeight:600,color:"#6c757d"},children:u.length>0&&c.length>0?"".concat(u.length," hotels & ").concat(c.length," locations found"):u.length>0?"".concat(u.length," hotels found"):"".concat(c.length," locations found")}),(0,S.jsx)(h.A,{sx:{fontSize:"10px",color:"#adb5bd"},children:"Press \u2b06\u2b07 to navigate, \u21b5 to select"})]})})}),me.map((e,t)=>{var r,n,s,l;return(0,S.jsxs)(P.Ay,{component:"li",onClick:()=>{"hotel"===e.type?(e=>{const t=e.propertyName;i(t),p([]),d([]),a(t),o({display_name:t,lat:e.latitude||0,lon:e.longitude||0,place_id:null,name:e.propertyName,hotelId:e.id,address:e.address,city:e.city,type:"hotel"})})(e.data):(e=>{var t,r,n,s;const l=e.formatted_address||e.place_name;i(l),d([]),p([]),a(l),o({display_name:l,lat:(null===(t=e.geometry)||void 0===t||null===(r=t.location)||void 0===r?void 0:r.lat())||(e.center?e.center[1]:0),lon:(null===(n=e.geometry)||void 0===n||null===(s=n.location)||void 0===s?void 0:s.lng())||(e.center?e.center[0]:0),place_id:e.place_id,name:e.name,type:"location"})})(e.data)},sx:{cursor:"pointer","&:hover":{bgcolor:"rgba(0, 0, 0, 0.04)"},borderBottom:t<me.length-1?"1px solid #f0f0f0":"none",py:1.5,px:2,transition:"background-color 0.2s","&:active":{bgcolor:"rgba(0, 0, 0, 0.08)"}},children:[(0,S.jsx)(I.A,{sx:{minWidth:44,color:"#666"},children:he(e)}),(0,S.jsx)(W.A,{primary:(0,S.jsxs)(x.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,S.jsxs)(x.A,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[(0,S.jsx)(h.A,{sx:{fontSize:"14px",fontWeight:600,color:"#212529",lineHeight:1.2},children:e.displayText}),"hotel"===e.type?(0,S.jsx)(h.A,{component:"span",sx:{fontSize:"10px",bgcolor:"Hotel"===e.data.propertyType?"#e3f2fd":"Villa"===e.data.propertyType?"#e8f5e9":"Resort"===e.data.propertyType?"#fff3e0":"Apartment"===e.data.propertyType?"#f3e5f5":"#f5f5f5",color:"Hotel"===e.data.propertyType?"#1976d2":"Villa"===e.data.propertyType?"#4caf50":"Resort"===e.data.propertyType?"#ff9800":"Apartment"===e.data.propertyType?"#9c27b0":"#757575",px:1,py:.25,borderRadius:"4px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px"},children:e.data.propertyType||"Property"}):(0,S.jsx)(h.A,{component:"span",sx:{fontSize:"10px",bgcolor:"#f0f0f0",color:"#666",px:1,py:.25,borderRadius:"4px",fontWeight:500,textTransform:"capitalize"},children:null!==(r=e.data.types)&&void 0!==r&&r.includes("hotel")||null!==(n=e.data.types)&&void 0!==n&&n.includes("lodging")?"Hotel":null!==(s=e.data.types)&&void 0!==s&&s.includes("restaurant")?"Restaurant":null!==(l=e.data.types)&&void 0!==l&&l.includes("shopping_mall")?"Shopping":"Location"})]}),(0,S.jsxs)(h.A,{sx:{fontSize:"12px",color:"#6c757d",mt:.5,lineHeight:1.3,display:"flex",alignItems:"flex-start",gap:.5},children:[(0,S.jsx)(X.A,{sx:{fontSize:"12px",mt:"1px",flexShrink:0}}),"hotel"===e.type?"".concat(e.data.address||"").concat(e.data.city?", ".concat(e.data.city):"").trim():e.data.formatted_address||e.data.name]})]}),sx:{"& .MuiListItemText-primary":{marginBottom:0}}})]},"".concat(e.type,"-").concat(t,"-").concat(e.data.id||e.data.place_id))})]})})}),!J&&(0,S.jsx)(h.A,{color:"error",fontSize:"12px",mt:1,px:"10px",children:"Error: Google Maps API key is missing"})]}),(0,S.jsxs)(O.A,{open:k&&!de(),onClose:pe,children:[(0,S.jsx)(E.A,{children:"Location Access Required"}),(0,S.jsx)(L.A,{children:(0,S.jsx)(H.A,{children:"This app needs access to your location to provide better service. Would you like to enable location services?"})}),(0,S.jsxs)(Y.A,{children:[(0,S.jsx)(G.A,{onClick:pe,color:"primary",children:"No, thanks"}),(0,S.jsx)(G.A,{onClick:()=>{T(!1),de()?(async()=>{if(!de()||!("geolocation"in navigator))return T(!0),!1;try{return await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),w(!0),T(!1),ue(),!0}catch(e){return console.error("Mobile location permission error:",e),1===e.code?(w(!1),T(!0)):2===e.code?(console.warn("Position unavailable on mobile"),w(!1)):3===e.code&&console.warn("Location request timed out on mobile"),!1}})():ue()},color:"primary",variant:"contained",autoFocus:!0,children:"Enable Location"})]})]})]})};var te=o(70141),oe=o(48920),re=o(41020);const ne=e=>{let{label:t,rooms:o,adults:r,children:n,setRooms:a,setAdults:s,setChildren:l}=e;const[i,c]=(0,y.useState)(null),d=()=>{c(null)},u=Boolean(i);return(0,S.jsxs)(x.A,{sx:{display:"flex",flexDirection:"column",bgcolor:A.A.thirdColor,borderRadius:2,p:1,textAlign:"left",color:A.A.firstColor,minWidth:"200px"},children:[(0,S.jsx)(h.A,{sx:{px:"10px",fontSize:{xs:"14px",md:"16px"},fontFamily:"CustomFontM"},children:t}),(0,S.jsx)(x.A,{sx:{cursor:"pointer",px:1},onClick:e=>{c(e.currentTarget)},children:(0,S.jsxs)(h.A,{sx:{fontSize:{xs:"18px",md:"20px"},fontFamily:"CustomFontB"},children:[o," Room, ",r," Adults"]})}),(0,S.jsx)(re.Ay,{open:u,anchorEl:i,onClose:d,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,S.jsxs)(x.A,{sx:{p:2,bgcolor:A.A.thirdColor,borderRadius:2,width:250},children:[["Rooms","Adults","Children"].map((e,t)=>{const i=0===t?o:1===t?r:n,c=0===t?a:1===t?s:l;return(0,S.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",my:1},children:[(0,S.jsx)(h.A,{fontWeight:600,children:e}),(0,S.jsxs)(x.A,{sx:{display:"flex",alignItems:"center"},children:[(0,S.jsx)(_.A,{onClick:()=>c(Math.max(0,i-1)),children:(0,S.jsx)(oe.A,{})}),(0,S.jsx)(h.A,{fontWeight:600,sx:{mx:2},children:i}),(0,S.jsx)(_.A,{onClick:()=>c(i+1),children:(0,S.jsx)(te.A,{})})]})]},e)}),(0,S.jsx)(j.A,{customStyles:{padding:"6px",width:"100%",marginTop:"15px",fontSize:"16px"},onClick:d,variant:"contained",children:"Confirm"})]})})]})},ae=(0,c.Ay)(d.A)(e=>{let{theme:t}=e;return{padding:"4px 10px",textTransform:"none",borderRadius:"6px",fontFamily:"CustomFontB",background:"rgba(163, 163, 163, 0.21)",boxShadow:"-4px -4px 10px rgba(0, 0, 0, 0.11) inset",fontSize:"inherit","&.Mui-selected":{background:A.A.background,color:"white","&:hover":{background:A.A.background}}}}),se=e=>{let{bookingType:t,handleBookingType:o}=e;return(0,S.jsxs)(u.A,{value:t,exclusive:!0,onChange:o,sx:{mb:2,background:A.A.thirdColor,p:2,py:1,borderRadius:"8px",border:"none",fontSize:{xs:"14px",md:"16px"}},children:[(0,S.jsx)(ae,{value:"hourly",children:"Hourly"}),(0,S.jsx)(ae,{value:"fullDay",children:"Full Day"}),(0,S.jsx)(ae,{value:"villa",children:"Villa"})]})},le=()=>{var e;const t=(0,b.Zp)(),o=(0,b.zy)(),c=g.A.parse(o.search),[d,u]=(0,y.useState)(null),m=(0,p.A)("(max-width: 900px)"),[v,C]=(0,y.useState)(c.bookingType||"hourly"),[w,T]=(0,y.useState)(!1),z=(0,y.useRef)(!1),D=(0,y.useRef)(""),_=(0,y.useRef)(!0),M=(0,y.useRef)(!1),B=(0,y.useRef)(!0),[F,P]=(0,y.useState)(null!==(e=c.location)&&void 0!==e?e:null),[W,I]=(0,y.useState)(c.checkinDate?f()(c.checkinDate):f()()),[O,E]=(0,y.useState)(c.checkOutDate?f()(c.checkOutDate):f()().add(1,"day")),[L,H]=(0,y.useState)(()=>{if(c.time)return f()("2024-01-01T".concat(c.time));const e=f()();e.hour();return e.minute()>0?e.add(1,"hour").startOf("hour"):e.startOf("hour")}),[Y,G]=(0,y.useState)({rooms:Number(c.rooms)||1,adults:Number(c.adults)||2,children:Number(c.children)||0}),N=(0,y.useCallback)((e,t)=>{G(o=>(0,r.A)((0,r.A)({},o),{},{[e]:t})),T(!0)},[]),V=(0,y.useCallback)(()=>{if("hourly"===v)return 1;if(!W||!O)return 1;const e=W.startOf("day"),t=O.startOf("day").diff(e,"day");return t>0?t:1},[v,W,O]);(0,y.useEffect)(()=>{if("hourly"!==v&&W&&(!O||O.startOf("day").isSame(W.startOf("day"))||O.startOf("day").isBefore(W.startOf("day")))){const e=W.add(1,"day");E(e)}},[W,v,O]);const q=(0,y.useCallback)(e=>{if(!e)return H(null),void T(!0);const t=e.minute();let o=e;o=t>0?e.add(1,"hour").startOf("hour"):e.startOf("hour"),H(o),T(!0)},[]),$=(0,y.useCallback)(()=>{if(z.current)return;z.current=!0;const e=V(),o={bookingType:v,location:F,rooms:Y.rooms,adults:Y.adults,children:Y.children,nights:"hourly"===v?1:e};"hourly"===v&&L&&(o.time=L.format("HH:mm"),o.bookingHours="3"),W&&(o.checkinDate=W.format("YYYY-MM-DD")),"hourly"!==v&&O&&(o.checkOutDate=O.format("YYYY-MM-DD"));const r=new URLSearchParams;Object.entries(o).forEach(e=>{let[t,o]=e;void 0!==o&&null!==o&&""!==o&&r.append(t,String(o))});const n=r.toString();n!==D.current||M.current?(D.current=n,M.current=!1,t("/search?".concat(n)),Q(!1),setTimeout(()=>{z.current=!1},300)):z.current=!1},[v,F,W,O,L,Y,V,t]);(0,y.useEffect)(()=>{if(_.current){if("/"!==o.pathname&&F){if("hourly"!==v||L){const e=setTimeout(()=>{z.current||$()},100);return()=>clearTimeout(e)}{const e=f()(),t=(e.hour(),e.minute());let o=e.startOf("hour");t>0&&(o=e.add(1,"hour").startOf("hour")),H(o),T(!0)}}_.current=!1}else if("/"!==o.pathname&&w&&M.current){const e=setTimeout(()=>{if(!z.current&&F){if("hourly"===v&&!L){const e=f()(),t=(e.hour(),e.minute());let o=e.startOf("hour");return t>0&&(o=e.add(1,"hour").startOf("hour")),void H(o)}$()}},100);return()=>clearTimeout(e)}},[v,w,F,L,$,o.pathname]),(0,y.useEffect)(()=>{if(_.current)return;if("/"===o.pathname)return;if(!w)return;if(M.current)return;if(!F)return;if("hourly"===v&&!L)return;const e=setTimeout(()=>{z.current||$()},300);return()=>{clearTimeout(e)}},[w,v,F,W,O,L,Y,$,o.pathname]);const U=(0,b.zy)(),[K,Q]=(0,y.useState)(!1),X=(0,y.useCallback)(function(e){!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?I(e):E(e),T(!0)},[]),Z=(0,y.useCallback)(e=>{P(e),T(!0)},[]);return(0,y.useEffect)(()=>{T(!1),_.current=!0,M.current=!1},[o.pathname]),(0,S.jsxs)("div",{children:[(0,S.jsxs)(x.A,{sx:{p:1,pt:3.5,background:A.A.background,borderRadius:3,textAlign:"center",position:"relative",mt:{xs:"/"!==U.pathname?3:1,md:1}},children:[(0,S.jsx)(x.A,{sx:{width:"100%",position:"absolute",top:{xs:-35,md:-35},left:"50%",transform:"translateX(-50%)"},children:(0,S.jsx)(se,{bookingType:v,handleBookingType:(e,t)=>{null!==t&&t!==v&&(M.current=!0,C(t),T(!0),B.current=!1)}})}),!K&&"/"!==U.pathname&&(0,S.jsxs)(x.A,{onClick:()=>Q(!0),sx:{display:{md:"none",xs:"flex"},flexWrap:"wrap",alignItems:"center",justifyContent:"space-around",mb:.5,mt:-1},children:[(0,S.jsxs)(h.A,{sx:(0,r.A)((0,r.A)({},ie),{},{width:"100%"}),children:[(0,S.jsx)(n.A,{})," ",F||"Select Location"]}),(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:2,width:"100%"},children:[(0,S.jsxs)(h.A,{sx:ie,children:[(0,S.jsx)(a.A,{})," ",W?W.format("YYYY-MM-DD"):"Select Date"]}),"hourly"===v?(0,S.jsxs)(h.A,{sx:ie,children:[(0,S.jsx)(s.A,{})," ",L?L.format("HH:mm"):"Select Time"]}):(0,S.jsxs)(h.A,{sx:ie,children:[(0,S.jsx)(a.A,{})," ",O?O.format("YYYY-MM-DD"):"Select Date"]})]})]}),("/"===U.pathname||K||!m)&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(x.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"space-around",mb:2,px:2,gap:1},children:[(0,S.jsx)(ee,{label:"City, Property name or Location",onSelect:e=>{u({display_name:e.display_name,lat:e.lat,lon:e.lon,hotelId:e.hotelId}),P(e.display_name)},value:null!==F&&void 0!==F?F:null===d||void 0===d?void 0:d.display_name,setValue:Z}),(0,S.jsx)(k,{date:W,setDate:e=>X(e,!0),label:"Checkin Date"}),"hourly"===v?(0,S.jsx)(R,{time:L,setTime:q,label:"Checkin Time"}):(0,S.jsx)(k,{date:O,setDate:e=>X(e,!1),label:"Checkout Date"}),(0,S.jsx)(ne,{label:"Room & Guests",rooms:Y.rooms,adults:Y.adults,children:Y.children,setRooms:e=>N("rooms",e),setAdults:e=>N("adults",e),setChildren:e=>N("children",e)}),(0,S.jsx)("div",{children:"/"!==U.pathname&&(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(j.A,{customStyles:{background:A.A.thirdColor,padding:"10px"},onClick:$,variant:"contained",disabled:!F||"hourly"===v&&!L,children:(0,S.jsx)(l.A,{sx:{color:A.A.firstColor,fontSize:"28px"}})})})})]}),"/"!==U.pathname&&(0,S.jsx)(i.A,{onClick:()=>Q(!1),sx:{position:"absolute",top:4,right:4,color:"white",display:{md:"none",xs:"flex",fontWeight:"bold"}}})]})]}),"/"===U.pathname&&(0,S.jsx)("div",{style:{width:"100%",display:"flex",marginTop:"20px"},children:(0,S.jsx)(j.A,{customStyles:{margin:"auto"},onClick:$,startIcon:(0,S.jsx)(l.A,{}),variant:"contained",disabled:!F||"hourly"===v&&!L,children:"Search Huts4u"})})]})},ie={borderRadius:"52px",boxShadow:"4px 4px 10px rgba(104, 39, 184, 0.17)",color:A.A.firstColor,background:A.A.thirdColor,fontSize:{xs:"12px",md:"14px"},width:"100%",display:"flex",alignItems:"center",gap:"6px",p:1,px:2,m:1}}}]);
//# sourceMappingURL=763.d15963b5.chunk.js.map