"use strict";(self.webpackChunkhuts4u=self.webpackChunkhuts4u||[]).push([[537],{43641:(e,o,t)=>{t.d(o,{E_:()=>F,H:()=>H,SZ:()=>R});var r=t(1706),a=t(20228),i=t(91783),l=t(23783),n=t(36715),s=t(24233),d=t(80286),c=t(2739),x=t(97187),u=t(8537),h=t(55968),p=t(10116),g=t(37460),m=t(4353),f=t(66717),v=t(78174),A=t(82372),b=t(43998),y=t(29206),w=t(63824),S=t(64340),j=t(5192),C=t(30270),k=t(95645),z=t(70579);const F={"Swimming Pool":(0,z.jsx)(y.A,{fontSize:"small"}),Gym:(0,z.jsx)(x.A,{fontSize:"small"}),"Free WiFi":(0,z.jsx)(k.A,{fontSize:"small"}),"Private Beach":(0,z.jsx)(i.A,{fontSize:"small"}),Breakfast:(0,z.jsx)(u.A,{fontSize:"small"}),Parking:(0,z.jsx)(f.A,{fontSize:"small"}),Spa:(0,z.jsx)(S.A,{fontSize:"small"}),Restaurant:(0,z.jsx)(g.A,{fontSize:"small"}),"Airport Shuttle":(0,z.jsx)(a.A,{fontSize:"small"}),"Business Center":(0,z.jsx)(l.A,{fontSize:"small"}),"Pet Friendly":(0,z.jsx)(b.A,{fontSize:"small"}),Bar:(0,z.jsx)(p.A,{fontSize:"small"}),"Room Service":(0,z.jsx)(w.A,{fontSize:"small"}),TV:(0,z.jsx)(C.A,{fontSize:"small"}),"Air Conditioning":(0,z.jsx)(r.A,{fontSize:"small"}),"Laundry Service":(0,z.jsx)(m.A,{fontSize:"small"}),"Child Care":(0,z.jsx)(s.A,{fontSize:"small"}),"King Bed":(0,z.jsx)(h.A,{fontSize:"small"}),Casino:(0,z.jsx)(n.A,{fontSize:"small"}),"Car Rental":(0,z.jsx)(d.A,{fontSize:"small"}),"Night Club":(0,z.jsx)(v.A,{fontSize:"small"}),"Tennis Court":(0,z.jsx)(j.A,{fontSize:"small"}),"BBQ Facilities":(0,z.jsx)(A.A,{fontSize:"small"}),"Fire Safety":(0,z.jsx)(c.A,{fontSize:"small"})},R=["Swimming Pool","Gym","Free WiFi","Private Beach","Breakfast","Parking","Spa","Restaurant","Airport Shuttle","Business Center","Pet Friendly","Bar","Room Service","TV","Air Conditioning","Laundry Service","Child Care","King Bed","Casino","Car Rental","Night Club","Tennis Court","BBQ Facilities","Fire Safety"],H=[{value:"Single Non-AC Room",label:"Single Non-AC Room",details:"A basic room with a single bed and fan cooling, ideal for solo travelers."},{value:"Single AC Room",label:"Single AC Room",details:"An air-conditioned room with a single bed, ideal for solo travelers."},{value:"Double Non-AC Room",label:"Double Non-AC Room",details:"A non air-conditioned room with a double or twin bed, suitable for two guests."},{value:"Double AC Room",label:"Double AC Room",details:"An air-conditioned room with a double or twin bed, suitable for two guests."},{value:"Triple Non-AC Room",label:"Triple Non-AC Room",details:"A non air-conditioned room designed for three guests, with an extra bed."},{value:"Triple AC Room",label:"Triple AC Room",details:"An air-conditioned room designed for three guests, with an extra bed or sofa bed."},{value:"Deluxe Non-AC Room",label:"Deluxe Non-AC Room",details:"A spacious non air-conditioned room with upgraded interiors and comfort amenities."},{value:"Deluxe AC Room",label:"Deluxe AC Room",details:"A spacious air-conditioned room with upgraded interiors and enhanced comfort."},{value:"Executive AC Room",label:"Executive AC Room",details:"Designed for business travelers with a work desk, premium amenities, and air conditioning."},{value:"Club AC Room",label:"Club AC Room",details:"Premium category offering lounge access, complimentary breakfast, and AC comfort."},{value:"Suite Room",label:"Suite Room",details:"A large room with a separate living area, suitable for families or executives."},{value:"Presidential Suite",label:"Presidential Suite",details:"A luxury suite with multiple rooms, high-end furnishings, and personalized services."},{value:"Royal Suite",label:"Royal Suite",details:"Inspired by Indian royalty, featuring grand interiors and luxury amenities."},{value:"Heritage Room",label:"Heritage Room",details:"Traditional d\xe9cor and antique furnishings, commonly found in heritage hotels."},{value:"Cottage/Villa",label:"Cottage/Villa",details:"Standalone accommodation with private spaces, often available in resorts."},{value:"Treehouse Room",label:"Treehouse Room",details:"Elevated rooms offering a unique stay experience in nature-focused retreats."},{value:"Houseboat Room",label:"Houseboat Room",details:"Floating hotel rooms offering a unique stay experience in backwaters."},{value:"Studio Apartment",label:"Studio Apartment",details:"A self-contained unit with a kitchenette, suitable for extended stays."},{value:"Serviced Apartment",label:"Serviced Apartment",details:"Fully furnished apartments with hotel-like services and amenities."}]},46537:(e,o,t)=>{t.r(o),t.d(o,{calculatePriceBreakdown:()=>V,default:()=>ee});var r=t(89379),a=t(29435),i=t(20751),l=t(91794),n=t(59383),s=t(4247),d=t(10990),c=t(12110),x=t(7353),u=t(78185),h=t(77739),p=t(36591),g=t(26494),m=t(94496),f=t(43845),v=t(97629),A=t(57972),b=t(68903),y=t(60295),w=t(41985),S=t(91576),j=t(84511),C=t(74605),k=t(26240),z=t(34535),F=t(85442),R=t(65043),H=t(73216),B=t(33580),D=t(31716),W=t(43641),M=t(61968),N=t(69995),T=t(45763),Y=t(60446),P=t.n(Y),I=t(70579);const L={hotels:[],ratings:null,inventories:null,lastFetched:0,TTL:3e5},E=e=>{let{isMobile:o}=e;return(0,I.jsx)(c.A,{sx:{mb:2,height:{xs:"auto",md:220}},children:(0,I.jsxs)(x.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},height:"100%"},children:[(0,I.jsx)(u.A,{variant:"rectangular",width:o?"100%":300,height:o?200:"100%"}),(0,I.jsxs)(x.A,{sx:{p:2,flex:1,position:"relative",display:"flex",flexDirection:"column"},children:[(0,I.jsx)(u.A,{width:"40%",height:24}),(0,I.jsx)(u.A,{width:"60%",height:20,sx:{mt:1}}),(0,I.jsx)(u.A,{width:"80%",height:20,sx:{mt:1}}),(0,I.jsx)(x.A,{sx:{display:"flex",gap:1,mt:2,flexWrap:"wrap"},children:[...Array(3)].map((e,o)=>(0,I.jsx)(u.A,{width:80,height:24},o))}),(0,I.jsxs)(x.A,{sx:{mt:"auto",display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,I.jsxs)(x.A,{children:[(0,I.jsx)(u.A,{width:120,height:28}),(0,I.jsx)(u.A,{width:180,height:36,sx:{mt:1}}),(0,I.jsx)(u.A,{width:140,height:20,sx:{mt:1}})]}),(0,I.jsx)(u.A,{width:100,height:40,variant:"rectangular",sx:{borderRadius:"8px"}})]})]})]})})},_=(e,o,t,r)=>{if(!e||!t)return 0;const a=e.id,i=P()(t).format("YYYY-MM-DD"),l=null===o||void 0===o?void 0:o.find(e=>e.roomId===a&&P()(e.date).format("YYYY-MM-DD")===i);if(l)switch(r){case"rateFor1Night":return l.overnightRate||0;case"rateFor3Hour":return l.threeHourRate||0;case"rateFor6Hour":return l.sixHourRate||0;case"rateFor12Hour":return l.twelveHourRate||0;default:return 0}return e[r]||0},O=(e,o,t,r,a)=>{var i;if(!e||!t)return!1;const l=null===(i=e.status)||void 0===i?void 0:i.toLowerCase();if(!("available"===l||"active"===l))return!1;const n=P()(t).format("YYYY-MM-DD"),s=null===o||void 0===o?void 0:o.find(e=>P()(e.date).format("YYYY-MM-DD")===n);if(!s)return!0;if(s.isBlocked)return!1;switch(r){case"rateFor1Night":return s.overnightAvailable>s.overnightBooked;case"rateFor3Hour":return s.threeHourAvailable>s.threeHourBooked;case"rateFor6Hour":return s.sixHourAvailable>s.sixHourBooked;case"rateFor12Hour":return s.twelveHourAvailable>s.twelveHourBooked;default:return!0}},U=function(e){var o;let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;if(null===e||void 0===e||null===(o=e.rooms)||void 0===o||!o[0])return 0;const i=e.rooms[0];let l=[];if("Unavailable"===((null===e||void 0===e?void 0:e.roomAvailable)||"Available"))return 0;if("hourly"===a){l=[{key:"rateFor3Hour",rate:_(i,t,r,"rateFor3Hour"),available:O(i,t,r,"rateFor3Hour")},{key:"rateFor6Hour",rate:_(i,t,r,"rateFor6Hour"),available:O(i,t,r,"rateFor6Hour")},{key:"rateFor12Hour",rate:_(i,t,r,"rateFor12Hour"),available:O(i,t,r,"rateFor12Hour")}].filter(e=>e.rate>0&&e.available).map(e=>e.rate),0===l.length&&(l=[i.rateFor3Hour||0,i.rateFor6Hour||0,i.rateFor12Hour||0].filter(e=>e>0))}else{const e=_(i,t,r,"rateFor1Night"),o=O(i,t,r,"rateFor1Night");e>0&&o?l.push(e):i.rateFor1Night>0&&l.push(i.rateFor1Night)}return l.length?Math.min(...l):0},V=e=>{const o=Number(e)||0;if(!o||o<=0)return{basePrice:0,platformFee:0,gstOnBase:0,gstOnPlatform:0,gatewayFee:0,gstOnGateway:0,gstTotal:0,finalPrice:0};const t=.05*o,r=.13*(o+t),a=.18*r,i=.02*(o+t+r+a),l=.18*i,n=t+a+l+i;return{basePrice:o,platformFee:r,gstOnBase:t,gstOnPlatform:a,gatewayFee:i,gstOnGateway:l,gstTotal:n,finalPrice:o+r+n}},G=e=>e.toLocaleString("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}),X=e=>{if(!e||!Array.isArray(e)||0===e.length)return 0;const o=e.reduce((e,o)=>e+(Number(o.rating)||0),0);return Math.round(o/e.length*10)/10},q=(e,o)=>{if(!e||!o)return[];let t=[];if(Array.isArray(e))t=e;else if(e&&"object"===typeof e)if(Array.isArray(e.data))t=e.data;else if(Array.isArray(e.rows))t=e.rows;else{if(!Array.isArray(e.result))return[];t=e.result}return Array.isArray(t)?t.filter(e=>{const t=e.hotelId||e.propertyId||e.hotel_id||e.hotelID;return t===o||(null===t||void 0===t?void 0:t.toString())===(null===o||void 0===o?void 0:o.toString())}):[]},Z=async(e,o)=>{try{var t,r,a,i,l,n,s;const d={data:{filter:"",roomId:e,date:o},page:0,pageSize:1e3,order:[["createdAt","ASC"]]},c=await(0,N.ww)(d);let x=[];return null!==c&&void 0!==c&&null!==(t=c.data)&&void 0!==t&&null!==(r=t.data)&&void 0!==r&&r.data&&Array.isArray(c.data.data.data)?x=c.data.data.data:null!==c&&void 0!==c&&null!==(a=c.data)&&void 0!==a&&null!==(i=a.data)&&void 0!==i&&i.rows&&Array.isArray(c.data.data.rows)?x=c.data.data.rows:null!==c&&void 0!==c&&null!==(l=c.data)&&void 0!==l&&null!==(n=l.data)&&void 0!==n&&n.result&&Array.isArray(c.data.data.result)?x=c.data.data.result:Array.isArray(null===c||void 0===c||null===(s=c.data)||void 0===s?void 0:s.data)&&(x=c.data.data),x}catch(d){return console.error("Error fetching inventory for room ".concat(e,":"),d),[]}},K=e=>{var o,t,l,n,u,v,A,b,y;let{hotel:w,queryParams:S,isMobile:j,hotelRatings:C=[],inventoryData:k=[]}=e;const z=(0,H.Zp)(),F=j?2:4,R=(null===w||void 0===w||null===(o=w.rooms)||void 0===o||null===(t=o[0])||void 0===t||null===(l=t.amenities)||void 0===l?void 0:l.slice(0,F))||[],D=Math.max(0,((null===w||void 0===w||null===(n=w.rooms)||void 0===n||null===(u=n[0])||void 0===u||null===(v=u.amenities)||void 0===v?void 0:v.length)||0)-F),N=(null===w||void 0===w?void 0:w.isPremium)||!1,T=(null===w||void 0===w||null===(A=w.rooms)||void 0===A?void 0:A[0])||{},Y=S.get("bookingType")||"fullDay",L=S.get("checkinDate")||P()().format("YYYY-MM-DD"),E=S.get("time")||"",q=S.get("bookingHours")||"3",Z=Math.max(1,Number(S.get("rooms"))||1),K="hourly"===Y?1:Math.max(1,Number(S.get("nights"))||1),Q=((e,o,t,r,a)=>{var i;if(console.log("\ud83d\udd0d Checking hotel: ".concat(null===e||void 0===e?void 0:e.propertyName)),console.log("   - Hotel roomAvailable: ".concat((null===e||void 0===e?void 0:e.roomAvailable)||"Available")),console.log("   - Room status: ".concat(null===o||void 0===o||null===(i=o.status)||void 0===i?void 0:i.toLowerCase())),"Unavailable"===((null===e||void 0===e?void 0:e.roomAvailable)||"Available"))return console.log("   \u274c Hotel marked as Unavailable in roomAvailable field"),{isAvailable:!1,status:"Sold Out",reason:"Hotel is currently sold out"};const l=r?P()(r).format("YYYY-MM-DD"):"";if(console.log("   - Check date: ".concat(l)),!l)return{isAvailable:!0,status:"Available",reason:"Available for booking (no date specified)"};const n=l?t.find(e=>P()(e.date).format("YYYY-MM-DD")===l):null;if(n){if(console.log("   - Found inventory for date"),console.log("   - Inventory isBlocked: ".concat(n.isBlocked)),n.isBlocked)return{isAvailable:!1,status:"Blocked",reason:"Room is blocked for selected date"};if("hourly"===a){const e=n.threeHourAvailable>n.threeHourBooked,o=n.sixHourAvailable>n.sixHourBooked,t=n.twelveHourAvailable>n.twelveHourBooked;if(console.log("   - Hourly availability check:"),console.log("     - 3h: ".concat(n.threeHourAvailable,"/").concat(n.threeHourBooked," = ").concat(e)),console.log("     - 6h: ".concat(n.sixHourAvailable,"/").concat(n.sixHourBooked," = ").concat(o)),console.log("     - 12h: ".concat(n.twelveHourAvailable,"/").concat(n.twelveHourBooked," = ").concat(t)),!(e||o||t))return console.log("   \u274c No hourly slots available"),{isAvailable:!1,status:"Sold Out",reason:"No hourly slots available for selected date"}}else{const e=n.overnightAvailable>n.overnightBooked;if(console.log("   - Overnight availability: ".concat(n.overnightAvailable,"/").concat(n.overnightBooked," = ").concat(e)),!e)return{isAvailable:!1,status:"Sold Out",reason:"No overnight availability for selected date"}}}else console.log("   - No inventory found for date, assuming available");return console.log("   \u2705 Hotel is available"),{isAvailable:!0,status:"Available",reason:"Available for booking"}})(w,T,k,L,Y),J=Q.isAvailable,$=U(w,k,L,Y,E),ee=V($),oe=ee.finalPrice,te=ee.basePrice,re=ee.platformFee,ae=ee.gstTotal,ie=Z*K,le=+te*ie,ne=+re*ie,se=+ae*ie,de=+oe*ie,ce=le+700,xe=C.length>0?X(C):(null===w||void 0===w||null===(b=w.ratings)||void 0===b?void 0:b.rating)||0,ue=C.length||(null===w||void 0===w?void 0:w.reviews)||0,he="hourly"===Y?[{key:"3",label:"3 Hrs",slot:"rateFor3Hour",rate:_(T,k,L,"rateFor3Hour"),available:O(T,k,L,"rateFor3Hour")},{key:"6",label:"6 Hrs",slot:"rateFor6Hour",rate:_(T,k,L,"rateFor6Hour"),available:O(T,k,L,"rateFor6Hour")},{key:"12",label:"12 Hrs",slot:"rateFor12Hour",rate:_(T,k,L,"rateFor12Hour"),available:O(T,k,L,"rateFor12Hour")}].filter(e=>e.rate>0&&e.available).map(e=>{const o=V(e.rate),t=o.basePrice,a=o.platformFee,i=o.gstTotal,l=t*Z,n=a*Z,s=i*Z,d=l+n+s;return(0,r.A)((0,r.A)({},e),{},{totalBase:l,totalPlatform:n,totalGst:s,totalFinal:d})}):[],pe=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return e?e.length<=o?e:e.substring(0,o)+"...":"Address not available"},ge=()=>{if(!J)return;const e=S.toString();z("/hotel/".concat(w.id).concat(e?"?".concat(e):""),{state:{hotelData:w}})};return(0,I.jsxs)(c.A,{onClick:ge,sx:{display:"flex",flexDirection:{xs:"column",md:"row"},mb:3,background:J?B.A.thirdColor:"#f5f5f5",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.1)",borderRadius:"16px",transition:"all 0.3s ease",cursor:J?"pointer":"not-allowed",border:"1px solid ".concat(J?"transparent":"#e0e0e0"),position:"relative",overflow:"hidden",minHeight:{xs:"auto",md:220},"&:hover":{transform:J?"translateY(-4px)":"none",boxShadow:J?"0px 8px 24px rgba(0, 0, 0, 0.15)":"0px 4px 12px rgba(0, 0, 0, 0.1)",borderColor:J?B.A.firstColor:"#e0e0e0"},opacity:J?1:.7},children:[!J&&(0,I.jsx)(h.A,{title:Q.reason,children:(0,I.jsx)(x.A,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2,background:"rgba(0,0,0,0.6)",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"16px"},children:(0,I.jsxs)(x.A,{sx:{background:"Sold Out"===Q.status?"#ff4444":"Blocked"===Q.status?"#ffaa00":"#ff4444",color:"white",px:3,py:1.5,borderRadius:"8px",fontWeight:"bold",fontSize:{xs:"13px",md:"14px"},transform:"rotate(-3deg)",boxShadow:"0 4px 8px rgba(255, 77, 77, 0.3)",display:"flex",alignItems:"center",gap:1},children:[(0,I.jsx)(i.A,{sx:{fontSize:20}}),Q.status.toUpperCase()]})})}),(0,I.jsxs)(x.A,{sx:{width:{xs:"100%",md:300},height:{xs:200,md:"100%"},minHeight:{xs:200,md:220},maxHeight:{xs:200,md:250},position:"relative",overflow:"hidden",flexShrink:0},children:[(0,I.jsx)(p.A,{component:"img",sx:{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.5s ease",filter:J?"none":"grayscale(80%) brightness(0.9)",opacity:J?1:.7,"&:hover":{transform:J?"scale(1.05)":"none"}},image:(null===w||void 0===w||null===(y=w.propertyImages)||void 0===y?void 0:y[0])||"https://via.placeholder.com/400x250?text=No+Image",alt:null===w||void 0===w?void 0:w.propertyName,loading:"lazy"}),N&&(0,I.jsxs)(x.A,{sx:{position:"absolute",top:12,left:12,background:"linear-gradient(135deg, #FFD700, #FFA500)",color:"#000",px:1.5,py:.5,borderRadius:"6px",fontSize:"10px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"4px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",zIndex:1},children:[(0,I.jsx)(d.A,{sx:{fontSize:"12px"}})," PREMIUM"]})]}),(0,I.jsxs)(g.A,{sx:{padding:{xs:"16px",md:"20px 24px"},width:"100%",display:"flex",flexDirection:"column",flex:1,position:"relative"},children:[N&&(0,I.jsx)(x.A,{sx:{width:"fit-content",mb:1.5},children:(0,I.jsxs)(m.A,{sx:{fontWeight:700,color:"#000",width:"fit-content",px:1.5,py:.5,borderRadius:"6px",fontSize:"10px",background:"linear-gradient(135deg, #FFD700, #FFA500)",display:"flex",alignItems:"center",gap:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,I.jsx)(d.A,{sx:{fontSize:"12px"}})," Huts4u PREMIUM"]})}),(0,I.jsxs)(x.A,{sx:{mb:1.5},children:[(0,I.jsx)(m.A,{sx:{fontSize:{xs:"17px",md:"20px"},fontWeight:700,color:J?B.A.firstColor:"#666",display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitLineClamp:1,WebkitBoxOrient:"vertical",lineHeight:1.2},children:null===w||void 0===w?void 0:w.propertyName}),(0,I.jsxs)(m.A,{sx:{fontFamily:"CustomFontSB",fontSize:{xs:"12px",md:"14px"},color:J?"#666":"#888",display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitLineClamp:1,WebkitBoxOrient:"vertical",mt:.5,lineHeight:1.3},children:["\ud83d\udccd ",pe((null===w||void 0===w?void 0:w.address)||(null===w||void 0===w?void 0:w.city)||"",35)+"  BBSR"]})]}),!j&&(0,I.jsxs)(x.A,{sx:{position:"absolute",top:{xs:"auto",md:20},right:{xs:"auto",md:24},display:"flex",flexDirection:"column",alignItems:"flex-end",mb:1.5},children:[(0,I.jsx)(x.A,{sx:{display:"flex",alignItems:"center",gap:"4px",mb:.5},children:xe>0?(0,I.jsxs)(x.A,{sx:{background:(0,M.t0)(xe),color:"#fff",px:1.2,py:.6,borderRadius:"8px",fontSize:"14px",fontWeight:700,display:"flex",alignItems:"center",gap:"4px",minWidth:"60px",justifyContent:"center",boxShadow:"0 2px 6px rgba(0,0,0,0.2)"},children:[xe.toFixed(1),(0,I.jsx)(s.A,{sx:{fontSize:"14px"}})]}):(0,I.jsxs)(x.A,{sx:{background:"rgba(0,0,0,0.05)",color:"#888",px:1.2,py:.6,borderRadius:"8px",fontSize:"14px",fontWeight:700,display:"flex",alignItems:"center",gap:"4px",minWidth:"60px",justifyContent:"center",border:"1px dashed #ddd"},children:["N/A",(0,I.jsx)(s.A,{sx:{fontSize:"14px",color:"#aaa"}})]})}),ue>0?(0,I.jsxs)(m.A,{variant:"body2",fontWeight:600,color:J?"#666":"#aaa",sx:{fontSize:"11px",textAlign:"right"},children:["(",ue," review",1!==ue?"s":"",")"]}):(0,I.jsx)(m.A,{variant:"body2",fontWeight:600,color:J?"#888":"#aaa",sx:{fontSize:"11px",fontStyle:"italic"},children:"No reviews yet"})]}),(0,I.jsxs)(x.A,{sx:{display:"flex",gap:.5,flexWrap:"wrap",mt:1.5,mb:{xs:2,md:1.5}},children:[R.map((e,o)=>(0,I.jsx)(f.A,{label:e,icon:W.E_[e]||(0,I.jsx)(a.A,{}),size:"small",sx:{bgcolor:"rgba(75, 42, 173, 0.1)",fontSize:{xs:"10px",md:"11px"},color:J?"#4B2AAD":"#aaa",height:"24px",border:"1px solid rgba(75, 42, 173, 0.2)","& .MuiChip-icon":{fontSize:{xs:"12px",md:"14px"},color:J?"#4B2AAD":"#aaa",marginLeft:"4px",marginRight:"-4px"}}},o)),D>0&&(0,I.jsx)(f.A,{label:"+".concat(D," more"),size:"small",sx:{bgcolor:J?"rgba(0,0,0,0.05)":"#f5f5f5",fontSize:{xs:"10px",md:"11px"},color:J?"#666":"#aaa",height:"24px"}})]}),(0,I.jsxs)(x.A,{sx:{display:"flex",flexDirection:"column",gap:{xs:2,md:1},mt:"auto",pt:{xs:3,md:0},borderTop:{xs:"1px dashed #e0e0e0",md:"none"}},children:[j&&(0,I.jsx)(x.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:(0,I.jsxs)(x.A,{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[xe>0?(0,I.jsxs)(x.A,{sx:{background:(0,M.t0)(xe),color:"#fff",px:1,py:.5,borderRadius:"6px",fontSize:"13px",fontWeight:700,display:"flex",alignItems:"center",gap:"4px",minWidth:"55px",justifyContent:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:[xe.toFixed(1),(0,I.jsx)(s.A,{sx:{fontSize:"13px"}})]}):(0,I.jsxs)(x.A,{sx:{background:"rgba(0,0,0,0.05)",color:"#888",px:1,py:.5,borderRadius:"6px",fontSize:"13px",fontWeight:700,display:"flex",alignItems:"center",gap:"4px",minWidth:"55px",justifyContent:"center",border:"1px dashed #ddd"},children:["N/A",(0,I.jsx)(s.A,{sx:{fontSize:"13px",color:"#aaa"}})]}),ue>0?(0,I.jsxs)(m.A,{variant:"body2",fontWeight:600,color:J?"#666":"#aaa",sx:{fontSize:"12px"},children:["(",ue," review",1!==ue?"s":"",")"]}):(0,I.jsx)(m.A,{variant:"body2",fontWeight:600,color:J?"#888":"#aaa",sx:{fontSize:"12px",fontStyle:"italic"},children:"No reviews yet"})]})}),"hourly"===Y?(0,I.jsx)(x.A,{sx:{width:"100%"},children:he.length>0?(()=>{const e=he.find(e=>e.key===q);if(!e)return(0,I.jsx)(m.A,{sx:{fontSize:"12px",color:"#888",textAlign:"center",py:2},children:"Not available for selected hours"});const o=Math.round(e.totalBase+e.totalPlatform),t=Math.round(e.totalGst);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(x.A,{sx:{display:"flex",gap:{xs:.5,sm:1},mb:2,justifyContent:{xs:"flex-start",sm:"flex-start"},flexWrap:"nowrap",overflowX:{xs:"auto",sm:"visible"},pb:{xs:1,sm:0},"&::-webkit-scrollbar":{height:"4px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1"},"&::-webkit-scrollbar-thumb":{background:"#ccc",borderRadius:"2px"}},children:he.map(e=>{const o=e.key===q;return(0,I.jsx)(x.A,{onClick:o=>{o.stopPropagation(),J&&(e=>{if(!J)return;const o=new URLSearchParams(S.toString());o.set("bookingHours",e),z("/search?".concat(o.toString()),{replace:!0})})(e.key)},sx:{flexShrink:0,textAlign:"center",py:{xs:.75,sm:1},px:{xs:.75,sm:1.5},borderRadius:"8px",cursor:J?"pointer":"not-allowed",fontSize:{xs:"11px",sm:"12px",md:"13px"},fontWeight:700,background:o?J?"#4B2AAD":"#aaa":"rgba(75, 42, 173, 0.1)",color:o?"#fff":J?"#4B2AAD":"#888",border:"1px solid ".concat(o?"#4B2AAD":"rgba(75, 42, 173, 0.3)"),transition:"all 0.2s ease",opacity:J?1:.6,minWidth:{xs:"70px",sm:"80px"},whiteSpace:"nowrap","&:hover":J?{transform:"translateY(-1px)",boxShadow:"0 2px 8px rgba(75, 42, 173, 0.3)"}:{}},children:e.label},e.key)})}),(0,I.jsxs)(x.A,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"stretch",sm:"center"},gap:{xs:1.5,sm:2,md:3}},children:[(0,I.jsxs)(x.A,{sx:{flex:1},children:[(0,I.jsxs)(m.A,{sx:{fontSize:{xs:"12px",md:"13px"},color:J?"#666":"#888",mb:.5,fontWeight:500,display:"flex",alignItems:"center",gap:.5,flexWrap:"wrap"},children:[(0,I.jsxs)("span",{children:[Z," room",Z>1?"s":""]}),(0,I.jsx)("span",{children:"\u2022"}),(0,I.jsx)("span",{children:e.label})]}),(0,I.jsxs)(x.A,{sx:{display:"flex",alignItems:"baseline",gap:1,flexWrap:"wrap"},children:[(0,I.jsx)(m.A,{sx:{fontSize:{xs:"20px",sm:"22px",md:"24px"},fontWeight:800,color:J?B.A.firstColor:"#888",lineHeight:1},children:J?G(o):"---"}),J&&(0,I.jsxs)(m.A,{sx:{fontSize:{xs:"11px",md:"12px"},color:"#666",fontWeight:500},children:["+ ",G(t)," taxes & fees"]})]})]}),J?(0,I.jsx)(x.A,{onClick:e=>{e.stopPropagation(),ge()},sx:{background:"linear-gradient(135deg, #4B2AAD, #6C4BD3)",color:"#fff",px:{xs:0,sm:2.5,md:3},py:{xs:0,sm:1.25,md:1.5},borderRadius:"10px",textAlign:"center",minWidth:{xs:"40%",sm:"120px",md:"140px"},cursor:"pointer",transition:"all 0.3s ease",mt:{xs:1,sm:0},marginRight:{xs:3},display:"flex",alignItems:"center",justifyContent:"center",height:{xs:"44px",sm:"48px"},"&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(75, 42, 173, 0.4)"}},children:(0,I.jsx)(m.A,{sx:{fontSize:{xs:"14px",sm:"15px",md:"16px"},fontWeight:700,whiteSpace:"nowrap"},children:"Book Now"})}):(0,I.jsx)(x.A,{sx:{background:"#e0e0e0",color:"#888",px:{xs:0,sm:2.5,md:3},py:{xs:0,sm:1.25,md:1.5},borderRadius:"10px",textAlign:"center",minWidth:{xs:"40%",sm:"120px",md:"140px"},cursor:"not-allowed",mt:{xs:1,sm:0},marginRight:{xs:3},display:"flex",alignItems:"center",justifyContent:"center",height:{xs:"44px",sm:"48px"}},children:(0,I.jsx)(m.A,{sx:{fontSize:{xs:"14px",sm:"15px",md:"16px"},fontWeight:700,whiteSpace:"nowrap"},children:Q.status})})]})]})})():(0,I.jsx)(m.A,{sx:{fontSize:"12px",color:"#888",textAlign:"center",py:2,border:"1px dashed #ddd",borderRadius:"8px",background:"#f9f9f9"},children:"Not available for hourly stay"})}):(0,I.jsxs)(x.A,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"stretch",sm:"center"},gap:{xs:1.5,sm:2,md:3},width:"100%"},children:[(0,I.jsxs)(x.A,{sx:{flex:1,minWidth:0},children:[J&&ce>0&&(0,I.jsx)(m.A,{sx:{fontSize:{xs:"12px",md:"14px"},color:J?"#999":"#aaa",textDecoration:"line-through",fontWeight:500,mb:.5},children:G(Math.round(ce))}),(0,I.jsxs)(x.A,{sx:{display:"flex",alignItems:"baseline",gap:1,flexWrap:"wrap"},children:[(0,I.jsx)(m.A,{sx:{fontSize:{xs:"22px",sm:"24px",md:"26px"},color:J?B.A.firstColor:"#888",fontWeight:800,lineHeight:1},children:J&&le+ne>0?"".concat(G(Math.round(le+ne))):"---"}),J&&de>0&&(0,I.jsxs)(m.A,{sx:{fontSize:{xs:"11px",md:"13px"},color:"#666",fontWeight:500},children:["+ ",G(Math.round(se))," taxes & fees"]})]}),(0,I.jsxs)(m.A,{sx:{fontSize:{xs:"12px",md:"13px"},color:J?"#666":"#aaa",mt:1,fontWeight:500,display:"flex",alignItems:"center",gap:.5,flexWrap:"wrap"},children:[(0,I.jsxs)("span",{children:[Z," room",Z>1?"s":""]}),"hourly"!==Y&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("span",{children:"\u2022"}),(0,I.jsxs)("span",{children:[K," night",K>1?"s":""]})]})]})]}),J?(0,I.jsx)(x.A,{onClick:e=>{e.stopPropagation(),ge()},sx:{background:"linear-gradient(135deg, #4B2AAD, #6C4BD3)",color:"#fff",px:{xs:0,sm:2.5,md:3},py:{xs:0,sm:1.25,md:1.5},borderRadius:"10px",textAlign:"center",minWidth:{xs:"40%",sm:"130px",md:"150px"},cursor:"pointer",transition:"all 0.3s ease",mt:{xs:1,sm:0},marginRight:{xs:3},display:"flex",alignItems:"center",justifyContent:"center",height:{xs:"44px",sm:"48px"},"&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(75, 42, 173, 0.4)"}},children:(0,I.jsx)(m.A,{sx:{fontSize:{xs:"14px",sm:"15px",md:"16px"},fontWeight:700,whiteSpace:"nowrap"},children:"Book Now"})}):(0,I.jsx)(x.A,{sx:{background:"#e0e0e0",color:"#888",px:{xs:0,sm:2.5,md:3},py:{xs:0,sm:1.25,md:1.5},borderRadius:"10px",textAlign:"center",minWidth:{xs:"40%",sm:"130px",md:"150px"},cursor:"not-allowed",mt:{xs:1,sm:0},marginRight:{xs:3},display:"flex",alignItems:"center",justifyContent:"center",height:{xs:"44px",sm:"48px"}},children:(0,I.jsx)(m.A,{sx:{fontSize:{xs:"14px",sm:"15px",md:"16px"},fontWeight:700,whiteSpace:"nowrap"},children:Q.status})})]})]})]})]})},Q={background:"linear-gradient(135deg, #f3eee1, #e8e0cf)",width:"fit-content",borderRadius:"8px",p:1.5,m:-2,mx:-4,mb:2,fontWeight:700,color:B.A.firstColor,fontSize:{xs:"16px",md:"18px"},boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},J=(0,z.Ay)(j.A)(e=>{let{theme:o}=e;return{borderRadius:"8px",textTransform:"none",fontSize:"13px",padding:"6px 12px",fontWeight:600,border:"1px solid rgba(75, 42, 173, 0.3)",transition:"all 0.2s ease","&.Mui-selected":{backgroundColor:B.A.secondColor,color:"white",borderColor:B.A.secondColor,boxShadow:"0 2px 8px rgba(75, 42, 173, 0.3)","&:hover":{backgroundColor:B.A.firstColor}},"&:hover":{backgroundColor:"rgba(75, 42, 173, 0.1)"}}}),$=(0,z.Ay)(C.A)({"& .MuiFormControlLabel-label":{fontSize:"14px",fontWeight:600,color:"#333"}}),ee=()=>{const e=(0,H.Zp)(),o=(0,H.zy)(),[t,a]=(0,R.useState)([]),[i,s]=(0,R.useState)([]),[d,c]=(0,R.useState)([]),[h,p]=(0,R.useState)(null),[g,f]=(0,R.useState)({}),[j,C]=(0,R.useState)(!0),[z,W]=(0,R.useState)(!1),[Y,_]=(0,R.useState)(1),[O,G]=(0,R.useState)(1),[ee,oe]=(0,R.useState)(!1),[te,re]=(0,R.useState)(new Set),[ae,ie]=(0,R.useState)([]),le=new URLSearchParams(o.search),ne=(0,k.A)(),se=(0,F.A)(ne.breakpoints.down("sm")),de=(0,F.A)(ne.breakpoints.between("sm","md")),ce=((0,F.A)(ne.breakpoints.up("md")),(0,R.useRef)(!1)),xe=(0,R.useRef)(null);(0,R.useEffect)(()=>{const e=Number(le.get("page"))||1;_(e)},[o.search]);const ue=async(e,o)=>{const t={};if(!e.rooms||0===e.rooms.length)return t;for(const a of e.rooms)try{const e=await Z(a.id,o);t[a.id]=e}catch(r){console.error("Error fetching inventory for room ".concat(a.id,":"),r),t[a.id]=[]}return t},he=(e,o)=>e.map(e=>{const t=e.id,a=q(o,t),i=X(a);return(0,r.A)((0,r.A)({},e),{},{ratings:{rating:i,count:a.length}})}),pe=async(e,o,t)=>{const r=e.slice(o,t).map(async e=>{try{const o={id:e,secondTable:"Room"},t=await(0,N.YT)(o),r=(null===t||void 0===t?void 0:t.data)||null;return r&&Array.isArray(r.data)&&r.data.length?r.data[0]:null}catch(o){return console.error("Error fetching hotel ".concat(e,":"),o),null}});return(await Promise.all(r)).filter(e=>null!==e)};(0,R.useEffect)(()=>((async()=>{if(!ce.current){ce.current=!0;try{var e,o;if(C(!0),L.hotels.length>0&&Date.now()-L.lastFetched<L.TTL&&L.ratings)return console.log("Using cached data"),a(L.hotels),p(L.ratings),C(!1),void(ce.current=!1);const i={data:{filter:"",status:"Approved"},page:0,pageSize:1e3,order:[["createdAt","ASC"]]},l=await(0,N.Vy)(i),n=(null===l||void 0===l||null===(e=l.data)||void 0===e||null===(o=e.data)||void 0===o?void 0:o.rows)||[];console.log("Total hotels from API:",n.length);const s=n.map(e=>e.id);ie(s);const d=(async()=>{try{var e;const o={data:{filter:""},page:0,pageSize:1e3,order:[["createdAt","ASC"]]},t=await(0,N.Ge)(o);let r=null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.data;return null!==r&&void 0!==r&&r.data&&Array.isArray(r.data)?r.data:null!==r&&void 0!==r&&r.rows&&Array.isArray(r.rows)?r.rows:null!==r&&void 0!==r&&r.result&&Array.isArray(r.result)?r.result:Array.isArray(r)?r:[]}catch(o){return console.error("Error fetching ratings:",o),[]}})(),c=5*(Y-1),x=c+5,u=s.slice(c,x);console.log("Fetching first batch: ".concat(u.length," hotels"));const[h,g]=await Promise.all([pe(u,0,u.length),d]);re(new Set(u));const m=he(h,g),v=le.get("checkinDate")||P()().format("YYYY-MM-DD"),A=m.map(async e=>{const o=await ue(e,v);return{hotelId:e.id,inventory:o}}),b=(await Promise.all(A)).reduce((e,o)=>{let{hotelId:t,inventory:r}=o;return e[t]=r,e},{});if(f(b),a(m),p(g),C(!1),L.ratings=g,L.hotels=[...m],L.lastFetched=Date.now(),s.length>u.length){oe(!0);const e=new Set(u),o=s.filter(o=>!e.has(o));console.log("Background loading: ".concat(o.length," hotels (excluding ").concat(u.length," already loaded)"));const i=Math.ceil(o.length/30);for(let l=0;l<i;l++){const e=30*l,n=e+30,s=o.slice(e,n);try{console.log("Fetching background batch ".concat(l+1,"/").concat(i,": ").concat(s.length," hotels"));const e=await pe(s,0,s.length);if(e.length>0){const o=he(e,g),t=o.map(async e=>{const o=await ue(e,v);return{hotelId:e.id,inventory:o}}),i=(await Promise.all(t)).reduce((e,o)=>{let{hotelId:t,inventory:r}=o;return e[t]=r,e},{});f(e=>(0,r.A)((0,r.A)({},e),i)),a(e=>[...e,...o]),console.log("\u2705 Added ".concat(o.length," hotels. ")),L.hotels=[...L.hotels,...o],L.lastFetched=Date.now(),re(e=>{const o=new Set(e);return s.forEach(e=>o.add(e)),o})}else console.log("\u26a0\ufe0f Batch ".concat(l+1," returned 0 hotels"));l<i-1&&await new Promise(e=>setTimeout(e,100))}catch(t){console.error("Error in batch ".concat(l+1,":"),t)}}oe(!1)}}catch(i){console.error("Error fetching hotels with rooms:",i),a([]),C(!1)}finally{ce.current=!1}}})(),()=>{xe.current&&xe.current.abort()}),[o.search]),(0,R.useEffect)(()=>{if(!j){const e=(()=>{const e=le.get("location")||"",o=le.get("bookingType"),a=(le.get("bookingHours"),le.get("sortBy")),i=Number(le.get("maxBudget"))||2e4,l=Number(le.get("minBudget"))||100,n=le.get("checkinDate")||P()().format("YYYY-MM-DD"),s="hourly"===o?1:Math.max(1,Number(le.get("nights"))||1),d=e=>{var t,r,a;const i=(null===(t=g[e.id])||void 0===t?void 0:t[null===(r=e.rooms)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.id])||[],l=U(e,i,n,o||"fullDay");return l?V(l).finalPrice*s:1/0};console.group("\ud83d\udd0d Hotel Stay Type Analysis");const c=t.filter(e=>{var o,t;return"Hourly"===(null===e||void 0===e||null===(o=e.rooms)||void 0===o||null===(t=o[0])||void 0===t?void 0:t.stayType)});console.log("Total hotels: ".concat(t.length)),console.log('Hotels with stayType="Hourly": '.concat(c.length)),console.log('Hotels with stayType="Overnight": '.concat(t.filter(e=>{var o,t;return"Overnight"===(null===e||void 0===e||null===(o=e.rooms)||void 0===o||null===(t=o[0])||void 0===t?void 0:t.stayType)}).length)),console.log("Hotels with no stayType: ".concat(t.filter(e=>{var o,t;return!(null!==e&&void 0!==e&&null!==(o=e.rooms)&&void 0!==o&&null!==(t=o[0])&&void 0!==t&&t.stayType)}).length)),c.forEach((e,o)=>{var t,r;console.log("".concat(o+1,". ").concat(e.propertyName,' - stayType: "').concat(null===e||void 0===e||null===(t=e.rooms)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.stayType,'"'))}),console.groupEnd();let x=t.filter(e=>{if("fullDay"===o){var t,r;const o="Overnight"===(null===e||void 0===e||null===(t=e.rooms)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.stayType);return"Hotel"===e.propertyType&&o}if("hourly"===o){var a,i;const o="Hourly"===(null===e||void 0===e||null===(a=e.rooms)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.stayType);var l,n;return console.log(o),o?"Unavailable"===((null===e||void 0===e?void 0:e.roomAvailable)||"Available")?(console.log("\u26a0\ufe0f Sold out but showing: ".concat(e.propertyName)),!0):(console.log("\u2705 Showing hourly hotel: ".concat(e.propertyName)),!0):(console.log("\u274c Filtered out: ".concat(e.propertyName,' - stayType: "').concat(null===e||void 0===e||null===(l=e.rooms)||void 0===l||null===(n=l[0])||void 0===n?void 0:n.stayType,'"')),!1)}return"villa"===o&&"Villa"===e.propertyType});console.log("\ud83d\udcca After stay type filter: ".concat(x.length," hotels")),x=x.filter(e=>{const o=d(e);if("Unavailable"===((null===e||void 0===e?void 0:e.roomAvailable)||"Available"))return!0;const t=o>=l&&o<=i&&o!==1/0;return t||console.log("\ud83d\udcb0 Filtered by budget: ".concat(e.propertyName," - price: ").concat(o)),t}),console.log("\ud83d\udcca After budget filter: ".concat(x.length," hotels")),x=x.map(o=>{let t=0,a=!1;if(""!==e.trim()){var i;const r=e.toLowerCase().trim(),l=(o.propertyName||o.address||o.city||"").toLowerCase();r.split(/[,\s]+/).map(e=>e.trim()).forEach(e=>{var r,i,n,s,d,c;l.includes(e)&&(t+=5,null!==(r=o.propertyName)&&void 0!==r&&r.toLowerCase().includes(e)&&(t+=20),null!==(i=o.address)&&void 0!==i&&i.toLowerCase().includes(e)&&(t+=15),l!==e&&(null===(n=o.propertyName)||void 0===n?void 0:n.toLowerCase())!==e&&(null===(s=o.address)||void 0===s?void 0:s.toLowerCase())!==e||(t+=30,a=!0),null!==(d=o.propertyName)&&void 0!==d&&d.toLowerCase().startsWith(e)&&(t+=25),null!==(c=o.address)&&void 0!==c&&c.toLowerCase().startsWith(e)&&(t+=20))}),l.includes(r)&&(t+=40),null!==(i=o.propertyName)&&void 0!==i&&i.toLowerCase().includes(r)&&(t+=35)}const l="Unavailable"!==((null===o||void 0===o?void 0:o.roomAvailable)||"Available");return(0,r.A)((0,r.A)({},o),{},{_relevanceScore:1+t,_isExactMatch:a,_hasLocationMatch:t>0,_isAvailable:l})}),x.sort((e,o)=>{if(e._isAvailable&&!o._isAvailable)return-1;if(o._isAvailable&&!e._isAvailable)return 1;if(e._isExactMatch&&!o._isExactMatch)return-1;if(o._isExactMatch&&!e._isExactMatch)return 1;if(e._hasLocationMatch&&!o._hasLocationMatch)return-1;if(o._hasLocationMatch&&!e._hasLocationMatch)return 1;const t=(o._relevanceScore||0)-(e._relevanceScore||0);return 0!==t?t:"rating"===a?(Number(null===o||void 0===o||null===(r=o.ratings)||void 0===r?void 0:r.rating)||0)-(Number(null===e||void 0===e||null===(i=e.ratings)||void 0===i?void 0:i.rating)||0):"lowToHigh"===a?d(e)-d(o):"highToLow"===a?d(o)-d(e):"popularity"===a?(Number(null===o||void 0===o?void 0:o.reviews)||0)-(Number(null===e||void 0===e?void 0:e.reviews)||0):d(e)-d(o);var r,i});const u=Math.max(1,Number(le.get("rooms"))||1),h=x.map(e=>{var t,a,i;const l=(null===(t=g[e.id])||void 0===t?void 0:t[null===(a=e.rooms)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.id])||[],s=U(e,l,n,o||"fullDay"),d=V(s),c=d.finalPrice,x="hourly"===o?1:Math.max(1,Number(le.get("nights"))||1),h=u*x;return(0,r.A)((0,r.A)({},e),{},{_pricing:{perRoomFinal:c,perRoomBase:d.basePrice,perRoomPlatform:d.platformFee,perRoomGstTotal:d.gstTotal,roomsCount:u,nights:x,totalFinal:+c*h,totalBase:+d.basePrice*h,totalPlatform:+d.platformFee*h,totalGst:+d.gstTotal*h}})});console.log("\ud83d\udcca Final result: ".concat(h.length," hourly hotels"));const p=h.filter(e=>e._isAvailable),m=h.filter(e=>!e._isAvailable);return console.log("\u2705 Available: ".concat(p.length)),console.log("\u274c Sold out: ".concat(m.length)),h.forEach((e,o)=>{var t,r;console.log("".concat(o+1,". ").concat(e.propertyName," - ").concat(e._isAvailable?"Available":"Sold Out",' - stayType: "').concat(null===e||void 0===e||null===(t=e.rooms)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.stayType,'"'))}),h})();s(e);const o=e.length;console.log("Total items for pagination: ".concat(o));const a=Math.ceil(o/5);G(a);const i=5*(Y-1),l=i+5,n=e.slice(i,l);c(n)}},[j,t,o.search,Y,g]);const ge=(0,R.useCallback)((o,t)=>{_(t);const i=new URLSearchParams(le.toString());i.set("page",t.toString()),e({search:i.toString()},{replace:!0});const l=5*(t-1),n=l+5,s=ae.slice(l,n).filter(e=>!te.has(e));s.length>0&&!ee&&(async()=>{try{const e=await pe(s,0,s.length);if(e.length>0&&h){const o=he(e,h),t=le.get("checkinDate")||P()().format("YYYY-MM-DD"),i=o.map(async e=>{const o=await ue(e,t);return{hotelId:e.id,inventory:o}}),l=(await Promise.all(i)).reduce((e,o)=>{let{hotelId:t,inventory:r}=o;return e[t]=r,e},{});f(e=>(0,r.A)((0,r.A)({},e),l)),a(e=>{const t=new Set(e.map(e=>e.id)),r=o.filter(e=>!t.has(e.id));return[...e,...r]}),re(e=>{const o=new Set(e);return s.forEach(e=>o.add(e)),o}),L.hotels=[...L.hotels,...o],L.lastFetched=Date.now()}}catch(e){console.error("Error fetching missing hotels:",e)}})(),window.scrollTo({top:0,behavior:"smooth"})},[ae,te,ee,h,le,e]),me=[Number(le.get("minBudget"))||100,Number(le.get("maxBudget"))||2e4],fe=le.get("bookingHours")||"3",ve=le.get("sortBy")||"all",[Ae,be]=(0,R.useState)(me),[ye,we]=(0,R.useState)(fe),[Se,je]=(0,R.useState)(ve),Ce=(t,r)=>{const a=new URLSearchParams(o.search);Array.isArray(r)?(a.set("minBudget",String(r[0])),a.set("maxBudget",String(r[1]))):a.set(t,String(r)),a.set("page","1"),_(1),e({search:a.toString()},{replace:!0})};(0,R.useEffect)(()=>{const t=new URLSearchParams(o.search);let r=!1;t.has("minBudget")||(t.set("minBudget",String(me[0])),r=!0),t.has("maxBudget")||(t.set("maxBudget",String(me[1])),r=!0),t.has("bookingHours")||(t.set("bookingHours",fe),r=!0),t.has("sortBy")||(t.set("sortBy",ve),r=!0),t.has("page")||(t.set("page","1"),r=!0),r&&e({search:t.toString()},{replace:!0})},[]);const ke=(0,I.jsxs)(x.A,{sx:{position:"sticky",top:20},children:[(0,I.jsxs)(x.A,{sx:(0,r.A)((0,r.A)({},M.VX),{},{mt:3}),children:[(0,I.jsx)(m.A,{sx:(0,r.A)((0,r.A)({},Q),{},{mb:5}),children:"Budget"}),(0,I.jsx)(v.Ay,{value:Ae,onChange:(e,o,t)=>{Array.isArray(o)&&(be(o),Ce("minBudget",o[0]),Ce("maxBudget",o[1]))},step:100,min:100,max:2e4,sx:{color:B.A.secondColor,"& .MuiSlider-thumb":{backgroundColor:"white",border:"2px solid ".concat(B.A.secondColor),width:20,height:20},"& .MuiSlider-valueLabel":{backgroundColor:B.A.secondColor,color:"white",fontSize:"12px",borderRadius:"5px",padding:"2px 8px"},"& .MuiSlider-track":{height:6},"& .MuiSlider-rail":{height:6,opacity:.3}},valueLabelFormat:e=>"\u20b9".concat(e),valueLabelDisplay:"on"}),(0,I.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between",mt:1},children:[(0,I.jsxs)(m.A,{sx:{fontSize:"14px",fontWeight:600,color:B.A.firstColor},children:["\u20b9",Ae[0]]}),(0,I.jsxs)(m.A,{sx:{fontSize:"14px",fontWeight:600,color:B.A.firstColor},children:["\u20b9",Ae[1]]})]})]}),"hourly"===le.get("bookingType")&&(0,I.jsxs)(x.A,{sx:(0,r.A)({},M.VX),children:[(0,I.jsx)(m.A,{sx:(0,r.A)({},Q),children:"Book For"}),(0,I.jsx)(x.A,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",gap:"8px",mt:1},children:["3","6","12"].map(e=>(0,I.jsxs)(J,{value:e,selected:ye===e,onClick:()=>{return we(o=e),void Ce("bookingHours",o);var o},sx:{flex:1,minWidth:{xs:"30%",sm:"auto"},py:1,fontSize:{xs:"11px",sm:"12px",md:"13px"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[e," Hours"]},e))})]}),(0,I.jsxs)(x.A,{sx:(0,r.A)({},M.VX),children:[(0,I.jsx)(m.A,{sx:(0,r.A)({},Q),children:"Sort By"}),(0,I.jsxs)(A.A,{sx:{mt:0},value:Se,onChange:e=>{return o=e.target.value,je(o),void Ce("sortBy",o);var o},children:[(0,I.jsx)($,{value:"all",control:(0,I.jsx)(M.YY,{}),label:"All"}),(0,I.jsx)($,{value:"lowToHigh",control:(0,I.jsx)(M.YY,{}),label:"Price Low To High"}),(0,I.jsx)($,{value:"highToLow",control:(0,I.jsx)(M.YY,{}),label:"Price High To Low"}),(0,I.jsx)($,{value:"popularity",control:(0,I.jsx)(M.YY,{}),label:"Popularity"}),(0,I.jsx)($,{value:"rating",control:(0,I.jsx)(M.YY,{}),label:"Customer Rating"})]})]}),(0,I.jsx)(x.A,{sx:(0,r.A)((0,r.A)({},M.VX),{},{mt:3}),children:(0,I.jsx)(D.A,{variant:"contained",onClick:()=>{se&&W(!1);const o=new URLSearchParams(le.toString());o.set("page","1"),e({search:o.toString()},{replace:!0})},customStyles:{width:"100%",padding:"12px",fontSize:"16px",fontWeight:700,background:"linear-gradient(135deg, #4B2AAD, #6C4BD3)",boxShadow:"0 4px 12px rgba(75, 42, 173, 0.3)"},children:"Apply Filters"})}),ee&&(0,I.jsx)(x.A,{sx:(0,r.A)((0,r.A)({},M.VX),{},{mt:2}),children:(0,I.jsx)(m.A,{sx:{fontSize:"12px",color:"#666",textAlign:"center"},children:"Loading more hotels in background..."})})]});return(0,I.jsxs)(x.A,{sx:{background:B.A.thirdColor,p:{xs:2,sm:3,md:4},minHeight:"100vh"},children:[(0,I.jsx)(T.A,{}),(0,I.jsxs)(b.Ay,{container:!0,spacing:{xs:2,md:3},children:[se?(0,I.jsx)(y.Ay,{anchor:"left",open:z,onClose:()=>W(!1),sx:{"& .MuiDrawer-paper":{width:{xs:"100%",sm:"85%"},maxWidth:400,height:"100%",overflowY:"auto"}},children:(0,I.jsxs)(x.A,{sx:{p:{xs:2,sm:3},height:"100%",overflowY:"auto"},children:[(0,I.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,position:"sticky",top:0,zIndex:1,pb:2,borderBottom:"1px solid #eee"},children:[(0,I.jsx)(m.A,{variant:"h5",sx:{background:"linear-gradient(135deg, #f3eee1, #e8e0cf)",width:"fit-content",borderRadius:"8px",p:1.5,fontWeight:700,color:B.A.firstColor,fontSize:{xs:"16px",md:"18px"},boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:"Filter & Sort"}),(0,I.jsx)(l.A,{onClick:()=>W(!1),sx:{fontSize:28,color:B.A.firstColor,cursor:"pointer","&:hover":{opacity:.8}}})]}),ke]})}):(0,I.jsx)(b.Ay,{item:!0,xs:12,md:3,lg:2.5,children:ke}),(0,I.jsxs)(b.Ay,{item:!0,xs:12,md:9,lg:9.5,children:[(0,I.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},mb:3,flexWrap:"wrap",gap:2,flexDirection:{xs:"column",sm:"row"}},children:[j?(0,I.jsx)(u.A,{width:200,height:32}):(0,I.jsxs)(x.A,{children:[(0,I.jsxs)(m.A,{variant:"h6",sx:{fontWeight:700,fontSize:{xs:"17px",sm:"18px",md:"20px"},color:B.A.firstColor,marginTop:"10px"},children:[i.length," properties found",ee&&" (loading more...)"]}),O>1&&(0,I.jsxs)(m.A,{variant:"body2",sx:{color:"#666",fontSize:{xs:"13px",md:"14px"},mt:.5},children:["Page ",Y," of ",O,ee&&" \u2022 Background loading active"]})]}),se&&(0,I.jsx)(x.A,{sx:{display:"flex",gap:1,width:"100%"},children:(0,I.jsx)(D.A,{customStyles:{padding:"8px 16px",fontSize:"14px",borderRadius:"8px",flex:1},onClick:()=>W(!0),variant:"contained",startIcon:(0,I.jsx)(n.A,{}),children:"Filter & Sort"})})]}),j?[...Array(5)].map((e,o)=>(0,I.jsx)(E,{isMobile:se},o)):d.length>0?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(x.A,{sx:{mb:4},children:d.map(e=>{var o,t,r;const a=e.id,i=q(h,a),l=(null===(o=g[a])||void 0===o?void 0:o[null===(t=e.rooms)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.id])||[];return(0,I.jsx)(K,{hotel:e,queryParams:le,isMobile:se,hotelRatings:i,inventoryData:l},e.id)})}),O>1&&(0,I.jsxs)(x.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mt:4,mb:2,flexDirection:{xs:"column",sm:"row"},gap:{xs:2,sm:0}},children:[(0,I.jsx)(w.A,{count:O,page:Y,onChange:ge,color:"primary",size:se||de?"medium":"large",showFirstButton:!se,showLastButton:!se,siblingCount:se?1:2,boundaryCount:se?1:2,renderItem:e=>(0,I.jsx)(S.A,(0,r.A)((0,r.A)({},e),{},{sx:{"&.Mui-selected":{backgroundColor:B.A.firstColor,color:B.A.thirdColor,"&:hover":{backgroundColor:B.A.secondColor}},"&.MuiPaginationItem-root":{fontWeight:600,fontSize:{xs:"14px",md:"14px"},minWidth:{xs:"36px",sm:"40px",md:"48px"},height:{xs:"36px",sm:"40px",md:"48px"}}}}))}),!se&&(0,I.jsxs)(m.A,{variant:"body2",sx:{ml:2,color:"#666",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:["Showing ",Math.min(5*(Y-1)+1,i.length),"-",Math.min(5*Y,i.length)," of ",i.length," properties"]})]})]}):(0,I.jsx)(x.A,{sx:{textAlign:"center",py:8,px:2},children:(0,I.jsxs)(x.A,{sx:{maxWidth:400,mx:"auto",p:4,borderRadius:"16px",background:"linear-gradient(135deg, #f8f9ff, #f0f2ff)",boxShadow:"0 4px 20px rgba(0,0,0,0.05)"},children:[(0,I.jsx)(m.A,{variant:"h5",sx:{fontWeight:700,color:B.A.firstColor,mb:2,fontSize:{xs:"20px",md:"22px"}},children:"No properties found"}),(0,I.jsx)(m.A,{variant:"body1",sx:{color:"#666",mb:3,fontSize:{xs:"14px",md:"16px"}},children:"Try adjusting your search criteria or filters"}),(0,I.jsx)(D.A,{variant:"contained",onClick:()=>e("/"),customStyles:{background:"linear-gradient(135deg, #4B2AAD, #6C4BD3)",borderRadius:"8px",fontSize:"15px",fontWeight:600},children:"Search Again"})]})})]})]})]})}}}]);
//# sourceMappingURL=537.e5dad944.chunk.js.map