"use strict";(self.webpackChunkhuts4u=self.webpackChunkhuts4u||[]).push([[568],{67568:(e,r,t)=>{t.r(r),t.d(r,{default:()=>I});var i=t(89379),o=t(91794),s=t(98606),n=t(7353),l=t(61596),a=t(94496),c=t(39336),d=t(68903),p=t(83462),x=t(26600),u=t(35316),h=t(29347),m=t(11906),j=t(65043),A=t(33580),g=t(31716),b=t(61968),v=t(69995),f=t(73216),y=t(82533),C=t(57488),S=t(70579);const k={label:{fontWeight:"bold",color:"#333"},value:{color:"#555"}},w=["id","hotelId","createdAt","updatedAt","deleted","userId"],R=e=>null===e||void 0===e?"N/A":"object"===typeof e?JSON.stringify(e):Array.isArray(e)?e.length>0?e.join(", "):"N/A":e.toString(),z=e=>!(!e||"string"!==typeof e)&&(e.startsWith("http")||e.startsWith("data:image")||e.startsWith("/")||e.includes("image")),O=e=>["image","Image","img","Img","picture","Picture","photo","Photo","certificate","Certificate"].some(r=>e.toLowerCase().includes(r.toLowerCase())),I=()=>{var e,r;const[t,I]=(0,j.useState)(""),[E,F]=(0,j.useState)(!1),[W,P]=(0,j.useState)(null),{id:L}=(0,f.g)(),[M,N]=(0,j.useState)({}),[T,Z]=(0,j.useState)([]);(0,j.useEffect)(()=>{(0,v.YT)({id:L,secondTable:"Room"}).then(e=>{var r,t;const o=(null===e||void 0===e||null===(r=e.data)||void 0===r||null===(t=r.data)||void 0===t?void 0:t[0])||{},s=Object.fromEntries(Object.entries(o).filter(e=>{let[r]=e;return!w.includes(r)})),n=Array.isArray(null===o||void 0===o?void 0:o.rooms)?o.rooms.map(e=>{const r=Object.fromEntries(Object.entries(e).filter(e=>{let[r]=e;return!w.includes(r)})),t={};return Object.entries(r).forEach(e=>{let[i,o]=e;"pricePerHour"===i&&"Overnight"===r.roomFor||"pricePerNight"===i&&"Hourly"===r.roomFor||(t[i]=o)}),t}):[];N((0,i.A)((0,i.A)({},s),{},{rooms:n}))}).catch(e=>console.log(e))},[L]);const $=e=>{"reject"!==e||t.trim()?(P(e),F(!0)):alert("Remark is required for rejection.")},B=(0,f.Zp)(),H=(e,r)=>O(e)&&z(r)?(0,S.jsx)(n.A,{mt:1,children:(0,S.jsx)("img",{src:r,alt:e,width:150,height:120,style:{borderRadius:8,objectFit:"contain",border:"1px solid #ddd"},onError:e=>{e.target.style.display="none"}})}):null;return(0,S.jsxs)(l.A,{elevation:3,sx:{p:3,m:3,borderRadius:"12px",backgroundColor:A.A.thirdColor,boxShadow:"0px 0px 14px rgba(0, 0, 0, 0.14)"},children:[(0,S.jsx)(a.A,{variant:"h5",gutterBottom:!0,fontWeight:"bold",children:"Property Application Preview"}),(0,S.jsx)(c.A,{sx:{mb:2}}),(0,S.jsxs)(d.Ay,{container:!0,spacing:2,children:[Object.entries(M).map(e=>{let[r,t]=e;return"rooms"!==r&&(0,S.jsxs)(d.Ay,{item:!0,xs:12,md:"propertyImages"===r||Array.isArray(t)&&t.every(z)?12:(O(r),4),children:[(0,S.jsxs)(a.A,{sx:k.label,children:[r.replace(/([A-Z])/g," $1").trim().replace(/^./,e=>e.toUpperCase()),":"]}),Array.isArray(t)?t.every(z)?(0,S.jsx)(n.A,{display:"flex",flexWrap:"wrap",gap:1,mt:1,children:t.map((e,t)=>z(e)?(0,S.jsx)("img",{src:e,alt:"".concat(r," ").concat(t+1),width:100,height:100,style:{borderRadius:8,objectFit:"cover",border:"1px solid #ddd"},onError:e=>{e.target.style.display="none"}},t):(0,S.jsx)(n.A,{width:100,height:100,sx:{borderRadius:8,border:"1px dashed #ddd",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5"},children:(0,S.jsxs)(a.A,{variant:"caption",color:"textSecondary",children:[r," ",t+1]})},t))}):(0,S.jsx)(a.A,{sx:k.value,children:t.join(", ")}):(0,S.jsxs)(S.Fragment,{children:[H(r,t),O(r)&&z(t)?null:(0,S.jsx)(a.A,{sx:k.value,children:R(t)})]})]},r)}),(null===M||void 0===M||null===(e=M.rooms)||void 0===e?void 0:e.length)>0&&(0,S.jsx)(d.Ay,{item:!0,xs:12,children:(0,S.jsx)(a.A,{sx:k.label,children:"Rooms:"})}),null===M||void 0===M||null===(r=M.rooms)||void 0===r?void 0:r.map((e,r)=>(0,S.jsx)(d.Ay,{item:!0,xs:12,md:6,children:(0,S.jsxs)(l.A,{sx:{p:2,my:1,backgroundColor:A.A.thirdColor,boxShadow:"0px 0px 14px rgba(0, 0, 0, 0.14)",borderRadius:"12px"},children:[Object.entries(e).filter(e=>{let[r,t]=e;return O(r)&&z(t)}).map(e=>{let[r,t]=e;return(0,S.jsxs)(n.A,{mt:1,mb:2,children:[(0,S.jsxs)(a.A,{sx:k.label,children:[r.replace(/([A-Z])/g," $1").trim(),":"]}),(0,S.jsx)("img",{src:t,alt:r,width:200,height:150,style:{borderRadius:8,objectFit:"cover",border:"1px solid #ddd"},onError:e=>{e.target.style.display="none"}})]},r)}),Object.entries(e).filter(e=>{let[r,t]=e;return!O(r)||!z(t)}).map(e=>{let[r,t]=e;return(0,S.jsx)(n.A,{mb:1,children:(0,S.jsxs)(a.A,{sx:k.value,children:[(0,S.jsxs)("strong",{children:[r.replace(/([A-Z])/g," $1").trim(),":"]})," ",R(t)]})},r)})]})},r))]}),"Admin"===(0,y.uG)()&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(a.A,{mt:1,sx:k.label,children:"Remark:"}),(0,S.jsx)(b.XY,{sx:{"& .MuiInputBase-input":{resize:"vertical"},"& textarea":{resize:"vertical"},"& .MuiOutlinedInput-root":{"& fieldset":{border:"none",borderRadius:"12px"}},mt:2},fullWidth:!0,label:"Application Remark",multiline:!0,rows:4,value:t,onChange:e=>I(e.target.value)}),(0,S.jsx)(n.A,{mt:2,display:"flex",justifyContent:"flex-end",children:(0,S.jsx)(g.A,{variant:"contained",customStyles:{fontSize:"14px"},onClick:()=>{console.log("Submitting application with remark:",t)},children:"Submit"})}),(0,S.jsxs)(n.A,{sx:{width:"100%",display:"flex",gap:1},mt:4,children:[(0,S.jsxs)(g.A,{customStyles:{fontSize:"14px",background:"red",width:"100%"},variant:"contained",onClick:()=>$("reject"),children:["Reject ",(0,S.jsx)(o.A,{sx:{ml:1,fontSize:"18px"}})]}),(0,S.jsxs)(g.A,{customStyles:{fontSize:"14px",background:"green",width:"100%"},variant:"contained",onClick:()=>$("approve"),children:["Approve ",(0,S.jsx)(s.A,{sx:{ml:1,fontSize:"18px"}})]})]}),(0,S.jsxs)(p.A,{open:E,onClose:()=>F(!1),sx:{textAlign:"center"},children:["approve"===W?(0,S.jsx)(s.A,{sx:{margin:"auto",fontSize:"84px",color:"green",mt:2}}):(0,S.jsx)(o.A,{sx:{margin:"auto",fontSize:"84px",color:"red",mt:2}}),(0,S.jsx)(x.A,{sx:{fontSize:"20px",m:0,pb:1},children:"approve"===W?"Confirm Approval?":"Confirm Rejection?"}),(0,S.jsxs)(u.A,{sx:{fontSize:"14px"},children:["Are you sure you want to ",W," this application?"]}),(0,S.jsxs)(h.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:[(0,S.jsx)(m.A,{sx:{textTransform:"none",background:"grey"},variant:"contained",onClick:()=>F(!1),children:"Cancel"}),(0,S.jsx)(m.A,{sx:{textTransform:"none",background:"approve"===W?"green":"red"},variant:"contained",onClick:()=>{if(!W)return;const e=(0,i.A)({status:"approve"===W?"Approved":"Reject"},"reject"===W&&{remarks:t.trim()});(0,v.hI)(L,e).then(e=>{C.oR.success("Application ".concat("approve"===W?"Approved":"Rejected"," successfully")),F(!1),B(-1)}).catch(e=>{C.oR.error("Error while ".concat("approve"===W?"approving":"rejecting"," application"))})},children:"Confirm"})]})]})]})]})}},91794:(e,r,t)=>{t.d(r,{A:()=>s});var i=t(59662),o=t(70579);const s=(0,i.A)((0,o.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel")},98606:(e,r,t)=>{t.d(r,{A:()=>s});var i=t(59662),o=t(70579);const s=(0,i.A)((0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle")}}]);
//# sourceMappingURL=568.04679fe0.chunk.js.map