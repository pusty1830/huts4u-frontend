{"version":3,"file":"static/js/991.bff5a00a.chunk.js","mappings":"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","sources":["../node_modules/@mui/icons-material/esm/Add.js","../node_modules/@mui/material/internal/svg-icons/CheckBoxOutlineBlank.js","../node_modules/@mui/material/internal/svg-icons/CheckBox.js","../node_modules/@mui/material/internal/svg-icons/IndeterminateCheckBox.js","../node_modules/@mui/material/Checkbox/checkboxClasses.js","../node_modules/@mui/material/Checkbox/Checkbox.js","../node_modules/@mui/icons-material/esm/Percent.js","../node_modules/@mui/icons-material/esm/AttachMoney.js","../node_modules/@mui/icons-material/esm/Check.js","../node_modules/@mui/icons-material/esm/LocalOffer.js","../node_modules/@mui/icons-material/esm/ContentCopy.js","../node_modules/@mui/icons-material/esm/Delete.js","pages/BookingSummary.tsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z\"\n}), 'Add');","'use client';\n\nimport * as React from 'react';\nimport createSvgIcon from \"../../utils/createSvgIcon.js\";\n\n/**\n * @ignore - internal component.\n */\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"\n}), 'CheckBoxOutlineBlank');","'use client';\n\nimport * as React from 'react';\nimport createSvgIcon from \"../../utils/createSvgIcon.js\";\n\n/**\n * @ignore - internal component.\n */\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"\n}), 'CheckBox');","'use client';\n\nimport * as React from 'react';\nimport createSvgIcon from \"../../utils/createSvgIcon.js\";\n\n/**\n * @ignore - internal component.\n */\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z\"\n}), 'IndeterminateCheckBox');","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getCheckboxUtilityClass(slot) {\n  return generateUtilityClass('MuiCheckbox', slot);\n}\nconst checkboxClasses = generateUtilityClasses('MuiCheckbox', ['root', 'checked', 'disabled', 'indeterminate', 'colorPrimary', 'colorSecondary', 'sizeSmall', 'sizeMedium']);\nexport default checkboxClasses;","'use client';\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport composeClasses from '@mui/utils/composeClasses';\nimport { alpha } from '@mui/system/colorManipulator';\nimport SwitchBase from \"../internal/SwitchBase.js\";\nimport CheckBoxOutlineBlankIcon from \"../internal/svg-icons/CheckBoxOutlineBlank.js\";\nimport CheckBoxIcon from \"../internal/svg-icons/CheckBox.js\";\nimport IndeterminateCheckBoxIcon from \"../internal/svg-icons/IndeterminateCheckBox.js\";\nimport capitalize from \"../utils/capitalize.js\";\nimport rootShouldForwardProp from \"../styles/rootShouldForwardProp.js\";\nimport checkboxClasses, { getCheckboxUtilityClass } from \"./checkboxClasses.js\";\nimport { styled } from \"../zero-styled/index.js\";\nimport memoTheme from \"../utils/memoTheme.js\";\nimport createSimplePaletteValueFilter from \"../utils/createSimplePaletteValueFilter.js\";\nimport { useDefaultProps } from \"../DefaultPropsProvider/index.js\";\nimport { mergeSlotProps } from \"../utils/index.js\";\nimport useSlot from \"../utils/useSlot.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes,\n    indeterminate,\n    color,\n    size\n  } = ownerState;\n  const slots = {\n    root: ['root', indeterminate && 'indeterminate', `color${capitalize(color)}`, `size${capitalize(size)}`]\n  };\n  const composedClasses = composeClasses(slots, getCheckboxUtilityClass, classes);\n  return {\n    ...classes,\n    // forward the disabled and checked classes to the SwitchBase\n    ...composedClasses\n  };\n};\nconst CheckboxRoot = styled(SwitchBase, {\n  shouldForwardProp: prop => rootShouldForwardProp(prop) || prop === 'classes',\n  name: 'MuiCheckbox',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.root, ownerState.indeterminate && styles.indeterminate, styles[`size${capitalize(ownerState.size)}`], ownerState.color !== 'default' && styles[`color${capitalize(ownerState.color)}`]];\n  }\n})(memoTheme(({\n  theme\n}) => ({\n  color: (theme.vars || theme).palette.text.secondary,\n  variants: [{\n    props: {\n      color: 'default',\n      disableRipple: false\n    },\n    style: {\n      '&:hover': {\n        backgroundColor: theme.vars ? `rgba(${theme.vars.palette.action.activeChannel} / ${theme.vars.palette.action.hoverOpacity})` : alpha(theme.palette.action.active, theme.palette.action.hoverOpacity)\n      }\n    }\n  }, ...Object.entries(theme.palette).filter(createSimplePaletteValueFilter()).map(([color]) => ({\n    props: {\n      color,\n      disableRipple: false\n    },\n    style: {\n      '&:hover': {\n        backgroundColor: theme.vars ? `rgba(${theme.vars.palette[color].mainChannel} / ${theme.vars.palette.action.hoverOpacity})` : alpha(theme.palette[color].main, theme.palette.action.hoverOpacity)\n      }\n    }\n  })), ...Object.entries(theme.palette).filter(createSimplePaletteValueFilter()).map(([color]) => ({\n    props: {\n      color\n    },\n    style: {\n      [`&.${checkboxClasses.checked}, &.${checkboxClasses.indeterminate}`]: {\n        color: (theme.vars || theme).palette[color].main\n      },\n      [`&.${checkboxClasses.disabled}`]: {\n        color: (theme.vars || theme).palette.action.disabled\n      }\n    }\n  })), {\n    // Should be last to override other colors\n    props: {\n      disableRipple: false\n    },\n    style: {\n      // Reset on touch devices, it doesn't add specificity\n      '&:hover': {\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        }\n      }\n    }\n  }]\n})));\nconst defaultCheckedIcon = /*#__PURE__*/_jsx(CheckBoxIcon, {});\nconst defaultIcon = /*#__PURE__*/_jsx(CheckBoxOutlineBlankIcon, {});\nconst defaultIndeterminateIcon = /*#__PURE__*/_jsx(IndeterminateCheckBoxIcon, {});\nconst Checkbox = /*#__PURE__*/React.forwardRef(function Checkbox(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiCheckbox'\n  });\n  const {\n    checkedIcon = defaultCheckedIcon,\n    color = 'primary',\n    icon: iconProp = defaultIcon,\n    indeterminate = false,\n    indeterminateIcon: indeterminateIconProp = defaultIndeterminateIcon,\n    inputProps,\n    size = 'medium',\n    disableRipple = false,\n    className,\n    slots = {},\n    slotProps = {},\n    ...other\n  } = props;\n  const icon = indeterminate ? indeterminateIconProp : iconProp;\n  const indeterminateIcon = indeterminate ? indeterminateIconProp : checkedIcon;\n  const ownerState = {\n    ...props,\n    disableRipple,\n    color,\n    indeterminate,\n    size\n  };\n  const classes = useUtilityClasses(ownerState);\n  const externalInputProps = slotProps.input ?? inputProps;\n  const [RootSlot, rootSlotProps] = useSlot('root', {\n    ref,\n    elementType: CheckboxRoot,\n    className: clsx(classes.root, className),\n    shouldForwardComponentProp: true,\n    externalForwardedProps: {\n      slots,\n      slotProps,\n      ...other\n    },\n    ownerState,\n    additionalProps: {\n      type: 'checkbox',\n      icon: /*#__PURE__*/React.cloneElement(icon, {\n        fontSize: icon.props.fontSize ?? size\n      }),\n      checkedIcon: /*#__PURE__*/React.cloneElement(indeterminateIcon, {\n        fontSize: indeterminateIcon.props.fontSize ?? size\n      }),\n      disableRipple,\n      slots,\n      slotProps: {\n        input: mergeSlotProps(typeof externalInputProps === 'function' ? externalInputProps(ownerState) : externalInputProps, {\n          'data-indeterminate': indeterminate\n        })\n      }\n    }\n  });\n  return /*#__PURE__*/_jsx(RootSlot, {\n    ...rootSlotProps,\n    classes: classes\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? Checkbox.propTypes /* remove-proptypes */ = {\n  //  Warning \n  //  These PropTypes are generated from the TypeScript type definitions. \n  //     To update them, edit the d.ts file and run `pnpm proptypes`.     \n  // \n  /**\n   * If `true`, the component is checked.\n   */\n  checked: PropTypes.bool,\n  /**\n   * The icon to display when the component is checked.\n   * @default <CheckBoxIcon />\n   */\n  checkedIcon: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The color of the component.\n   * It supports both default and custom theme colors, which can be added as shown in the\n   * [palette customization guide](https://mui.com/material-ui/customization/palette/#custom-colors).\n   * @default 'primary'\n   */\n  color: PropTypes /* @typescript-to-proptypes-ignore */.oneOfType([PropTypes.oneOf(['default', 'primary', 'secondary', 'error', 'info', 'success', 'warning']), PropTypes.string]),\n  /**\n   * The default checked state. Use when the component is not controlled.\n   */\n  defaultChecked: PropTypes.bool,\n  /**\n   * If `true`, the component is disabled.\n   * @default false\n   */\n  disabled: PropTypes.bool,\n  /**\n   * If `true`, the ripple effect is disabled.\n   * @default false\n   */\n  disableRipple: PropTypes.bool,\n  /**\n   * The icon to display when the component is unchecked.\n   * @default <CheckBoxOutlineBlankIcon />\n   */\n  icon: PropTypes.node,\n  /**\n   * The id of the `input` element.\n   */\n  id: PropTypes.string,\n  /**\n   * If `true`, the component appears indeterminate.\n   * This does not set the native input element to indeterminate due\n   * to inconsistent behavior across browsers.\n   * However, we set a `data-indeterminate` attribute on the `input`.\n   * @default false\n   */\n  indeterminate: PropTypes.bool,\n  /**\n   * The icon to display when the component is indeterminate.\n   * @default <IndeterminateCheckBoxIcon />\n   */\n  indeterminateIcon: PropTypes.node,\n  /**\n   * [Attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#Attributes) applied to the `input` element.\n   * @deprecated Use `slotProps.input` instead. This prop will be removed in v7. See [Migrating from deprecated APIs](/material-ui/migration/migrating-from-deprecated-apis/) for more details.\n   */\n  inputProps: PropTypes.object,\n  /**\n   * Callback fired when the state is changed.\n   *\n   * @param {React.ChangeEvent<HTMLInputElement>} event The event source of the callback.\n   * You can pull out the new checked state by accessing `event.target.checked` (boolean).\n   */\n  onChange: PropTypes.func,\n  /**\n   * If `true`, the `input` element is required.\n   * @default false\n   */\n  required: PropTypes.bool,\n  /**\n   * The size of the component.\n   * `small` is equivalent to the dense checkbox styling.\n   * @default 'medium'\n   */\n  size: PropTypes /* @typescript-to-proptypes-ignore */.oneOfType([PropTypes.oneOf(['medium', 'small']), PropTypes.string]),\n  /**\n   * The props used for each slot inside.\n   * @default {}\n   */\n  slotProps: PropTypes.shape({\n    input: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n    root: PropTypes.oneOfType([PropTypes.func, PropTypes.object])\n  }),\n  /**\n   * The components used for each slot inside.\n   * @default {}\n   */\n  slots: PropTypes.shape({\n    input: PropTypes.elementType,\n    root: PropTypes.elementType\n  }),\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * The value of the component. The DOM API casts this to a string.\n   * The browser uses \"on\" as the default value.\n   */\n  value: PropTypes.any\n} : void 0;\nexport default Checkbox;","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M7.5 11C9.43 11 11 9.43 11 7.5S9.43 4 7.5 4 4 5.57 4 7.5 5.57 11 7.5 11m0-5C8.33 6 9 6.67 9 7.5S8.33 9 7.5 9 6 8.33 6 7.5 6.67 6 7.5 6M4.0025 18.5832 18.59 3.9955l1.4142 1.4143L5.4167 19.9974zM16.5 13c-1.93 0-3.5 1.57-3.5 3.5s1.57 3.5 3.5 3.5 3.5-1.57 3.5-3.5-1.57-3.5-3.5-3.5m0 5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5\"\n}), 'Percent');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4\"\n}), 'AttachMoney');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\"\n}), 'Check');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"m21.41 11.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58s1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41s-.23-1.06-.59-1.42M5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7\"\n}), 'LocalOffer');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z\"\n}), 'ContentCopy');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z\"\n}), 'Delete');","/* eslint-disable jsx-a11y/img-redundant-alt */\r\nimport {\r\n  Box,\r\n  Card,\r\n  CardContent,\r\n  CardMedia,\r\n  Divider,\r\n  Typography,\r\n  Checkbox,\r\n  FormControlLabel,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  IconButton,\r\n  TextField,\r\n  MenuItem,\r\n  Select,\r\n  FormControl,\r\n  InputLabel,\r\n  Alert,\r\n  Chip,\r\n  Tooltip,\r\n  CircularProgress,\r\n  Grid,\r\n} from \"@mui/material\";\r\nimport {\r\n  Edit as EditIcon,\r\n  Check as CheckIcon,\r\n  Close as CloseIcon,\r\n  LocalOffer as OfferIcon,\r\n  PersonAdd as PersonAddIcon,\r\n  Verified as VerifiedIcon,\r\n  Add as AddIcon,\r\n  Business as BusinessIcon,\r\n  Delete as DeleteIcon,\r\n  ContentCopy as CopyIcon,\r\n  Restaurant as RestaurantIcon,\r\n  Discount as DiscountIcon,\r\n  Percent as PercentIcon,\r\n  AttachMoney as MoneyIcon,\r\n} from \"@mui/icons-material\";\r\nimport dayjs from \"dayjs\";\r\nimport { useFormik } from \"formik\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport PhoneInput from \"react-phone-input-2\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport * as Yup from \"yup\";\r\nimport CustomButton from \"../components/CustomButton\";\r\nimport RenderRazorpay from \"../components/Payments/RanderPayments\";\r\nimport color from \"../components/color\";\r\nimport { BoxStyle, CustomTextField } from \"../components/style\";\r\nimport { getUserId, isLoggedIn } from \"../services/axiosClient\";\r\nimport { createOrder, getHotelDiscount, getProfile, sendOTP, updateGST } from \"../services/services\";\r\nimport LoginOtpModal from \"./Account/LoginOtpModal\";\r\nimport InfoIcon from \"@mui/icons-material/Info\";\r\nimport \"react-phone-input-2/lib/style.css\";\r\n\r\n// Import GST APIs\r\nimport { createGST, getAllGSTByUserId, deleteGST } from \"../services/services\";\r\nimport { calculatePriceBreakdown1 } from \"../components/Payments/Calculation\";\r\n\r\n// Declare Cashfree on window object\r\ndeclare global {\r\n  interface Window {\r\n    Cashfree: any;\r\n  }\r\n}\r\n\r\n// UPDATED VALIDATION SCHEMA WITH PHONE VALIDATION\r\nconst validationSchema = Yup.object({\r\n  name: Yup.string().required(\"Guest name is required\"),\r\n  email: Yup.string().email(\"Invalid email\").optional(),\r\n  phoneNumber: Yup.string()\r\n    .required(\"Phone number is required\")\r\n    .test('is-valid-phone', 'Enter a valid phone number', (value) => {\r\n      if (!value) return false;\r\n      const phoneWithoutCode = value.slice(2);\r\n      return phoneWithoutCode.length >= 10;\r\n    }),\r\n});\r\n\r\n\r\n\r\n// ========== GUEST DISTRIBUTION AND EXTRA CHARGE CALCULATION ==========\r\nconst distributeGuestsToRooms = (\r\n  totalGuests: number,\r\n  standardOccupancy: number,\r\n  maxOccupancy: number,\r\n  additionalGuestRate: number\r\n) => {\r\n  let requiredRooms = 0;\r\n  let extraGuestCount = 0;\r\n  let extraGuestCharge = 0;\r\n  const guestsPerRoom: number[] = [];\r\n\r\n  if (totalGuests <= 0) {\r\n    return {\r\n      requiredRooms: 1,\r\n      extraGuestCount: 0,\r\n      extraGuestCharge: 0,\r\n      guestsPerRoom: [0]\r\n    };\r\n  }\r\n\r\n  // Calculate required rooms based on MAXIMUM occupancy\r\n  requiredRooms = Math.ceil(totalGuests / maxOccupancy);\r\n\r\n  // DISTRIBUTE GUESTS EVENLY ACROSS ROOMS\r\n  let remainingGuests = totalGuests;\r\n\r\n  // First, fill each room with standard occupancy\r\n  for (let i = 0; i < requiredRooms; i++) {\r\n    if (remainingGuests >= standardOccupancy) {\r\n      guestsPerRoom[i] = standardOccupancy;\r\n      remainingGuests -= standardOccupancy;\r\n    } else {\r\n      guestsPerRoom[i] = remainingGuests;\r\n      remainingGuests = 0;\r\n    }\r\n  }\r\n\r\n  // Now distribute remaining guests as extra guests\r\n  let roomIndex = 0;\r\n  while (remainingGuests > 0 && roomIndex < requiredRooms) {\r\n    // Check if this room can take more guests (up to max occupancy)\r\n    if (guestsPerRoom[roomIndex] < maxOccupancy) {\r\n      guestsPerRoom[roomIndex] += 1;\r\n      remainingGuests -= 1;\r\n    }\r\n    roomIndex++;\r\n\r\n    // If we've checked all rooms and still have guests, loop back\r\n    if (roomIndex >= requiredRooms && remainingGuests > 0) {\r\n      roomIndex = 0;\r\n    }\r\n  }\r\n\r\n  // Calculate extra guest charges PER ROOM\r\n  guestsPerRoom.forEach(guestsInRoom => {\r\n    if (guestsInRoom > standardOccupancy) {\r\n      const extraInThisRoom = guestsInRoom - standardOccupancy;\r\n      extraGuestCount += extraInThisRoom;\r\n      extraGuestCharge += extraInThisRoom * additionalGuestRate;\r\n    }\r\n  });\r\n\r\n  return {\r\n    requiredRooms,\r\n    extraGuestCount,\r\n    extraGuestCharge,\r\n    guestsPerRoom,\r\n  };\r\n};\r\n\r\nconst BookingSummary = () => {\r\n  const location = useLocation();\r\n  const hotel = location.state?.hotelData;\r\n  const room = location.state?.selectedRoom;\r\n  const selectedSlot = location.state?.selectedSlot;\r\n  const selectedMealPlan = location.state?.selectedMealPlan;\r\n  const pricingDetails = location.state?.pricingDetails || {};\r\n  const inventoryData = location.state?.inventoryData || [];\r\n\r\n  const queryParams = new URLSearchParams(location.search);\r\n \r\n\r\n  const initialBookingType = queryParams.get(\"bookingType\");\r\n  const initialCheckinTime = queryParams.get(\"time\");\r\n  const initialCheckinDate = queryParams.get(\"checkinDate\");\r\n  const initialCheckOutDate = queryParams.get(\"checkOutDate\");\r\n  const initialRooms = queryParams.get(\"rooms\");\r\n  const initialAdults = queryParams.get(\"adults\");\r\n  const initialChildren = queryParams.get(\"children\");\r\n\r\n  // State for editable dates\r\n  const [bookingType, setBookingType] = useState(initialBookingType);\r\n  const [checkinTime, setCheckinTime] = useState(initialCheckinTime || \"12:00\");\r\n  const [checkinDate, setCheckinDate] = useState(initialCheckinDate || dayjs().format(\"YYYY-MM-DD\"));\r\n  const [checkOutDate, setCheckOutDate] = useState(initialCheckOutDate || dayjs().add(1, 'day').format(\"YYYY-MM-DD\"));\r\n  const [rooms, setRooms] = useState(initialRooms || \"1\");\r\n  const [adults, setAdults] = useState(initialAdults || \"1\");\r\n  const [children, setChildren] = useState(initialChildren || \"0\");\r\n  const [isLoadingPayment, setIsLoadingPayment] = useState(false);\r\n  // State for editing\r\n  const [editingCheckin, setEditingCheckin] = useState(false);\r\n  const [editingCheckout, setEditingCheckout] = useState(false);\r\n  const [editingTime, setEditingTime] = useState(false);\r\n  const [tempCheckinDate, setTempCheckinDate] = useState(initialCheckinDate || dayjs().format(\"YYYY-MM-DD\"));\r\n  const [tempCheckOutDate, setTempCheckOutDate] = useState(initialCheckOutDate || dayjs().add(1, 'day').format(\"YYYY-MM-DD\"));\r\n  const [tempCheckinTime, setTempCheckinTime] = useState(initialCheckinTime || \"12:00\");\r\n\r\n  // Extract initial slot duration\r\n  const value = selectedSlot?.slot;\r\n  const number = value?.match(/\\d+/)?.[0];\r\n  const initialExtractedNumber = number ? parseInt(number, 10) : 3;\r\n  const [slotDuration, setSlotDuration] = useState(initialExtractedNumber);\r\n  const [tempSlotDuration, setTempSlotDuration] = useState(initialExtractedNumber);\r\n\r\n  const [user, setUser] = useState<any>({});\r\n  const [showOtpModal, setShowOtpModal] = useState(false);\r\n  const [otpData, setOtpData] = useState({\r\n    phone: \"\",\r\n    name: \"\",\r\n    email: \"\",\r\n    token: \"\",\r\n  });\r\n  const [orderDetails, setOrderDetails] = useState<any>(null);\r\n\r\n  // Terms & Conditions state\r\n  const [termsChecked, setTermsChecked] = useState(false);\r\n  const [termsOpen, setTermsOpen] = useState(false);\r\n\r\n  // Discount states\r\n  const [hotelDiscountData, setHotelDiscountData] = useState<any[]>([]);\r\n  const [loadingHotelDiscount, setLoadingHotelDiscount] = useState(false);\r\n  const [hotelDiscountApplied, setHotelDiscountApplied] = useState(false);\r\n  const [hotelDiscount, setHotelDiscount] = useState<{\r\n    id: number;\r\n    hotelId: number;\r\n    roomId: number | null;\r\n    discountType: 'percentage' | 'flat';\r\n    discountValue: number;\r\n    isActive: boolean;\r\n  } | null>(null);\r\n\r\n  // Coupon state\r\n  const [couponCode, setCouponCode] = useState(\"HUTS4U\");\r\n  const [couponApplied, setCouponApplied] = useState(true);\r\n  const [couponValue] = useState(0.05); // 5% coupon\r\n\r\n  // Validation error state\r\n  const [validationError, setValidationError] = useState<string | null>(null);\r\n\r\n  // GST state\r\n  const [gstSectionOpen, setGstSectionOpen] = useState(false);\r\n  const [gstinNumber, setGstinNumber] = useState(\"\");\r\n  const [legalName, setLegalName] = useState(\"\");\r\n  const [gstAddress, setGstAddress] = useState(\"\");\r\n  const [gstVerificationStatus, setGstVerificationStatus] = useState<\"none\" | \"verified\" | \"pending\" | \"invalid\">(\"none\");\r\n  const [verifyingGst, setVerifyingGst] = useState(false);\r\n  const [userGSTRecords, setUserGSTRecords] = useState<any[]>([]);\r\n  const [selectedGSTRecord, setSelectedGSTRecord] = useState<any>(null);\r\n  const [loadingGSTRecords, setLoadingGSTRecords] = useState(false);\r\n  const [showNewGSTForm, setShowNewGSTForm] = useState(false);\r\n  const [deletingGST, setDeletingGST] = useState<string | null>(null);\r\n\r\n  // Store calculated price\r\n  const [calculatedPrice, setCalculatedPrice] = useState<any>(null);\r\n\r\n  // Meal plan state\r\n  const [mealPlan, setMealPlan] = useState<string>(selectedMealPlan || \"EP\");\r\n  const [mealPlanPrice, setMealPlanPrice] = useState<number>(pricingDetails?.mealPlanPrice || 0);\r\n  const [mealPlanDescription, setMealPlanDescription] = useState<string>(pricingDetails?.mealPlanDescription || \"\");\r\n\r\n  // Refs for scrolling to fields\r\n  const nameFieldRef = useRef<HTMLInputElement>(null);\r\n  const phoneFieldRef = useRef<HTMLDivElement>(null);\r\n  const gstinFieldRef = useRef<HTMLInputElement>(null);\r\n\r\n  // ========== UPDATED GUEST DISTRIBUTION LOGIC ==========\r\n  const calculateGuestDistribution = () => {\r\n    const totalGuests = Number(adults) + Number(children);\r\n    const standardOccupancy = room?.standardRoomOccupancy || 1;\r\n    const maxOccupancy = room?.maxRoomOccupancy || 1;\r\n    const additionalGuestRate = room?.additionalGuestRate || 0;\r\n\r\n    return distributeGuestsToRooms(\r\n      totalGuests,\r\n      standardOccupancy,\r\n      maxOccupancy,\r\n      additionalGuestRate\r\n    );\r\n  };\r\n\r\n  const guestDistribution = calculateGuestDistribution();\r\n  const {\r\n    requiredRooms,\r\n    extraGuestCount,\r\n    extraGuestCharge,\r\n    guestsPerRoom\r\n  } = guestDistribution;\r\n\r\n  // FIXED: Get inventory-based price for the selected slot and date\r\n  const getInventoryPriceForDate = (slot: string): number => {\r\n    if (!room || !checkinDate || !slot) return 0;\r\n\r\n    const checkDay = dayjs(checkinDate).format('YYYY-MM-DD');\r\n    const dayInventory = inventoryData?.find((inv: any) =>\r\n      dayjs(inv.date).format('YYYY-MM-DD') === checkDay\r\n    );\r\n\r\n    if (!dayInventory) {\r\n      // If no inventory data, fall back to room rates\r\n      switch (slot) {\r\n        case 'rateFor1Night':\r\n          return room.rateFor1Night || 0;\r\n        case 'rateFor3Hour':\r\n          return room.rateFor3Hour || 0;\r\n        case 'rateFor6Hour':\r\n          return room.rateFor6Hour || 0;\r\n        case 'rateFor12Hour':\r\n          return room.rateFor12Hour || 0;\r\n        default:\r\n          return 0;\r\n      }\r\n    }\r\n\r\n    // Return inventory-specific rate\r\n    switch (slot) {\r\n      case 'rateFor1Night':\r\n        return dayInventory.overnightRate || room.rateFor1Night || 0;\r\n      case 'rateFor3Hour':\r\n        return dayInventory.threeHourRate || room.rateFor3Hour || 0;\r\n      case 'rateFor6Hour':\r\n        return dayInventory.sixHourRate || room.rateFor6Hour || 0;\r\n      case 'rateFor12Hour':\r\n        return dayInventory.twelveHourRate || room.rateFor12Hour || 0;\r\n      default:\r\n        return 0;\r\n    }\r\n  };\r\n\r\n  // Get the slot key based on booking type\r\n  const getSlotKey = (): string => {\r\n    if (bookingType === \"hourly\") {\r\n      switch (slotDuration) {\r\n        case 3:\r\n          return 'rateFor3Hour';\r\n        case 6:\r\n          return 'rateFor6Hour';\r\n        case 12:\r\n          return 'rateFor12Hour';\r\n        default:\r\n          return 'rateFor3Hour';\r\n      }\r\n    } else {\r\n      return 'rateFor1Night';\r\n    }\r\n  };\r\n\r\n  // Check slot availability\r\n  const checkSlotAvailability = (): { isAvailable: boolean, message: string } => {\r\n    if (!room) {\r\n      return {\r\n        isAvailable: false,\r\n        message: 'Room information is missing'\r\n      };\r\n    }\r\n\r\n    const roomStatus = room.status?.toLowerCase();\r\n    const isStatusAvailable = roomStatus === \"available\" || roomStatus === \"active\";\r\n\r\n    if (!isStatusAvailable) {\r\n      return {\r\n        isAvailable: false,\r\n        message: 'This room is currently not available'\r\n      };\r\n    }\r\n\r\n    return {\r\n      isAvailable: true,\r\n      message: 'Available'\r\n    };\r\n  };\r\n\r\n  const slotAvailability = checkSlotAvailability();\r\n\r\n  // Get unit base price from inventory or room\r\n  const getUnitBasePrice = (): number => {\r\n    const slotKey = getSlotKey();\r\n    return getInventoryPriceForDate(slotKey);\r\n  };\r\n\r\n  const unitBase = Number(getUnitBasePrice());\r\n\r\n  // Auto-update rooms based on occupancy\r\n  useEffect(() => {\r\n    if (Number(rooms) !== requiredRooms) {\r\n      setRooms(requiredRooms.toString());\r\n    }\r\n  }, [adults, children, room]);\r\n\r\n  // Fetch hotel discounts when component mounts or hotel changes - USE MYSQL ID\r\n  useEffect(() => {\r\n    if (hotel?.id) {\r\n      fetchHotelDiscounts();\r\n    }\r\n  }, [hotel?.id]);\r\n\r\n  // Initialize calculated price from pricingDetails\r\n  useEffect(() => {\r\n    if (pricingDetails) {\r\n      setCalculatedPrice(pricingDetails);\r\n      // Set meal plan details from pricingDetails\r\n      if (pricingDetails.mealPlanPrice) {\r\n        setMealPlanPrice(pricingDetails.mealPlanPrice);\r\n      }\r\n      if (pricingDetails.mealPlanDescription) {\r\n        setMealPlanDescription(pricingDetails.mealPlanDescription);\r\n      }\r\n    }\r\n  }, [pricingDetails]);\r\n\r\n  // Fetch hotel discounts - USE MYSQL ID\r\n  const fetchHotelDiscounts = async () => {\r\n    if (!hotel?.id) return;\r\n\r\n    setLoadingHotelDiscount(true);\r\n    try {\r\n      const payload = {\r\n        data: {\r\n          filter: \"\",\r\n          hotelId: parseInt(hotel.id), // Use MySQL ID\r\n          isActive: true\r\n        },\r\n        page: 0,\r\n        pageSize: 1000,\r\n        order: [[\"createdAt\", \"ASC\"]]\r\n      };\r\n\r\n      const response = await getHotelDiscount(payload);\r\n\r\n      // Handle different response structures\r\n      let discountsData = [];\r\n      if (response?.data?.data?.rows) {\r\n        discountsData = response.data.data.rows;\r\n      } else if (response?.data?.data) {\r\n        discountsData = response.data.data;\r\n      } else if (response?.data) {\r\n        discountsData = Array.isArray(response.data) ? response.data : [response.data];\r\n      }\r\n\r\n      setHotelDiscountData(discountsData);\r\n\r\n      // Auto-apply the first active discount\r\n      if (discountsData.length > 0) {\r\n        const firstDiscount = discountsData[0];\r\n        setHotelDiscount({\r\n          id: firstDiscount.id,\r\n          hotelId: firstDiscount.hotelId,\r\n          roomId: firstDiscount.roomId,\r\n          discountType: firstDiscount.discountType,\r\n          discountValue: parseFloat(firstDiscount.discountValue) || 0,\r\n          isActive: firstDiscount.isActive\r\n        });\r\n        setHotelDiscountApplied(true);\r\n        toast.success(`Hotel discount applied: ${firstDiscount.discountValue}${firstDiscount.discountType === 'percentage' ? '%' : ''} off`);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching hotel discounts:\", error);\r\n      toast.error(\"Failed to load hotel discounts\");\r\n    } finally {\r\n      setLoadingHotelDiscount(false);\r\n    }\r\n  };\r\n\r\n  // Load user profile and GST records on component mount\r\n  useEffect(() => {\r\n    if (isLoggedIn()) {\r\n      loadUserProfileAndGST();\r\n    }\r\n  }, []);\r\n\r\n  // Load user profile and GST records\r\n  const loadUserProfileAndGST = async () => {\r\n    try {\r\n      const profileRes = await getProfile();\r\n      const userData = profileRes?.data?.data;\r\n      setUser(userData);\r\n\r\n      if (userData?._id) {\r\n        // Load user's GST records\r\n        loadUserGSTRecords(userData._id);\r\n      }\r\n    } catch (err) {\r\n      toast.error(\"Failed to load user profile\");\r\n    }\r\n  };\r\n\r\n  const loadUserGSTRecords = async (userId: string) => {\r\n    if (!userId) return;\r\n\r\n    setLoadingGSTRecords(true);\r\n    try {\r\n      const response = await getAllGSTByUserId(userId);\r\n\r\n      let gstRecords: any[] = [];\r\n\r\n      // Extract from response.data.data array\r\n      if (response?.data?.data && Array.isArray(response.data.data)) {\r\n        gstRecords = response.data.data;\r\n      }\r\n      // If response.data itself is array\r\n      else if (Array.isArray(response?.data)) {\r\n        gstRecords = response.data;\r\n      }\r\n\r\n      // Transform the data: extract gst_detail objects\r\n      const transformedRecords = gstRecords.map((record: any) => {\r\n        // If record has gst_detail property, use that\r\n        if (record.gst_detail && typeof record.gst_detail === 'object') {\r\n          return {\r\n            ...record.gst_detail,\r\n            // Keep mapping info if needed\r\n            mappingId: record.id,\r\n            userId: record.userId,\r\n            gstId: record.gstId,\r\n            isPrimary: record.isPrimary || false,\r\n            mappingCreatedAt: record.createdAt,\r\n            mappingUpdatedAt: record.updatedAt,\r\n          };\r\n        }\r\n        // Otherwise use the record as is\r\n        return record;\r\n      });\r\n\r\n      setUserGSTRecords(transformedRecords);\r\n\r\n      // If user has verified GST records, automatically select the first verified one\r\n      const verifiedRecords = transformedRecords.filter((record: any) => {\r\n        return (\r\n          record.verified === true ||\r\n          record.gstStatus === \"Active\"\r\n        );\r\n      });\r\n\r\n      if (verifiedRecords.length > 0) {\r\n        const firstRecord = verifiedRecords[0];\r\n        setSelectedGSTRecord(firstRecord);\r\n        setGstinNumber(firstRecord.gstNumber || \"\");\r\n        setLegalName(firstRecord.legalName || firstRecord.tradeName || \"\");\r\n        setGstAddress(firstRecord.address || \"\");\r\n        setGstVerificationStatus(\"verified\");\r\n\r\n        // Auto-open GST section if records exist\r\n        setGstSectionOpen(true);\r\n\r\n        toast.success(`Auto-selected GST: ${firstRecord.gstNumber}`);\r\n      } else if (transformedRecords.length > 0) {\r\n        // Auto-open GST section if records exist\r\n        setGstSectionOpen(true);\r\n      }\r\n    } catch (error: any) {\r\n      console.error(\"Error loading GST records:\", error);\r\n    } finally {\r\n      setLoadingGSTRecords(false);\r\n    }\r\n  };\r\n\r\n  // Handle hotel discount apply/remove\r\n  const handleApplyHotelDiscount = () => {\r\n    if (hotelDiscountData.length > 0 && !hotelDiscountApplied) {\r\n      const firstDiscount = hotelDiscountData[0];\r\n      setHotelDiscount({\r\n        id: firstDiscount.id,\r\n        hotelId: firstDiscount.hotelId,\r\n        roomId: firstDiscount.roomId,\r\n        discountType: firstDiscount.discountType,\r\n        discountValue: parseFloat(firstDiscount.discountValue) || 0,\r\n        isActive: firstDiscount.isActive\r\n      });\r\n      setHotelDiscountApplied(true);\r\n      toast.success(`Hotel discount applied: ${firstDiscount.discountValue}${firstDiscount.discountType === 'percentage' ? '%' : ''} off`);\r\n    }\r\n  };\r\n\r\n  const handleRemoveHotelDiscount = () => {\r\n    setHotelDiscount(null);\r\n    setHotelDiscountApplied(false);\r\n    toast.info(\"Hotel discount removed\");\r\n  };\r\n\r\n  // Handle coupon removal\r\n  const handleRemoveCoupon = () => {\r\n    setCouponApplied(false);\r\n    toast.info(\"Huts4u Discount removed\");\r\n  };\r\n\r\n  const handleApplyCoupon = () => {\r\n    setCouponApplied(true);\r\n    toast.success(\"Huts4u Discount applied!\");\r\n  };\r\n\r\n  // Handle GST verification and creation\r\n  const handleVerifyGST = async () => {\r\n    if (!gstinNumber.trim()) {\r\n      toast.error(\"Please enter GSTIN number\");\r\n      gstinFieldRef.current?.focus();\r\n      return;\r\n    }\r\n\r\n    // Basic GSTIN format validation (15 characters, alphanumeric)\r\n    const gstinRegex = /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/i;\r\n    if (!gstinRegex.test(gstinNumber.toUpperCase())) {\r\n      toast.error(\"Please enter a valid 15-digit GSTIN format\");\r\n      setGstVerificationStatus(\"invalid\");\r\n      return;\r\n    }\r\n\r\n    setVerifyingGst(true);\r\n    setGstVerificationStatus(\"pending\");\r\n\r\n    try {\r\n      // Get user ID if logged in\r\n      const userId = isLoggedIn() ? getUserId() : null;\r\n\r\n      // Prepare GST payload - only include userId if logged in\r\n      const gstPayload = {\r\n        gstNumber: gstinNumber.toUpperCase(),\r\n        ...(userId && { userId })\r\n      };\r\n\r\n      // Call createGST API (which will verify via API)\r\n      const response = await createGST(gstPayload);\r\n\r\n      if (response?.data?.data) {\r\n        const gstData = response.data?.data || response.data?.result;\r\n\r\n        setGstVerificationStatus(\"verified\");\r\n        setLegalName(gstData?.legalName || gstData?.lgnm || \"\");\r\n        setGstAddress(gstData?.address || gstData?.pradr?.adr || \"\");\r\n\r\n        // Create selected record object\r\n        const selectedRecord = {\r\n          ...gstData,\r\n          id: gstData?.id,\r\n          gstNumber: gstData?.gstNumber || gstinNumber.toUpperCase(),\r\n          legalName: gstData?.legalName || gstData?.lgnm || \"\",\r\n          address: gstData?.address || gstData?.pradr?.adr || \"\",\r\n          verified: true\r\n        };\r\n\r\n        setSelectedGSTRecord(selectedRecord);\r\n\r\n        toast.success(\"GSTIN verified successfully!\");\r\n\r\n        // If user is logged in, reload their GST records\r\n        if (userId) {\r\n          loadUserGSTRecords(userId);\r\n        }\r\n\r\n      } else if (response?.data?.status === \"BAD_REQUEST\") {\r\n        // Handle duplicate GST or verification failure\r\n        const errorMessage = response.data?.message || \"GST verification failed\";\r\n\r\n        if (errorMessage.includes(\"already exists\")) {\r\n          // GST already exists in system\r\n          const existingGST = response.data?.data;\r\n\r\n          // Update with user ID if logged in\r\n          if (userId && existingGST?.id) {\r\n            try {\r\n              const updateResponse = await updateGST(existingGST.id, { userId });\r\n              if (updateResponse?.data?.success) {\r\n                toast.success(\"GST linked to your account!\");\r\n              }\r\n            } catch (updateError) {\r\n              console.error(\"Error updating GST user ID:\", updateError);\r\n            }\r\n          }\r\n\r\n          setGstVerificationStatus(\"verified\");\r\n          setGstinNumber(existingGST.gstNumber || gstinNumber.toUpperCase());\r\n          setLegalName(existingGST.legalName || \"\");\r\n          setGstAddress(existingGST.address || \"\");\r\n          setSelectedGSTRecord(existingGST);\r\n\r\n          toast.info(\"Using existing GST record\");\r\n        } else {\r\n          setGstVerificationStatus(\"invalid\");\r\n          toast.error(errorMessage);\r\n        }\r\n      } else {\r\n        setGstVerificationStatus(\"invalid\");\r\n        toast.error(\"GST verification failed. Please try again.\");\r\n      }\r\n    } catch (error: any) {\r\n      console.error(\"GST verification error:\", error);\r\n      setGstVerificationStatus(\"invalid\");\r\n\r\n      // Check if it's a duplicate GST error\r\n      if (error.response?.data?.status === \"BAD_REQUEST\") {\r\n        const errorData = error.response.data;\r\n\r\n        if (errorData?.data) {\r\n          // Existing GST found\r\n          setGstVerificationStatus(\"verified\");\r\n          setLegalName(errorData.data.legalName || \"\");\r\n          setGstAddress(errorData.data.address || \"\");\r\n          setSelectedGSTRecord(errorData.data);\r\n          toast.info(\"Using existing GST record\");\r\n        } else {\r\n          toast.error(errorData?.message || \"Invalid GST number\");\r\n        }\r\n      } else {\r\n        toast.error(\"Failed to verify GST. Please check your internet connection.\");\r\n      }\r\n    } finally {\r\n      setVerifyingGst(false);\r\n    }\r\n  };\r\n\r\n  // Handle GST record selection from saved records\r\n  const handleGSTRecordSelect = (record: any) => {\r\n    setSelectedGSTRecord(record);\r\n    setGstinNumber(record.gstNumber || \"\");\r\n    setLegalName(record.legalName || \"\");\r\n    setGstAddress(record.address || \"\");\r\n    setGstVerificationStatus(\r\n      record.verified === true || record.gstStatus === \"Active\"\r\n        ? \"verified\"\r\n        : \"none\"\r\n    );\r\n    setShowNewGSTForm(false);\r\n    toast.success(`Selected GSTIN: ${record.gstNumber}`);\r\n  };\r\n\r\n  // Handle adding new GST\r\n  const handleAddNewGST = () => {\r\n    setShowNewGSTForm(true);\r\n    setGstinNumber(\"\");\r\n    setLegalName(\"\");\r\n    setGstAddress(\"\");\r\n    setGstVerificationStatus(\"none\");\r\n    setSelectedGSTRecord(null);\r\n  };\r\n\r\n  // Handle deleting GST mapping (unlinking from user)\r\n  const handleDeleteGST = async (gstId: string) => {\r\n    if (!isLoggedIn()) {\r\n      toast.error(\"Please login to manage GST records\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(\"Are you sure you want to remove this GST from your account?\")) {\r\n      return;\r\n    }\r\n\r\n    setDeletingGST(gstId);\r\n    try {\r\n      const payLoad = {\r\n        userId: getUserId()\r\n      }\r\n      const response = await deleteGST(gstId, payLoad.userId);\r\n      if (response?.data?.success) {\r\n        toast.success(\"GST removed from your account\");\r\n\r\n        // Update local state\r\n        setUserGSTRecords(prev => prev.filter(record =>\r\n          record.id !== gstId && record._id !== gstId\r\n        ));\r\n\r\n        // Clear selection if deleted record was selected\r\n        if (selectedGSTRecord &&\r\n          (selectedGSTRecord.id === gstId || selectedGSTRecord._id === gstId)) {\r\n          handleClearGST();\r\n        }\r\n      } else {\r\n        toast.error(\"Failed to remove GST\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error deleting GST:\", error);\r\n      toast.error(\"Failed to remove GST\");\r\n    } finally {\r\n      setDeletingGST(null);\r\n    }\r\n  };\r\n\r\n  // Function to copy GSTIN to clipboard\r\n  const handleCopyGSTIN = (gstNumber: string) => {\r\n    navigator.clipboard.writeText(gstNumber)\r\n      .then(() => toast.success(\"GSTIN copied to clipboard\"))\r\n      .catch(() => toast.error(\"Failed to copy GSTIN\"));\r\n  };\r\n\r\n  // Handle clearing GST selection\r\n  const handleClearGST = () => {\r\n    setSelectedGSTRecord(null);\r\n    setGstinNumber(\"\");\r\n    setLegalName(\"\");\r\n    setGstAddress(\"\");\r\n    setGstVerificationStatus(\"none\");\r\n    setShowNewGSTForm(false);\r\n    toast.info(\"GST selection cleared\");\r\n  };\r\n\r\n  // Handle date changes and update price\r\n  const handleCheckinDateSave = () => {\r\n    if (!tempCheckinDate) {\r\n      toast.error(\"Please select a check-in date\");\r\n      return;\r\n    }\r\n\r\n    if (!dayjs(tempCheckinDate, \"YYYY-MM-DD\", true).isValid()) {\r\n      toast.error(\"Invalid date format. Please use YYYY-MM-DD format\");\r\n      return;\r\n    }\r\n\r\n    if (bookingType === \"hourly\") {\r\n      setCheckinDate(tempCheckinDate);\r\n      setEditingCheckin(false);\r\n      toast.success(\"Check-in date updated\");\r\n    } else {\r\n      if (dayjs(tempCheckinDate).isAfter(dayjs(tempCheckOutDate))) {\r\n        toast.error(\"Check-in date cannot be after check-out date\");\r\n        return;\r\n      }\r\n      setCheckinDate(tempCheckinDate);\r\n      setEditingCheckin(false);\r\n      toast.success(\"Check-in date updated\");\r\n    }\r\n  };\r\n\r\n  const handleCheckoutDateSave = () => {\r\n    if (!tempCheckOutDate) {\r\n      toast.error(\"Please select a check-out date\");\r\n      return;\r\n    }\r\n\r\n    if (!dayjs(tempCheckOutDate, \"YYYY-MM-DD\", true).isValid()) {\r\n      toast.error(\"Invalid date format. Please use YYYY-MM-DD format\");\r\n      return;\r\n    }\r\n\r\n    if (dayjs(tempCheckOutDate).isBefore(dayjs(tempCheckinDate))) {\r\n      toast.error(\"Check-out date cannot be before check-in date\");\r\n      return;\r\n    }\r\n    setCheckOutDate(tempCheckOutDate);\r\n    setEditingCheckout(false);\r\n    toast.success(\"Check-out date updated\");\r\n  };\r\n\r\n  // Handle time changes for hourly bookings\r\n  const handleTimeSave = () => {\r\n    if (!tempCheckinTime) {\r\n      toast.error(\"Please select a check-in time\");\r\n      return;\r\n    }\r\n\r\n    // Validate time format\r\n    if (!tempCheckinTime.match(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/)) {\r\n      toast.error(\"Invalid time format. Please use HH:mm format\");\r\n      return;\r\n    }\r\n\r\n    setCheckinTime(tempCheckinTime);\r\n    setSlotDuration(tempSlotDuration);\r\n    setEditingTime(false);\r\n    toast.success(\"Check-in time and duration updated\");\r\n  };\r\n\r\n  // Calculate nights based on dates\r\n  const calculateNights = () => {\r\n    if (!checkinDate || !checkOutDate) return 1;\r\n\r\n    const inDate = dayjs(checkinDate, \"YYYY-MM-DD\", true);\r\n    const outDate = dayjs(checkOutDate, \"YYYY-MM-DD\", true);\r\n\r\n    if (!inDate.isValid() || !outDate.isValid()) return 1;\r\n\r\n    const diff = outDate.diff(inDate, \"day\");\r\n    return Math.max(1, diff);\r\n  };\r\n\r\n  const nights = calculateNights();\r\n\r\n  // Calculate price breakdown WITH MEAL PLAN & DISCOUNTS\r\n  const calculateTotalPrice = () => {\r\n    // If we have calculatedPrice from props or previous calculation, use it\r\n    if (calculatedPrice && !editingCheckin && !editingCheckout && !editingTime) {\r\n      // Calculate multiplier WITHOUT extra guest charges\r\n      let totalMultiplier;\r\n      if (bookingType === \"hourly\") {\r\n        const hoursMultiplier = slotDuration / 3;\r\n        totalMultiplier = requiredRooms * hoursMultiplier;\r\n      } else {\r\n        totalMultiplier = requiredRooms * nights;\r\n      }\r\n\r\n      // Get meal plan price (per room per night)\r\n      const totalMealPlanPrice = mealPlanPrice * requiredRooms * (bookingType === \"hourly\" ? 1 : nights);\r\n\r\n      // Total base price including meal plan\r\n      const totalBasePrice = (calculatedPrice.basePrice || 0) + totalMealPlanPrice;\r\n\r\n      // Calculate breakdown with both discounts\r\n      const breakdown = calculatePriceBreakdown1(\r\n        calculatedPrice.basePrice || 0,\r\n        totalMealPlanPrice,\r\n        {\r\n          hotelDiscountValue: hotelDiscountApplied ? hotelDiscount?.discountValue || 0 : 0,\r\n          hotelDiscountType: hotelDiscountApplied ? hotelDiscount?.discountType || null : null,\r\n          couponApplied,\r\n          couponValue: 0.05 // 5% coupon\r\n        }\r\n      );\r\n\r\n      return {\r\n        ...breakdown,\r\n        nights,\r\n        totalMultiplier,\r\n        bookingType,\r\n        slotDuration,\r\n        requiredRooms,\r\n        unitBase: (calculatedPrice.basePrice || 0) / requiredRooms / (bookingType === \"hourly\" ? slotDuration / 3 : nights),\r\n        totalMealPlanPrice,\r\n        mealPlanDescription,\r\n      };\r\n    }\r\n\r\n    // Otherwise calculate from scratch\r\n    // Calculate multiplier WITHOUT extra guest charges\r\n    let totalMultiplier;\r\n    if (bookingType === \"hourly\") {\r\n      const hoursMultiplier = slotDuration / 3;\r\n      totalMultiplier = requiredRooms * hoursMultiplier;\r\n    } else {\r\n      totalMultiplier = requiredRooms * nights;\r\n    }\r\n\r\n    const totalBasePrice = unitBase * totalMultiplier;\r\n\r\n    // Get meal plan price (per room per night)\r\n    const totalMealPlanPrice = mealPlanPrice * requiredRooms * (bookingType === \"hourly\" ? 1 : nights);\r\n\r\n    // Calculate breakdown with both discounts\r\n    const breakdown = calculatePriceBreakdown1(\r\n      totalBasePrice,\r\n      totalMealPlanPrice,\r\n      {\r\n        hotelDiscountValue: hotelDiscountApplied ? hotelDiscount?.discountValue || 0 : 0,\r\n        hotelDiscountType: hotelDiscountApplied ? hotelDiscount?.discountType || null : null,\r\n        couponApplied,\r\n        couponValue: 0.05 // 5% coupon\r\n      }\r\n    );\r\n\r\n    return {\r\n      ...breakdown,\r\n      nights,\r\n      totalMultiplier,\r\n      bookingType,\r\n      slotDuration,\r\n      requiredRooms,\r\n      unitBase,\r\n      totalMealPlanPrice,\r\n      mealPlanDescription,\r\n    };\r\n  };\r\n\r\n  const priceBreakdown = calculateTotalPrice();\r\n  const {\r\n    basePrice: totalBase,\r\n    mealPlanPrice: totalMealPlan,\r\n    gstOnBase,\r\n    platformFee,\r\n    gstOnPlatform,\r\n    convenienceFee,\r\n    gstOnConvenience,\r\n    totalWithoutDiscount,\r\n    hotelDiscount: hotelDiscountAmount,\r\n    couponDiscount,\r\n    totalDiscount,\r\n    finalPrice,\r\n    unitBase: inventoryUnitBase,\r\n    mealPlanDescription: mealDesc,\r\n  } = priceBreakdown;\r\n\r\n  // Display values for UI\r\n  const displayBase = totalBase + totalMealPlan;\r\n  const displayBasePlus700 = displayBase + 700;\r\n  const displayCombinedBasePlatform = displayBase + platformFee;\r\n  const displayGstTotal = gstOnBase + gstOnPlatform + convenienceFee + gstOnConvenience;\r\n  const payableAfterDiscount = Number(finalPrice.toFixed(2));\r\n\r\n  // Invoice pieces\r\n  const serviceTaxableValue = platformFee;\r\n  const cgstOnService = gstOnPlatform / 2;\r\n  const sgstOnService = gstOnPlatform / 2;\r\n  const convenienceFeeInclGst = convenienceFee + gstOnConvenience;\r\n  const grandTotal = payableAfterDiscount;\r\n\r\n  // In your BookingSummary.tsx, replace the entire handlePayment function:\r\n  const handlePayment = async () => {\r\n    try {\r\n      if (!grandTotal || grandTotal <= 0) {\r\n        toast.error(\"Booking amount cannot be zero.\");\r\n        return;\r\n      }\r\n\r\n      const hotelId = hotel?.id || hotel?._id;\r\n      if (!hotelId) {\r\n        toast.error(\"Hotel information is missing\");\r\n        return;\r\n      }\r\n\r\n      // ================= GST =================\r\n      let gstDataForBooking = null;\r\n      if (gstVerificationStatus === \"verified\" && gstinNumber) {\r\n        gstDataForBooking = {\r\n          gstNumber: gstinNumber,\r\n          legalName,\r\n          address: gstAddress,\r\n          verified: true,\r\n          gstRecordId: selectedGSTRecord?.id || selectedGSTRecord?._id,\r\n          gstStatus: selectedGSTRecord?.gstStatus || \"Active\",\r\n        };\r\n      }\r\n\r\n      // ================= DISCOUNTS =================\r\n      const discountData = {\r\n        hotelDiscount: hotelDiscountApplied\r\n          ? {\r\n            discountId: hotelDiscount?.id,\r\n            discountType: hotelDiscount?.discountType,\r\n            discountValue: hotelDiscount?.discountValue,\r\n            discountAmount: hotelDiscountAmount,\r\n          }\r\n          : null,\r\n        couponDiscount: couponApplied\r\n          ? {\r\n            couponCode,\r\n            discountValue: 0.05,\r\n            discountAmount: couponDiscount,\r\n          }\r\n          : null,\r\n        totalDiscount,\r\n      };\r\n\r\n      // ================= PRICE BREAKDOWN =================\r\n      const pricingDetails = {\r\n        ...priceBreakdown,\r\n        nights,\r\n        rooms: requiredRooms.toString(),\r\n        adults,\r\n        children,\r\n        bookingType,\r\n        checkinDate,\r\n        checkOutDate,\r\n        checkinTime,\r\n        slotDuration,\r\n        extraGuestCount,\r\n        extraGuestCharge,\r\n        guestsPerRoom,\r\n        inventoryData,\r\n        unitBase: inventoryUnitBase,\r\n        mealPlan,\r\n        mealPlanPrice: totalMealPlan,\r\n        mealPlanDescription: mealDesc,\r\n        finalPrice: payableAfterDiscount,\r\n        grandTotal: Math.round(grandTotal),\r\n      };\r\n\r\n      // ================= GUEST INFO =================\r\n      const guestInfo = {\r\n        name: formik.values.name,\r\n        email: formik.values.email || \"guest@huts4u.com\",\r\n        phoneNumber: formik.values.phoneNumber,\r\n      };\r\n\r\n      // ================= TIMING =================\r\n      const timing = calculateCheckoutTime();\r\n\r\n      // ================= PAYLOAD =================\r\n      const payload = {\r\n        amount: Math.round(grandTotal),\r\n        order_currency: \"INR\",\r\n        customerName: formik.values.name,\r\n        customerEmail: formik.values.email || \"guest@huts4u.com\",\r\n        customerPhone: formik.values.phoneNumber,\r\n\r\n        order_meta: {\r\n          return_url: `${window.location.origin}/payment/return`,\r\n        },\r\n\r\n        order_note: \"Hotel Booking\",\r\n\r\n        booking_data: {\r\n          gstDetails: gstDataForBooking,\r\n          discountDetails: discountData,\r\n          bookingType,\r\n          hotelId,\r\n          roomId: room?.id || room?._id,\r\n          mealPlan,\r\n          mealPlanPrice: totalMealPlan,\r\n          checkinDate,\r\n          checkOutDate,\r\n          checkinTime,\r\n          slotDuration,\r\n          rooms: requiredRooms,\r\n          adults,\r\n          children,\r\n          extraGuestCount,\r\n          extraGuestCharge,\r\n          guestsPerRoom,\r\n        },\r\n      };\r\n\r\n      setIsLoadingPayment(true);\r\n\r\n      // ================= CREATE ORDER =================\r\n      const response = await createOrder(payload);\r\n\r\n      const { orderId, paymentSessionId } = response?.data?.data || {};\r\n\r\n      if (!orderId || !paymentSessionId) {\r\n        toast.error(\"Failed to create Cashfree order\");\r\n        return;\r\n      }\r\n\r\n      // ================= COMPLETE BOOKING DATA TO STORE =================\r\n      const completeBookingData = {\r\n        orderId,\r\n        paymentSessionId,\r\n        orderDetails: response?.data?.data, // Store full order details if needed\r\n        bookingDetails: {\r\n          // All the data you need for the payment return page\r\n          hotel: {\r\n            id: hotel?.id || hotel?._id,\r\n            propertyName: hotel?.propertyName,\r\n            address: hotel?.address,\r\n            propertyImages: hotel?.propertyImages,\r\n            receptionEmail: hotel?.receptionEmail,\r\n            receptionMobile: hotel?.receptionMobile,\r\n          },\r\n          room: {\r\n            id: room?.id || room?._id,\r\n            roomCategory: room?.roomCategory,\r\n            standardRoomOccupancy: room?.standardRoomOccupancy,\r\n            maxRoomOccupancy: room?.maxRoomOccupancy,\r\n            additionalGuestRate: room?.additionalGuestRate,\r\n          },\r\n          guestInfo,\r\n          gstDetails: gstDataForBooking,\r\n          discountDetails: discountData,\r\n          timing,\r\n          pricingDetails,\r\n          bookingType,\r\n          checkinDate,\r\n          checkOutDate,\r\n          checkinTime,\r\n          slotDuration,\r\n          rooms: requiredRooms,\r\n          adults,\r\n          children,\r\n          extraGuestCount,\r\n          extraGuestCharge,\r\n          guestsPerRoom,\r\n          inventoryData,\r\n          mealPlan,\r\n          mealPlanPrice: totalMealPlan,\r\n          mealPlanDescription: mealDesc,\r\n          // Store form values for customer details\r\n          customerDetails: {\r\n            customer_name: formik.values.name,\r\n            customer_email: formik.values.email || \"guest@huts4u.com\",\r\n            customer_phone: formik.values.phoneNumber,\r\n          },\r\n          // Store amount for payout calculations\r\n          amount: Math.round(grandTotal),\r\n        },\r\n        // Store the original payload for reference\r\n        originalPayload: payload,\r\n      };\r\n\r\n      // ================= SAVE FOR VERIFICATION =================\r\n      sessionStorage.setItem(\r\n        \"cashfree_booking_data\",\r\n        JSON.stringify(completeBookingData)\r\n      );\r\n\r\n\r\n      // ================= OPEN CASHFREE MODAL =================\r\n      const cashfree = new window.Cashfree({\r\n        mode: \"production\", //  change to \"production\" later\r\n      });\r\n\r\n      await cashfree.checkout({\r\n        paymentSessionId,\r\n        redirectTarget: \"_modal\", //  THIS OPENS MODAL\r\n        theme: {\r\n          primaryColor: \"#6A1B9A\",   //  Purple\r\n          secondaryColor: \"#9C27B0\", // lighter purple\r\n          textColor: \"#FFFFFF\",\r\n          backgroundColor: \"#FFFFFF\",\r\n        },\r\n      });\r\n\r\n      // Redirect after a short delay (Cashfree will handle the redirect)\r\n      setTimeout(() => {\r\n        window.location.href = `/payment/return?order_id=${orderId}`;\r\n      }, 2000);\r\n    } catch (err) {\r\n      console.error(\"Cashfree Payment Error:\", err);\r\n      toast.error(\"Payment failed. Please try again.\");\r\n    } finally {\r\n      setIsLoadingPayment(false);\r\n    }\r\n  };\r\n\r\n\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      name: user.userName || \"\",\r\n      email: user.email || \"\",\r\n      phoneNumber: user.phoneNumber ? `91${user.phoneNumber}` : \"91\",\r\n    },\r\n    validationSchema,\r\n    enableReinitialize: true,\r\n    onSubmit: async (values) => {\r\n      // Clear previous validation error\r\n      setValidationError(null);\r\n\r\n      // Check slot availability first\r\n      if (!slotAvailability.isAvailable) {\r\n        setValidationError(slotAvailability.message);\r\n        return;\r\n      }\r\n\r\n      // Check for required fields before terms\r\n      if (!values.name.trim()) {\r\n        setValidationError(\"Guest name is required\");\r\n        nameFieldRef.current?.focus();\r\n        nameFieldRef.current?.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n        return;\r\n      }\r\n\r\n      if (!values.phoneNumber || values.phoneNumber === \"91\" || values.phoneNumber.length < 12) {\r\n        setValidationError(\"Valid phone number is required\");\r\n        phoneFieldRef.current?.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n        return;\r\n      }\r\n\r\n      if (!termsChecked) {\r\n        setValidationError(\"Please accept Terms & Conditions before proceeding.\");\r\n        return;\r\n      }\r\n\r\n      if (isLoggedIn()) {\r\n        // Direct payment for logged-in users\r\n        await handlePayment();\r\n      } else {\r\n        // For guest users, first send OTP\r\n        const payLoad = {\r\n          name: values.name,\r\n          email: values.email,\r\n          phone: values.phoneNumber.slice(2),\r\n        };\r\n\r\n        try {\r\n          const res = await sendOTP(payLoad);\r\n          setShowOtpModal(true);\r\n          toast(\"OTP sent successfully. Please verify the OTP.\");\r\n          setOtpData({\r\n            phone: values.phoneNumber.slice(2),\r\n            name: values.name,\r\n            email: values.email,\r\n            token: res?.data?.data,\r\n          });\r\n        } catch (err) {\r\n          console.log(err);\r\n          toast.error(\"Failed to send OTP. Please try again.\");\r\n        }\r\n      }\r\n    },\r\n  });\r\n\r\n  const handleOtpSuccess = () => {\r\n    setShowOtpModal(false);\r\n\r\n    // If GST is verified but doesn't have user ID, update it\r\n    if (gstVerificationStatus === \"verified\" && selectedGSTRecord &&\r\n      isLoggedIn() && !selectedGSTRecord.userId) {\r\n      updateGSTRecordWithUserId();\r\n    } else {\r\n      handlePayment();\r\n    }\r\n  };\r\n\r\n  // Function to update GST record with user ID\r\n  const updateGSTRecordWithUserId = async () => {\r\n    try {\r\n      const userId = getUserId();\r\n      const gstId = selectedGSTRecord?.id || selectedGSTRecord?._id;\r\n\r\n      if (userId && gstId) {\r\n        // Update GST record with user ID\r\n        const updatePayload = { userId };\r\n        const response = await updateGST(gstId, updatePayload);\r\n\r\n        if (response?.data?.success) {\r\n          toast.success(\"GST record linked to your account!\");\r\n\r\n          // Reload GST records to get updated data\r\n          loadUserGSTRecords(userId);\r\n        }\r\n      }\r\n\r\n      // Proceed to payment\r\n      handlePayment();\r\n    } catch (error) {\r\n      console.error(\"Error updating GST with user ID:\", error);\r\n      toast.error(\"Could not link GST to account. Proceeding with payment...\");\r\n      handlePayment();\r\n    }\r\n  };\r\n\r\n  const textContainerRef = useRef<HTMLDivElement>(null);\r\n  const [imageHeight, setImageHeight] = useState(\"auto\");\r\n\r\n  // Updated calculateCheckoutTime function\r\n  const calculateCheckoutTime = () => {\r\n    if (bookingType === \"hourly\" && checkinTime && checkinDate && slotDuration) {\r\n      const checkInDateTime = dayjs(`${checkinDate} ${checkinTime}`, \"YYYY-MM-DD HH:mm\");\r\n      const checkOutDateTime = checkInDateTime.add(slotDuration, \"hour\");\r\n\r\n      return {\r\n        checkInDate: checkInDateTime.format(\"DD MMM YYYY\"),\r\n        checkInTime: checkInDateTime.format(\"hh:mm A\"),\r\n        checkOutDate: checkOutDateTime.format(\"DD MMM YYYY\"),\r\n        checkOutTime: checkOutDateTime.format(\"hh:mm A\"),\r\n        duration: `${slotDuration} hrs`,\r\n        bookingType: \"hourly\",\r\n      };\r\n    } else {\r\n      const nights = calculateNights();\r\n      return {\r\n        checkInDate: dayjs(checkinDate, \"YYYY-MM-DD\").format(\"DD MMM YYYY\"),\r\n        checkInTime: \"12:00 PM\",\r\n        checkOutDate: dayjs(checkOutDate, \"YYYY-MM-DD\").format(\"DD MMM YYYY\"),\r\n        checkOutTime: \"11:00 AM\",\r\n        duration: `${nights} night${nights > 1 ? 's' : ''}`,\r\n        bookingType: \"daily\",\r\n      };\r\n    }\r\n  };\r\n\r\n  // Get booking type label for display\r\n  const getBookingTypeLabel = () => {\r\n    switch (bookingType) {\r\n      case \"hourly\":\r\n        return \"Hourly Booking\";\r\n      case \"daily\":\r\n      case \"overnight\":\r\n      default:\r\n        return \"Daily/Overnight Booking\";\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (textContainerRef.current) {\r\n      setImageHeight(`${textContainerRef.current.clientHeight}px`);\r\n    }\r\n  }, [hotel, nights, slotDuration]);\r\n\r\n  // Generate time slots for the time picker\r\n  const generateTimeSlots = () => {\r\n    const slots = [];\r\n    for (let hour = 0; hour < 24; hour++) {\r\n      for (let minute = 0; minute < 60; minute += 30) {\r\n        const time = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;\r\n        slots.push({ value: time, label: dayjs(time, \"HH:mm\").format(\"hh:mm A\") });\r\n      }\r\n    }\r\n    return slots;\r\n  };\r\n\r\n  const timeSlots = generateTimeSlots();\r\n\r\n  // T&C modal content\r\n  const termsText = `\r\nBy booking, you agree to the property's terms and conditions, cancellation policy, and house rules.\r\nYou also agree to follow Huts4u's official Terms & Conditions mentioned on the link below.\r\nPlease ensure you have read and understood all applicable policies.\r\n`;\r\n\r\n  // Function to check if form is valid\r\n  const isFormValid = () => {\r\n    const isNameValid = formik.values.name.trim() !== \"\";\r\n    const isPhoneValid = formik.values.phoneNumber &&\r\n      formik.values.phoneNumber !== \"91\" &&\r\n      formik.values.phoneNumber.length >= 12;\r\n    const isTermsAccepted = termsChecked;\r\n    const isSlotAvailable = slotAvailability.isAvailable;\r\n\r\n    return isNameValid && isPhoneValid && isTermsAccepted && isSlotAvailable;\r\n  };\r\n\r\n  // Function to handle field changes and show errors\r\n  const handleFieldChange = (field: string, value: string) => {\r\n    formik.setFieldValue(field, value);\r\n    formik.setFieldTouched(field, true);\r\n\r\n    // Clear validation error when user starts typing\r\n    if (validationError) {\r\n      setValidationError(null);\r\n    }\r\n  };\r\n\r\n  // Price source indicator\r\n  const getPriceSource = () => {\r\n    const checkDay = dayjs(checkinDate).format('YYYY-MM-DD');\r\n    const dayInventory = inventoryData?.find((inv: any) =>\r\n      dayjs(inv.date).format('YYYY-MM-DD') === checkDay\r\n    );\r\n\r\n    return dayInventory ? \"Dynamic Inventory Pricing\" : \"Standard Rate\";\r\n  };\r\n\r\n  // Get discount type icon and label\r\n  const getDiscountTypeIcon = (type: string) => {\r\n    return type === 'percentage' ? <PercentIcon /> : <MoneyIcon />;\r\n  };\r\n\r\n  const getDiscountTypeLabel = (type: string) => {\r\n    return type === 'percentage' ? '% off' : ' off';\r\n  };\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        ...BoxStyle,\r\n        background: \"#f6f6f6\",\r\n        mt: 0,\r\n        py: 4,\r\n        px: { xs: 1, md: 3 },\r\n        display: \"flex\",\r\n        flexDirection: { xs: \"column\", md: \"row\" },\r\n        justifyContent: \"center\",\r\n        gap: \"20px\",\r\n      }}\r\n    >\r\n      {/* LEFT: Booking + Guest Info */}\r\n      <Card\r\n        sx={{\r\n          p: 1,\r\n          background: \"white\",\r\n          maxWidth: \"700px\",\r\n          border: \"none\",\r\n          boxShadow: 0,\r\n          borderRadius: \"12px\",\r\n        }}\r\n      >\r\n        <CardContent>\r\n          <Typography\r\n            variant=\"h6\"\r\n            gutterBottom\r\n            sx={{ color: color.firstColor, fontWeight: \"bold\" }}\r\n          >\r\n            Your Booking Summary\r\n          </Typography>\r\n\r\n          {/* SLOT AVAILABILITY ALERT */}\r\n          {!slotAvailability.isAvailable && (\r\n            <Alert\r\n              severity=\"error\"\r\n              sx={{\r\n                mb: 2,\r\n                borderRadius: 2,\r\n                '& .MuiAlert-message': {\r\n                  fontSize: '14px',\r\n                  fontWeight: 500\r\n                }\r\n              }}\r\n            >\r\n              {slotAvailability.message}\r\n              <Button\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                sx={{ ml: 2 }}\r\n                onClick={() => navigate(-1)}\r\n              >\r\n                Go Back\r\n              </Button>\r\n            </Alert>\r\n          )}\r\n\r\n          <Box\r\n            sx={{\r\n              display: \"flex\",\r\n              flexDirection: { xs: \"column\", md: \"row\" },\r\n              gap: { xs: 0, md: 2 },\r\n              position: \"relative\",\r\n              mt: 2,\r\n              height: \"fit-content\",\r\n              alignItems: \"stretch\",\r\n            }}\r\n          >\r\n            <CardMedia\r\n              component=\"img\"\r\n              sx={{\r\n                width: { xs: \"100%\", md: \"250px\" },\r\n                borderRadius: \"12px\",\r\n                objectFit: \"cover\",\r\n                height: imageHeight,\r\n                transition: \"height 0.3s ease\",\r\n              }}\r\n              image={hotel?.propertyImages?.[0]}\r\n            />\r\n            <div style={{ height: \"fit-content\" }} ref={textContainerRef}>\r\n              <Typography\r\n                sx={{\r\n                  fontSize: \"20px\",\r\n                  fontWeight: 600,\r\n                  color: color.firstColor,\r\n                  mt: { xs: 1.5, md: 1 },\r\n                  display: \"-webkit-box\",\r\n                  overflow: \"hidden\",\r\n                  textOverflow: \"ellipsis\",\r\n                  WebkitLineClamp: 1,\r\n                  WebkitBoxOrient: \"vertical\",\r\n                }}\r\n              >\r\n                {hotel?.propertyName}\r\n              </Typography>\r\n              <Typography\r\n                sx={{\r\n                  fontFamily: \"CustomFontSB\",\r\n                  fontSize: { xs: \"12px\", md: \"14px\" },\r\n                  display: \"-webkit-box\",\r\n                  overflow: \"hidden\",\r\n                  textOverflow: \"ellipsis\",\r\n                  WebkitLineClamp: 1,\r\n                  WebkitBoxOrient: \"vertical\",\r\n                }}\r\n              >\r\n                {hotel?.address}\r\n              </Typography>\r\n\r\n              {/* Booking Type Label */}\r\n              <Typography sx={{ fontSize: 14, color: color.forthColor, fontStyle: 'italic', mb: 1, mt: 0.5 }}>\r\n                {getBookingTypeLabel()}\r\n              </Typography>\r\n\r\n              <div\r\n                style={{\r\n                  marginTop: \"10px\",\r\n                  display: \"flex\",\r\n                  flexWrap: \"wrap\",\r\n                  flexDirection: \"column\",\r\n                  gap: \"4px\",\r\n                }}\r\n              >\r\n                {/* Editable Check-in Date - ALWAYS SHOW */}\r\n                <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\r\n                  {editingCheckin ? (\r\n                    <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\r\n                      <TextField\r\n                        type=\"date\"\r\n                        size=\"small\"\r\n                        value={tempCheckinDate}\r\n                        onChange={(e) => {\r\n                          setTempCheckinDate(e.target.value);\r\n                          // Reset calculated price when date changes\r\n                          setCalculatedPrice(null);\r\n                        }}\r\n                        InputLabelProps={{ shrink: true }}\r\n                        sx={{ width: 150 }}\r\n                        InputProps={{\r\n                          sx: { height: 36 }\r\n                        }}\r\n                      />\r\n                      <IconButton size=\"small\" onClick={handleCheckinDateSave} sx={{ color: \"green\" }}>\r\n                        <CheckIcon />\r\n                      </IconButton>\r\n                      <IconButton size=\"small\" onClick={() => {\r\n                        setTempCheckinDate(checkinDate);\r\n                        setEditingCheckin(false);\r\n                      }} sx={{ color: \"red\" }}>\r\n                        <CloseIcon />\r\n                      </IconButton>\r\n                    </Box>\r\n                  ) : (\r\n                    <>\r\n                      <Typography sx={typoStyle}>\r\n                        <strong>Check-In Date:</strong>{\" \"}\r\n                        {dayjs(checkinDate, \"YYYY-MM-DD\").format(\"DD MMM YYYY\")}\r\n                      </Typography>\r\n                      <IconButton\r\n                        size=\"small\"\r\n                        onClick={() => {\r\n                          setTempCheckinDate(checkinDate);\r\n                          setEditingCheckin(true);\r\n                        }}\r\n                        sx={{ ml: -1 }}\r\n                      >\r\n                        <EditIcon fontSize=\"small\" />\r\n                      </IconButton>\r\n                    </>\r\n                  )}\r\n                </Box>\r\n\r\n                {/* FOR HOURLY BOOKINGS: Show check-in time */}\r\n                {bookingType === \"hourly\" && (\r\n                  <>\r\n                    {/* Editable Check-in Time */}\r\n                    <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1, mt: 1 }}>\r\n                      {editingTime ? (\r\n                        <Box sx={{ display: \"flex\", flexDirection: \"column\", gap: 1, width: \"100%\" }}>\r\n                          <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\r\n                            <FormControl size=\"small\" sx={{ minWidth: 120 }}>\r\n                              <InputLabel>Check-in Time</InputLabel>\r\n                              <Select\r\n                                value={tempCheckinTime}\r\n                                onChange={(e) => setTempCheckinTime(e.target.value)}\r\n                                label=\"Check-in Time\"\r\n                              >\r\n                                {timeSlots.map((time) => (\r\n                                  <MenuItem key={time.value} value={time.value}>\r\n                                    {time.label}\r\n                                  </MenuItem>\r\n                                ))}\r\n                              </Select>\r\n                            </FormControl>\r\n                          </Box>\r\n                          <Box sx={{ display: \"flex\", gap: 1 }}>\r\n                            <IconButton size=\"small\" onClick={handleTimeSave} sx={{ color: \"green\" }}>\r\n                              <CheckIcon />\r\n                            </IconButton>\r\n                            <IconButton size=\"small\" onClick={() => {\r\n                              setTempCheckinTime(checkinTime);\r\n                              setTempSlotDuration(slotDuration);\r\n                              setEditingTime(false);\r\n                            }} sx={{ color: \"red\" }}>\r\n                              <CloseIcon />\r\n                            </IconButton>\r\n                          </Box>\r\n                        </Box>\r\n                      ) : (\r\n                        <>\r\n                          <Typography sx={typoStyle}>\r\n                            <strong>Check-In Time:</strong>{\" \"}\r\n                            {checkinTime\r\n                              ? dayjs(checkinTime, \"HH:mm\", true).isValid()\r\n                                ? dayjs(checkinTime, \"HH:mm\").format(\"hh:mm A\")\r\n                                : \"12:00 PM\"\r\n                              : \"12:00 PM\"}\r\n                          </Typography>\r\n                          <IconButton\r\n                            size=\"small\"\r\n                            onClick={() => {\r\n                              setTempCheckinTime(checkinTime);\r\n                              setTempSlotDuration(slotDuration);\r\n                              setEditingTime(true);\r\n                            }}\r\n                            sx={{ ml: -1 }}\r\n                          >\r\n                            <EditIcon fontSize=\"small\" />\r\n                          </IconButton>\r\n                        </>\r\n                      )}\r\n                    </Box>\r\n\r\n                    {/* Show check-out time calculation for hourly */}\r\n                    <Typography sx={typoStyle}>\r\n                      <strong>Check-Out Time:</strong>{\" \"}\r\n                      {dayjs(`${checkinDate} ${checkinTime}`, \"YYYY-MM-DD HH:mm\")\r\n                        .add(slotDuration, 'hour')\r\n                        .format(\"DD MMM YYYY hh:mm A\")}\r\n                    </Typography>\r\n                  </>\r\n                )}\r\n\r\n                {/* FOR DAILY/OVERNIGHT BOOKINGS: Show check-out date */}\r\n                {bookingType !== \"hourly\" && (\r\n                  <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1, mt: 1 }}>\r\n                    {editingCheckout ? (\r\n                      <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\r\n                        <TextField\r\n                          type=\"date\"\r\n                          size=\"small\"\r\n                          value={tempCheckOutDate}\r\n                          onChange={(e) => {\r\n                            setTempCheckOutDate(e.target.value);\r\n                            // Reset calculated price when date changes\r\n                            setCalculatedPrice(null);\r\n                          }}\r\n                          InputLabelProps={{ shrink: true }}\r\n                          sx={{ width: 150 }}\r\n                          InputProps={{\r\n                            sx: { height: 36 }\r\n                          }}\r\n                        />\r\n                        <IconButton size=\"small\" onClick={handleCheckoutDateSave} sx={{ color: \"green\" }}>\r\n                          <CheckIcon />\r\n                        </IconButton>\r\n                        <IconButton size=\"small\" onClick={() => {\r\n                          setTempCheckOutDate(checkOutDate);\r\n                          setEditingCheckout(false);\r\n                        }} sx={{ color: \"red\" }}>\r\n                          <CloseIcon />\r\n                        </IconButton>\r\n                      </Box>\r\n                    ) : (\r\n                      <>\r\n                        <Typography sx={typoStyle}>\r\n                          <strong>Check-Out Date:</strong>{\" \"}\r\n                          {dayjs(checkOutDate, \"YYYY-MM-DD\").format(\"DD MMM YYYY\")}\r\n                        </Typography>\r\n                        <IconButton\r\n                          size=\"small\"\r\n                          onClick={() => {\r\n                            setTempCheckOutDate(checkOutDate);\r\n                            setEditingCheckout(true);\r\n                          }}\r\n                          sx={{ ml: -1 }}\r\n                        >\r\n                          <EditIcon fontSize=\"small\" />\r\n                        </IconButton>\r\n                      </>\r\n                    )}\r\n                  </Box>\r\n                )}\r\n\r\n                {/* Duration display - Show based on booking type */}\r\n                {bookingType === \"hourly\" ? (\r\n                  <Typography sx={typoStyle}>\r\n                    <strong>Duration: </strong>\r\n                    {slotDuration} hrs\r\n                  </Typography>\r\n                ) : (\r\n                  <Typography sx={typoStyle}>\r\n                    <strong>Nights: </strong>\r\n                    {nights} night{nights > 1 ? 's' : ''}\r\n                  </Typography>\r\n                )}\r\n\r\n                <Typography sx={typoStyle}>\r\n                  <strong>Room type:</strong> {room?.roomCategory}\r\n                </Typography>\r\n\r\n                {/* Meal Plan Information */}\r\n                {mealPlanPrice > 0 && mealDesc && (\r\n                  <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\r\n                    <Typography sx={{\r\n                      ...typoStyle,\r\n                      bgcolor: '#e8f5e9',\r\n                      border: '1px solid #c8e6c9'\r\n                    }}>\r\n                      <strong>Meal Plan:</strong> {mealDesc}\r\n                    </Typography>\r\n                    <RestaurantIcon fontSize=\"small\" sx={{ color: color.firstColor }} />\r\n                  </Box>\r\n                )}\r\n\r\n                {/* Auto-calculated Room Info */}\r\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                  <Typography sx={typoStyle}>\r\n                    <strong>Room Info: </strong>\r\n                    {requiredRooms} Room{requiredRooms && requiredRooms > 1 ? 's' : ''},\r\n                    {adults} Adult{adults && Number(adults) > 1 ? 's' : ''},\r\n                    {children} Child{children && Number(children) > 1 ? 'ren' : ''}\r\n                  </Typography>\r\n                </Box>\r\n\r\n                {/* Price source indicator */}\r\n                <Typography sx={{ fontSize: 12, color: color.forthColor, mt: 1, fontStyle: 'italic' }}>\r\n                  {getPriceSource()}  Price may vary by date and availability\r\n                </Typography>\r\n              </div>\r\n            </div>\r\n          </Box>\r\n\r\n          {/* Occupancy Information Panel */}\r\n          <Box sx={{\r\n            mt: 2,\r\n            p: 1.5,\r\n            bgcolor: '#f5f5f5',\r\n            borderRadius: '8px',\r\n            border: '1px solid #e0e0e0'\r\n          }}>\r\n            <Typography variant=\"caption\" sx={{ fontWeight: 600, color: color.forthColor, display: 'block', mb: 0.5 }}>\r\n              Room Occupancy Rules\r\n            </Typography>\r\n\r\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>\r\n              <Typography variant=\"caption\" sx={{\r\n                bgcolor: '#e3f2fd',\r\n                color: '#1976d2',\r\n                px: 1,\r\n                py: 0.5,\r\n                borderRadius: '4px'\r\n              }}>\r\n                Standard: {room?.standardRoomOccupancy || 1} guest{room?.standardRoomOccupancy > 1 ? 's' : ''}\r\n              </Typography>\r\n\r\n              <Typography variant=\"caption\" sx={{\r\n                bgcolor: '#fff3e0',\r\n                color: '#f57c00',\r\n                px: 1,\r\n                py: 0.5,\r\n                borderRadius: '4px'\r\n              }}>\r\n                Maximum: {room?.maxRoomOccupancy || 1} guest{room?.maxRoomOccupancy > 1 ? 's' : ''}\r\n              </Typography>\r\n\r\n              <Typography variant=\"caption\" sx={{\r\n                bgcolor: '#e8f5e9',\r\n                color: '#2e7d32',\r\n                px: 1,\r\n                py: 0.5,\r\n                borderRadius: '4px'\r\n              }}>\r\n                Your Guest: {Number(adults) + Number(children)} guest{(Number(adults) + Number(children)) > 1 ? 's' : ''}\r\n              </Typography>\r\n\r\n              <Typography variant=\"caption\" sx={{\r\n                bgcolor: '#f3e5f5',\r\n                color: '#7b1fa2',\r\n                px: 1,\r\n                py: 0.5,\r\n                borderRadius: '4px'\r\n              }}>\r\n                Rooms needed: {requiredRooms}\r\n              </Typography>\r\n            </Box>\r\n\r\n            {/* ROOM-WISE DISTRIBUTION */}\r\n            {guestsPerRoom && guestsPerRoom.length > 0 && (\r\n              <Box sx={{ mt: 2 }}>\r\n                <Typography variant=\"caption\" sx={{ fontWeight: 600, color: color.forthColor, display: 'block', mb: 0.5 }}>\r\n                  Room-wise Guest Distribution:\r\n                </Typography>\r\n                <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>\r\n                  {guestsPerRoom.map((guests, index) => {\r\n                    const standardOccupancy = room?.standardRoomOccupancy || 1;\r\n                    const extraInRoom = guests > standardOccupancy ? guests - standardOccupancy : 0;\r\n\r\n                    return (\r\n                      <Typography key={index} variant=\"caption\" sx={{\r\n                        bgcolor: extraInRoom > 0 ? '#ffebee' : '#e8f5e9',\r\n                        color: extraInRoom > 0 ? '#c62828' : '#2e7d32',\r\n                        px: 1,\r\n                        py: 0.5,\r\n                        borderRadius: '4px'\r\n                      }}>\r\n                        Room {index + 1}: {guests} guest{guests !== 1 ? 's' : ''}\r\n                        {extraInRoom > 0 && ` (+${extraInRoom} extra)`}\r\n                      </Typography>\r\n                    );\r\n                  })}\r\n                </Box>\r\n              </Box>\r\n            )}\r\n\r\n            {/* EXTRA GUEST CHARGE NOTICE - Only show if there are extra guests */}\r\n            {extraGuestCount > 0 && (\r\n              <Box sx={{\r\n                mt: 1.5,\r\n                p: 1,\r\n                bgcolor: '#fff3e0',\r\n                borderRadius: '6px',\r\n                border: '1px solid #ffcc80'\r\n              }}>\r\n                <Typography variant=\"caption\" sx={{ fontWeight: 600, color: '#e65100', display: 'flex', alignItems: 'center', gap: 0.5, mb: 1 }}>\r\n                  <PersonAddIcon fontSize=\"small\" />\r\n                  Additional Guest Charges (Payable at Property):\r\n                </Typography>\r\n                <Box sx={{ ml: 2, mt: 0.5 }}>\r\n                  <Typography variant=\"caption\" sx={{ display: 'block' }}>\r\n                     {extraGuestCount} extra guest{extraGuestCount > 1 ? 's' : ''} across {requiredRooms} room{requiredRooms > 1 ? 's' : ''}\r\n                    (Standard occupancy: {room?.standardRoomOccupancy || 1} guest{room?.standardRoomOccupancy > 1 ? 's' : ''} per room)\r\n                  </Typography>\r\n\r\n                  <Typography variant=\"caption\" sx={{ display: 'block', fontWeight: 600, color: '#e65100', mt: 0.5 }}>\r\n                     Total extra charge:  {extraGuestCharge.toFixed(2)}\r\n                  </Typography>\r\n                  <Typography variant=\"caption\" sx={{ display: 'block', color: '#666', mt: 0.5 }}>\r\n                    Note: This amount will be collected directly by the property during check-in.\r\n                  </Typography>\r\n                </Box>\r\n              </Box>\r\n            )}\r\n          </Box>\r\n\r\n          {/* VALIDATION ERROR MESSAGE */}\r\n          {validationError && (\r\n            <Alert\r\n              severity=\"error\"\r\n              sx={{\r\n                mt: 3,\r\n                mb: 2,\r\n                borderRadius: 2,\r\n                '& .MuiAlert-message': {\r\n                  fontSize: '14px',\r\n                  fontWeight: 500\r\n                }\r\n              }}\r\n              onClose={() => setValidationError(null)}\r\n            >\r\n              {validationError}\r\n            </Alert>\r\n          )}\r\n\r\n          {/* GUEST FORM */}\r\n          <form onSubmit={formik.handleSubmit}>\r\n            <Typography\r\n              variant=\"h6\"\r\n              mt={4}\r\n              sx={{ color: color.firstColor, fontWeight: \"bold\" }}\r\n            >\r\n              Guest Information\r\n            </Typography>\r\n\r\n            {/* Guest Name */}\r\n            <CustomTextField\r\n              label=\"Guest Name *\"\r\n              name=\"name\"\r\n              fullWidth\r\n              margin=\"normal\"\r\n              value={formik.values.name}\r\n              onChange={(e) => handleFieldChange(\"name\", e.target.value)}\r\n              onBlur={formik.handleBlur}\r\n              error={formik.touched.name && Boolean(formik.errors.name)}\r\n              helperText={\r\n                formik.touched.name && formik.errors.name\r\n                  ? String(formik.errors.name)\r\n                  : \" \"\r\n              }\r\n              inputRef={nameFieldRef}\r\n              sx={{\r\n                '& .MuiFormHelperText-root': {\r\n                  color: 'red',\r\n                  fontSize: '12px',\r\n                  marginLeft: 1,\r\n                  marginTop: 0.5,\r\n                  fontWeight: 500,\r\n                },\r\n                '& .MuiOutlinedInput-root': {\r\n                  '&.Mui-error fieldset': {\r\n                    borderColor: 'red',\r\n                    borderWidth: '2px',\r\n                  }\r\n                }\r\n              }}\r\n            />\r\n\r\n            {/* PHONE NUMBER */}\r\n            <Box\r\n              sx={{\r\n                display: \"flex\",\r\n                flexDirection: \"column\",\r\n                width: {\r\n                  xs: \"100%\",\r\n                  md: \"100%\",\r\n                },\r\n              }}\r\n            >\r\n              <PhoneInput\r\n                country=\"in\"\r\n                onlyCountries={[\"in\"]}\r\n                disableDropdown\r\n                countryCodeEditable={false}\r\n                enableSearch={false}\r\n                value={formik.values.phoneNumber}\r\n                placeholder=\"Phone Number\"\r\n                onChange={(value) => formik.setFieldValue(\"phoneNumber\", value)}\r\n                onBlur={() => formik.setFieldTouched(\"phoneNumber\", true)}\r\n                inputStyle={{\r\n                  width: \"100%\",\r\n                  height: \"56px\",\r\n                  borderRadius: \"52px\",\r\n                  border: \"none\",\r\n                  outline: \"none\",\r\n                  boxShadow: \"4px 4px 10px rgba(104, 39, 184, 0.17)\",\r\n                  color: color.firstColor,\r\n                  paddingLeft: \"60px\",\r\n                  fontSize: \"16px\",\r\n                  backgroundColor: \"white\",\r\n                }}\r\n                buttonStyle={{\r\n                  borderRadius: \"52px 0 0 52px\",\r\n                  backgroundColor: \"white\",\r\n                  border: \"none\",\r\n                }}\r\n                containerStyle={{\r\n                  width: \"100%\",\r\n                }}\r\n                dropdownStyle={{\r\n                  borderRadius: \"12px\",\r\n                }}\r\n              />\r\n\r\n              {formik.touched.phoneNumber && formik.errors.phoneNumber && (\r\n                <Typography\r\n                  sx={{\r\n                    color: \"red\",\r\n                    fontSize: \"12px\",\r\n                    mt: 0.5,\r\n                    ml: \"14px\",\r\n                  }}\r\n                >\r\n                  {formik.errors.phoneNumber}\r\n                </Typography>\r\n              )}\r\n            </Box>\r\n            {/* Email */}\r\n            <CustomTextField\r\n              label=\"Email Address (Optional)\"\r\n              name=\"email\"\r\n              fullWidth\r\n              margin=\"normal\"\r\n              value={formik.values.email}\r\n              onChange={(e) => handleFieldChange(\"email\", e.target.value)}\r\n              onBlur={formik.handleBlur}\r\n              error={formik.touched.email && Boolean(formik.errors.email)}\r\n              helperText={\r\n                formik.touched.email && formik.errors.email\r\n                  ? String(formik.errors.email)\r\n                  : \" \"\r\n              }\r\n              sx={{\r\n                '& .MuiFormHelperText-root': {\r\n                  fontSize: '12px',\r\n                  marginLeft: 1,\r\n                  marginTop: 0.5,\r\n                },\r\n              }}\r\n            />\r\n\r\n\r\n            {/* DISCOUNT SECTION */}\r\n            <Box sx={{ mt: 3, mb: 2 }}>\r\n              <Typography\r\n                variant=\"subtitle1\"\r\n                sx={{ color: color.firstColor, fontWeight: \"bold\", mb: 1 }}\r\n              >\r\n                Available Discounts\r\n              </Typography>\r\n\r\n              {/* Hotel Discount Section */}\r\n              {hotelDiscountData.length > 0 && (\r\n                <Box sx={{ mb: 2 }}>\r\n                  {hotelDiscountApplied ? (\r\n                    <Box sx={{\r\n                      p: 2,\r\n                      borderRadius: 2,\r\n                      bgcolor: \"#e8f5e9\",\r\n                      border: \"1px solid #c8e6c9\",\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"space-between\",\r\n                      animation: hotelDiscount ? 'fadeInScale 0.5s ease-out' : 'none',\r\n                      '@keyframes fadeInScale': {\r\n                        '0%': {\r\n                          opacity: 0,\r\n                          transform: 'scale(0.95)',\r\n                        },\r\n                        '100%': {\r\n                          opacity: 1,\r\n                          transform: 'scale(1)',\r\n                        }\r\n                      }\r\n                    }}>\r\n                      <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\r\n                        <DiscountIcon color=\"success\" />\r\n                        <Box>\r\n                          <Typography sx={{ fontWeight: 600, color: \"#2e7d32\" }}>\r\n                            Hotel Discount Applied\r\n                          </Typography>\r\n                          <Typography variant=\"body2\" sx={{ color: \"#388e3c\", display: 'flex', alignItems: 'center', gap: 0.5 }}>\r\n                            {getDiscountTypeIcon(hotelDiscount?.discountType || 'flat')}\r\n                            {hotelDiscount?.discountValue || 0}{getDiscountTypeLabel(hotelDiscount?.discountType || 'flat')}\r\n                          </Typography>\r\n                          <Typography variant=\"caption\" sx={{ color: \"#666\", display: \"block\", mt: 0.5 }}>\r\n                            You saved  {hotelDiscountAmount.toFixed(2)}\r\n                          </Typography>\r\n                        </Box>\r\n                      </Box>\r\n                      <Button\r\n                        variant=\"outlined\"\r\n                        color=\"error\"\r\n                        size=\"small\"\r\n                        onClick={handleRemoveHotelDiscount}\r\n                      >\r\n                        Remove\r\n                      </Button>\r\n                    </Box>\r\n                  ) : (\r\n                    <Box sx={{\r\n                      p: 2,\r\n                      borderRadius: 2,\r\n                      bgcolor: \"#e3f2fd\",\r\n                      border: \"1px solid #bbdefb\",\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"space-between\"\r\n                    }}>\r\n                      <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\r\n                        <DiscountIcon color=\"primary\" />\r\n                        <Box>\r\n                          <Typography sx={{ fontWeight: 600, color: \"#1565c0\" }}>\r\n                            Hotel Discount Available\r\n                          </Typography>\r\n                          <Typography variant=\"body2\" sx={{ color: \"#1976d2\", display: 'flex', alignItems: 'center', gap: 0.5 }}>\r\n                            {getDiscountTypeIcon(hotelDiscountData[0].discountType)}\r\n                            {hotelDiscountData[0].discountValue}{getDiscountTypeLabel(hotelDiscountData[0].discountType)}\r\n                          </Typography>\r\n                        </Box>\r\n                      </Box>\r\n                      <Button\r\n                        variant=\"contained\"\r\n                        sx={{ background: color.firstColor }}\r\n                        size=\"small\"\r\n                        onClick={handleApplyHotelDiscount}\r\n                      >\r\n                        Apply\r\n                      </Button>\r\n                    </Box>\r\n                  )}\r\n                </Box>\r\n              )}\r\n\r\n              {/* Huts4u Discount Section */}\r\n              {couponApplied ? (\r\n                <Box sx={{\r\n                  p: 2,\r\n                  borderRadius: 2,\r\n                  bgcolor: \"#e8f5e9\",\r\n                  border: \"1px solid #c8e6c9\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"space-between\",\r\n                  animation: couponApplied ? 'fadeInScale 0.5s ease-out' : 'none',\r\n                }}>\r\n                  <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\r\n                    <OfferIcon color=\"success\" />\r\n                    <Box>\r\n                      <Typography sx={{ fontWeight: 600, color: \"#2e7d32\" }}>\r\n                        Huts4u Discount Applied\r\n                      </Typography>\r\n\r\n                      <Typography variant=\"caption\" sx={{ color: \"#666\", display: \"block\", mt: 0.5 }}>\r\n                        You saved  {couponDiscount.toFixed(2)}\r\n                      </Typography>\r\n                    </Box>\r\n                  </Box>\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    color=\"error\"\r\n                    size=\"small\"\r\n                    onClick={handleRemoveCoupon}\r\n                  >\r\n                    Remove\r\n                  </Button>\r\n                </Box>\r\n              ) : (\r\n                <Box sx={{\r\n                  p: 2,\r\n                  borderRadius: 2,\r\n                  bgcolor: \"#fff3e0\",\r\n                  border: \"1px solid #ffcc80\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"space-between\"\r\n                }}>\r\n                  <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\r\n                    <OfferIcon color=\"warning\" />\r\n                    <Box>\r\n                      <Typography sx={{ fontWeight: 600, color: \"#e65100\" }}>\r\n                        Huts4u Discount Available\r\n                      </Typography>\r\n                      <Typography variant=\"body2\" sx={{ color: \"#e65100\" }}>\r\n                        5% off on total amount\r\n                      </Typography>\r\n                    </Box>\r\n                  </Box>\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    sx={{ background: color.firstColor }}\r\n                    size=\"small\"\r\n                    onClick={handleApplyCoupon}\r\n                  >\r\n                    Apply\r\n                  </Button>\r\n                </Box>\r\n              )}\r\n\r\n              {/* Combined Discount Summary */}\r\n              {(hotelDiscountApplied || couponApplied) && (\r\n                <Box sx={{\r\n                  mt: 2,\r\n                  p: 1.5,\r\n                  borderRadius: 2,\r\n                  bgcolor: \"#f5f0ff\",\r\n                  border: \"1px solid #d1c4e9\",\r\n                  animation: 'slideInFromLeft 0.5s ease-out',\r\n                  '@keyframes slideInFromLeft': {\r\n                    '0%': {\r\n                      opacity: 0,\r\n                      transform: 'translateX(-20px)',\r\n                    },\r\n                    '100%': {\r\n                      opacity: 1,\r\n                      transform: 'translateX(0)',\r\n                    }\r\n                  }\r\n                }}>\r\n                  <Typography sx={{ fontSize: 14, fontWeight: 600, color: color.firstColor, mb: 0.5 }}>\r\n                    Total Discounts Applied:\r\n                  </Typography>\r\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                    <Typography variant=\"body2\" sx={{ color: \"#666\" }}>\r\n                      Total savings:\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" sx={{\r\n                      fontWeight: 600,\r\n                      color: \"#2e7d32\",\r\n                      animation: totalDiscount > 0 ? 'pulse 1s ease-in-out' : 'none',\r\n                      '@keyframes pulse': {\r\n                        '0%': { transform: 'scale(1)' },\r\n                        '50%': { transform: 'scale(1.1)' },\r\n                        '100%': { transform: 'scale(1)' },\r\n                      }\r\n                    }}>\r\n                       {totalDiscount.toFixed(2)}\r\n                    </Typography>\r\n                  </Box>\r\n                </Box>\r\n              )}\r\n            </Box>\r\n\r\n            {/* GST SECTION */}\r\n            <Box sx={{ mt: 3, mb: 2 }}>\r\n              <Box sx={{\r\n                display: 'flex',\r\n                flexDirection: { xs: 'column', sm: 'row' },\r\n                justifyContent: 'space-between',\r\n                alignItems: { xs: 'flex-start', sm: 'center' },\r\n                mb: 1,\r\n                gap: { xs: 1, sm: 0 }\r\n              }}>\r\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                  <Typography\r\n                    variant=\"subtitle1\"\r\n                    sx={{\r\n                      color: color.firstColor,\r\n                      fontWeight: \"bold\",\r\n                      fontSize: { xs: '1rem', sm: '1.1rem' }\r\n                    }}\r\n                  >\r\n                    GST Details(Optional)\r\n                  </Typography>\r\n\r\n                  {/* GST Added Indicator */}\r\n                  {gstinNumber && (\r\n                    <Chip\r\n                      label=\"GST Added \"\r\n                      color=\"success\"\r\n                      size=\"small\"\r\n                      icon={<VerifiedIcon />}\r\n                      sx={{\r\n                        fontSize: { xs: '0.7rem', sm: '0.8rem' },\r\n                        height: { xs: 28, sm: 32 }\r\n                      }}\r\n                    />\r\n                  )}\r\n                </Box>\r\n\r\n                <Box sx={{\r\n                  display: 'flex',\r\n                  gap: 1,\r\n                  width: { xs: '100%', sm: 'auto' }\r\n                }}>\r\n                  {/* Toggle Button - Only show \"Add GST\" when not added yet */}\r\n                  {!gstinNumber ? (\r\n                    <Button\r\n                      size=\"small\"\r\n                      variant={gstSectionOpen ? \"outlined\" : \"contained\"}\r\n                      onClick={() => {\r\n                        setGstSectionOpen(!gstSectionOpen);\r\n                        if (isLoggedIn() && !gstSectionOpen) {\r\n                          loadUserGSTRecords(getUserId());\r\n                        }\r\n                      }}\r\n                      sx={{\r\n                        textTransform: 'none',\r\n                        fontSize: { xs: '0.75rem', sm: '0.875rem' },\r\n                        minWidth: { xs: '100px', sm: '120px' },\r\n                        whiteSpace: 'nowrap',\r\n                        bgcolor: gstSectionOpen ? 'transparent' : color.firstColor,\r\n                        color: gstSectionOpen ? color.firstColor : 'white',\r\n                        borderColor: gstSectionOpen ? color.firstColor : 'transparent',\r\n                        '&:hover': {\r\n                          bgcolor: gstSectionOpen ? '#f5f0ff' : color.firstColor,\r\n                          borderColor: color.firstColor\r\n                        }\r\n                      }}\r\n                    >\r\n                      {gstSectionOpen ? 'Cancel' : 'Add GST'}\r\n                    </Button>\r\n                  ) : (\r\n                    <Box sx={{ display: 'flex', gap: 1 }}>\r\n                      <Button\r\n                        size=\"small\"\r\n                        variant=\"outlined\"\r\n                        onClick={handleClearGST}\r\n                        sx={{\r\n                          textTransform: 'none',\r\n                          fontSize: { xs: '0.75rem', sm: '0.875rem' },\r\n                          minWidth: { xs: '80px', sm: '100px' },\r\n                          whiteSpace: 'nowrap',\r\n                          borderColor: '#ff6b6b',\r\n                          color: '#ff6b6b',\r\n                          '&:hover': {\r\n                            bgcolor: '#ffeaea',\r\n                            borderColor: '#ff4444'\r\n                          }\r\n                        }}\r\n                      >\r\n                        Remove\r\n                      </Button>\r\n                      <Button\r\n                        size=\"small\"\r\n                        variant=\"outlined\"\r\n                        onClick={() => setGstSectionOpen(!gstSectionOpen)}\r\n                        sx={{\r\n                          textTransform: 'none',\r\n                          fontSize: { xs: '0.75rem', sm: '0.875rem' },\r\n                          minWidth: { xs: '100px', sm: '120px' },\r\n                          whiteSpace: 'nowrap',\r\n                          borderColor: color.firstColor,\r\n                          color: color.firstColor,\r\n                          '&:hover': {\r\n                            bgcolor: '#f5f0ff'\r\n                          }\r\n                        }}\r\n                      >\r\n                        {gstSectionOpen ? 'Hide Details' : 'Change GST'}\r\n                      </Button>\r\n                    </Box>\r\n                  )}\r\n                </Box>\r\n              </Box>\r\n\r\n              {/* Optional GST Notice */}\r\n              {!gstinNumber && !gstSectionOpen && (\r\n                <Box sx={{\r\n                  p: { xs: 1, sm: 1.5 },\r\n                  borderRadius: 1.5,\r\n                  bgcolor: '#f0f7ff',\r\n                  border: '1px solid #cce5ff',\r\n                  mb: 2\r\n                }}>\r\n                  <Typography variant=\"body2\" sx={{\r\n                    color: '#0066cc',\r\n                    fontSize: { xs: '0.8rem', sm: '0.9rem' },\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: 1\r\n                  }}>\r\n                    <BusinessIcon fontSize=\"small\" />\r\n                    Need a business invoice? Add your GST details to get a tax invoice with your booking.\r\n                  </Typography>\r\n                </Box>\r\n              )}\r\n\r\n              {gstSectionOpen && (\r\n                <Box sx={{\r\n                  p: { xs: 1.5, sm: 2 },\r\n                  borderRadius: 2,\r\n                  bgcolor: '#f8f9fa',\r\n                  border: '1px solid #dee2e6',\r\n                  animation: 'slideDown 0.3s ease-out'\r\n                }}>\r\n                  {/* Loading state */}\r\n                  {loadingGSTRecords && (\r\n                    <Box sx={{ display: 'flex', justifyContent: 'center', my: 2 }}>\r\n                      <CircularProgress size={24} />\r\n                    </Box>\r\n                  )}\r\n\r\n                  {/* STEP 1: Show saved GST records if user is logged in */}\r\n                  {isLoggedIn() && userGSTRecords.length > 0 && !showNewGSTForm && (\r\n                    <Box sx={{ mb: 3 }}>\r\n                      <Typography variant=\"body2\" sx={{\r\n                        mb: 1.5,\r\n                        color: color.forthColor,\r\n                        fontWeight: 600,\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: 1,\r\n                        fontSize: { xs: '0.85rem', sm: '0.9rem' }\r\n                      }}>\r\n                        <BusinessIcon fontSize=\"small\" />\r\n                        Your Saved GST Records:\r\n                      </Typography>\r\n\r\n                      <Box sx={{\r\n                        p: { xs: 1, sm: 2 },\r\n                        borderRadius: 2,\r\n                        bgcolor: 'white',\r\n                        border: '1px solid #e0e0e0',\r\n                        maxHeight: { xs: '250px', sm: '300px' },\r\n                        overflowY: 'auto'\r\n                      }}>\r\n                        {userGSTRecords.length === 0 ? (\r\n                          <Box sx={{\r\n                            p: 3,\r\n                            textAlign: 'center',\r\n                            color: '#666'\r\n                          }}>\r\n                            <BusinessIcon sx={{ fontSize: 40, color: '#ddd', mb: 1 }} />\r\n                            <Typography variant=\"body2\">\r\n                              No saved GST records found\r\n                            </Typography>\r\n                            <Typography variant=\"caption\">\r\n                              Add your first GSTIN to save it for future bookings\r\n                            </Typography>\r\n                          </Box>\r\n                        ) : (\r\n                          userGSTRecords.map((record, index) => {\r\n                            const isVerified = record.verified === true || record.gstStatus === \"Active\";\r\n                            const isSelected = selectedGSTRecord?.id === record.id ||\r\n                              selectedGSTRecord?._id === record._id;\r\n\r\n                            return (\r\n                              <Box\r\n                                key={record._id || record.id || index}\r\n                                sx={{\r\n                                  p: { xs: 1, sm: 1.5 },\r\n                                  mb: 1.5,\r\n                                  borderRadius: 2,\r\n                                  border: isSelected ? `2px solid ${color.firstColor}` : '1px solid #ddd',\r\n                                  backgroundColor: isSelected ? '#f3e5f5' : 'white',\r\n                                  cursor: 'pointer',\r\n                                  '&:hover': {\r\n                                    borderColor: color.firstColor,\r\n                                    backgroundColor: '#faf5ff'\r\n                                  }\r\n                                }}\r\n                                onClick={() => handleGSTRecordSelect(record)}\r\n                              >\r\n                                <Box sx={{\r\n                                  display: 'flex',\r\n                                  flexDirection: { xs: 'column', sm: 'row' },\r\n                                  justifyContent: 'space-between',\r\n                                  alignItems: { xs: 'flex-start', sm: 'center' },\r\n                                  gap: { xs: 1, sm: 0 }\r\n                                }}>\r\n                                  <Box sx={{ flex: 1, width: '100%' }}>\r\n                                    <Box sx={{\r\n                                      display: 'flex',\r\n                                      flexDirection: { xs: 'column', sm: 'row' },\r\n                                      alignItems: { xs: 'flex-start', sm: 'center' },\r\n                                      gap: { xs: 0.5, sm: 1 },\r\n                                      mb: 0.5\r\n                                    }}>\r\n                                      <Typography variant=\"body2\" sx={{\r\n                                        fontWeight: 600,\r\n                                        fontSize: { xs: '0.85rem', sm: '0.9rem' }\r\n                                      }}>\r\n                                        {record.gstNumber}\r\n                                      </Typography>\r\n                                      <Box sx={{\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: 0.5,\r\n                                        flexWrap: 'wrap'\r\n                                      }}>\r\n                                        {isVerified && (\r\n                                          <Tooltip title=\"Verified GST\">\r\n                                            <VerifiedIcon fontSize=\"small\" color=\"success\" />\r\n                                          </Tooltip>\r\n                                        )}\r\n                                        {record.gstStatus && (\r\n                                          <Chip\r\n                                            label={record.gstStatus}\r\n                                            size=\"small\"\r\n                                            color={record.gstStatus === \"Active\" ? \"success\" : \"error\"}\r\n                                            variant=\"outlined\"\r\n                                            sx={{ height: 20, fontSize: '0.65rem' }}\r\n                                          />\r\n                                        )}\r\n                                      </Box>\r\n                                    </Box>\r\n                                    <Typography variant=\"caption\" sx={{\r\n                                      color: '#666',\r\n                                      display: 'block',\r\n                                      mb: 0.5,\r\n                                      fontSize: { xs: '0.75rem', sm: '0.8rem' }\r\n                                    }}>\r\n                                      {record.legalName}\r\n                                    </Typography>\r\n                                    <Typography variant=\"caption\" sx={{\r\n                                      color: '#888',\r\n                                      display: 'block',\r\n                                      fontSize: { xs: '0.7rem', sm: '0.75rem' }\r\n                                    }}>\r\n                                      {record.address}\r\n                                    </Typography>\r\n                                  </Box>\r\n\r\n                                  <Box sx={{\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: 0.5,\r\n                                    width: { xs: '100%', sm: 'auto' },\r\n                                    justifyContent: { xs: 'flex-end', sm: 'flex-start' },\r\n                                    mt: { xs: 1, sm: 0 }\r\n                                  }}>\r\n                                    {isSelected ? (\r\n                                      <Chip\r\n                                        label=\"Selected\"\r\n                                        size=\"small\"\r\n                                        color=\"success\"\r\n                                        icon={<CheckIcon />}\r\n                                        sx={{ height: 24, fontSize: '0.7rem' }}\r\n                                      />\r\n                                    ) : (\r\n                                      <Button\r\n                                        size=\"small\"\r\n                                        variant=\"outlined\"\r\n                                        onClick={(e) => {\r\n                                          e.stopPropagation();\r\n                                          handleGSTRecordSelect(record);\r\n                                        }}\r\n                                        sx={{\r\n                                          fontSize: '0.75rem',\r\n                                          minWidth: '70px'\r\n                                        }}\r\n                                      >\r\n                                        Select\r\n                                      </Button>\r\n                                    )}\r\n\r\n                                    <Box sx={{ display: 'flex', gap: 0.5 }}>\r\n                                      <Tooltip title=\"Copy GSTIN\">\r\n                                        <IconButton\r\n                                          size=\"small\"\r\n                                          sx={{ fontSize: { xs: '0.8rem', sm: '1rem' } }}\r\n                                          onClick={(e) => {\r\n                                            e.stopPropagation();\r\n                                            handleCopyGSTIN(record.gstNumber);\r\n                                          }}\r\n                                        >\r\n                                          <CopyIcon fontSize=\"small\" />\r\n                                        </IconButton>\r\n                                      </Tooltip>\r\n\r\n                                      <Tooltip title=\"Remove from account\">\r\n                                        <IconButton\r\n                                          size=\"small\"\r\n                                          color=\"error\"\r\n                                          sx={{ fontSize: { xs: '0.8rem', sm: '1rem' } }}\r\n                                          onClick={(e) => {\r\n                                            e.stopPropagation();\r\n                                            handleDeleteGST(record.id || record._id);\r\n                                          }}\r\n                                          disabled={deletingGST === (record.id || record._id)}\r\n                                        >\r\n                                          {deletingGST === (record.id || record._id) ? (\r\n                                            <CircularProgress size={16} />\r\n                                          ) : (\r\n                                            <DeleteIcon fontSize=\"small\" />\r\n                                          )}\r\n                                        </IconButton>\r\n                                      </Tooltip>\r\n                                    </Box>\r\n                                  </Box>\r\n                                </Box>\r\n                              </Box>\r\n                            );\r\n                          })\r\n                        )}\r\n                      </Box>\r\n\r\n                      {/* Add New GST Button */}\r\n                      <Box sx={{\r\n                        display: 'flex',\r\n                        justifyContent: 'center',\r\n                        mt: 2\r\n                      }}>\r\n                        <Button\r\n                          startIcon={<AddIcon />}\r\n                          variant=\"outlined\"\r\n                          onClick={handleAddNewGST}\r\n                          sx={{\r\n                            textTransform: 'none',\r\n                            fontSize: { xs: '0.8rem', sm: '0.875rem' }\r\n                          }}\r\n                        >\r\n                          Add New GST\r\n                        </Button>\r\n                      </Box>\r\n                    </Box>\r\n                  )}\r\n\r\n                  {/* STEP 2: Show GST verification form when adding new GST or if no saved records */}\r\n                  {(showNewGSTForm || !isLoggedIn() || (isLoggedIn() && userGSTRecords.length === 0)) && (\r\n                    <Box>\r\n                      <Typography variant=\"body2\" sx={{\r\n                        mb: 2,\r\n                        color: color.forthColor,\r\n                        fontWeight: 600,\r\n                        fontSize: { xs: '0.9rem', sm: '1rem' }\r\n                      }}>\r\n                        {showNewGSTForm ? 'Add New GSTIN' : 'Enter GSTIN for Business Invoice'}\r\n                      </Typography>\r\n\r\n                      {/* GSTIN Input */}\r\n                      <Box sx={{ mb: 2 }}>\r\n                        <Box sx={{\r\n                          display: 'flex',\r\n                          flexDirection: { xs: 'column', sm: 'row' },\r\n                          alignItems: { xs: 'stretch', sm: 'center' },\r\n                          gap: { xs: 1, sm: 1 },\r\n                          mb: 1\r\n                        }}>\r\n                          <CustomTextField\r\n                            label=\"GSTIN Number\"\r\n                            fullWidth\r\n                            value={gstinNumber}\r\n                            onChange={(e) => {\r\n                              const value = e.target.value.toUpperCase();\r\n                              setGstinNumber(value);\r\n                              // Auto-verify if 15 characters entered\r\n                              if (value.length === 15) {\r\n                                const gstinRegex = /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/i;\r\n                                if (!gstinRegex.test(value)) {\r\n                                  toast.error(\"Invalid GSTIN format. Please check the number.\");\r\n                                  setGstVerificationStatus(\"invalid\");\r\n                                }\r\n                              }\r\n                            }}\r\n                            placeholder=\"Enter 15-digit GSTIN\"\r\n                            inputRef={gstinFieldRef}\r\n                            disabled={gstVerificationStatus === \"verified\"}\r\n                            sx={{ flex: 1 }}\r\n                            size=\"small\"\r\n                          />\r\n\r\n                          <Box sx={{\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: 1\r\n                          }}>\r\n                            {gstVerificationStatus === \"verified\" && (\r\n                              <Tooltip title=\"GSTIN Verified\">\r\n                                <VerifiedIcon color=\"success\" sx={{\r\n                                  fontSize: { xs: 24, sm: 28 }\r\n                                }} />\r\n                              </Tooltip>\r\n                            )}\r\n\r\n                            <Button\r\n                              variant=\"contained\"\r\n                              size=\"small\"\r\n                              onClick={handleVerifyGST}\r\n                              disabled={verifyingGst || gstVerificationStatus === \"verified\" || gstinNumber.length !== 15}\r\n                              sx={{\r\n                                textTransform: 'none',\r\n                                bgcolor: color.firstColor,\r\n                                fontSize: { xs: '0.75rem', sm: '0.875rem' },\r\n                                minWidth: { xs: '100px', sm: '120px' },\r\n                                height: { xs: '36px', sm: '40px' }\r\n                              }}\r\n                              startIcon={verifyingGst ? <CircularProgress size={16} color=\"inherit\" /> : null}\r\n                            >\r\n                              {verifyingGst ? 'Verifying...' : gstVerificationStatus === \"verified\" ? 'Verified' : 'Verify'}\r\n                            </Button>\r\n                          </Box>\r\n                        </Box>\r\n\r\n                        {gstVerificationStatus === \"invalid\" && (\r\n                          <Alert\r\n                            severity=\"error\"\r\n                            sx={{\r\n                              mt: 1,\r\n                              fontSize: '0.8rem',\r\n                              py: 0.5\r\n                            }}\r\n                          >\r\n                            Invalid GSTIN format. Please enter a valid 15-digit GSTIN.\r\n                          </Alert>\r\n                        )}\r\n\r\n                        {gstinNumber.length > 0 && gstinNumber.length < 15 && (\r\n                          <Typography variant=\"caption\" sx={{\r\n                            color: 'warning.main',\r\n                            display: 'block',\r\n                            mt: 0.5,\r\n                            fontSize: '0.75rem'\r\n                          }}>\r\n                            Enter 15-digit GSTIN to verify\r\n                          </Typography>\r\n                        )}\r\n                      </Box>\r\n\r\n                      {/* Show verified GST details */}\r\n                      {gstVerificationStatus === \"verified\" && (\r\n                        <>\r\n                          <CustomTextField\r\n                            label=\"Legal Business Name\"\r\n                            fullWidth\r\n                            margin=\"normal\"\r\n                            size=\"small\"\r\n                            value={legalName}\r\n                            onChange={(e) => setLegalName(e.target.value)}\r\n                            InputProps={{\r\n                              startAdornment: (\r\n                                <Tooltip title=\"Verified\">\r\n                                  <VerifiedIcon color=\"success\" sx={{ mr: 1, fontSize: 20 }} />\r\n                                </Tooltip>\r\n                              )\r\n                            }}\r\n                            sx={{ mb: 2 }}\r\n                          />\r\n\r\n                          <CustomTextField\r\n                            label=\"Registered Business Address\"\r\n                            fullWidth\r\n                            margin=\"normal\"\r\n                            size=\"small\"\r\n                            multiline\r\n                            rows={2}\r\n                            value={gstAddress}\r\n                            onChange={(e) => setGstAddress(e.target.value)}\r\n                            InputProps={{\r\n                              startAdornment: (\r\n                                <Tooltip title=\"Verified\">\r\n                                  <VerifiedIcon color=\"success\" sx={{ mr: 1, fontSize: 20 }} />\r\n                                </Tooltip>\r\n                              )\r\n                            }}\r\n                            sx={{ mb: 2 }}\r\n                          />\r\n\r\n                          <Alert\r\n                            severity=\"success\"\r\n                            sx={{\r\n                              mb: 2,\r\n                              fontSize: '0.9rem'\r\n                            }}\r\n                            icon={<VerifiedIcon />}\r\n                          >\r\n                            <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\r\n                              GSTIN verified successfully!\r\n                            </Typography>\r\n                            <Typography variant=\"caption\">\r\n                              This GST will be added to your invoice\r\n                            </Typography>\r\n                          </Alert>\r\n\r\n                          {/* For logged-in users: Show message that GST will be saved to account */}\r\n                          {isLoggedIn() && (\r\n                            <Typography variant=\"caption\" sx={{\r\n                              color: '#666',\r\n                              display: 'block',\r\n                              textAlign: 'center',\r\n                              mt: 1,\r\n                              fontSize: '0.8rem'\r\n                            }}>\r\n                              This GST record will be saved to your account for future bookings\r\n                            </Typography>\r\n                          )}\r\n                        </>\r\n                      )}\r\n\r\n                      {/* Back button for logged-in users with existing records */}\r\n                      {isLoggedIn() && userGSTRecords.length > 0 && showNewGSTForm && (\r\n                        <Box sx={{\r\n                          display: 'flex',\r\n                          justifyContent: 'center',\r\n                          mt: 2\r\n                        }}>\r\n                          <Button\r\n                            variant=\"text\"\r\n                            size=\"small\"\r\n                            onClick={() => {\r\n                              setShowNewGSTForm(false);\r\n                              setGstinNumber(\"\");\r\n                              setLegalName(\"\");\r\n                              setGstAddress(\"\");\r\n                              setGstVerificationStatus(\"none\");\r\n                            }}\r\n                            sx={{\r\n                              textTransform: 'none',\r\n                              fontSize: '0.8rem'\r\n                            }}\r\n                          >\r\n                             Back to Saved GST Records\r\n                          </Button>\r\n                        </Box>\r\n                      )}\r\n                    </Box>\r\n                  )}\r\n\r\n                  {/* STEP 3: Show selected GST summary */}\r\n                  {selectedGSTRecord && (\r\n                    <Alert\r\n                      severity=\"success\"\r\n                      sx={{\r\n                        mt: 2,\r\n                        fontSize: '0.9rem'\r\n                      }}\r\n                      icon={<CheckIcon />}\r\n                    >\r\n                      <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\r\n                        Selected GST for Invoice:\r\n                      </Typography>\r\n                      <Box sx={{ ml: 1, mt: 0.5 }}>\r\n                        <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\r\n                          {selectedGSTRecord.gstNumber}\r\n                        </Typography>\r\n                        <Typography variant=\"caption\" sx={{ color: '#388e3c', display: 'block' }}>\r\n                          {selectedGSTRecord.legalName}\r\n                        </Typography>\r\n                        <Typography variant=\"caption\" sx={{ color: '#666', display: 'block', mt: 0.5 }}>\r\n                          {selectedGSTRecord.address}\r\n                        </Typography>\r\n                      </Box>\r\n                      <Box sx={{ display: 'flex', justifyContent: 'flex-end', mt: 1 }}>\r\n                        <Button\r\n                          size=\"small\"\r\n                          color=\"error\"\r\n                          onClick={handleClearGST}\r\n                          sx={{ fontSize: '0.75rem' }}\r\n                        >\r\n                          Remove GST\r\n                        </Button>\r\n                      </Box>\r\n                    </Alert>\r\n                  )}\r\n\r\n                  {/* Optional GST Notice inside section */}\r\n                  {!gstinNumber && (\r\n                    <Box sx={{\r\n                      p: { xs: 1, sm: 1.5 },\r\n                      borderRadius: 1.5,\r\n                      bgcolor: '#f0f7ff',\r\n                      border: '1px solid #cce5ff',\r\n                      mt: 2\r\n                    }}>\r\n                      <Typography variant=\"body2\" sx={{\r\n                        color: '#0066cc',\r\n                        fontSize: { xs: '0.8rem', sm: '0.9rem' },\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: 1\r\n                      }}>\r\n                        <InfoIcon fontSize=\"small\" />\r\n                        <strong>Optional:</strong> Add GST only if you need a business invoice. You can proceed without GST for personal bookings.\r\n                      </Typography>\r\n                    </Box>\r\n                  )}\r\n                </Box>\r\n              )}\r\n            </Box>\r\n\r\n            {/* Terms acceptance checkbox */}\r\n            <Box sx={{ mt: 2 }}>\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox\r\n                    checked={termsChecked}\r\n                    onChange={(e) => {\r\n                      setTermsChecked(e.target.checked);\r\n                      // Clear validation error when user checks terms\r\n                      if (validationError && e.target.checked) {\r\n                        setValidationError(null);\r\n                      }\r\n                    }}\r\n                    color=\"primary\"\r\n                  />\r\n                }\r\n                label={\r\n                  <span>\r\n                    I accept the{\" \"}\r\n                    <span\r\n                      style={{\r\n                        color: color.firstColor,\r\n                        cursor: \"pointer\",\r\n                        textDecoration: \"underline\",\r\n                      }}\r\n                      onClick={() => setTermsOpen(true)}\r\n                    >\r\n                      Terms & Conditions\r\n                    </span>\r\n                  </span>\r\n                }\r\n              />\r\n            </Box>\r\n\r\n            {/* Submit button with improved validation - DISABLED until all conditions are met */}\r\n            <CustomButton\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              fullWidth\r\n              sx={{\r\n                mt: 2,\r\n                opacity: isFormValid() ? 1 : 0.7,\r\n                '&:disabled': {\r\n                  backgroundColor: '#e0e0e0',\r\n                  color: '#9e9e9e',\r\n                  cursor: 'not-allowed',\r\n                }\r\n              }}\r\n              type=\"submit\"\r\n              disabled={!isFormValid()}\r\n            >\r\n              {isLoggedIn() ? 'Pay Now' : 'Verify Phone & Pay'}\r\n            </CustomButton>\r\n\r\n            <LoginOtpModal\r\n              open={showOtpModal}\r\n              onClose={() => setShowOtpModal(false)}\r\n              onVerificationSuccess={handleOtpSuccess}\r\n              phone={otpData.phone}\r\n              name={otpData.name}\r\n              email={otpData.email}\r\n              token={otpData.token}\r\n            />\r\n\r\n            {/* Razorpay - Pass all data including discounts */}\r\n            {/* {orderDetails && (\r\n              <RenderRazorpay\r\n                orderDetails={orderDetails}\r\n                mode=\"modal\"\r\n                bookingDetails={{\r\n                  hotel,\r\n                  room,\r\n                  guestInfo: formik.values,\r\n                  gstDetails: gstVerificationStatus === \"verified\" ? {\r\n                    gstNumber: gstinNumber,\r\n                    legalName,\r\n                    address: gstAddress,\r\n                    verified: true,\r\n                    gstRecordId: selectedGSTRecord?.id || selectedGSTRecord?._id,\r\n                    gstStatus: selectedGSTRecord?.gstStatus || \"Active\",\r\n                  } : null,\r\n                  discountDetails: {\r\n                    hotelDiscount: hotelDiscountApplied ? {\r\n                      discountId: hotelDiscount?.id,\r\n                      discountType: hotelDiscount?.discountType,\r\n                      discountValue: hotelDiscount?.discountValue,\r\n                      discountAmount: hotelDiscountAmount\r\n                    } : null,\r\n                    couponDiscount: couponApplied ? {\r\n                      couponCode,\r\n                      discountValue: 0.05,\r\n                      discountAmount: couponDiscount\r\n                    } : null,\r\n                    totalDiscount\r\n                  },\r\n                  timing: calculateCheckoutTime(),\r\n                  pricingDetails: {\r\n                    ...priceBreakdown,\r\n                    nights,\r\n                    rooms: requiredRooms.toString(),\r\n                    adults,\r\n                    children,\r\n                    bookingType,\r\n                    checkinDate,\r\n                    checkOutDate,\r\n                    checkinTime,\r\n                    slotDuration,\r\n                    extraGuestCount,\r\n                    extraGuestCharge,\r\n                    guestsPerRoom,\r\n                    inventoryData,\r\n                    unitBase: inventoryUnitBase,\r\n                    mealPlan,\r\n                    mealPlanPrice: totalMealPlan,\r\n                    mealPlanDescription: mealDesc,\r\n                  },\r\n                  bookingType,\r\n                  rooms: requiredRooms.toString(),\r\n                  adults,\r\n                  children,\r\n                }}\r\n              />\r\n            )} */}\r\n          </form>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* RIGHT: BILL SUMMARY */}\r\n      {/* RIGHT: BILL SUMMARY */}\r\n      <Card\r\n        sx={{\r\n          p: 1,\r\n          background: \"white\",\r\n          border: \"none\",\r\n          boxShadow: 0,\r\n          borderRadius: \"12px\",\r\n          height: \"fit-content\",\r\n          minWidth: { md: \"350px\" },\r\n        }}\r\n      >\r\n        <CardContent>\r\n          <Typography\r\n            variant=\"h6\"\r\n            gutterBottom\r\n            sx={{ color: color.firstColor, fontWeight: \"bold\" }}\r\n          >\r\n            Your Bill Summary\r\n          </Typography>\r\n\r\n          {/* Discounts Applied Badge */}\r\n          {(hotelDiscountApplied || couponApplied) && (\r\n            <Box sx={{\r\n              mb: 2,\r\n              p: 1.5,\r\n              bgcolor: \"#e8f5e9\",\r\n              borderRadius: 1,\r\n              border: \"1px solid #c8e6c9\",\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: 1\r\n            }}>\r\n              <DiscountIcon color=\"success\" fontSize=\"small\" />\r\n              <Box>\r\n                <Typography variant=\"body2\" sx={{ fontWeight: 600, color: \"#2e7d32\" }}>\r\n                  Discounts Applied\r\n                </Typography>\r\n                <Typography variant=\"caption\" sx={{ color: \"#388e3c\", display: \"block\" }}>\r\n                  Total savings:  {totalDiscount.toFixed(2)}\r\n                </Typography>\r\n                <Box sx={{ display: 'flex', gap: 1, mt: 0.5 }}>\r\n                  {hotelDiscountApplied && (\r\n                    <Chip\r\n                      size=\"small\"\r\n                      label={`Hotel Discount:  ${hotelDiscountAmount.toFixed(2)}`}\r\n                      color=\"success\"\r\n                      variant=\"outlined\"\r\n                    />\r\n                  )}\r\n                  {couponApplied && (\r\n                    <Chip\r\n                      size=\"small\"\r\n                      label={`Huts4u:  ${couponDiscount.toFixed(2)}`}\r\n                      color=\"primary\"\r\n                      variant=\"outlined\"\r\n                    />\r\n                  )}\r\n                </Box>\r\n              </Box>\r\n            </Box>\r\n          )}\r\n\r\n          {/* GST Info Badge if GST is added */}\r\n          {gstVerificationStatus === \"verified\" && (\r\n            <Box sx={{\r\n              mb: 2,\r\n              p: 1.5,\r\n              bgcolor: \"#e8f5e9\",\r\n              borderRadius: 1,\r\n              border: \"1px solid #c8e6c9\",\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: 1\r\n            }}>\r\n              <VerifiedIcon color=\"success\" fontSize=\"small\" />\r\n              <Box>\r\n                <Typography variant=\"body2\" sx={{ fontWeight: 600, color: \"#2e7d32\" }}>\r\n                  GST Invoice Enabled\r\n                </Typography>\r\n                <Typography variant=\"caption\" sx={{ color: \"#388e3c\", display: \"block\" }}>\r\n                  GSTIN: {gstinNumber}\r\n                </Typography>\r\n                <Typography variant=\"caption\" sx={{ color: \"#666\", display: \"block\" }}>\r\n                  {legalName}\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n          )}\r\n\r\n          {/* Meal Plan Info Badge - Show from pricingDetails */}\r\n          {pricingDetails?.mealPlanPrice > 0 && pricingDetails?.mealPlanDescription && (\r\n            <Box sx={{\r\n              mb: 2,\r\n              p: 1.5,\r\n              bgcolor: \"#fff3e0\",\r\n              borderRadius: 1,\r\n              border: \"1px solid #ffcc80\",\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: 1\r\n            }}>\r\n              <RestaurantIcon color=\"warning\" fontSize=\"small\" />\r\n              <Box>\r\n                <Typography variant=\"body2\" sx={{ fontWeight: 600, color: \"#e65100\" }}>\r\n                  Meal Plan Included\r\n                </Typography>\r\n                <Typography variant=\"caption\" sx={{ color: \"#e65100\", display: \"block\" }}>\r\n                  {pricingDetails.mealPlanDescription}\r\n                </Typography>\r\n                <Typography variant=\"caption\" sx={{ color: \"#666\", display: \"block\" }}>\r\n                  Meal charges included in base price\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n          )}\r\n\r\n          {/* Price Source Indicator */}\r\n          <Box sx={{\r\n            mb: 2,\r\n            p: 1.5,\r\n            bgcolor: \"#e3f2fd\",\r\n            borderRadius: 1,\r\n            border: \"1px solid #bbdefb\"\r\n          }}>\r\n            <Typography variant=\"body2\" sx={{ fontWeight: 600, color: \"#1565c0\" }}>\r\n              {getPriceSource()}\r\n            </Typography>\r\n            <Typography variant=\"caption\" sx={{ color: \"#1976d2\", display: \"block\", mt: 0.5 }}>\r\n              {bookingType === \"hourly\"\r\n                ? `${slotDuration} hrs  ${requiredRooms} room${requiredRooms && requiredRooms > 1 ? 's' : ''}`\r\n                : `${nights} night${nights > 1 ? 's' : ''}  ${requiredRooms} room${requiredRooms && requiredRooms > 1 ? 's' : ''}`}\r\n            </Typography>\r\n            {pricingDetails?.mealPlanPrice > 0 && (\r\n              <Typography variant=\"caption\" sx={{ color: \"#e65100\", fontWeight: 600, mt: 0.5, display: 'block' }}>\r\n                 {pricingDetails.mealPlanDescription} Included\r\n              </Typography>\r\n            )}\r\n            {couponApplied && (\r\n              <Typography variant=\"caption\" sx={{ color: \"green\", fontWeight: 600, mt: 0.5, display: 'block' }}>\r\n                  Huts4u Discount Applied\r\n              </Typography>\r\n            )}\r\n            {hotelDiscountApplied && (\r\n              <Typography variant=\"caption\" sx={{ color: \"#2e7d32\", fontWeight: 600, mt: 0.5, display: 'block' }}>\r\n                  Hotel Discount Applied\r\n              </Typography>\r\n            )}\r\n          </Box>\r\n\r\n          {/* EXTRA GUEST CHARGE NOTICE */}\r\n          {extraGuestCount > 0 && (\r\n            <Box sx={{\r\n              mb: 2,\r\n              p: 1.5,\r\n              bgcolor: '#fff3e0',\r\n              borderRadius: '8px',\r\n              border: '1px solid #ffcc80'\r\n            }}>\r\n              <Typography variant=\"caption\" sx={{ fontWeight: 600, color: '#e65100', display: 'flex', alignItems: 'center', gap: 0.5, mb: 1 }}>\r\n                <PersonAddIcon fontSize=\"small\" />\r\n                Additional Guest Charges\r\n              </Typography>\r\n              <Typography variant=\"body2\" sx={{ ml: 2 }}>\r\n                {extraGuestCount} extra guest{extraGuestCount > 1 ? 's' : ''}:  {extraGuestCharge.toFixed(2)}\r\n              </Typography>\r\n              <Typography variant=\"caption\" sx={{ display: 'block', color: '#666', mt: 1, fontStyle: 'italic' }}>\r\n                Note: This amount will be collected directly by the property during check-in.\r\n              </Typography>\r\n            </Box>\r\n          )}\r\n\r\n          {/* TOP: Compact price view with animation */}\r\n          <div\r\n            style={{\r\n              marginTop: \"10px\",\r\n              display: \"flex\",\r\n              flexWrap: \"wrap\",\r\n              flexDirection: \"column\",\r\n              gap: \"8px\",\r\n              alignItems: \"flex-end\",\r\n            }}\r\n          >\r\n\r\n\r\n            {/* Main bold price = base + platform after discount */}\r\n            <Typography\r\n              sx={{\r\n                fontSize: \"24px\",\r\n                color: color.firstColor,\r\n                fontWeight: \"bold\",\r\n                animation: hotelDiscountApplied ? 'priceDropAnimation 0.6s ease-out' : 'none',\r\n                '@keyframes priceDropAnimation': {\r\n                  '0%': {\r\n                    opacity: 0,\r\n                    transform: 'scale(0.9)'\r\n                  },\r\n                  '70%': {\r\n                    opacity: 1,\r\n                    transform: 'scale(1.05)'\r\n                  },\r\n                  '100%': {\r\n                    opacity: 1,\r\n                    transform: 'scale(1)'\r\n                  }\r\n                }\r\n              }}\r\n            >\r\n              {displayCombinedBasePlatform > 0\r\n                ? ` ${displayCombinedBasePlatform.toFixed(0)}`\r\n                : \"\"}\r\n            </Typography>\r\n\r\n            {/* GST breakdown */}\r\n            <Typography\r\n              sx={{\r\n                fontSize: \"13px\",\r\n                color: color.forthColor,\r\n                textAlign: \"right\",\r\n              }}\r\n            >\r\n              {displayGstTotal > 0 ? (\r\n                <>+ {displayGstTotal.toFixed(0)} taxes &amp; fees</>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n            </Typography>\r\n            <Divider sx={{ width: \"100%\", mt: 1 }} />\r\n\r\n            {/* Final total with discount animation */}\r\n            <div style={{ width: \"100%\", textAlign: \"right\" }}>\r\n              {/* Show subtotal before discount */}\r\n              <Typography sx={{ fontSize: 13, color: color.forthColor }}>\r\n                Subtotal before discount:  {totalWithoutDiscount.toFixed(2)}\r\n              </Typography>\r\n\r\n              {/* Show hotel discount if applied - with animation */}\r\n              {hotelDiscountApplied && hotelDiscountAmount > 0 && (\r\n                <Box sx={{\r\n                  display: 'flex',\r\n                  justifyContent: 'space-between',\r\n                  alignItems: 'center',\r\n                  mt: 1,\r\n                  animation: 'slideInDiscount 0.5s ease-out',\r\n                  '@keyframes slideInDiscount': {\r\n                    '0%': {\r\n                      opacity: 0,\r\n                      transform: 'translateX(-20px)'\r\n                    },\r\n                    '100%': {\r\n                      opacity: 1,\r\n                      transform: 'translateX(0)'\r\n                    }\r\n                  }\r\n                }}>\r\n                  <Typography sx={{ fontSize: 14, color: \"#2e7d32\", fontWeight: 600 }}>\r\n                    Hotel Discount:\r\n                  </Typography>\r\n                  <Typography sx={{\r\n                    fontSize: 14,\r\n                    color: \"#2e7d32\",\r\n                    fontWeight: 600,\r\n                    animation: 'discountFlash 0.8s ease-in-out',\r\n                    '@keyframes discountFlash': {\r\n                      '0%, 100%': { color: '#2e7d32' },\r\n                      '50%': { color: '#4caf50' }\r\n                    }\r\n                  }}>\r\n                    -  {hotelDiscountAmount.toFixed(2)}\r\n                  </Typography>\r\n                </Box>\r\n              )}\r\n\r\n              {/* Show coupon discount if applied */}\r\n              {couponApplied && couponDiscount > 0 && (\r\n                <Box sx={{\r\n                  display: 'flex',\r\n                  justifyContent: 'space-between',\r\n                  alignItems: 'center',\r\n                  mt: 1,\r\n                  animation: 'slideInDiscount 0.5s ease-out 0.2s',\r\n                  animationFillMode: 'both'\r\n                }}>\r\n                  <Typography sx={{ fontSize: 14, color: \"green\", fontWeight: 600 }}>\r\n                    Huts4u Discount:\r\n                  </Typography>\r\n                  <Typography sx={{\r\n                    fontSize: 14,\r\n                    color: \"green\",\r\n                    fontWeight: 600,\r\n                    animation: 'discountFlash 0.8s ease-in-out 0.3s',\r\n                    animationFillMode: 'both'\r\n                  }}>\r\n                    -  {couponDiscount.toFixed(2)}\r\n                  </Typography>\r\n                </Box>\r\n              )}\r\n\r\n              {/* Final Price with bounce animation */}\r\n              <Typography\r\n                sx={{\r\n                  fontSize: \"16px\",\r\n                  color: color.firstColor,\r\n                  fontWeight: \"700\",\r\n                  mt: (hotelDiscountAmount > 0 || couponDiscount > 0) ? 1 : 0,\r\n                  animation: hotelDiscountApplied || couponApplied ? 'bounceIn 0.8s ease-out' : 'none',\r\n                  '@keyframes bounceIn': {\r\n                    '0%': {\r\n                      opacity: 0,\r\n                      transform: 'scale(0.3)'\r\n                    },\r\n                    '50%': {\r\n                      opacity: 1,\r\n                      transform: 'scale(1.05)'\r\n                    },\r\n                    '70%': {\r\n                      transform: 'scale(0.95)'\r\n                    },\r\n                    '100%': {\r\n                      opacity: 1,\r\n                      transform: 'scale(1)'\r\n                    }\r\n                  }\r\n                }}\r\n              >\r\n                {finalPrice > 0\r\n                  ? `Final:  ${payableAfterDiscount.toFixed(2)}`\r\n                  : \"---\"}\r\n              </Typography>\r\n            </div>\r\n          </div>\r\n\r\n          {/* DETAILED INVOICE-STYLE BREAKUP */}\r\n          {/* DETAILED INVOICE-STYLE BREAKUP */}\r\n          <Box\r\n            sx={{\r\n              mt: 3,\r\n              borderRadius: 2,\r\n              border: \"1px dashed #ddd\",\r\n              p: 2,\r\n              backgroundColor: \"#fafafa\",\r\n            }}\r\n          >\r\n            <Typography\r\n              sx={{\r\n                fontSize: 13,\r\n                fontWeight: 600,\r\n                mb: 1,\r\n                color: color.forthColor,\r\n              }}\r\n            >\r\n              Detailed Breakup\r\n            </Typography>\r\n\r\n            {/* 1. Base Price (Room + Meal Plan) */}\r\n            <Typography sx={{ fontSize: 13 }}>\r\n              <strong>1. Base Price</strong>\r\n              <span style={{ float: \"right\" }}>\r\n                 {(totalBase + totalMealPlan + gstOnBase).toFixed(2)}\r\n              </span>\r\n            </Typography>\r\n\r\n\r\n            {/* 2. Service Charges + CGST + SGST */}\r\n            <Typography sx={{ fontSize: 13, mt: 1 }}>\r\n              <strong>2. Service Charges</strong>\r\n              <span style={{ fontSize: 11 }}> (HSN 996111)</span>\r\n              <span style={{ float: \"right\" }}>\r\n                 {serviceTaxableValue.toFixed(2)}\r\n              </span>\r\n            </Typography>\r\n            <Typography sx={{ fontSize: 12, ml: 2, mt: 0.3 }}>\r\n              CGST @ 9% on Service\r\n              <span style={{ float: \"right\" }}>\r\n                 {cgstOnService.toFixed(2)}\r\n              </span>\r\n            </Typography>\r\n            <Typography sx={{ fontSize: 12, ml: 2 }}>\r\n              SGST @ 9% on Service\r\n              <span style={{ float: \"right\" }}>\r\n                 {sgstOnService.toFixed(2)}\r\n              </span>\r\n            </Typography>\r\n\r\n            {/* 3. Convenience Fees (Incl. GST) */}\r\n            <Typography sx={{ fontSize: 13, mt: 1 }}>\r\n              <strong>3. Convenience Fees (Incl. GST)</strong>\r\n              <span style={{ float: \"right\" }}>\r\n                 {convenienceFeeInclGst.toFixed(2)}\r\n              </span>\r\n            </Typography>\r\n\r\n            <Divider sx={{ my: 1.5 }} />\r\n\r\n            {/* SUBTOTAL BEFORE DISCOUNT */}\r\n            <Box sx={{ display: \"flex\", justifyContent: \"space-between\", mb: 1 }}>\r\n              <Typography sx={{ fontSize: 14, fontWeight: 600 }}>\r\n                Subtotal:\r\n              </Typography>\r\n              <Typography sx={{ fontSize: 14, fontWeight: 600 }}>\r\n                 {totalWithoutDiscount.toFixed(2)}\r\n              </Typography>\r\n            </Box>\r\n\r\n            {/* DISCOUNTS */}\r\n            {(hotelDiscountApplied || couponApplied) && (\r\n              <>\r\n                {/* Hotel Discount */}\r\n                {hotelDiscountApplied && hotelDiscountAmount > 0 && (\r\n                  <Box sx={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"space-between\",\r\n                    mb: 1,\r\n                    animation: hotelDiscountApplied ? 'slideInLeft 0.5s ease-out' : 'none',\r\n                    '@keyframes slideInLeft': {\r\n                      '0%': {\r\n                        opacity: 0,\r\n                        transform: 'translateX(-20px)'\r\n                      },\r\n                      '100%': {\r\n                        opacity: 1,\r\n                        transform: 'translateX(0)'\r\n                      }\r\n                    }\r\n                  }}>\r\n                    <Typography sx={{ fontSize: 14, fontWeight: 600, color: \"#2e7d32\" }}>\r\n                      Hotel Discount:\r\n                    </Typography>\r\n                    <Typography sx={{\r\n                      fontSize: 14,\r\n                      fontWeight: 600,\r\n                      color: \"#2e7d32\",\r\n                      animation: hotelDiscountApplied ? 'discountPulse 1s ease-in-out' : 'none',\r\n                      '@keyframes discountPulse': {\r\n                        '0%, 100%': { transform: 'scale(1)' },\r\n                        '50%': { transform: 'scale(1.1)' }\r\n                      }\r\n                    }}>\r\n                      -  {hotelDiscountAmount.toFixed(2)}\r\n                    </Typography>\r\n                  </Box>\r\n                )}\r\n\r\n                {/* Huts4u Discount */}\r\n                {couponApplied && couponDiscount > 0 && (\r\n                  <Box sx={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"space-between\",\r\n                    mb: 1.5,\r\n                    animation: couponApplied ? 'slideInLeft 0.5s ease-out 0.2s' : 'none',\r\n                    animationFillMode: 'both'\r\n                  }}>\r\n                    <Typography sx={{ fontSize: 14, fontWeight: 600, color: \"green\" }}>\r\n                      Huts4u Discount:\r\n                    </Typography>\r\n                    <Typography sx={{\r\n                      fontSize: 14,\r\n                      fontWeight: 600,\r\n                      color: \"green\",\r\n                      animation: couponApplied ? 'discountPulse 1s ease-in-out 0.3s' : 'none',\r\n                      animationFillMode: 'both'\r\n                    }}>\r\n                      -  {couponDiscount.toFixed(2)}\r\n                    </Typography>\r\n                  </Box>\r\n                )}\r\n\r\n                {/* Total Discount */}\r\n                <Box sx={{\r\n                  display: \"flex\",\r\n                  justifyContent: \"space-between\",\r\n                  mb: 1.5,\r\n                  animation: totalDiscount > 0 ? 'slideInLeft 0.5s ease-out 0.4s' : 'none',\r\n                  animationFillMode: 'both'\r\n                }}>\r\n                  <Typography sx={{ fontSize: 14, fontWeight: 600 }}>\r\n                    Total Discount:\r\n                  </Typography>\r\n                  <Typography sx={{\r\n                    fontSize: 14,\r\n                    fontWeight: 600,\r\n                    color: \"red\",\r\n                    animation: totalDiscount > 0 ? 'highlightDiscount 1s ease-in-out' : 'none',\r\n                    '@keyframes highlightDiscount': {\r\n                      '0%': { color: 'red' },\r\n                      '50%': { color: '#ff6b6b' },\r\n                      '100%': { color: 'red' }\r\n                    }\r\n                  }}>\r\n                    -  {totalDiscount.toFixed(2)}\r\n                  </Typography>\r\n                </Box>\r\n              </>\r\n            )}\r\n\r\n            <Divider sx={{ my: 1 }} />\r\n\r\n            {/* FINAL TOTAL AFTER DISCOUNT */}\r\n            <Box sx={{ display: \"flex\", justifyContent: \"space-between\", mb: 1 }}>\r\n              <Typography sx={{ fontSize: 14, fontWeight: 600 }}>\r\n                Total After Discount:\r\n              </Typography>\r\n              <Typography sx={{ fontSize: 14, fontWeight: 600, color: color.firstColor }}>\r\n                 {(totalWithoutDiscount - totalDiscount).toFixed(2)}\r\n              </Typography>\r\n            </Box>\r\n\r\n            {/* FINAL TOTAL PAYABLE */}\r\n            <Box sx={{\r\n              display: \"flex\",\r\n              justifyContent: \"space-between\",\r\n              alignItems: \"center\",\r\n              mt: 1.5,\r\n              pt: 1.5,\r\n              borderTop: '1px solid #ddd',\r\n              animation: finalPrice > 0 ? 'finalTotalAnimation 0.8s ease-out' : 'none',\r\n              '@keyframes finalTotalAnimation': {\r\n                '0%': {\r\n                  opacity: 0,\r\n                  transform: 'translateY(10px)'\r\n                },\r\n                '100%': {\r\n                  opacity: 1,\r\n                  transform: 'translateY(0)'\r\n                }\r\n              }\r\n            }}>\r\n              <Typography sx={{ fontSize: 16, fontWeight: 700, color: color.firstColor }}>\r\n                Total Payable\r\n              </Typography>\r\n              <Typography sx={{\r\n                fontSize: 18,\r\n                fontWeight: 700,\r\n                color: color.firstColor,\r\n                animation: finalPrice > 0 ? 'totalBounce 0.8s ease-out' : 'none',\r\n                '@keyframes totalBounce': {\r\n                  '0%': { transform: 'scale(0.8)' },\r\n                  '50%': { transform: 'scale(1.1)' },\r\n                  '100%': { transform: 'scale(1)' }\r\n                }\r\n              }}>\r\n                 {grandTotal.toFixed(2)}\r\n              </Typography>\r\n            </Box>\r\n\r\n            {/* Discount & GST Invoice Note */}\r\n            <Box sx={{ mt: 1.5 }}>\r\n              {(hotelDiscountApplied || couponApplied) && (\r\n                <Box sx={{\r\n                  p: 1.5,\r\n                  bgcolor: \"#e8f5e9\",\r\n                  borderRadius: 1,\r\n                  border: \"1px solid #c8e6c9\",\r\n                  mb: 1,\r\n                  animation: 'slideInBottom 0.5s ease-out',\r\n                  '@keyframes slideInBottom': {\r\n                    '0%': {\r\n                      opacity: 0,\r\n                      transform: 'translateY(20px)'\r\n                    },\r\n                    '100%': {\r\n                      opacity: 1,\r\n                      transform: 'translateY(0)'\r\n                    }\r\n                  }\r\n                }}>\r\n                  <Typography sx={{\r\n                    fontSize: 13,\r\n                    color: \"#2e7d32\",\r\n                    fontWeight: 600,\r\n                    textAlign: \"center\"\r\n                  }}>\r\n                     You saved  {totalDiscount.toFixed(2)} with discounts!\r\n                  </Typography>\r\n                </Box>\r\n              )}\r\n\r\n              {gstVerificationStatus === \"verified\" && (\r\n                <Box sx={{\r\n                  p: 1.5,\r\n                  bgcolor: \"#e8f5e9\",\r\n                  borderRadius: 1,\r\n                  border: \"1px solid #c8e6c9\",\r\n                  animation: 'slideInBottom 0.5s ease-out 0.2s',\r\n                  animationFillMode: 'both'\r\n                }}>\r\n                  <Typography sx={{\r\n                    fontSize: 13,\r\n                    color: \"#2e7d32\",\r\n                    fontWeight: 600,\r\n                    textAlign: \"center\",\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    gap: 1\r\n                  }}>\r\n                    <VerifiedIcon fontSize=\"small\" />\r\n                    GST Invoice will be generated with your booking\r\n                  </Typography>\r\n                </Box>\r\n              )}\r\n            </Box>\r\n          </Box>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Terms & Conditions Dialog */}\r\n      <Dialog\r\n        open={termsOpen}\r\n        onClose={() => setTermsOpen(false)}\r\n        maxWidth=\"sm\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle>Terms & Conditions</DialogTitle>\r\n        <DialogContent>\r\n          <Typography variant=\"body2\" sx={{ whiteSpace: \"pre-line\" }}>\r\n            {termsText}\r\n          </Typography>\r\n          <Typography\r\n            variant=\"body2\"\r\n            sx={{\r\n              color: color.firstColor,\r\n              textDecoration: \"underline\",\r\n              cursor: \"pointer\",\r\n              fontWeight: 600,\r\n            }}\r\n            onClick={() => window.open(\"https://huts4u.com/terms\", \"_blank\")}\r\n          >\r\n            Open Huts4u Terms & Conditions\r\n          </Typography>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => {\r\n              setTermsOpen(false);\r\n            }}\r\n          >\r\n            Close\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default BookingSummary;\r\n\r\nconst typoStyle = {\r\n  borderRadius: \"52px\",\r\n  boxShadow: \"4px 4px 10px rgba(104, 39, 184, 0.17)\",\r\n  color: color.firstColor,\r\n  background: \"white\",\r\n  fontSize: { xs: \"12px\", md: \"14px\" },\r\n  width: \"fit-content\",\r\n  p: 1,\r\n  px: 2,\r\n  mb: 1,\r\n};"],"names":["createSvgIcon","_jsx","d","getCheckboxUtilityClass","slot","generateUtilityClass","generateUtilityClasses","_excluded","CheckboxRoot","styled","SwitchBase","shouldForwardProp","prop","rootShouldForwardProp","name","overridesResolver","props","styles","ownerState","root","indeterminate","concat","capitalize","size","color","memoTheme","_ref","theme","vars","palette","text","secondary","variants","disableRipple","style","backgroundColor","action","activeChannel","hoverOpacity","alpha","active","Object","entries","filter","createSimplePaletteValueFilter","map","_ref2","mainChannel","main","_ref3","checkboxClasses","checked","disabled","defaultCheckedIcon","CheckBoxIcon","defaultIcon","CheckBoxOutlineBlankIcon","defaultIndeterminateIcon","IndeterminateCheckBoxIcon","Checkbox","React","inProps","ref","_slotProps$input","_icon$props$fontSize","_indeterminateIcon$pr","useDefaultProps","checkedIcon","icon","iconProp","indeterminateIcon","indeterminateIconProp","inputProps","className","slots","slotProps","other","_objectWithoutProperties","_objectSpread","classes","composedClasses","composeClasses","useUtilityClasses","externalInputProps","input","RootSlot","rootSlotProps","useSlot","elementType","clsx","shouldForwardComponentProp","externalForwardedProps","additionalProps","type","fontSize","mergeSlotProps","validationSchema","Yup","required","email","optional","phoneNumber","test","value","slice","length","BookingSummary","_location$state","_location$state2","_location$state3","_location$state4","_location$state5","_location$state6","_value$match","_hotel$propertyImages","location","useLocation","hotel","state","hotelData","room","selectedRoom","selectedSlot","selectedMealPlan","pricingDetails","inventoryData","queryParams","URLSearchParams","search","initialBookingType","get","initialCheckinTime","initialCheckinDate","initialCheckOutDate","initialRooms","initialAdults","initialChildren","bookingType","setBookingType","useState","checkinTime","setCheckinTime","checkinDate","setCheckinDate","dayjs","format","checkOutDate","setCheckOutDate","add","rooms","setRooms","adults","setAdults","children","setChildren","isLoadingPayment","setIsLoadingPayment","editingCheckin","setEditingCheckin","editingCheckout","setEditingCheckout","editingTime","setEditingTime","tempCheckinDate","setTempCheckinDate","tempCheckOutDate","setTempCheckOutDate","tempCheckinTime","setTempCheckinTime","number","match","initialExtractedNumber","parseInt","slotDuration","setSlotDuration","tempSlotDuration","setTempSlotDuration","user","setUser","showOtpModal","setShowOtpModal","otpData","setOtpData","phone","token","orderDetails","setOrderDetails","termsChecked","setTermsChecked","termsOpen","setTermsOpen","hotelDiscountData","setHotelDiscountData","loadingHotelDiscount","setLoadingHotelDiscount","hotelDiscountApplied","setHotelDiscountApplied","hotelDiscount","setHotelDiscount","couponCode","setCouponCode","couponApplied","setCouponApplied","couponValue","validationError","setValidationError","gstSectionOpen","setGstSectionOpen","gstinNumber","setGstinNumber","legalName","setLegalName","gstAddress","setGstAddress","gstVerificationStatus","setGstVerificationStatus","verifyingGst","setVerifyingGst","userGSTRecords","setUserGSTRecords","selectedGSTRecord","setSelectedGSTRecord","loadingGSTRecords","setLoadingGSTRecords","showNewGSTForm","setShowNewGSTForm","deletingGST","setDeletingGST","calculatedPrice","setCalculatedPrice","mealPlan","setMealPlan","mealPlanPrice","setMealPlanPrice","mealPlanDescription","setMealPlanDescription","nameFieldRef","useRef","phoneFieldRef","gstinFieldRef","guestDistribution","distributeGuestsToRooms","totalGuests","standardOccupancy","maxOccupancy","additionalGuestRate","requiredRooms","extraGuestCount","extraGuestCharge","guestsPerRoom","Math","ceil","remainingGuests","i","roomIndex","forEach","guestsInRoom","extraInThisRoom","Number","standardRoomOccupancy","maxRoomOccupancy","slotAvailability","checkSlotAvailability","_room$status","isAvailable","message","roomStatus","status","toLowerCase","unitBase","checkDay","dayInventory","find","inv","date","rateFor1Night","rateFor3Hour","rateFor6Hour","rateFor12Hour","overnightRate","threeHourRate","sixHourRate","twelveHourRate","getInventoryPriceForDate","getSlotKey","useEffect","toString","id","fetchHotelDiscounts","async","_response$data","_response$data$data","_response$data2","payload","data","hotelId","isActive","page","pageSize","order","response","getHotelDiscount","discountsData","rows","Array","isArray","firstDiscount","roomId","discountType","discountValue","parseFloat","toast","success","error","console","isLoggedIn","loadUserProfileAndGST","_profileRes$data","profileRes","getProfile","userData","_id","loadUserGSTRecords","err","userId","_response$data3","getAllGSTByUserId","gstRecords","transformedRecords","record","gst_detail","mappingId","gstId","isPrimary","mappingCreatedAt","createdAt","mappingUpdatedAt","updatedAt","verifiedRecords","verified","gstStatus","firstRecord","gstNumber","tradeName","address","handleGSTRecordSelect","handleClearGST","info","calculateNights","inDate","outDate","isValid","diff","max","nights","priceBreakdown","calculateTotalPrice","totalMultiplier","totalMealPlanPrice","breakdown","basePrice","calculatePriceBreakdown1","hotelDiscountValue","hotelDiscountType","totalBasePrice","totalBase","totalMealPlan","gstOnBase","platformFee","gstOnPlatform","convenienceFee","gstOnConvenience","totalWithoutDiscount","hotelDiscountAmount","couponDiscount","totalDiscount","finalPrice","inventoryUnitBase","mealDesc","displayBase","displayCombinedBasePlatform","displayGstTotal","payableAfterDiscount","toFixed","serviceTaxableValue","cgstOnService","sgstOnService","convenienceFeeInclGst","grandTotal","handlePayment","_response$data1","_response$data10","gstDataForBooking","gstRecordId","discountData","discountId","discountAmount","round","guestInfo","formik","values","timing","calculateCheckoutTime","amount","order_currency","customerName","customerEmail","customerPhone","order_meta","return_url","window","origin","order_note","booking_data","gstDetails","discountDetails","createOrder","orderId","paymentSessionId","completeBookingData","bookingDetails","propertyName","propertyImages","receptionEmail","receptionMobile","roomCategory","customerDetails","customer_name","customer_email","customer_phone","originalPayload","sessionStorage","setItem","JSON","stringify","cashfree","Cashfree","mode","checkout","redirectTarget","primaryColor","secondaryColor","textColor","setTimeout","href","navigate","useNavigate","useFormik","initialValues","userName","enableReinitialize","onSubmit","_nameFieldRef$current","_nameFieldRef$current2","_phoneFieldRef$curren","trim","current","focus","scrollIntoView","behavior","block","payLoad","_res$data","res","sendOTP","log","updateGSTRecordWithUserId","getUserId","_response$data11","updatePayload","updateGST","textContainerRef","imageHeight","setImageHeight","checkInDateTime","checkOutDateTime","checkInDate","checkInTime","checkOutTime","duration","clientHeight","timeSlots","generateTimeSlots","hour","minute","time","padStart","push","label","isFormValid","isNameValid","isPhoneValid","isTermsAccepted","isSlotAvailable","handleFieldChange","field","setFieldValue","setFieldTouched","getPriceSource","getDiscountTypeIcon","PercentIcon","MoneyIcon","getDiscountTypeLabel","_jsxs","Box","sx","BoxStyle","background","mt","py","px","xs","md","display","flexDirection","justifyContent","gap","Card","p","maxWidth","border","boxShadow","borderRadius","CardContent","Typography","variant","gutterBottom","firstColor","fontWeight","Alert","severity","mb","Button","ml","onClick","position","height","alignItems","CardMedia","component","width","objectFit","transition","image","overflow","textOverflow","WebkitLineClamp","WebkitBoxOrient","fontFamily","forthColor","fontStyle","marginTop","flexWrap","TextField","onChange","e","target","InputLabelProps","shrink","InputProps","IconButton","handleCheckinDateSave","isAfter","CheckIcon","CloseIcon","_Fragment","typoStyle","EditIcon","FormControl","minWidth","InputLabel","Select","MenuItem","handleTimeSave","handleCheckoutDateSave","isBefore","bgcolor","RestaurantIcon","guests","index","extraInRoom","PersonAddIcon","onClose","handleSubmit","CustomTextField","fullWidth","margin","onBlur","handleBlur","touched","Boolean","errors","helperText","String","inputRef","marginLeft","borderColor","borderWidth","PhoneInput","country","onlyCountries","disableDropdown","countryCodeEditable","enableSearch","placeholder","inputStyle","outline","paddingLeft","buttonStyle","containerStyle","dropdownStyle","animation","opacity","transform","DiscountIcon","handleRemoveHotelDiscount","handleApplyHotelDiscount","OfferIcon","handleRemoveCoupon","handleApplyCoupon","sm","Chip","VerifiedIcon","textTransform","whiteSpace","BusinessIcon","my","CircularProgress","maxHeight","overflowY","textAlign","isVerified","isSelected","cursor","flex","Tooltip","title","stopPropagation","navigator","clipboard","writeText","then","catch","CopyIcon","confirm","_response$data0","deleteGST","prev","handleDeleteGST","DeleteIcon","startIcon","AddIcon","handleAddNewGST","toUpperCase","_gstinFieldRef$curren","_response$data4","_response$data7","gstPayload","createGST","_response$data5","_response$data6","_gstData$pradr","_gstData$pradr2","gstData","result","lgnm","pradr","adr","selectedRecord","_response$data8","errorMessage","includes","_response$data9","existingGST","_updateResponse$data","updateResponse","updateError","_error$response","_error$response$data","errorData","startAdornment","mr","multiline","InfoIcon","FormControlLabel","control","textDecoration","CustomButton","LoginOtpModal","open","onVerificationSuccess","handleOtpSuccess","Divider","animationFillMode","float","pt","borderTop","Dialog","DialogTitle","DialogContent","DialogActions"],"ignoreList":[],"sourceRoot":""}