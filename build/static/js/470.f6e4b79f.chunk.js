"use strict";(self.webpackChunkhuts4u=self.webpackChunkhuts4u||[]).push([[470],{5470:(e,t,d)=>{d.r(t),d.d(t,{default:()=>w});var i=d(65043),r=d(7353),n=d(81637),s=d(19252),o=d(11906),l=d(68903),x=d(12110),a=d(26494),c=d(94496),h=d(39336),p=d(73216),g=d(65239),j=d.n(g),b=d(21389),A=d(33580),u=d(69995),f=d(57488),y=d(82533),S=d(70579);const m=e=>{const t=(e=>{if(null===e||void 0===e||""===e)return 0;const t=Number(e);return isNaN(t)?0:t})(e);return Math.abs(t)>1e3?t/100:t},v=e=>Math.round(100*e)/100,w=()=>{var e,t,d,g,w,T;const{id:C}=(0,p.g)(),k=(0,p.zy)(),[G,W]=(0,i.useState)(k.state||null),[N,I]=(0,i.useState)(!1),z=(0,i.useRef)(null),[D,F]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{if(!G&&C){I(!0);try{var e,t,d;const i={data:{filter:"",bookingId:C},page:0,pageSize:1,order:[["createdAt","DESC"]]},r=await(0,u.Gc)(i),n=null===r||void 0===r||null===(e=r.data)||void 0===e||null===(t=e.data)||void 0===t||null===(d=t.rows)||void 0===d?void 0:d[0];n?W(n):f.oR.error("Booking not found")}catch(i){console.error("Failed to fetch booking",i),f.oR.error("Failed to load booking details")}finally{I(!1)}}})()},[C,G]);const R=(0,y.J3)(),H=e=>{if(null===e||void 0===e)return"\u20b90.00";return m(e).toLocaleString("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2})};if(N||!G)return(0,S.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",py:6},children:(0,S.jsx)(n.A,{})});const P=v(m(null!==(e=null!==(t=G.amountPaid)&&void 0!==t?t:G.amount)&&void 0!==e?e:0)),_=(e=>{const t=.05,d=v(e/.95),i=(v(d*t),v(d/1.23965)),r=v(.025*i),n=v(.025*i),s=v(i+r+n),o=v(.13*s),l=v(.09*o),x=v(.09*o),a=v(o+l+x),c=v(.02*(s+a)),h=v(.09*c),p=v(.09*c),g=v(c+h+p),j=v(s+a+g),b=v(j*t);return{basePrice:i,baseCGST:r,baseSGST:n,baseTotal:s,serviceCharges:o,serviceCGST:l,serviceSGST:x,serviceTotal:a,convenienceFee:c,convenienceCGST:h,convenienceSGST:p,convenienceTotal:g,subtotalBeforeDiscount:j,discountAmount:b,finalAmount:v(j-b),totalCGST:v(r+l+h),totalSGST:v(n+x+p),totalGST:v(r+n+l+x+h+p),totalTaxable:v(i+o+c)}})(P),B=G.invoiceNo||"HUTS-".concat(G.id),U=G.createdAt?new Date(G.createdAt).toLocaleDateString("en-IN"):(new Date).toLocaleDateString("en-IN"),M=G.amountInWords||(e=>{const t=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],d=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],i=e=>{let r="";return e>=1e7&&(r+=i(Math.floor(e/1e7))+" Crore ",e%=1e7),e>=1e5&&(r+=i(Math.floor(e/1e5))+" Lakh ",e%=1e5),e>=1e3&&(r+=i(Math.floor(e/1e3))+" Thousand ",e%=1e3),e>=100&&(r+=i(Math.floor(e/100))+" Hundred ",e%=100),e>0&&(r+=e<20?t[e]+" ":d[Math.floor(e/10)]+" "+t[e%10]+" "),r.trim()+" "},r=Math.floor(e),n=Math.round(100*(e-r));let s="";return r>0&&(s+=i(r)+"Rupees"),n>0&&(s&&(s+=" and "),s+=i(n)+"Paise"),s||(s="Zero Rupees"),s+=" Only",s.replace(/\s+/g," ").trim()})(_.finalAmount);return(0,S.jsxs)(s.A,{maxWidth:"lg",sx:{py:4},children:[(0,S.jsx)(o.A,{onClick:()=>window.history.back(),sx:{mb:3,textTransform:"none"},children:"\u2190 Back to Bookings"}),(0,S.jsxs)(l.Ay,{container:!0,spacing:3,children:[(0,S.jsx)(l.Ay,{item:!0,xs:12,md:8,children:(0,S.jsx)(x.A,{sx:{p:3,borderRadius:2,boxShadow:2},children:(0,S.jsxs)(a.A,{children:[(0,S.jsx)(c.A,{variant:"h5",sx:{fontWeight:700,mb:2,color:A.A.firstColor},children:"Booking Details"}),(0,S.jsxs)(l.Ay,{container:!0,spacing:2,children:[(0,S.jsxs)(l.Ay,{item:!0,xs:12,sm:6,children:[(0,S.jsxs)(c.A,{sx:{mb:1},children:[(0,S.jsx)("strong",{children:"Property:"})," ",G.hotelName||G.propertyName||"-"]}),(0,S.jsxs)(c.A,{sx:{mb:1},children:[(0,S.jsx)("strong",{children:"Guest:"})," ",R]}),(0,S.jsxs)(c.A,{sx:{mb:1},children:[(0,S.jsx)("strong",{children:"Booking ID:"})," ",G.id]})]}),(0,S.jsxs)(l.Ay,{item:!0,xs:12,sm:6,children:[(0,S.jsxs)(c.A,{sx:{mb:1},children:[(0,S.jsx)("strong",{children:"Check-in:"})," ",null!==(d=G.checkInDate)&&void 0!==d?d:"-"," ",null!==(g=G.checkInTime)&&void 0!==g?g:""]}),(0,S.jsxs)(c.A,{sx:{mb:1},children:[(0,S.jsx)("strong",{children:"Check-out:"})," ",null!==(w=G.checkOutDate)&&void 0!==w?w:"-"," ",null!==(T=G.checkOutTime)&&void 0!==T?T:""]}),(0,S.jsxs)(c.A,{sx:{mb:1},children:[(0,S.jsx)("strong",{children:"Status:"})," ",G.status||"Confirmed"]})]})]}),(0,S.jsx)(h.A,{sx:{my:3}}),(0,S.jsxs)(r.A,{sx:{textAlign:"center",py:2},children:[(0,S.jsx)(c.A,{variant:"h6",sx:{mb:1},children:"Total Amount Paid"}),(0,S.jsx)(c.A,{variant:"h4",sx:{fontWeight:700,color:A.A.firstColor},children:H(P)})]}),(0,S.jsx)(h.A,{sx:{my:3}}),(0,S.jsxs)(r.A,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[(0,S.jsx)(o.A,{variant:"contained",onClick:async()=>{if(z.current){F(!0);try{const e=z.current.cloneNode(!0);e.style.width="800px",e.style.margin="0 auto",e.style.padding="20px",e.style.backgroundColor="white",e.style.color="black",e.style.fontFamily="'Arial', sans-serif",e.style.position="fixed",e.style.left="-9999px",e.style.top="0",document.body.appendChild(e);const t=await j()(e,{scale:2,useCORS:!0,backgroundColor:"#ffffff",logging:!1,width:e.scrollWidth,height:e.scrollHeight,windowWidth:e.scrollWidth,windowHeight:e.scrollHeight});document.body.removeChild(e);const d=t.toDataURL("image/png",1),i=new b.Ay({orientation:"portrait",unit:"mm",format:"a4"}),r=i.internal.pageSize.getWidth(),n=i.internal.pageSize.getHeight(),s=t.width,o=t.height,l=Math.min(r/s,n/o),x=(r-s*l)/2,a=5;i.addImage(d,"PNG",x,a,s*l,o*l),i.save("HUTS4U-Invoice-".concat((null===G||void 0===G?void 0:G.id)||C,".pdf")),f.oR.success("Invoice downloaded successfully!")}catch(e){console.error("Failed to generate PDF",e),f.oR.error("Failed to generate invoice PDF.")}finally{F(!1)}}},disabled:D,sx:{background:A.A.firstColor,textTransform:"none",px:3,py:1,"&:hover":{background:A.A.firstColor,opacity:.9}},children:D?"Generating PDF...":"Download Invoice (PDF)"}),(0,S.jsx)(o.A,{variant:"outlined",onClick:()=>window.print(),sx:{textTransform:"none"},children:"Print"})]})]})})}),(0,S.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,S.jsx)(x.A,{sx:{p:3,borderRadius:2,boxShadow:2,height:"90%"},children:(0,S.jsxs)(a.A,{children:[(0,S.jsx)(c.A,{variant:"h6",sx:{mb:2,fontWeight:700},children:"Invoice Summary"}),(0,S.jsx)(h.A,{sx:{mb:2}}),(0,S.jsxs)(r.A,{sx:{mb:2},children:[(0,S.jsx)(c.A,{variant:"subtitle2",color:"text.secondary",children:"Invoice Number"}),(0,S.jsx)(c.A,{variant:"body1",sx:{fontWeight:600},children:B})]}),(0,S.jsxs)(r.A,{sx:{mb:2},children:[(0,S.jsx)(c.A,{variant:"subtitle2",color:"text.secondary",children:"Invoice Date"}),(0,S.jsx)(c.A,{variant:"body1",children:U})]}),(0,S.jsxs)(r.A,{sx:{mb:2},children:[(0,S.jsx)(c.A,{variant:"subtitle2",color:"text.secondary",children:"Guest Name"}),(0,S.jsx)(c.A,{variant:"body1",sx:{fontWeight:600},children:R})]})]})})}),(0,S.jsxs)(l.Ay,{item:!0,xs:12,children:[(0,S.jsxs)(r.A,{ref:z,sx:{background:"#fff",p:{xs:2,md:4},color:"#000",border:"1px solid #e0e0e0",borderRadius:1,maxWidth:"800px",margin:"0 auto","@media print":{border:"none",padding:0}},children:[(0,S.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[(0,S.jsxs)(r.A,{sx:{flex:1},children:[(0,S.jsx)("img",{src:"https://huts44u.s3.ap-south-1.amazonaws.com/hutlogo-removebg-preview.png",alt:"HUTS4U logo",crossOrigin:"anonymous",style:{maxHeight:"60px",objectFit:"contain",marginBottom:"8px"}}),(0,S.jsx)(c.A,{variant:"h6",sx:{fontWeight:800,fontSize:"16px"},children:"HUTS4U"}),(0,S.jsx)(c.A,{sx:{fontSize:"11px",lineHeight:1.2,maxWidth:"200px"},children:"Ground Floor, Plot No. 370/10537, New Pokhran Village, Chandrasekharpur, Bhubaneswar, Odisha \u2013 751016, India"}),(0,S.jsx)(c.A,{sx:{fontSize:"11px",mt:1},children:"GSTIN/UIN: 21AASFH3550L1Z7"})]}),(0,S.jsxs)(r.A,{sx:{textAlign:"right",flex:1},children:[(0,S.jsx)(c.A,{sx:{fontWeight:700,fontSize:"14px"},children:"TAX INVOICE"}),(0,S.jsxs)(c.A,{sx:{fontSize:"12px",mt:1},children:[(0,S.jsx)("strong",{children:"Invoice No:"})," ",B]}),(0,S.jsxs)(c.A,{sx:{fontSize:"12px"},children:[(0,S.jsx)("strong",{children:"Date:"})," ",U]}),(0,S.jsxs)(c.A,{sx:{fontSize:"12px",mt:2},children:[(0,S.jsx)("strong",{children:"Booking ID:"})," ",G.id]})]})]}),(0,S.jsx)(h.A,{sx:{my:2,borderWidth:1}}),(0,S.jsxs)(r.A,{sx:{mb:3},children:[(0,S.jsxs)(c.A,{sx:{fontSize:"12px",mb:1},children:[(0,S.jsx)("strong",{children:"Bill To:"})," ",R]}),(0,S.jsxs)(c.A,{sx:{fontSize:"12px",mb:1},children:[(0,S.jsx)("strong",{children:"GSTIN/UIN:"})," ________________"]}),(0,S.jsxs)(c.A,{sx:{fontSize:"12px"},children:[(0,S.jsx)("strong",{children:"Property:"})," ",G.hotelName||G.propertyName||"-"]})]}),(0,S.jsx)(r.A,{sx:{mb:3},children:(0,S.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{style:{backgroundColor:"#f5f5f5"},children:[(0,S.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"#"}),(0,S.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"left"},children:"Description"}),(0,S.jsx)("th",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"right"},children:"Amount (\u20b9)"})]})}),(0,S.jsxs)("tbody",{children:[(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:"1"}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:"Base Price (Reimbursement) (HSN 9985)"}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"right"},children:H(_.baseTotal)})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:"2"}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:"Service Charges (HSN 99611)"}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"right"},children:H(_.serviceCharges)})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"}}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px",paddingLeft:"32px"},children:"CGST @ 9% on Service"}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"right"},children:H(_.serviceCGST)})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"}}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px",paddingLeft:"32px"},children:"SGST @ 9% on Service"}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"right"},children:H(_.serviceSGST)})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:"3"}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px"},children:"Convenience Fees (Incl. GST) (Reimbursement, HSN 9985)"}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"right"},children:H(_.convenienceTotal)})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{colSpan:2,style:{border:"1px solid #ddd",padding:"8px",textAlign:"right",fontWeight:700},children:"Subtotal before discount:"}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"right",fontWeight:700},children:H(_.subtotalBeforeDiscount)})]}),(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{colSpan:2,style:{border:"1px solid #ddd",padding:"8px",textAlign:"right",fontWeight:700,color:"green"},children:"Huts4u Discount:"}),(0,S.jsxs)("td",{style:{border:"1px solid #ddd",padding:"8px",textAlign:"right",fontWeight:700,color:"green"},children:["-",H(_.discountAmount)]})]}),(0,S.jsxs)("tr",{style:{backgroundColor:"#f0f8ff"},children:[(0,S.jsx)("td",{colSpan:2,style:{border:"1px solid #ddd",padding:"10px",textAlign:"right",fontWeight:800},children:"GRAND TOTAL:"}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"10px",textAlign:"right",fontWeight:800,fontSize:"14px"},children:H(P)})]})]})]})}),(0,S.jsxs)(r.A,{sx:{mb:3,overflowX:"auto"},children:[(0,S.jsx)(c.A,{sx:{fontSize:"12px",fontWeight:700,mb:1},children:"GST Summary:"}),(0,S.jsx)(r.A,{sx:{minWidth:"650px","@media (max-width: 600px)":{minWidth:"650px"}},children:(0,S.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px"},children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{style:{backgroundColor:"#f5f5f5"},children:[(0,S.jsx)("th",{style:{border:"1px solid #ddd",padding:"6px",whiteSpace:"nowrap"},children:"HSN/SAC"}),(0,S.jsx)("th",{style:{border:"1px solid #ddd",padding:"6px",textAlign:"right",whiteSpace:"nowrap"},children:"Taxable Value"}),(0,S.jsx)("th",{style:{border:"1px solid #ddd",padding:"6px",textAlign:"right",whiteSpace:"nowrap"},children:"CGST Rate"}),(0,S.jsx)("th",{style:{border:"1px solid #ddd",padding:"6px",textAlign:"right",whiteSpace:"nowrap"},children:"CGST Amt"}),(0,S.jsx)("th",{style:{border:"1px solid #ddd",padding:"6px",textAlign:"right",whiteSpace:"nowrap"},children:"SGST Rate"}),(0,S.jsx)("th",{style:{border:"1px solid #ddd",padding:"6px",textAlign:"right",whiteSpace:"nowrap"},children:"SGST Amt"}),(0,S.jsx)("th",{style:{border:"1px solid #ddd",padding:"6px",textAlign:"right",whiteSpace:"nowrap"},children:"Total Tax"})]})}),(0,S.jsxs)("tbody",{children:[(0,S.jsxs)("tr",{children:[(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"6px",whiteSpace:"nowrap"},children:"99611"}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"6px",textAlign:"right",whiteSpace:"nowrap"},children:H(_.serviceCharges)}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"6px",textAlign:"right",whiteSpace:"nowrap"},children:"9%"}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"6px",textAlign:"right",whiteSpace:"nowrap"},children:H(_.serviceCGST)}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"6px",textAlign:"right",whiteSpace:"nowrap"},children:"9%"}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"6px",textAlign:"right",whiteSpace:"nowrap"},children:H(_.serviceSGST)}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"6px",textAlign:"right",whiteSpace:"nowrap"},children:H(_.serviceCGST+_.serviceSGST)})]}),(0,S.jsxs)("tr",{style:{backgroundColor:"#f0f8ff"},children:[(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"6px",fontWeight:700,whiteSpace:"nowrap"},children:"Total"}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"6px",textAlign:"right",fontWeight:700,whiteSpace:"nowrap"},children:H(_.serviceCharges)}),(0,S.jsx)("td",{}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"6px",textAlign:"right",fontWeight:700,whiteSpace:"nowrap"},children:H(_.serviceCGST)}),(0,S.jsx)("td",{}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"6px",textAlign:"right",fontWeight:700,whiteSpace:"nowrap"},children:H(_.serviceSGST)}),(0,S.jsx)("td",{style:{border:"1px solid #ddd",padding:"6px",textAlign:"right",fontWeight:700,whiteSpace:"nowrap"},children:H(_.serviceCGST+_.serviceSGST)})]})]})]})})]}),(0,S.jsxs)(r.A,{sx:{mb:3,p:2,backgroundColor:"#f9f9f9",borderRadius:"4px"},children:[(0,S.jsx)(c.A,{sx:{fontSize:"11px",fontWeight:700,mb:1},children:"Amount Chargeable (in words):"}),(0,S.jsx)(c.A,{sx:{fontSize:"12px",fontStyle:"italic"},children:M})]}),(0,S.jsxs)(r.A,{sx:{mt:4,pt:2,borderTop:"1px solid #ddd"},children:[(0,S.jsx)(c.A,{sx:{fontSize:"10px",mb:1},children:"Declaration: We declare that this invoice shows the actual price of the goods described and that all particulars are true and correct."}),(0,S.jsx)(c.A,{sx:{fontSize:"10px",mb:3},children:"E. & O.E."}),(0,S.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,S.jsxs)(r.A,{children:[(0,S.jsx)(c.A,{sx:{fontSize:"10px",color:"#666"},children:"For HUTS4U"}),(0,S.jsx)(c.A,{sx:{fontSize:"10px",color:"#666",mt:2},children:"This is a Computer Generated Invoice"})]}),(0,S.jsxs)(r.A,{sx:{textAlign:"center"},children:[(0,S.jsx)(c.A,{sx:{fontSize:"11px",fontWeight:700,mb:1},children:"Authorised Signatory"}),(0,S.jsx)(r.A,{sx:{height:"40px",width:"120px",borderBottom:"1px solid #000"}})]})]})]})]}),(0,S.jsx)(r.A,{sx:{mt:3,textAlign:"center"},children:(0,S.jsx)(c.A,{variant:"caption",color:"text.secondary",children:"This preview shows how the invoice will appear in the PDF"})})]})]})]})}}}]);
//# sourceMappingURL=470.f6e4b79f.chunk.js.map