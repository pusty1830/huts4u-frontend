{"version":3,"file":"static/js/339.5e4316bd.chunk.js","mappings":"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","sources":["../node_modules/@mui/material/internal/svg-icons/CheckBoxOutlineBlank.js","../node_modules/@mui/material/internal/svg-icons/CheckBox.js","../node_modules/@mui/material/internal/svg-icons/IndeterminateCheckBox.js","../node_modules/@mui/material/Checkbox/checkboxClasses.js","../node_modules/@mui/material/Checkbox/Checkbox.js","../node_modules/@mui/icons-material/esm/Check.js","../node_modules/@mui/icons-material/esm/PersonAdd.js","../node_modules/@mui/icons-material/esm/Verified.js","../node_modules/@mui/icons-material/esm/ContentCopy.js","../node_modules/@mui/icons-material/esm/Delete.js","../node_modules/@mui/icons-material/esm/LocalOffer.js","components/Payments/RanderPayments.tsx","pages/BookingSummary.tsx","../node_modules/@mui/icons-material/esm/Add.js","../node_modules/@mui/icons-material/esm/Business.js"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport createSvgIcon from \"../../utils/createSvgIcon.js\";\n\n/**\n * @ignore - internal component.\n */\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"\n}), 'CheckBoxOutlineBlank');","'use client';\n\nimport * as React from 'react';\nimport createSvgIcon from \"../../utils/createSvgIcon.js\";\n\n/**\n * @ignore - internal component.\n */\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"\n}), 'CheckBox');","'use client';\n\nimport * as React from 'react';\nimport createSvgIcon from \"../../utils/createSvgIcon.js\";\n\n/**\n * @ignore - internal component.\n */\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z\"\n}), 'IndeterminateCheckBox');","import generateUtilityClasses from '@mui/utils/generateUtilityClasses';\nimport generateUtilityClass from '@mui/utils/generateUtilityClass';\nexport function getCheckboxUtilityClass(slot) {\n  return generateUtilityClass('MuiCheckbox', slot);\n}\nconst checkboxClasses = generateUtilityClasses('MuiCheckbox', ['root', 'checked', 'disabled', 'indeterminate', 'colorPrimary', 'colorSecondary', 'sizeSmall', 'sizeMedium']);\nexport default checkboxClasses;","'use client';\n\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport composeClasses from '@mui/utils/composeClasses';\nimport { alpha } from '@mui/system/colorManipulator';\nimport SwitchBase from \"../internal/SwitchBase.js\";\nimport CheckBoxOutlineBlankIcon from \"../internal/svg-icons/CheckBoxOutlineBlank.js\";\nimport CheckBoxIcon from \"../internal/svg-icons/CheckBox.js\";\nimport IndeterminateCheckBoxIcon from \"../internal/svg-icons/IndeterminateCheckBox.js\";\nimport capitalize from \"../utils/capitalize.js\";\nimport rootShouldForwardProp from \"../styles/rootShouldForwardProp.js\";\nimport checkboxClasses, { getCheckboxUtilityClass } from \"./checkboxClasses.js\";\nimport { styled } from \"../zero-styled/index.js\";\nimport memoTheme from \"../utils/memoTheme.js\";\nimport createSimplePaletteValueFilter from \"../utils/createSimplePaletteValueFilter.js\";\nimport { useDefaultProps } from \"../DefaultPropsProvider/index.js\";\nimport { mergeSlotProps } from \"../utils/index.js\";\nimport useSlot from \"../utils/useSlot.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst useUtilityClasses = ownerState => {\n  const {\n    classes,\n    indeterminate,\n    color,\n    size\n  } = ownerState;\n  const slots = {\n    root: ['root', indeterminate && 'indeterminate', `color${capitalize(color)}`, `size${capitalize(size)}`]\n  };\n  const composedClasses = composeClasses(slots, getCheckboxUtilityClass, classes);\n  return {\n    ...classes,\n    // forward the disabled and checked classes to the SwitchBase\n    ...composedClasses\n  };\n};\nconst CheckboxRoot = styled(SwitchBase, {\n  shouldForwardProp: prop => rootShouldForwardProp(prop) || prop === 'classes',\n  name: 'MuiCheckbox',\n  slot: 'Root',\n  overridesResolver: (props, styles) => {\n    const {\n      ownerState\n    } = props;\n    return [styles.root, ownerState.indeterminate && styles.indeterminate, styles[`size${capitalize(ownerState.size)}`], ownerState.color !== 'default' && styles[`color${capitalize(ownerState.color)}`]];\n  }\n})(memoTheme(({\n  theme\n}) => ({\n  color: (theme.vars || theme).palette.text.secondary,\n  variants: [{\n    props: {\n      color: 'default',\n      disableRipple: false\n    },\n    style: {\n      '&:hover': {\n        backgroundColor: theme.vars ? `rgba(${theme.vars.palette.action.activeChannel} / ${theme.vars.palette.action.hoverOpacity})` : alpha(theme.palette.action.active, theme.palette.action.hoverOpacity)\n      }\n    }\n  }, ...Object.entries(theme.palette).filter(createSimplePaletteValueFilter()).map(([color]) => ({\n    props: {\n      color,\n      disableRipple: false\n    },\n    style: {\n      '&:hover': {\n        backgroundColor: theme.vars ? `rgba(${theme.vars.palette[color].mainChannel} / ${theme.vars.palette.action.hoverOpacity})` : alpha(theme.palette[color].main, theme.palette.action.hoverOpacity)\n      }\n    }\n  })), ...Object.entries(theme.palette).filter(createSimplePaletteValueFilter()).map(([color]) => ({\n    props: {\n      color\n    },\n    style: {\n      [`&.${checkboxClasses.checked}, &.${checkboxClasses.indeterminate}`]: {\n        color: (theme.vars || theme).palette[color].main\n      },\n      [`&.${checkboxClasses.disabled}`]: {\n        color: (theme.vars || theme).palette.action.disabled\n      }\n    }\n  })), {\n    // Should be last to override other colors\n    props: {\n      disableRipple: false\n    },\n    style: {\n      // Reset on touch devices, it doesn't add specificity\n      '&:hover': {\n        '@media (hover: none)': {\n          backgroundColor: 'transparent'\n        }\n      }\n    }\n  }]\n})));\nconst defaultCheckedIcon = /*#__PURE__*/_jsx(CheckBoxIcon, {});\nconst defaultIcon = /*#__PURE__*/_jsx(CheckBoxOutlineBlankIcon, {});\nconst defaultIndeterminateIcon = /*#__PURE__*/_jsx(IndeterminateCheckBoxIcon, {});\nconst Checkbox = /*#__PURE__*/React.forwardRef(function Checkbox(inProps, ref) {\n  const props = useDefaultProps({\n    props: inProps,\n    name: 'MuiCheckbox'\n  });\n  const {\n    checkedIcon = defaultCheckedIcon,\n    color = 'primary',\n    icon: iconProp = defaultIcon,\n    indeterminate = false,\n    indeterminateIcon: indeterminateIconProp = defaultIndeterminateIcon,\n    inputProps,\n    size = 'medium',\n    disableRipple = false,\n    className,\n    slots = {},\n    slotProps = {},\n    ...other\n  } = props;\n  const icon = indeterminate ? indeterminateIconProp : iconProp;\n  const indeterminateIcon = indeterminate ? indeterminateIconProp : checkedIcon;\n  const ownerState = {\n    ...props,\n    disableRipple,\n    color,\n    indeterminate,\n    size\n  };\n  const classes = useUtilityClasses(ownerState);\n  const externalInputProps = slotProps.input ?? inputProps;\n  const [RootSlot, rootSlotProps] = useSlot('root', {\n    ref,\n    elementType: CheckboxRoot,\n    className: clsx(classes.root, className),\n    shouldForwardComponentProp: true,\n    externalForwardedProps: {\n      slots,\n      slotProps,\n      ...other\n    },\n    ownerState,\n    additionalProps: {\n      type: 'checkbox',\n      icon: /*#__PURE__*/React.cloneElement(icon, {\n        fontSize: icon.props.fontSize ?? size\n      }),\n      checkedIcon: /*#__PURE__*/React.cloneElement(indeterminateIcon, {\n        fontSize: indeterminateIcon.props.fontSize ?? size\n      }),\n      disableRipple,\n      slots,\n      slotProps: {\n        input: mergeSlotProps(typeof externalInputProps === 'function' ? externalInputProps(ownerState) : externalInputProps, {\n          'data-indeterminate': indeterminate\n        })\n      }\n    }\n  });\n  return /*#__PURE__*/_jsx(RootSlot, {\n    ...rootSlotProps,\n    classes: classes\n  });\n});\nprocess.env.NODE_ENV !== \"production\" ? Checkbox.propTypes /* remove-proptypes */ = {\n  //  Warning \n  //  These PropTypes are generated from the TypeScript type definitions. \n  //     To update them, edit the d.ts file and run `pnpm proptypes`.     \n  // \n  /**\n   * If `true`, the component is checked.\n   */\n  checked: PropTypes.bool,\n  /**\n   * The icon to display when the component is checked.\n   * @default <CheckBoxIcon />\n   */\n  checkedIcon: PropTypes.node,\n  /**\n   * Override or extend the styles applied to the component.\n   */\n  classes: PropTypes.object,\n  /**\n   * @ignore\n   */\n  className: PropTypes.string,\n  /**\n   * The color of the component.\n   * It supports both default and custom theme colors, which can be added as shown in the\n   * [palette customization guide](https://mui.com/material-ui/customization/palette/#custom-colors).\n   * @default 'primary'\n   */\n  color: PropTypes /* @typescript-to-proptypes-ignore */.oneOfType([PropTypes.oneOf(['default', 'primary', 'secondary', 'error', 'info', 'success', 'warning']), PropTypes.string]),\n  /**\n   * The default checked state. Use when the component is not controlled.\n   */\n  defaultChecked: PropTypes.bool,\n  /**\n   * If `true`, the component is disabled.\n   * @default false\n   */\n  disabled: PropTypes.bool,\n  /**\n   * If `true`, the ripple effect is disabled.\n   * @default false\n   */\n  disableRipple: PropTypes.bool,\n  /**\n   * The icon to display when the component is unchecked.\n   * @default <CheckBoxOutlineBlankIcon />\n   */\n  icon: PropTypes.node,\n  /**\n   * The id of the `input` element.\n   */\n  id: PropTypes.string,\n  /**\n   * If `true`, the component appears indeterminate.\n   * This does not set the native input element to indeterminate due\n   * to inconsistent behavior across browsers.\n   * However, we set a `data-indeterminate` attribute on the `input`.\n   * @default false\n   */\n  indeterminate: PropTypes.bool,\n  /**\n   * The icon to display when the component is indeterminate.\n   * @default <IndeterminateCheckBoxIcon />\n   */\n  indeterminateIcon: PropTypes.node,\n  /**\n   * [Attributes](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#Attributes) applied to the `input` element.\n   * @deprecated Use `slotProps.input` instead. This prop will be removed in v7. See [Migrating from deprecated APIs](/material-ui/migration/migrating-from-deprecated-apis/) for more details.\n   */\n  inputProps: PropTypes.object,\n  /**\n   * Callback fired when the state is changed.\n   *\n   * @param {React.ChangeEvent<HTMLInputElement>} event The event source of the callback.\n   * You can pull out the new checked state by accessing `event.target.checked` (boolean).\n   */\n  onChange: PropTypes.func,\n  /**\n   * If `true`, the `input` element is required.\n   * @default false\n   */\n  required: PropTypes.bool,\n  /**\n   * The size of the component.\n   * `small` is equivalent to the dense checkbox styling.\n   * @default 'medium'\n   */\n  size: PropTypes /* @typescript-to-proptypes-ignore */.oneOfType([PropTypes.oneOf(['medium', 'small']), PropTypes.string]),\n  /**\n   * The props used for each slot inside.\n   * @default {}\n   */\n  slotProps: PropTypes.shape({\n    input: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n    root: PropTypes.oneOfType([PropTypes.func, PropTypes.object])\n  }),\n  /**\n   * The components used for each slot inside.\n   * @default {}\n   */\n  slots: PropTypes.shape({\n    input: PropTypes.elementType,\n    root: PropTypes.elementType\n  }),\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object]),\n  /**\n   * The value of the component. The DOM API casts this to a string.\n   * The browser uses \"on\" as the default value.\n   */\n  value: PropTypes.any\n} : void 0;\nexport default Checkbox;","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\"\n}), 'Check');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4\"\n}), 'PersonAdd');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48z\"\n}), 'Verified');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z\"\n}), 'ContentCopy');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z\"\n}), 'Delete');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"m21.41 11.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58s1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41s-.23-1.06-.59-1.42M5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7\"\n}), 'LocalOffer');","import React, { useState, useEffect } from \"react\";\nimport { bookingConfirm, createHotelPayment, createMyPayment, getOneRoomData, postBooking, verifyPayment } from \"../../services/services\";\nimport { R_KEY_ID } from \"../../services/Secret\";\nimport { useNavigate } from \"react-router-dom\";\nimport {\n    Button,\n    Dialog,\n    DialogActions,\n    DialogContent,\n    DialogTitle,\n} from \"@mui/material\";\nimport color from \"../color\";\nimport { toast } from \"react-toastify\";\nimport { getUserId, getUserName } from \"../../services/axiosClient\";\nimport dayjs from \"dayjs\";\n\ninterface BookingDetails {\n    hotel: any;\n    room: any;\n    guestInfo: {\n        name: string;\n        email: string;\n        phoneNumber: string;\n    };\n    timing: {\n        checkInDate: string;\n        checkInTime: string;\n        checkOutDate: string;\n        checkOutTime: string;\n        duration: string;\n    };\n    pricingDetails: any;\n    bookingType: string | null;\n    rooms: string | null;\n    adults: string | null;\n    children: string | null;\n}\n\ninterface RenderRazorpayProps {\n    orderDetails: any;\n    amount: any;\n    bookingDetails:any;\n}\n\nconst RenderRazorpay: React.FC<RenderRazorpayProps> = ({\n    orderDetails,\n    bookingDetails\n}) => {\n    const [checkedInTimes, setCheckInTimes] = useState(\"\");\n    const [checkedOutTimes, setCheckOutTimes] = useState(\"\");\n    const navigate = useNavigate();\n    const [open, setOpen] = useState(true);\n    console.log(bookingDetails)\n\n    useEffect(() => {\n        // Fetch check-in/check-out times only for non-hourly bookings\n        if (bookingDetails?.bookingType !== \"hourly\") {\n            getOneRoomData(bookingDetails?.room?.id).then((res) => {\n                setCheckInTimes(res?.data?.data?.checkInTime || \"\");\n                setCheckOutTimes(res?.data?.data?.checkOutTime || \"\");\n            });\n        }\n    }, [bookingDetails]);\n\n    // Helper function to get final check-in/check-out times\n    const getTimingDetails = () => {\n        if (bookingDetails?.bookingType === \"hourly\") {\n            // For hourly booking: use the times provided in bookingDetails\n            return {\n                checkInTime: bookingDetails?.timing?.checkInTime,\n                checkOutTime: bookingDetails?.timing?.checkOutTime\n            };\n        } else {\n            // For daily booking: use times from database if available, otherwise fallback\n            return {\n                checkInTime: checkedInTimes || bookingDetails?.timing?.checkInTime,\n                checkOutTime: checkedOutTimes || bookingDetails?.timing?.checkOutTime\n            };\n        }\n    };\n\n    const loadScript = (src: string): Promise<boolean> =>\n        new Promise((resolve) => {\n            const script = document.createElement(\"script\");\n            script.src = src;\n            script.onload = () => resolve(true);\n            script.onerror = () => resolve(false);\n            document.body.appendChild(script);\n        });\n\n    const displayRazorpay = async () => {\n        const isScriptLoaded = await loadScript(\"https://checkout.razorpay.com/v1/checkout.js\");\n        if (!isScriptLoaded || !(window as any).Razorpay) {\n            alert(\"Failed to load Razorpay SDK.\");\n            return;\n        }\n\n        const timingDetails = getTimingDetails();\n\n        const options = {\n            key: R_KEY_ID || \"\",\n            amount: orderDetails.data.amount,\n            currency: orderDetails.data.currency,\n            order_id: orderDetails.data.id,\n            prefill: {\n                name: bookingDetails?.guestInfo?.name,\n                email: bookingDetails?.guestInfo?.email,\n                contact: bookingDetails?.guestInfo?.phoneNumber,\n            },\n            \n            handler: async (response: any) => {\n                try {\n                    const res = await verifyPayment({\n                        orderId: response.razorpay_order_id,\n                        paymentId: response.razorpay_payment_id,\n                        signature: response.razorpay_signature,\n                    });\n                    \n                    console.log(res);\n                    alert(\"Payment Successful\");\n                    \n                    const payLoad = {\n                        userId: getUserId(),\n                        hotelId: bookingDetails?.hotel?.id,\n                        roomId: bookingDetails?.room?.id,\n                        geustName: bookingDetails?.guestInfo?.name,\n                        amountPaid: orderDetails.data.amount,\n                        checkInDate: bookingDetails?.timing?.checkInDate,\n                        checkInTime: timingDetails.checkInTime, // Use the calculated timing\n                        checkOutTime: timingDetails.checkOutTime, // Use the calculated timing\n                        checkOutDate: bookingDetails?.timing?.checkOutDate,\n                        bookingType: bookingDetails?.bookingType,\n                        geustDetails: bookingDetails?.guestInfo,\n                        adults: bookingDetails?.adults,\n                        children: bookingDetails?.children,\n                        hotelName: bookingDetails?.hotel?.propertyName,\n                        status: 'pending',\n                        paymentId: res?.data?.data?.id,\n                        rooms: bookingDetails?.rooms,\n                         ...(bookingDetails?.gstDetails && {\n    GstDetail: bookingDetails.gstDetails,\n  }),\n                    };\n                    \n                    console.log(payLoad);\n\n                    postBooking(payLoad).then((res) => {\n                        const payoutPayLoad = {\n                            userId: getUserId(),\n                            paymentId: res?.data?.data?.id,\n                            hotelId: bookingDetails?.hotel?.id,\n                            roomId: bookingDetails?.room?.id,\n                            bookingId: res?.data?.data?.id,\n                            amountPaise: orderDetails.data.amount,\n                            feePaise: (bookingDetails?.pricingDetails?.platformFee + bookingDetails?.pricingDetails?.gstOnPlatform) * 100,\n                            netAmountPaise: (bookingDetails?.pricingDetails?.basePrice + bookingDetails?.pricingDetails?.gstOnBase) * 100,\n                            currency: \"INR\",\n                            bookingsIncluded: [{\n                                id: res?.data?.data?.id,\n                                bookingDate: res?.data?.data?.checkInDate\n                            }],\n                            scheduledAt: dayjs(bookingDetails?.timing?.checkInDate, \"DD MMM YYYY\").toDate(),\n                            status: \"pending\",\n                            transactionRef: null,\n                            gatewayResponse: null,\n                            failureReason: null,\n                            processedBy: null,\n                            note: \"Daily PayOut \",\n                             ...(bookingDetails?.gstDetails && {\n    GstDetail: bookingDetails.gstDetails,\n  }),\n                        };\n\n                        const mypaymentPayload = {\n                            userId: getUserId(),\n                            paymentId: res?.data?.data?.id,\n                            hotelId: bookingDetails?.hotel?.id,\n                            bookingId: res?.data?.data?.id,\n                            roomId: bookingDetails?.room?.id,\n                            amountPaise: orderDetails.data.amount,\n                            feePaise: (bookingDetails?.pricingDetails?.platformFee + bookingDetails?.pricingDetails?.gstOnPlatform) * 100,\n                            netmyAmountPaise: (bookingDetails?.pricingDetails?.platformFee + bookingDetails?.pricingDetails?.gstOnPlatform) * 100,\n                            currency: \"INR\",\n                            bookingsIncluded: [res?.data?.data?.id],\n                            scheduledAt: dayjs(bookingDetails?.timing?.checkInDate, \"DD MMM YYYY\").toDate(),\n                            initiatedAt: new Date(),\n                            processedAt: null,\n                            status: \"pending\",\n                            transactionRef: null,\n                            gatewayResponse: null,\n                            failureReason: null,\n                            processedBy: null,\n                            note: \"Auto payout settlement\",\n                             ...(bookingDetails?.gstDetails && {\n    GstDetail: bookingDetails.gstDetails,\n  }),\n                        };\n                        \n                        console.log(mypaymentPayload);\n                        \n                        createMyPayment(mypaymentPayload).then((res) => {\n                            console.log(\"My Payment is scheduled\");\n                        }).catch((err) => {\n                            console.log(\"error while creating the mypayment\", err);\n                        });\n                        \n                        console.log(payoutPayLoad);\n                        \n                        createHotelPayment(payoutPayLoad).then((res) => {\n                            console.log(\"My Payout is scheduled\");\n                        }).catch((err) => {\n                            console.log(\"error while creating the PayOut \", err);\n                        });\n\n                        toast(res?.data?.msg);\n                        \n                        const messagetamplet = {\n                            guestName: bookingDetails?.guestInfo?.name,\n                            location: bookingDetails?.hotel?.address,\n                            hotelName: bookingDetails?.hotel?.propertyName,\n                            checkInDate: dayjs(bookingDetails?.timing?.checkInDate, \"DD MMM YYYY\").format(\"DD MMM YYYY\"),\n                            checkInTime: timingDetails.checkInTime, // Use the calculated timing\n                            phone: bookingDetails?.guestInfo?.phoneNumber,\n                            amountPaid: (bookingDetails?.pricingDetails?.basePrice + bookingDetails?.pricingDetails?.gstOnBase),\n                            basePrice: bookingDetails?.pricingDetails?.basePrice,\n                            gstOnBase: bookingDetails?.pricingDetails?.gstOnBase,\n                            razorpayfee: (bookingDetails?.pricingDetails?.gstTotal - (bookingDetails?.pricingDetails?.gstOnBase + bookingDetails?.pricingDetails?.gstOnPlatform)),\n                            platformFee: bookingDetails?.pricingDetails?.platformFee,\n                            gstOnPlatform: bookingDetails?.pricingDetails?.gstOnPlatform,\n                            totalPrice: bookingDetails?.pricingDetails?.totalPrice,\n                            adults: bookingDetails?.adults,\n                            children: bookingDetails?.children,\n                            rooms: 1,\n                            checkOutTime: timingDetails.checkOutTime, // Use the calculated timing\n                            checkOutDate: dayjs(bookingDetails?.timing?.checkOutDate, \"DD MMM YYYY\").format(\"DD MMM YYYY\"),\n                            hotelEmail: bookingDetails?.hotel?.receptionEmail,\n                            receptionistPhone: bookingDetails?.hotel?.receptionMobile,\n                        };\n\n                        console.log(messagetamplet);\n                        \n                        bookingConfirm(messagetamplet).then((res) => {\n                            console.log(\"message send to the wp\", res);\n                        }).catch((err) => {\n                            console.log(err);\n                        });\n\n                        window.location.href=\"/my-bookings\"\n\n                    }).catch((err) => {\n                        console.log(err);\n                    });\n\n                } catch (error) {\n                    alert(\"Payment verification failed. Please try again.\");\n                }\n            },\n        };\n\n        const razorpay = new (window as any).Razorpay(options);\n        razorpay.open();\n    };\n\n    const handleOpen = () => setOpen(true);\n    const handleClose = () => setOpen(false);\n\n    return (\n        <div>\n            <Dialog\n                open={open}\n                onClose={handleClose}\n                maxWidth=\"xs\"\n                fullWidth\n                sx={{\n                    \"& .MuiPaper-root\": {\n                        padding: \"8px\",\n                        borderRadius: \"16px\",\n                    },\n                }}\n            >\n                <DialogTitle>Complete Your Payment</DialogTitle>\n                <DialogContent>\n                    <p>Ensure your payment details are correct before proceeding.</p>\n                </DialogContent>\n                <DialogActions style={{ display: \"flex\", justifyContent: \"flex-end\" }}>\n                    <Button\n                        style={{\n                            textTransform: \"none\",\n                            color: \"black\",\n                        }}\n                        onClick={handleClose}\n                    >\n                        Cancel\n                    </Button>\n                    <Button\n                        onClick={displayRazorpay}\n                        variant=\"contained\"\n                        style={{\n                            background: color.firstColor,\n                            fontSize: \"18px\",\n                            textTransform: \"none\",\n                            border: \"solid 1px white\",\n                        }}\n                        sx={{\n                            padding: \"2px 10px\",\n                            transition: \"all 0.4s ease\",\n                            \"&:hover\": {\n                                paddingRight: \"20px\",\n                            },\n                        }}\n                    >\n                        Proceed to Pay\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </div>\n    );\n};\n\nexport default RenderRazorpay;","/* eslint-disable jsx-a11y/img-redundant-alt */\r\nimport {\r\n  Box,\r\n  Card,\r\n  CardContent,\r\n  CardMedia,\r\n  Divider,\r\n  Typography,\r\n  Checkbox,\r\n  FormControlLabel,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  IconButton,\r\n  TextField,\r\n  MenuItem,\r\n  Select,\r\n  FormControl,\r\n  InputLabel,\r\n  Alert,\r\n  Chip,\r\n  Tooltip,\r\n  CircularProgress,\r\n  Grid,\r\n} from \"@mui/material\";\r\nimport {\r\n  Edit as EditIcon,\r\n  Check as CheckIcon,\r\n  Close as CloseIcon,\r\n  LocalOffer as OfferIcon,\r\n  PersonAdd as PersonAddIcon,\r\n  Verified as VerifiedIcon,\r\n  Add as AddIcon,\r\n  Business as BusinessIcon,\r\n  Delete as DeleteIcon,\r\n  ContentCopy as CopyIcon,\r\n} from \"@mui/icons-material\";\r\nimport dayjs from \"dayjs\";\r\nimport { useFormik } from \"formik\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport PhoneInput from \"react-phone-input-2\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport * as Yup from \"yup\";\r\nimport CustomButton from \"../components/CustomButton\";\r\nimport RenderRazorpay from \"../components/Payments/RanderPayments\";\r\nimport color from \"../components/color\";\r\nimport { BoxStyle, CustomTextField } from \"../components/style\";\r\nimport { getUserId, isLoggedIn } from \"../services/axiosClient\";\r\nimport { createOrder, getProfile, sendOTP, updateGST } from \"../services/services\";\r\nimport LoginOtpModal from \"./Account/LoginOtpModal\";\r\nimport InfoIcon from \"@mui/icons-material/Info\";\r\nimport \"react-phone-input-2/lib/style.css\";\r\n\r\n// Import GST APIs\r\nimport { createGST, getAllGSTByUserId, deleteGST } from \"../services/services\";\r\n\r\n// UPDATED VALIDATION SCHEMA WITH PHONE VALIDATION\r\nconst validationSchema = Yup.object({\r\n  name: Yup.string().required(\"Guest name is required\"),\r\n  email: Yup.string().email(\"Invalid email\").optional(),\r\n  phoneNumber: Yup.string()\r\n    .required(\"Phone number is required\")\r\n    .test('is-valid-phone', 'Enter a valid phone number', (value) => {\r\n      if (!value) return false;\r\n      const phoneWithoutCode = value.slice(2);\r\n      return phoneWithoutCode.length >= 10;\r\n    }),\r\n});\r\n\r\n// ---------------- SIMPLE PRICE CALCULATION ----------------\r\nexport const calculatePriceBreakdown = (\r\n  basePrice: number,\r\n  couponApplied = true\r\n) => {\r\n  const numericBase = Number(basePrice) || 0;\r\n\r\n  if (!numericBase || numericBase <= 0) {\r\n    return {\r\n      basePrice: 0,\r\n      gstOnBase: 0,\r\n      platformFee: 0,\r\n      gstOnPlatform: 0,\r\n      convenienceFee: 0,\r\n      gstOnConvenience: 0,\r\n      totalWithoutDiscount: 0,\r\n      couponDiscount: 0,\r\n      finalPrice: 0,\r\n    };\r\n  }\r\n\r\n  // 1. GST on base (5%)\r\n  const gstOnBase = numericBase * 0.05;\r\n\r\n  // Amount after base GST\r\n  const amountAfterBaseGst = numericBase + gstOnBase;\r\n\r\n  // 2. Platform fee (13% on base + GST)\r\n  const platformFee = amountAfterBaseGst * 0.13;\r\n\r\n  // 3. GST on platform fee (18%)\r\n  const gstOnPlatform = platformFee * 0.18;\r\n\r\n  // 4. Subtotal before convenience\r\n  const subtotalBeforeConvenience =\r\n    numericBase + gstOnBase + platformFee + gstOnPlatform;\r\n\r\n  // 5. Convenience fee (2% on subtotal)\r\n  const convenienceFee = subtotalBeforeConvenience * 0.02;\r\n\r\n  // 6. GST on convenience fee (18%)\r\n  const gstOnConvenience = convenienceFee * 0.18;\r\n\r\n  // 7. Total without discount\r\n  const totalWithoutDiscount =\r\n    subtotalBeforeConvenience + convenienceFee + gstOnConvenience;\r\n\r\n  // 8. Coupon discount (5% on total without discount) - ONLY if coupon is applied\r\n  let couponDiscount = 0;\r\n  if (couponApplied) {\r\n    couponDiscount = totalWithoutDiscount * 0.05;\r\n  }\r\n\r\n  // 9. Final price = total without discount - discount\r\n  const finalPrice = totalWithoutDiscount - couponDiscount;\r\n\r\n  return {\r\n    basePrice: numericBase,\r\n    gstOnBase,\r\n    platformFee,\r\n    gstOnPlatform,\r\n    convenienceFee,\r\n    gstOnConvenience,\r\n    totalWithoutDiscount,\r\n    couponDiscount,\r\n    finalPrice,\r\n  };\r\n};\r\n\r\n// ========== GUEST DISTRIBUTION AND EXTRA CHARGE CALCULATION ==========\r\nconst distributeGuestsToRooms = (\r\n  totalGuests: number,\r\n  standardOccupancy: number,\r\n  maxOccupancy: number,\r\n  additionalGuestRate: number\r\n) => {\r\n  let requiredRooms = 0;\r\n  let extraGuestCount = 0;\r\n  let extraGuestCharge = 0;\r\n  const guestsPerRoom: number[] = [];\r\n\r\n  if (totalGuests <= 0) {\r\n    return {\r\n      requiredRooms: 1,\r\n      extraGuestCount: 0,\r\n      extraGuestCharge: 0,\r\n      guestsPerRoom: [0]\r\n    };\r\n  }\r\n\r\n  // Calculate required rooms based on MAXIMUM occupancy\r\n  requiredRooms = Math.ceil(totalGuests / maxOccupancy);\r\n\r\n  // DISTRIBUTE GUESTS EVENLY ACROSS ROOMS\r\n  let remainingGuests = totalGuests;\r\n\r\n  // First, fill each room with standard occupancy\r\n  for (let i = 0; i < requiredRooms; i++) {\r\n    if (remainingGuests >= standardOccupancy) {\r\n      guestsPerRoom[i] = standardOccupancy;\r\n      remainingGuests -= standardOccupancy;\r\n    } else {\r\n      guestsPerRoom[i] = remainingGuests;\r\n      remainingGuests = 0;\r\n    }\r\n  }\r\n\r\n  // Now distribute remaining guests as extra guests\r\n  let roomIndex = 0;\r\n  while (remainingGuests > 0 && roomIndex < requiredRooms) {\r\n    // Check if this room can take more guests (up to max occupancy)\r\n    if (guestsPerRoom[roomIndex] < maxOccupancy) {\r\n      guestsPerRoom[roomIndex] += 1;\r\n      remainingGuests -= 1;\r\n    }\r\n    roomIndex++;\r\n\r\n    // If we've checked all rooms and still have guests, loop back\r\n    if (roomIndex >= requiredRooms && remainingGuests > 0) {\r\n      roomIndex = 0;\r\n    }\r\n  }\r\n\r\n  // Calculate extra guest charges PER ROOM\r\n  guestsPerRoom.forEach(guestsInRoom => {\r\n    if (guestsInRoom > standardOccupancy) {\r\n      const extraInThisRoom = guestsInRoom - standardOccupancy;\r\n      extraGuestCount += extraInThisRoom;\r\n      extraGuestCharge += extraInThisRoom * additionalGuestRate;\r\n    }\r\n  });\r\n\r\n  return {\r\n    requiredRooms,\r\n    extraGuestCount,\r\n    extraGuestCharge,\r\n    guestsPerRoom,\r\n  };\r\n};\r\n\r\nconst BookingSummary = () => {\r\n  const location = useLocation();\r\n  const hotel = location.state?.hotelData;\r\n  const room = location.state?.selectedRoom;\r\n  const selectedSlot = location.state?.selectedSlot;\r\n  const pricingDetails = location.state?.pricingDetails;\r\n  const inventoryData = location.state?.inventoryData || [];\r\n\r\n  console.log(\"Received pricingDetails:\", pricingDetails);\r\n  console.log(\"Received inventoryData:\", inventoryData);\r\n\r\n  const queryParams = new URLSearchParams(location.search);\r\n\r\n  const initialBookingType = queryParams.get(\"bookingType\");\r\n  const initialCheckinTime = queryParams.get(\"time\");\r\n  const initialCheckinDate = queryParams.get(\"checkinDate\");\r\n  const initialCheckOutDate = queryParams.get(\"checkOutDate\");\r\n  const initialRooms = queryParams.get(\"rooms\");\r\n  const initialAdults = queryParams.get(\"adults\");\r\n  const initialChildren = queryParams.get(\"children\");\r\n\r\n  // State for editable dates\r\n  const [bookingType, setBookingType] = useState(initialBookingType);\r\n  const [checkinTime, setCheckinTime] = useState(initialCheckinTime || \"12:00\");\r\n  const [checkinDate, setCheckinDate] = useState(initialCheckinDate || dayjs().format(\"YYYY-MM-DD\"));\r\n  const [checkOutDate, setCheckOutDate] = useState(initialCheckOutDate || dayjs().add(1, 'day').format(\"YYYY-MM-DD\"));\r\n  const [rooms, setRooms] = useState(initialRooms || \"1\");\r\n  const [adults, setAdults] = useState(initialAdults || \"1\");\r\n  const [children, setChildren] = useState(initialChildren || \"0\");\r\n\r\n  // State for editing\r\n  const [editingCheckin, setEditingCheckin] = useState(false);\r\n  const [editingCheckout, setEditingCheckout] = useState(false);\r\n  const [editingTime, setEditingTime] = useState(false);\r\n  const [tempCheckinDate, setTempCheckinDate] = useState(initialCheckinDate || dayjs().format(\"YYYY-MM-DD\"));\r\n  const [tempCheckOutDate, setTempCheckOutDate] = useState(initialCheckOutDate || dayjs().add(1, 'day').format(\"YYYY-MM-DD\"));\r\n  const [tempCheckinTime, setTempCheckinTime] = useState(initialCheckinTime || \"12:00\");\r\n\r\n  // Extract initial slot duration\r\n  const value = selectedSlot?.slot;\r\n  const number = value?.match(/\\d+/)?.[0];\r\n  const initialExtractedNumber = number ? parseInt(number, 10) : 3;\r\n  const [slotDuration, setSlotDuration] = useState(initialExtractedNumber);\r\n  const [tempSlotDuration, setTempSlotDuration] = useState(initialExtractedNumber);\r\n\r\n  const [user, setUser] = useState<any>({});\r\n  const [showOtpModal, setShowOtpModal] = useState(false);\r\n  const [otpData, setOtpData] = useState({\r\n    phone: \"\",\r\n    name: \"\",\r\n    email: \"\",\r\n    token: \"\",\r\n  });\r\n  const [orderDetails, setOrderDetails] = useState<any>(null);\r\n\r\n  // Terms & Conditions state\r\n  const [termsChecked, setTermsChecked] = useState(false);\r\n  const [termsOpen, setTermsOpen] = useState(false);\r\n\r\n  // Coupon state - Auto applied by default\r\n  const [couponCode, setCouponCode] = useState(\"HUTS4U\");\r\n  const [couponApplied, setCouponApplied] = useState(true);\r\n  const [couponError, setCouponError] = useState(\"\");\r\n\r\n  // Validation error state\r\n  const [validationError, setValidationError] = useState<string | null>(null);\r\n\r\n  // GST state\r\n  const [gstSectionOpen, setGstSectionOpen] = useState(false);\r\n  const [gstinNumber, setGstinNumber] = useState(\"\");\r\n  const [legalName, setLegalName] = useState(\"\");\r\n  const [gstAddress, setGstAddress] = useState(\"\");\r\n  const [gstVerificationStatus, setGstVerificationStatus] = useState<\"none\" | \"verified\" | \"pending\" | \"invalid\">(\"none\");\r\n  const [verifyingGst, setVerifyingGst] = useState(false);\r\n  const [userGSTRecords, setUserGSTRecords] = useState<any[]>([]);\r\n  const [selectedGSTRecord, setSelectedGSTRecord] = useState<any>(null);\r\n  const [loadingGSTRecords, setLoadingGSTRecords] = useState(false);\r\n  const [showNewGSTForm, setShowNewGSTForm] = useState(false);\r\n  const [deletingGST, setDeletingGST] = useState<string | null>(null);\r\n\r\n  // Store calculated price\r\n  const [calculatedPrice, setCalculatedPrice] = useState<any>(null);\r\n\r\n  // Refs for scrolling to fields\r\n  const nameFieldRef = useRef<HTMLInputElement>(null);\r\n  const phoneFieldRef = useRef<HTMLDivElement>(null);\r\n  const gstinFieldRef = useRef<HTMLInputElement>(null);\r\n\r\n  // ========== UPDATED GUEST DISTRIBUTION LOGIC ==========\r\n  const calculateGuestDistribution = () => {\r\n    const totalGuests = Number(adults) + Number(children);\r\n    const standardOccupancy = room?.standardRoomOccupancy || 1;\r\n    const maxOccupancy = room?.maxRoomOccupancy || 1;\r\n    const additionalGuestRate = room?.additionalGuestRate || 0;\r\n\r\n    return distributeGuestsToRooms(\r\n      totalGuests,\r\n      standardOccupancy,\r\n      maxOccupancy,\r\n      additionalGuestRate\r\n    );\r\n  };\r\n\r\n  const guestDistribution = calculateGuestDistribution();\r\n  const {\r\n    requiredRooms,\r\n    extraGuestCount,\r\n    extraGuestCharge,\r\n    guestsPerRoom\r\n  } = guestDistribution;\r\n\r\n  // FIXED: Get inventory-based price for the selected slot and date\r\n  const getInventoryPriceForDate = (slot: string): number => {\r\n    if (!room || !checkinDate || !slot) return 0;\r\n\r\n    const checkDay = dayjs(checkinDate).format('YYYY-MM-DD');\r\n    const dayInventory = inventoryData?.find((inv: any) =>\r\n      dayjs(inv.date).format('YYYY-MM-DD') === checkDay\r\n    );\r\n\r\n    console.log(\"DEBUG getInventoryPriceForDate:\", {\r\n      checkDay,\r\n      slot,\r\n      dayInventory,\r\n      roomRates: {\r\n        rateFor3Hour: room.rateFor3Hour,\r\n        rateFor6Hour: room.rateFor6Hour,\r\n        rateFor12Hour: room.rateFor12Hour,\r\n        rateFor1Night: room.rateFor1Night\r\n      }\r\n    });\r\n\r\n    if (!dayInventory) {\r\n      // If no inventory data, fall back to room rates\r\n      switch (slot) {\r\n        case 'rateFor1Night':\r\n          return room.rateFor1Night || 0;\r\n        case 'rateFor3Hour':\r\n          return room.rateFor3Hour || 0;\r\n        case 'rateFor6Hour':\r\n          return room.rateFor6Hour || 0;  // FIXED: Added missing case\r\n        case 'rateFor12Hour':\r\n          return room.rateFor12Hour || 0;\r\n        default:\r\n          return 0;\r\n      }\r\n    }\r\n\r\n    // Return inventory-specific rate\r\n    switch (slot) {\r\n      case 'rateFor1Night':\r\n        return dayInventory.overnightRate || room.rateFor1Night || 0;\r\n      case 'rateFor3Hour':\r\n        return dayInventory.threeHourRate || room.rateFor3Hour || 0;\r\n      case 'rateFor6Hour':\r\n        return dayInventory.sixHourRate || room.rateFor6Hour || 0;  // FIXED: Added missing case\r\n      case 'rateFor12Hour':\r\n        return dayInventory.twelveHourRate || room.rateFor12Hour || 0;\r\n      default:\r\n        return 0;\r\n    }\r\n  };\r\n\r\n  // Get the slot key based on booking type\r\n  const getSlotKey = (): string => {\r\n    if (bookingType === \"hourly\") {\r\n      switch (slotDuration) {\r\n        case 3:\r\n          return 'rateFor3Hour';\r\n        case 6:\r\n          return 'rateFor6Hour';\r\n        case 12:\r\n          return 'rateFor12Hour';\r\n        default:\r\n          return 'rateFor3Hour';\r\n      }\r\n    } else {\r\n      return 'rateFor1Night';\r\n    }\r\n  };\r\n\r\n  // Check slot availability\r\n  const checkSlotAvailability = (): { isAvailable: boolean, message: string } => {\r\n    if (!room) {\r\n      return {\r\n        isAvailable: false,\r\n        message: 'Room information is missing'\r\n      };\r\n    }\r\n\r\n    const roomStatus = room.status?.toLowerCase();\r\n    const isStatusAvailable = roomStatus === \"available\" || roomStatus === \"active\";\r\n\r\n    if (!isStatusAvailable) {\r\n      return {\r\n        isAvailable: false,\r\n        message: 'This room is currently not available'\r\n      };\r\n    }\r\n\r\n    return {\r\n      isAvailable: true,\r\n      message: 'Available'\r\n    };\r\n  };\r\n\r\n  const slotAvailability = checkSlotAvailability();\r\n\r\n  // Get unit base price from inventory or room\r\n  const getUnitBasePrice = (): number => {\r\n    const slotKey = getSlotKey();\r\n    return getInventoryPriceForDate(slotKey);\r\n  };\r\n\r\n  const unitBase = Number(getUnitBasePrice());\r\n\r\n  // Auto-update rooms based on occupancy\r\n  useEffect(() => {\r\n    if (Number(rooms) !== requiredRooms) {\r\n      setRooms(requiredRooms.toString());\r\n    }\r\n  }, [adults, children, room]);\r\n\r\n  // Initialize calculated price from pricingDetails\r\n  useEffect(() => {\r\n    if (pricingDetails) {\r\n      console.log(\"Initializing calculatedPrice from pricingDetails:\", pricingDetails);\r\n      setCalculatedPrice(pricingDetails);\r\n    }\r\n  }, [pricingDetails]);\r\n\r\n  // Load user profile and GST records on component mount\r\n  useEffect(() => {\r\n    if (isLoggedIn()) {\r\n      loadUserProfileAndGST();\r\n    }\r\n  }, []);\r\n\r\n  // Load user profile and GST records\r\n  const loadUserProfileAndGST = async () => {\r\n    try {\r\n      const profileRes = await getProfile();\r\n      const userData = profileRes?.data?.data;\r\n      setUser(userData);\r\n\r\n      if (userData?._id) {\r\n        // Load user's GST records\r\n        loadUserGSTRecords(userData._id);\r\n      }\r\n    } catch (err) {\r\n      console.log(\"Error loading profile:\", err);\r\n      toast.error(\"Failed to load user profile\");\r\n    }\r\n  };\r\n\r\n  const loadUserGSTRecords = async (userId: string) => {\r\n    if (!userId) return;\r\n\r\n    setLoadingGSTRecords(true);\r\n    try {\r\n      const response = await getAllGSTByUserId(userId);\r\n      console.log(\"GST API Response:\", response);\r\n\r\n      let gstRecords: any[] = [];\r\n\r\n      // Extract from response.data.data array\r\n      if (response?.data?.data && Array.isArray(response.data.data)) {\r\n        gstRecords = response.data.data;\r\n      }\r\n      // If response.data itself is array\r\n      else if (Array.isArray(response?.data)) {\r\n        gstRecords = response.data;\r\n      }\r\n\r\n      console.log(\"Raw GST Records:\", gstRecords);\r\n\r\n      // Transform the data: extract gst_detail objects\r\n      const transformedRecords = gstRecords.map((record: any) => {\r\n        // If record has gst_detail property, use that\r\n        if (record.gst_detail && typeof record.gst_detail === 'object') {\r\n          return {\r\n            ...record.gst_detail,\r\n            // Keep mapping info if needed\r\n            mappingId: record.id,\r\n            userId: record.userId,\r\n            gstId: record.gstId,\r\n            isPrimary: record.isPrimary || false,\r\n            mappingCreatedAt: record.createdAt,\r\n            mappingUpdatedAt: record.updatedAt,\r\n          };\r\n        }\r\n        // Otherwise use the record as is\r\n        return record;\r\n      });\r\n\r\n      console.log(\"Transformed GST Records:\", transformedRecords);\r\n\r\n      setUserGSTRecords(transformedRecords);\r\n\r\n      // If user has verified GST records, automatically select the first verified one\r\n      const verifiedRecords = transformedRecords.filter((record: any) => {\r\n        return (\r\n          record.verified === true ||\r\n          record.gstStatus === \"Active\"\r\n        );\r\n      });\r\n\r\n      console.log(\"Verified GST Records:\", verifiedRecords);\r\n\r\n      if (verifiedRecords.length > 0) {\r\n        const firstRecord = verifiedRecords[0];\r\n        console.log(\"Auto-selecting GST Record:\", firstRecord);\r\n\r\n        setSelectedGSTRecord(firstRecord);\r\n        setGstinNumber(firstRecord.gstNumber || \"\");\r\n        setLegalName(firstRecord.legalName || firstRecord.tradeName || \"\");\r\n        setGstAddress(firstRecord.address || \"\");\r\n        setGstVerificationStatus(\"verified\");\r\n\r\n        // Auto-open GST section if records exist\r\n        setGstSectionOpen(true);\r\n\r\n        toast.success(`Auto-selected GST: ${firstRecord.gstNumber}`);\r\n      } else if (transformedRecords.length > 0) {\r\n        // If there are records but none verified, still show them\r\n        console.log(\"Showing non-verified GST records\");\r\n\r\n        // Auto-open GST section if records exist\r\n        setGstSectionOpen(true);\r\n      }\r\n    } catch (error: any) {\r\n      console.error(\"Error loading GST records:\", error);\r\n      // Don't show toast to avoid annoying users for this optional feature\r\n    } finally {\r\n      setLoadingGSTRecords(false);\r\n    }\r\n  };\r\n\r\n  // STEP 2: Handle GST verification and creation\r\n  const handleVerifyGST = async () => {\r\n    if (!gstinNumber.trim()) {\r\n      toast.error(\"Please enter GSTIN number\");\r\n      gstinFieldRef.current?.focus();\r\n      return;\r\n    }\r\n\r\n    // Basic GSTIN format validation (15 characters, alphanumeric)\r\n    const gstinRegex = /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/i;\r\n    if (!gstinRegex.test(gstinNumber.toUpperCase())) {\r\n      toast.error(\"Please enter a valid 15-digit GSTIN format\");\r\n      setGstVerificationStatus(\"invalid\");\r\n      return;\r\n    }\r\n\r\n    setVerifyingGst(true);\r\n    setGstVerificationStatus(\"pending\");\r\n\r\n    try {\r\n      // Get user ID if logged in\r\n      const userId = isLoggedIn() ? getUserId() : null;\r\n\r\n      // Prepare GST payload - only include userId if logged in\r\n      const gstPayload = {\r\n        gstNumber: gstinNumber.toUpperCase(),\r\n        ...(userId && { userId }) // Include user ID only if logged in\r\n      };\r\n\r\n      // Call createGST API (which will verify via API)\r\n      const response = await createGST(gstPayload);\r\n\r\n      if (response?.data?.data) {\r\n        const gstData = response.data?.data || response.data?.result;\r\n\r\n        setGstVerificationStatus(\"verified\");\r\n        setLegalName(gstData?.legalName || gstData?.lgnm || \"\");\r\n        setGstAddress(gstData?.address || gstData?.pradr?.adr || \"\");\r\n\r\n        // Create selected record object\r\n        const selectedRecord = {\r\n          ...gstData,\r\n          id: gstData?.id,\r\n          gstNumber: gstData?.gstNumber || gstinNumber.toUpperCase(),\r\n          legalName: gstData?.legalName || gstData?.lgnm || \"\",\r\n          address: gstData?.address || gstData?.pradr?.adr || \"\",\r\n          verified: true\r\n        };\r\n\r\n        setSelectedGSTRecord(selectedRecord);\r\n\r\n        toast.success(\"GSTIN verified successfully!\");\r\n\r\n        // If user is logged in, reload their GST records\r\n        if (userId) {\r\n          loadUserGSTRecords(userId);\r\n        }\r\n\r\n      } else if (response?.data?.status === \"BAD_REQUEST\") {\r\n        // Handle duplicate GST or verification failure\r\n        const errorMessage = response.data?.message || \"GST verification failed\";\r\n\r\n        if (errorMessage.includes(\"already exists\")) {\r\n          // GST already exists in system\r\n          const existingGST = response.data?.data;\r\n\r\n          // Update with user ID if logged in\r\n          if (userId && existingGST?.id) {\r\n            try {\r\n              const updateResponse = await updateGST(existingGST.id, { userId });\r\n              if (updateResponse?.data?.success) {\r\n                toast.success(\"GST linked to your account!\");\r\n              }\r\n            } catch (updateError) {\r\n              console.error(\"Error updating GST user ID:\", updateError);\r\n            }\r\n          }\r\n\r\n          setGstVerificationStatus(\"verified\");\r\n          setGstinNumber(existingGST.gstNumber || gstinNumber.toUpperCase());\r\n          setLegalName(existingGST.legalName || \"\");\r\n          setGstAddress(existingGST.address || \"\");\r\n          setSelectedGSTRecord(existingGST);\r\n\r\n          toast.info(\"Using existing GST record\");\r\n        } else {\r\n          setGstVerificationStatus(\"invalid\");\r\n          toast.error(errorMessage);\r\n        }\r\n      } else {\r\n        setGstVerificationStatus(\"invalid\");\r\n        toast.error(\"GST verification failed. Please try again.\");\r\n      }\r\n    } catch (error: any) {\r\n      console.error(\"GST verification error:\", error);\r\n      setGstVerificationStatus(\"invalid\");\r\n\r\n      // Check if it's a duplicate GST error\r\n      if (error.response?.data?.status === \"BAD_REQUEST\") {\r\n        const errorData = error.response.data;\r\n\r\n        if (errorData?.data) {\r\n          // Existing GST found\r\n          setGstVerificationStatus(\"verified\");\r\n          setLegalName(errorData.data.legalName || \"\");\r\n          setGstAddress(errorData.data.address || \"\");\r\n          setSelectedGSTRecord(errorData.data);\r\n          toast.info(\"Using existing GST record\");\r\n        } else {\r\n          toast.error(errorData?.message || \"Invalid GST number\");\r\n        }\r\n      } else {\r\n        toast.error(\"Failed to verify GST. Please check your internet connection.\");\r\n      }\r\n    } finally {\r\n      setVerifyingGst(false);\r\n    }\r\n  };\r\n\r\n  // Handle GST record selection from saved records\r\n  const handleGSTRecordSelect = (record: any) => {\r\n    setSelectedGSTRecord(record);\r\n    setGstinNumber(record.gstNumber || \"\");\r\n    setLegalName(record.legalName || \"\");\r\n    setGstAddress(record.address || \"\");\r\n    setGstVerificationStatus(\r\n      record.verified === true || record.gstStatus === \"Active\"\r\n        ? \"verified\"\r\n        : \"none\"\r\n    );\r\n    setShowNewGSTForm(false);\r\n    toast.success(`Selected GSTIN: ${record.gstNumber}`);\r\n  };\r\n\r\n  // Handle adding new GST\r\n  const handleAddNewGST = () => {\r\n    setShowNewGSTForm(true);\r\n    setGstinNumber(\"\");\r\n    setLegalName(\"\");\r\n    setGstAddress(\"\");\r\n    setGstVerificationStatus(\"none\");\r\n    setSelectedGSTRecord(null);\r\n  };\r\n\r\n  // Handle deleting GST mapping (unlinking from user)\r\n  const handleDeleteGST = async (gstId: string) => {\r\n    if (!isLoggedIn()) {\r\n      toast.error(\"Please login to manage GST records\");\r\n      return;\r\n    }\r\n\r\n    if (!window.confirm(\"Are you sure you want to remove this GST from your account?\")) {\r\n      return;\r\n    }\r\n\r\n    setDeletingGST(gstId);\r\n    try {\r\n      const payLoad = {\r\n        userId: getUserId()\r\n      }\r\n      console.log(gstId);\r\n      console.log(payLoad);\r\n      const response = await deleteGST(gstId, payLoad.userId);\r\n      if (response?.data?.success) {\r\n        toast.success(\"GST removed from your account\");\r\n\r\n        // Update local state\r\n        setUserGSTRecords(prev => prev.filter(record =>\r\n          record.id !== gstId && record._id !== gstId\r\n        ));\r\n\r\n        // Clear selection if deleted record was selected\r\n        if (selectedGSTRecord &&\r\n          (selectedGSTRecord.id === gstId || selectedGSTRecord._id === gstId)) {\r\n          handleClearGST();\r\n        }\r\n      } else {\r\n        toast.error(\"Failed to remove GST\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error deleting GST:\", error);\r\n      toast.error(\"Failed to remove GST\");\r\n    } finally {\r\n      setDeletingGST(null);\r\n    }\r\n  };\r\n\r\n  // Function to copy GSTIN to clipboard\r\n  const handleCopyGSTIN = (gstNumber: string) => {\r\n    navigator.clipboard.writeText(gstNumber)\r\n      .then(() => toast.success(\"GSTIN copied to clipboard\"))\r\n      .catch(() => toast.error(\"Failed to copy GSTIN\"));\r\n  };\r\n\r\n  // Handle clearing GST selection\r\n  const handleClearGST = () => {\r\n    setSelectedGSTRecord(null);\r\n    setGstinNumber(\"\");\r\n    setLegalName(\"\");\r\n    setGstAddress(\"\");\r\n    setGstVerificationStatus(\"none\");\r\n    setShowNewGSTForm(false);\r\n    toast.info(\"GST selection cleared\");\r\n  };\r\n\r\n  // Handle date changes and update price\r\n  const handleCheckinDateSave = () => {\r\n    if (!tempCheckinDate) {\r\n      toast.error(\"Please select a check-in date\");\r\n      return;\r\n    }\r\n\r\n    if (!dayjs(tempCheckinDate, \"YYYY-MM-DD\", true).isValid()) {\r\n      toast.error(\"Invalid date format. Please use YYYY-MM-DD format\");\r\n      return;\r\n    }\r\n\r\n    if (bookingType === \"hourly\") {\r\n      setCheckinDate(tempCheckinDate);\r\n      setEditingCheckin(false);\r\n      toast.success(\"Check-in date updated\");\r\n    } else {\r\n      if (dayjs(tempCheckinDate).isAfter(dayjs(tempCheckOutDate))) {\r\n        toast.error(\"Check-in date cannot be after check-out date\");\r\n        return;\r\n      }\r\n      setCheckinDate(tempCheckinDate);\r\n      setEditingCheckin(false);\r\n      toast.success(\"Check-in date updated\");\r\n    }\r\n  };\r\n\r\n  const handleCheckoutDateSave = () => {\r\n    if (!tempCheckOutDate) {\r\n      toast.error(\"Please select a check-out date\");\r\n      return;\r\n    }\r\n\r\n    if (!dayjs(tempCheckOutDate, \"YYYY-MM-DD\", true).isValid()) {\r\n      toast.error(\"Invalid date format. Please use YYYY-MM-DD format\");\r\n      return;\r\n    }\r\n\r\n    if (dayjs(tempCheckOutDate).isBefore(dayjs(tempCheckinDate))) {\r\n      toast.error(\"Check-out date cannot be before check-in date\");\r\n      return;\r\n    }\r\n    setCheckOutDate(tempCheckOutDate);\r\n    setEditingCheckout(false);\r\n    toast.success(\"Check-out date updated\");\r\n  };\r\n\r\n  // Handle time changes for hourly bookings\r\n  const handleTimeSave = () => {\r\n    if (!tempCheckinTime) {\r\n      toast.error(\"Please select a check-in time\");\r\n      return;\r\n    }\r\n\r\n    // Validate time format\r\n    if (!tempCheckinTime.match(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/)) {\r\n      toast.error(\"Invalid time format. Please use HH:mm format\");\r\n      return;\r\n    }\r\n\r\n    setCheckinTime(tempCheckinTime);\r\n    setSlotDuration(tempSlotDuration);\r\n    setEditingTime(false);\r\n    toast.success(\"Check-in time and duration updated\");\r\n  };\r\n\r\n  // Calculate nights based on dates\r\n  const calculateNights = () => {\r\n    if (!checkinDate || !checkOutDate) return 1;\r\n\r\n    const inDate = dayjs(checkinDate, \"YYYY-MM-DD\", true);\r\n    const outDate = dayjs(checkOutDate, \"YYYY-MM-DD\", true);\r\n\r\n    if (!inDate.isValid() || !outDate.isValid()) return 1;\r\n\r\n    const diff = outDate.diff(inDate, \"day\");\r\n    return Math.max(1, diff);\r\n  };\r\n\r\n  const nights = calculateNights();\r\n\r\n  // Calculate price breakdown WITHOUT extra guest charges\r\n  const calculateTotalPrice = () => {\r\n    // If we have calculatedPrice from props or previous calculation, use it\r\n    if (calculatedPrice && !editingCheckin && !editingCheckout && !editingTime) {\r\n      console.log(\"Using existing calculatedPrice:\", calculatedPrice);\r\n\r\n      // Calculate coupon discount based on existing total\r\n      let couponDiscount = 0;\r\n      let totalWithoutDiscount = calculatedPrice.totalPrice || 0;\r\n\r\n      if (couponApplied) {\r\n        couponDiscount = totalWithoutDiscount * 0.05;\r\n      }\r\n\r\n      const finalPrice = totalWithoutDiscount - couponDiscount;\r\n\r\n      return {\r\n        basePrice: calculatedPrice.basePrice || 0,\r\n        gstOnBase: calculatedPrice.gstOnBase || 0,\r\n        platformFee: calculatedPrice.platformFee || 0,\r\n        gstOnPlatform: calculatedPrice.gstOnPlatform || 0,\r\n        convenienceFee: calculatedPrice.gatewayFee || 0,\r\n        gstOnConvenience: (calculatedPrice.gatewayFee || 0) * 0.18,\r\n        totalWithoutDiscount: totalWithoutDiscount,\r\n        couponDiscount,\r\n        finalPrice,\r\n        nights,\r\n        totalMultiplier: requiredRooms * (bookingType === \"hourly\" ? slotDuration / 3 : nights),\r\n        bookingType,\r\n        slotDuration,\r\n        requiredRooms,\r\n        unitBase: (calculatedPrice.basePrice || 0) / requiredRooms / (bookingType === \"hourly\" ? slotDuration / 3 : nights),\r\n      };\r\n    }\r\n\r\n    // Otherwise calculate from scratch\r\n    console.log(\"Calculating price from scratch...\");\r\n\r\n    // Calculate multiplier WITHOUT extra guest charges\r\n    let totalMultiplier;\r\n    if (bookingType === \"hourly\") {\r\n      const hoursMultiplier = slotDuration / 3;\r\n      totalMultiplier = requiredRooms * hoursMultiplier;\r\n    } else {\r\n      totalMultiplier = requiredRooms * nights;\r\n    }\r\n\r\n    const totalBasePrice = unitBase * totalMultiplier;\r\n\r\n    // Calculate breakdown with coupon (NO extra guest charges added here)\r\n    const breakdown = calculatePriceBreakdown(totalBasePrice, couponApplied);\r\n\r\n    return {\r\n      ...breakdown,\r\n      nights,\r\n      totalMultiplier,\r\n      bookingType,\r\n      slotDuration,\r\n      requiredRooms,\r\n      unitBase,\r\n    };\r\n  };\r\n\r\n  const priceBreakdown = calculateTotalPrice();\r\n  const {\r\n    basePrice: totalBase,\r\n    gstOnBase,\r\n    platformFee,\r\n    gstOnPlatform,\r\n    convenienceFee,\r\n    gstOnConvenience,\r\n    totalWithoutDiscount,\r\n    couponDiscount,\r\n    finalPrice,\r\n    unitBase: inventoryUnitBase,\r\n  } = priceBreakdown;\r\n\r\n  // Display values for UI\r\n  const displayBase = totalBase;\r\n  const displayBasePlus700 = displayBase + 700;\r\n  const displayCombinedBasePlatform = totalBase + platformFee;\r\n  const displayGstTotal = gstOnBase + gstOnPlatform + convenienceFee + gstOnConvenience;\r\n  const payableAfterCoupon = Number(finalPrice.toFixed(2));\r\n\r\n  // Invoice pieces\r\n  const serviceTaxableValue = platformFee;\r\n  const cgstOnService = gstOnPlatform / 2;\r\n  const sgstOnService = gstOnPlatform / 2;\r\n  const convenienceFeeInclGst = convenienceFee + gstOnConvenience;\r\n  const grandTotal = payableAfterCoupon;\r\n\r\n  // Handle coupon removal\r\n  const handleRemoveCoupon = () => {\r\n    setCouponApplied(false);\r\n    toast.info(\"Huts4u Discount removed. Prices updated.\");\r\n  };\r\n\r\n  const handleApplyCoupon = () => {\r\n    setCouponApplied(true);\r\n    toast.success(\"Huts4u Discount applied!\");\r\n  };\r\n\r\n  // STEP 3: Handle payment with GST data in payload\r\n  const handlePayment = async () => {\r\n    try {\r\n      if (!grandTotal || grandTotal <= 0) {\r\n        toast.error(\"Booking amount cannot be zero.\");\r\n        return;\r\n      }\r\n\r\n      // Prepare GST data for booking payload\r\n      let gstDataForBooking = null;\r\n      if (gstVerificationStatus === \"verified\" && gstinNumber) {\r\n        gstDataForBooking = {\r\n          gstNumber: gstinNumber,\r\n          legalName: legalName,\r\n          address: gstAddress,\r\n          verified: true,\r\n          gstRecordId: selectedGSTRecord?.id || selectedGSTRecord?._id,\r\n          gstStatus: selectedGSTRecord?.gstStatus || \"Active\",\r\n        };\r\n      }\r\n\r\n      const payLoad = {\r\n        amount: Math.round(grandTotal),\r\n        currency: \"INR\",\r\n        // Include GST data in the order payload\r\n        metadata: {\r\n          gstDetails: gstDataForBooking,\r\n          bookingType,\r\n          hotelId: hotel?._id,\r\n          roomId: room?._id,\r\n        }\r\n      };\r\n\r\n      const response = await createOrder(payLoad);\r\n\r\n      if (response?.data) {\r\n        setOrderDetails(response.data);\r\n      } else {\r\n        toast.error(\"Payment failed. Please try again.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error during payment:\", error);\r\n      toast.error(\"Payment failed. Please try again.\");\r\n    }\r\n  };\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      name: user.userName || \"\",\r\n      email: user.email || \"\",\r\n      phoneNumber: user.phoneNumber ? `91${user.phoneNumber}` : \"91\",\r\n    },\r\n    validationSchema,\r\n    enableReinitialize: true,\r\n    onSubmit: (values) => {\r\n      // Clear previous validation error\r\n      setValidationError(null);\r\n\r\n      // Check slot availability first\r\n      if (!slotAvailability.isAvailable) {\r\n        setValidationError(slotAvailability.message);\r\n        return;\r\n      }\r\n\r\n      // Check for required fields before terms\r\n      if (!values.name.trim()) {\r\n        setValidationError(\"Guest name is required\");\r\n        nameFieldRef.current?.focus();\r\n        nameFieldRef.current?.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n        return;\r\n      }\r\n\r\n      if (!values.phoneNumber || values.phoneNumber === \"91\" || values.phoneNumber.length < 12) {\r\n        setValidationError(\"Valid phone number is required\");\r\n        phoneFieldRef.current?.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n        return;\r\n      }\r\n\r\n      if (!termsChecked) {\r\n        setValidationError(\"Please accept Terms & Conditions before proceeding.\");\r\n        return;\r\n      }\r\n\r\n      if (isLoggedIn()) {\r\n        handlePayment();\r\n      } else {\r\n        const payLoad = {\r\n          name: values.name,\r\n          email: values.email,\r\n          phone: values.phoneNumber.slice(2),\r\n        };\r\n        sendOTP(payLoad)\r\n          .then((res) => {\r\n            console.log(res);\r\n            setShowOtpModal(true);\r\n            toast(\"OTP sent successfully. Please verify the OTP.\");\r\n            setOtpData({\r\n              phone: values.phoneNumber.slice(2),\r\n              name: values.name,\r\n              email: values.email,\r\n              token: res?.data?.data,\r\n            });\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n      }\r\n    },\r\n  });\r\n\r\n  const handleOtpSuccess = () => {\r\n    setShowOtpModal(false);\r\n\r\n    // If GST is verified but doesn't have user ID, update it\r\n    if (gstVerificationStatus === \"verified\" && selectedGSTRecord &&\r\n      isLoggedIn() && !selectedGSTRecord.userId) {\r\n      updateGSTRecordWithUserId();\r\n    } else {\r\n      handlePayment();\r\n    }\r\n  };\r\n\r\n  // Function to update GST record with user ID\r\n  const updateGSTRecordWithUserId = async () => {\r\n    try {\r\n      const userId = getUserId();\r\n      const gstId = selectedGSTRecord?.id || selectedGSTRecord?._id;\r\n\r\n      if (userId && gstId) {\r\n        // Update GST record with user ID\r\n        const updatePayload = { userId };\r\n        const response = await updateGST(gstId, updatePayload);\r\n\r\n        if (response?.data?.success) {\r\n          toast.success(\"GST record linked to your account!\");\r\n\r\n          // Reload GST records to get updated data\r\n          loadUserGSTRecords(userId);\r\n        }\r\n      }\r\n\r\n      // Proceed to payment\r\n      handlePayment();\r\n    } catch (error) {\r\n      console.error(\"Error updating GST with user ID:\", error);\r\n      toast.error(\"Could not link GST to account. Proceeding with payment...\");\r\n      handlePayment();\r\n    }\r\n  };\r\n\r\n  const textContainerRef = useRef<HTMLDivElement>(null);\r\n  const [imageHeight, setImageHeight] = useState(\"auto\");\r\n\r\n  // Updated calculateCheckoutTime function\r\n  const calculateCheckoutTime = () => {\r\n    if (bookingType === \"hourly\" && checkinTime && checkinDate && slotDuration) {\r\n      const checkInDateTime = dayjs(`${checkinDate} ${checkinTime}`, \"YYYY-MM-DD HH:mm\");\r\n      const checkOutDateTime = checkInDateTime.add(slotDuration, \"hour\");\r\n\r\n      return {\r\n        checkInDate: checkInDateTime.format(\"DD MMM YYYY\"),\r\n        checkInTime: checkInDateTime.format(\"hh:mm A\"),\r\n        checkOutDate: checkOutDateTime.format(\"DD MMM YYYY\"),\r\n        checkOutTime: checkOutDateTime.format(\"hh:mm A\"),\r\n        duration: `${slotDuration} hrs`,\r\n        bookingType: \"hourly\",\r\n      };\r\n    } else {\r\n      const nights = calculateNights();\r\n      return {\r\n        checkInDate: dayjs(checkinDate, \"YYYY-MM-DD\").format(\"DD MMM YYYY\"),\r\n        checkInTime: \"12:00 PM\",\r\n        checkOutDate: dayjs(checkOutDate, \"YYYY-MM-DD\").format(\"DD MMM YYYY\"),\r\n        checkOutTime: \"11:00 AM\",\r\n        duration: `${nights} night${nights > 1 ? 's' : ''}`,\r\n        bookingType: \"daily\",\r\n      };\r\n    }\r\n  };\r\n\r\n  // Get booking type label for display\r\n  const getBookingTypeLabel = () => {\r\n    switch (bookingType) {\r\n      case \"hourly\":\r\n        return \"Hourly Booking\";\r\n      case \"daily\":\r\n      case \"overnight\":\r\n      default:\r\n        return \"Daily/Overnight Booking\";\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (textContainerRef.current) {\r\n      setImageHeight(`${textContainerRef.current.clientHeight}px`);\r\n    }\r\n  }, [hotel, nights, slotDuration]);\r\n\r\n  // Generate time slots for the time picker\r\n  const generateTimeSlots = () => {\r\n    const slots = [];\r\n    for (let hour = 0; hour < 24; hour++) {\r\n      for (let minute = 0; minute < 60; minute += 30) {\r\n        const time = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;\r\n        slots.push({ value: time, label: dayjs(time, \"HH:mm\").format(\"hh:mm A\") });\r\n      }\r\n    }\r\n    return slots;\r\n  };\r\n\r\n  const timeSlots = generateTimeSlots();\r\n\r\n  // T&C modal content\r\n  const termsText = `\r\nBy booking, you agree to the property's terms and conditions, cancellation policy, and house rules.\r\nYou also agree to follow Huts4u's official Terms & Conditions mentioned on the link below.\r\nPlease ensure you have read and understood all applicable policies.\r\n`;\r\n\r\n  // Function to check if form is valid\r\n  const isFormValid = () => {\r\n    const isNameValid = formik.values.name.trim() !== \"\";\r\n    const isPhoneValid = formik.values.phoneNumber &&\r\n      formik.values.phoneNumber !== \"91\" &&\r\n      formik.values.phoneNumber.length >= 12;\r\n    const isTermsAccepted = termsChecked;\r\n    const isSlotAvailable = slotAvailability.isAvailable;\r\n\r\n    return isNameValid && isPhoneValid && isTermsAccepted && isSlotAvailable;\r\n  };\r\n\r\n  // Function to handle field changes and show errors\r\n  const handleFieldChange = (field: string, value: string) => {\r\n    formik.setFieldValue(field, value);\r\n    formik.setFieldTouched(field, true);\r\n\r\n    // Clear validation error when user starts typing\r\n    if (validationError) {\r\n      setValidationError(null);\r\n    }\r\n  };\r\n\r\n  // Price source indicator\r\n  const getPriceSource = () => {\r\n    const checkDay = dayjs(checkinDate).format('YYYY-MM-DD');\r\n    const dayInventory = inventoryData?.find((inv: any) =>\r\n      dayjs(inv.date).format('YYYY-MM-DD') === checkDay\r\n    );\r\n\r\n    return dayInventory ? \"Dynamic Inventory Pricing\" : \"Standard Rate\";\r\n  };\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        ...BoxStyle,\r\n        background: \"#f6f6f6\",\r\n        mt: 0,\r\n        py: 4,\r\n        px: { xs: 1, md: 3 },\r\n        display: \"flex\",\r\n        flexDirection: { xs: \"column\", md: \"row\" },\r\n        justifyContent: \"center\",\r\n        gap: \"20px\",\r\n      }}\r\n    >\r\n      {/* LEFT: Booking + Guest Info */}\r\n      <Card\r\n        sx={{\r\n          p: 1,\r\n          background: \"white\",\r\n          maxWidth: \"700px\",\r\n          border: \"none\",\r\n          boxShadow: 0,\r\n          borderRadius: \"12px\",\r\n        }}\r\n      >\r\n        <CardContent>\r\n          <Typography\r\n            variant=\"h6\"\r\n            gutterBottom\r\n            sx={{ color: color.firstColor, fontWeight: \"bold\" }}\r\n          >\r\n            Your Booking Summary\r\n          </Typography>\r\n\r\n          {/* SLOT AVAILABILITY ALERT */}\r\n          {!slotAvailability.isAvailable && (\r\n            <Alert\r\n              severity=\"error\"\r\n              sx={{\r\n                mb: 2,\r\n                borderRadius: 2,\r\n                '& .MuiAlert-message': {\r\n                  fontSize: '14px',\r\n                  fontWeight: 500\r\n                }\r\n              }}\r\n            >\r\n              {slotAvailability.message}\r\n              <Button\r\n                variant=\"outlined\"\r\n                size=\"small\"\r\n                sx={{ ml: 2 }}\r\n                onClick={() => navigate(-1)}\r\n              >\r\n                Go Back\r\n              </Button>\r\n            </Alert>\r\n          )}\r\n\r\n          <Box\r\n            sx={{\r\n              display: \"flex\",\r\n              flexDirection: { xs: \"column\", md: \"row\" },\r\n              gap: { xs: 0, md: 2 },\r\n              position: \"relative\",\r\n              mt: 2,\r\n              height: \"fit-content\",\r\n              alignItems: \"stretch\",\r\n            }}\r\n          >\r\n            <CardMedia\r\n              component=\"img\"\r\n              sx={{\r\n                width: { xs: \"100%\", md: \"250px\" },\r\n                borderRadius: \"12px\",\r\n                objectFit: \"cover\",\r\n                height: imageHeight,\r\n                transition: \"height 0.3s ease\",\r\n              }}\r\n              image={hotel?.propertyImages?.[0]}\r\n            />\r\n            <div style={{ height: \"fit-content\" }} ref={textContainerRef}>\r\n              <Typography\r\n                sx={{\r\n                  fontSize: \"20px\",\r\n                  fontWeight: 600,\r\n                  color: color.firstColor,\r\n                  mt: { xs: 1.5, md: 1 },\r\n                  display: \"-webkit-box\",\r\n                  overflow: \"hidden\",\r\n                  textOverflow: \"ellipsis\",\r\n                  WebkitLineClamp: 1,\r\n                  WebkitBoxOrient: \"vertical\",\r\n                }}\r\n              >\r\n                {hotel?.propertyName}\r\n              </Typography>\r\n              <Typography\r\n                sx={{\r\n                  fontFamily: \"CustomFontSB\",\r\n                  fontSize: { xs: \"12px\", md: \"14px\" },\r\n                  display: \"-webkit-box\",\r\n                  overflow: \"hidden\",\r\n                  textOverflow: \"ellipsis\",\r\n                  WebkitLineClamp: 1,\r\n                  WebkitBoxOrient: \"vertical\",\r\n                }}\r\n              >\r\n                {hotel?.address}\r\n              </Typography>\r\n\r\n              {/* Booking Type Label */}\r\n              <Typography sx={{ fontSize: 14, color: color.forthColor, fontStyle: 'italic', mb: 1, mt: 0.5 }}>\r\n                {getBookingTypeLabel()}\r\n              </Typography>\r\n\r\n              <div\r\n                style={{\r\n                  marginTop: \"10px\",\r\n                  display: \"flex\",\r\n                  flexWrap: \"wrap\",\r\n                  flexDirection: \"column\",\r\n                  gap: \"4px\",\r\n                }}\r\n              >\r\n                {/* Editable Check-in Date - ALWAYS SHOW */}\r\n                <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\r\n                  {editingCheckin ? (\r\n                    <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\r\n                      <TextField\r\n                        type=\"date\"\r\n                        size=\"small\"\r\n                        value={tempCheckinDate}\r\n                        onChange={(e) => {\r\n                          setTempCheckinDate(e.target.value);\r\n                          // Reset calculated price when date changes\r\n                          setCalculatedPrice(null);\r\n                        }}\r\n                        InputLabelProps={{ shrink: true }}\r\n                        sx={{ width: 150 }}\r\n                        InputProps={{\r\n                          sx: { height: 36 }\r\n                        }}\r\n                      />\r\n                      <IconButton size=\"small\" onClick={handleCheckinDateSave} sx={{ color: \"green\" }}>\r\n                        <CheckIcon />\r\n                      </IconButton>\r\n                      <IconButton size=\"small\" onClick={() => {\r\n                        setTempCheckinDate(checkinDate);\r\n                        setEditingCheckin(false);\r\n                      }} sx={{ color: \"red\" }}>\r\n                        <CloseIcon />\r\n                      </IconButton>\r\n                    </Box>\r\n                  ) : (\r\n                    <>\r\n                      <Typography sx={typoStyle}>\r\n                        <strong>Check-In Date:</strong>{\" \"}\r\n                        {dayjs(checkinDate, \"YYYY-MM-DD\").format(\"DD MMM YYYY\")}\r\n                      </Typography>\r\n                      <IconButton\r\n                        size=\"small\"\r\n                        onClick={() => {\r\n                          setTempCheckinDate(checkinDate);\r\n                          setEditingCheckin(true);\r\n                        }}\r\n                        sx={{ ml: -1 }}\r\n                      >\r\n                        <EditIcon fontSize=\"small\" />\r\n                      </IconButton>\r\n                    </>\r\n                  )}\r\n                </Box>\r\n\r\n                {/* FOR HOURLY BOOKINGS: Show check-in time */}\r\n                {bookingType === \"hourly\" && (\r\n                  <>\r\n                    {/* Editable Check-in Time */}\r\n                    <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1, mt: 1 }}>\r\n                      {editingTime ? (\r\n                        <Box sx={{ display: \"flex\", flexDirection: \"column\", gap: 1, width: \"100%\" }}>\r\n                          <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\r\n                            <FormControl size=\"small\" sx={{ minWidth: 120 }}>\r\n                              <InputLabel>Check-in Time</InputLabel>\r\n                              <Select\r\n                                value={tempCheckinTime}\r\n                                onChange={(e) => setTempCheckinTime(e.target.value)}\r\n                                label=\"Check-in Time\"\r\n                              >\r\n                                {timeSlots.map((time) => (\r\n                                  <MenuItem key={time.value} value={time.value}>\r\n                                    {time.label}\r\n                                  </MenuItem>\r\n                                ))}\r\n                              </Select>\r\n                            </FormControl>\r\n                            {/* <TextField\r\n                              select\r\n                              size=\"small\"\r\n                              label=\"Duration\"\r\n                              value={tempSlotDuration}\r\n                              onChange={(e) => {\r\n                                setTempSlotDuration(Number(e.target.value));\r\n                                // Reset calculated price when duration changes\r\n                                setCalculatedPrice(null);\r\n                              }}\r\n                              sx={{ minWidth: 100 }}\r\n                            >\r\n                              <MenuItem value={3}>3 hrs</MenuItem>\r\n                              <MenuItem value={6}>6 hrs</MenuItem>\r\n                              <MenuItem value={12}>12 hrs</MenuItem>\r\n                            </TextField> */}\r\n                          </Box>\r\n                          <Box sx={{ display: \"flex\", gap: 1 }}>\r\n                            <IconButton size=\"small\" onClick={handleTimeSave} sx={{ color: \"green\" }}>\r\n                              <CheckIcon />\r\n                            </IconButton>\r\n                            <IconButton size=\"small\" onClick={() => {\r\n                              setTempCheckinTime(checkinTime);\r\n                              setTempSlotDuration(slotDuration);\r\n                              setEditingTime(false);\r\n                            }} sx={{ color: \"red\" }}>\r\n                              <CloseIcon />\r\n                            </IconButton>\r\n                          </Box>\r\n                        </Box>\r\n                      ) : (\r\n                        <>\r\n                          <Typography sx={typoStyle}>\r\n                            <strong>Check-In Time:</strong>{\" \"}\r\n                            {checkinTime\r\n                              ? dayjs(checkinTime, \"HH:mm\", true).isValid()\r\n                                ? dayjs(checkinTime, \"HH:mm\").format(\"hh:mm A\")\r\n                                : \"12:00 PM\"\r\n                              : \"12:00 PM\"}\r\n                          </Typography>\r\n                          <IconButton\r\n                            size=\"small\"\r\n                            onClick={() => {\r\n                              setTempCheckinTime(checkinTime);\r\n                              setTempSlotDuration(slotDuration);\r\n                              setEditingTime(true);\r\n                            }}\r\n                            sx={{ ml: -1 }}\r\n                          >\r\n                            <EditIcon fontSize=\"small\" />\r\n                          </IconButton>\r\n                        </>\r\n                      )}\r\n                    </Box>\r\n\r\n                    {/* Show check-out time calculation for hourly */}\r\n                    <Typography sx={typoStyle}>\r\n                      <strong>Check-Out Time:</strong>{\" \"}\r\n                      {dayjs(`${checkinDate} ${checkinTime}`, \"YYYY-MM-DD HH:mm\")\r\n                        .add(slotDuration, 'hour')\r\n                        .format(\"DD MMM YYYY hh:mm A\")}\r\n                    </Typography>\r\n                  </>\r\n                )}\r\n\r\n                {/* FOR DAILY/OVERNIGHT BOOKINGS: Show check-out date */}\r\n                {bookingType !== \"hourly\" && (\r\n                  <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1, mt: 1 }}>\r\n                    {editingCheckout ? (\r\n                      <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\r\n                        <TextField\r\n                          type=\"date\"\r\n                          size=\"small\"\r\n                          value={tempCheckOutDate}\r\n                          onChange={(e) => {\r\n                            setTempCheckOutDate(e.target.value);\r\n                            // Reset calculated price when date changes\r\n                            setCalculatedPrice(null);\r\n                          }}\r\n                          InputLabelProps={{ shrink: true }}\r\n                          sx={{ width: 150 }}\r\n                          InputProps={{\r\n                            sx: { height: 36 }\r\n                          }}\r\n                        />\r\n                        <IconButton size=\"small\" onClick={handleCheckoutDateSave} sx={{ color: \"green\" }}>\r\n                          <CheckIcon />\r\n                        </IconButton>\r\n                        <IconButton size=\"small\" onClick={() => {\r\n                          setTempCheckOutDate(checkOutDate);\r\n                          setEditingCheckout(false);\r\n                        }} sx={{ color: \"red\" }}>\r\n                          <CloseIcon />\r\n                        </IconButton>\r\n                      </Box>\r\n                    ) : (\r\n                      <>\r\n                        <Typography sx={typoStyle}>\r\n                          <strong>Check-Out Date:</strong>{\" \"}\r\n                          {dayjs(checkOutDate, \"YYYY-MM-DD\").format(\"DD MMM YYYY\")}\r\n                        </Typography>\r\n                        <IconButton\r\n                          size=\"small\"\r\n                          onClick={() => {\r\n                            setTempCheckOutDate(checkOutDate);\r\n                            setEditingCheckout(true);\r\n                          }}\r\n                          sx={{ ml: -1 }}\r\n                        >\r\n                          <EditIcon fontSize=\"small\" />\r\n                        </IconButton>\r\n                      </>\r\n                    )}\r\n                  </Box>\r\n                )}\r\n\r\n                {/* Duration display - Show based on booking type */}\r\n                {bookingType === \"hourly\" ? (\r\n                  <Typography sx={typoStyle}>\r\n                    <strong>Duration: </strong>\r\n                    {slotDuration} hrs\r\n                  </Typography>\r\n                ) : (\r\n                  <Typography sx={typoStyle}>\r\n                    <strong>Nights: </strong>\r\n                    {nights} night{nights > 1 ? 's' : ''}\r\n                  </Typography>\r\n                )}\r\n\r\n                <Typography sx={typoStyle}>\r\n                  <strong>Room type:</strong> {room?.roomCategory}\r\n                </Typography>\r\n\r\n                {/* Auto-calculated Room Info */}\r\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                  <Typography sx={typoStyle}>\r\n                    <strong>Room Info: </strong>\r\n                    {requiredRooms} Room{requiredRooms && requiredRooms > 1 ? 's' : ''},\r\n                    {adults} Adult{adults && Number(adults) > 1 ? 's' : ''},\r\n                    {children} Child{children && Number(children) > 1 ? 'ren' : ''}\r\n                  </Typography>\r\n                </Box>\r\n\r\n                {/* Price source indicator */}\r\n                <Typography sx={{ fontSize: 12, color: color.forthColor, mt: 1, fontStyle: 'italic' }}>\r\n                  {getPriceSource()}  Price may vary by date and availability\r\n                </Typography>\r\n              </div>\r\n            </div>\r\n          </Box>\r\n\r\n          {/* Occupancy Information Panel */}\r\n          <Box sx={{\r\n            mt: 2,\r\n            p: 1.5,\r\n            bgcolor: '#f5f5f5',\r\n            borderRadius: '8px',\r\n            border: '1px solid #e0e0e0'\r\n          }}>\r\n            <Typography variant=\"caption\" sx={{ fontWeight: 600, color: color.forthColor, display: 'block', mb: 0.5 }}>\r\n              Room Occupancy Rules\r\n            </Typography>\r\n\r\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>\r\n              <Typography variant=\"caption\" sx={{\r\n                bgcolor: '#e3f2fd',\r\n                color: '#1976d2',\r\n                px: 1,\r\n                py: 0.5,\r\n                borderRadius: '4px'\r\n              }}>\r\n                Standard: {room?.standardRoomOccupancy || 1} guest{room?.standardRoomOccupancy > 1 ? 's' : ''}\r\n              </Typography>\r\n\r\n              <Typography variant=\"caption\" sx={{\r\n                bgcolor: '#fff3e0',\r\n                color: '#f57c00',\r\n                px: 1,\r\n                py: 0.5,\r\n                borderRadius: '4px'\r\n              }}>\r\n                Maximum: {room?.maxRoomOccupancy || 1} guest{room?.maxRoomOccupancy > 1 ? 's' : ''}\r\n              </Typography>\r\n\r\n              <Typography variant=\"caption\" sx={{\r\n                bgcolor: '#e8f5e9',\r\n                color: '#2e7d32',\r\n                px: 1,\r\n                py: 0.5,\r\n                borderRadius: '4px'\r\n              }}>\r\n                Your Guest: {Number(adults) + Number(children)} guest{(Number(adults) + Number(children)) > 1 ? 's' : ''}\r\n              </Typography>\r\n\r\n              <Typography variant=\"caption\" sx={{\r\n                bgcolor: '#f3e5f5',\r\n                color: '#7b1fa2',\r\n                px: 1,\r\n                py: 0.5,\r\n                borderRadius: '4px'\r\n              }}>\r\n                Rooms needed: {requiredRooms}\r\n              </Typography>\r\n            </Box>\r\n\r\n            {/* ROOM-WISE DISTRIBUTION */}\r\n            {guestsPerRoom && guestsPerRoom.length > 0 && (\r\n              <Box sx={{ mt: 2 }}>\r\n                <Typography variant=\"caption\" sx={{ fontWeight: 600, color: color.forthColor, display: 'block', mb: 0.5 }}>\r\n                  Room-wise Guest Distribution:\r\n                </Typography>\r\n                <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1 }}>\r\n                  {guestsPerRoom.map((guests, index) => {\r\n                    const standardOccupancy = room?.standardRoomOccupancy || 1;\r\n                    const extraInRoom = guests > standardOccupancy ? guests - standardOccupancy : 0;\r\n\r\n                    return (\r\n                      <Typography key={index} variant=\"caption\" sx={{\r\n                        bgcolor: extraInRoom > 0 ? '#ffebee' : '#e8f5e9',\r\n                        color: extraInRoom > 0 ? '#c62828' : '#2e7d32',\r\n                        px: 1,\r\n                        py: 0.5,\r\n                        borderRadius: '4px'\r\n                      }}>\r\n                        Room {index + 1}: {guests} guest{guests !== 1 ? 's' : ''}\r\n                        {extraInRoom > 0 && ` (+${extraInRoom} extra)`}\r\n                      </Typography>\r\n                    );\r\n                  })}\r\n                </Box>\r\n              </Box>\r\n            )}\r\n\r\n            {/* EXTRA GUEST CHARGE NOTICE - Only show if there are extra guests */}\r\n            {extraGuestCount > 0 && (\r\n              <Box sx={{\r\n                mt: 1.5,\r\n                p: 1,\r\n                bgcolor: '#fff3e0',\r\n                borderRadius: '6px',\r\n                border: '1px solid #ffcc80'\r\n              }}>\r\n                <Typography variant=\"caption\" sx={{ fontWeight: 600, color: '#e65100', display: 'flex', alignItems: 'center', gap: 0.5, mb: 1 }}>\r\n                  <PersonAddIcon fontSize=\"small\" />\r\n                  Additional Guest Charges (Payable at Property):\r\n                </Typography>\r\n                <Box sx={{ ml: 2, mt: 0.5 }}>\r\n                  <Typography variant=\"caption\" sx={{ display: 'block' }}>\r\n                     {extraGuestCount} extra guest{extraGuestCount > 1 ? 's' : ''} across {requiredRooms} room{requiredRooms > 1 ? 's' : ''}\r\n                    (Standard occupancy: {room?.standardRoomOccupancy || 1} guest{room?.standardRoomOccupancy > 1 ? 's' : ''} per room)\r\n                  </Typography>\r\n\r\n                  <Typography variant=\"caption\" sx={{ display: 'block', fontWeight: 600, color: '#e65100', mt: 0.5 }}>\r\n                     Total extra charge:  {extraGuestCharge.toFixed(2)}\r\n                  </Typography>\r\n                  <Typography variant=\"caption\" sx={{ display: 'block', color: '#666', mt: 0.5 }}>\r\n                    Note: This amount will be collected directly by the property during check-in.\r\n                  </Typography>\r\n                </Box>\r\n              </Box>\r\n            )}\r\n          </Box>\r\n\r\n          {/* VALIDATION ERROR MESSAGE */}\r\n          {validationError && (\r\n            <Alert\r\n              severity=\"error\"\r\n              sx={{\r\n                mt: 3,\r\n                mb: 2,\r\n                borderRadius: 2,\r\n                '& .MuiAlert-message': {\r\n                  fontSize: '14px',\r\n                  fontWeight: 500\r\n                }\r\n              }}\r\n              onClose={() => setValidationError(null)}\r\n            >\r\n              {validationError}\r\n            </Alert>\r\n          )}\r\n\r\n          {/* GUEST FORM */}\r\n          <form onSubmit={formik.handleSubmit}>\r\n            <Typography\r\n              variant=\"h6\"\r\n              mt={4}\r\n              sx={{ color: color.firstColor, fontWeight: \"bold\" }}\r\n            >\r\n              Guest Information\r\n            </Typography>\r\n\r\n            {/* Guest Name */}\r\n            <CustomTextField\r\n              label=\"Guest Name *\"\r\n              name=\"name\"\r\n              fullWidth\r\n              margin=\"normal\"\r\n              value={formik.values.name}\r\n              onChange={(e) => handleFieldChange(\"name\", e.target.value)}\r\n              onBlur={formik.handleBlur}\r\n              error={formik.touched.name && Boolean(formik.errors.name)}\r\n              helperText={\r\n                formik.touched.name && formik.errors.name\r\n                  ? String(formik.errors.name)\r\n                  : \" \"\r\n              }\r\n              inputRef={nameFieldRef}\r\n              sx={{\r\n                '& .MuiFormHelperText-root': {\r\n                  color: 'red',\r\n                  fontSize: '12px',\r\n                  marginLeft: 1,\r\n                  marginTop: 0.5,\r\n                  fontWeight: 500,\r\n                },\r\n                '& .MuiOutlinedInput-root': {\r\n                  '&.Mui-error fieldset': {\r\n                    borderColor: 'red',\r\n                    borderWidth: '2px',\r\n                  }\r\n                }\r\n              }}\r\n            />\r\n\r\n            {/* PHONE NUMBER */}\r\n            <Box\r\n              sx={{\r\n                display: \"flex\",\r\n                flexDirection: \"column\",\r\n                width: {\r\n                  xs: \"100%\",\r\n                  md: \"100%\",\r\n                },\r\n              }}\r\n            >\r\n              <PhoneInput\r\n                country=\"in\"\r\n                onlyCountries={[\"in\"]}\r\n                disableDropdown\r\n                countryCodeEditable={false}\r\n                enableSearch={false}\r\n                value={formik.values.phoneNumber}\r\n                placeholder=\"Phone Number\"\r\n                onChange={(value) => formik.setFieldValue(\"phoneNumber\", value)}\r\n                onBlur={() => formik.setFieldTouched(\"phoneNumber\", true)}\r\n                inputStyle={{\r\n                  width: \"100%\",\r\n                  height: \"56px\",\r\n                  borderRadius: \"52px\",\r\n                  border: \"none\",\r\n                  outline: \"none\",\r\n                  boxShadow: \"4px 4px 10px rgba(104, 39, 184, 0.17)\",\r\n                  color: color.firstColor,\r\n                  paddingLeft: \"60px\",\r\n                  fontSize: \"16px\",\r\n                  backgroundColor: \"white\",\r\n                }}\r\n                buttonStyle={{\r\n                  borderRadius: \"52px 0 0 52px\",\r\n                  backgroundColor: \"white\",\r\n                  border: \"none\",\r\n                }}\r\n                containerStyle={{\r\n                  width: \"100%\",\r\n                }}\r\n                dropdownStyle={{\r\n                  borderRadius: \"12px\",\r\n                }}\r\n              />\r\n\r\n              {formik.touched.phoneNumber && formik.errors.phoneNumber && (\r\n                <Typography\r\n                  sx={{\r\n                    color: \"red\",\r\n                    fontSize: \"12px\",\r\n                    mt: 0.5,\r\n                    ml: \"14px\",\r\n                  }}\r\n                >\r\n                  {formik.errors.phoneNumber}\r\n                </Typography>\r\n              )}\r\n            </Box>\r\n            {/* Email */}\r\n            <CustomTextField\r\n              label=\"Email Address (Optional)\"\r\n              name=\"email\"\r\n              fullWidth\r\n              margin=\"normal\"\r\n              value={formik.values.email}\r\n              onChange={(e) => handleFieldChange(\"email\", e.target.value)}\r\n              onBlur={formik.handleBlur}\r\n              error={formik.touched.email && Boolean(formik.errors.email)}\r\n              helperText={\r\n                formik.touched.email && formik.errors.email\r\n                  ? String(formik.errors.email)\r\n                  : \" \"\r\n              }\r\n              sx={{\r\n                '& .MuiFormHelperText-root': {\r\n                  fontSize: '12px',\r\n                  marginLeft: 1,\r\n                  marginTop: 0.5,\r\n                },\r\n              }}\r\n            />\r\n\r\n            {/* GST SECTION */}\r\n            {/* GST SECTION - OPTIONAL */}\r\n            <Box sx={{ mt: 3, mb: 2 }}>\r\n              <Box sx={{\r\n                display: 'flex',\r\n                flexDirection: { xs: 'column', sm: 'row' },\r\n                justifyContent: 'space-between',\r\n                alignItems: { xs: 'flex-start', sm: 'center' },\r\n                mb: 1,\r\n                gap: { xs: 1, sm: 0 }\r\n              }}>\r\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                  <Typography\r\n                    variant=\"subtitle1\"\r\n                    sx={{\r\n                      color: color.firstColor,\r\n                      fontWeight: \"bold\",\r\n                      fontSize: { xs: '1rem', sm: '1.1rem' }\r\n                    }}\r\n                  >\r\n                    GST Details(Optional)\r\n                  </Typography>\r\n\r\n                  {/* GST Added Indicator */}\r\n                  {gstinNumber && (\r\n                    <Chip\r\n                      label=\"GST Added \"\r\n                      color=\"success\"\r\n                      size=\"small\"\r\n                      icon={<VerifiedIcon />}\r\n                      sx={{\r\n                        fontSize: { xs: '0.7rem', sm: '0.8rem' },\r\n                        height: { xs: 28, sm: 32 }\r\n                      }}\r\n                    />\r\n                  )}\r\n                </Box>\r\n\r\n                <Box sx={{\r\n                  display: 'flex',\r\n                  gap: 1,\r\n                  width: { xs: '100%', sm: 'auto' }\r\n                }}>\r\n                  {/* Toggle Button - Only show \"Add GST\" when not added yet */}\r\n                  {!gstinNumber ? (\r\n                    <Button\r\n                      size=\"small\"\r\n                      variant={gstSectionOpen ? \"outlined\" : \"contained\"}\r\n                      onClick={() => {\r\n                        setGstSectionOpen(!gstSectionOpen);\r\n                        if (isLoggedIn() && !gstSectionOpen) {\r\n                          loadUserGSTRecords(getUserId());\r\n                        }\r\n                      }}\r\n                      sx={{\r\n                        textTransform: 'none',\r\n                        fontSize: { xs: '0.75rem', sm: '0.875rem' },\r\n                        minWidth: { xs: '100px', sm: '120px' },\r\n                        whiteSpace: 'nowrap',\r\n                        bgcolor: gstSectionOpen ? 'transparent' : color.firstColor,\r\n                        color: gstSectionOpen ? color.firstColor : 'white',\r\n                        borderColor: gstSectionOpen ? color.firstColor : 'transparent',\r\n                        '&:hover': {\r\n                          bgcolor: gstSectionOpen ? '#f5f0ff' : color.firstColor,\r\n                          borderColor: color.firstColor\r\n                        }\r\n                      }}\r\n                    >\r\n                      {gstSectionOpen ? 'Cancel' : 'Add GST'}\r\n                    </Button>\r\n                  ) : (\r\n                    <Box sx={{ display: 'flex', gap: 1 }}>\r\n                      <Button\r\n                        size=\"small\"\r\n                        variant=\"outlined\"\r\n                        onClick={handleClearGST}\r\n                        sx={{\r\n                          textTransform: 'none',\r\n                          fontSize: { xs: '0.75rem', sm: '0.875rem' },\r\n                          minWidth: { xs: '80px', sm: '100px' },\r\n                          whiteSpace: 'nowrap',\r\n                          borderColor: '#ff6b6b',\r\n                          color: '#ff6b6b',\r\n                          '&:hover': {\r\n                            bgcolor: '#ffeaea',\r\n                            borderColor: '#ff4444'\r\n                          }\r\n                        }}\r\n                      >\r\n                        Remove\r\n                      </Button>\r\n                      <Button\r\n                        size=\"small\"\r\n                        variant=\"outlined\"\r\n                        onClick={() => setGstSectionOpen(!gstSectionOpen)}\r\n                        sx={{\r\n                          textTransform: 'none',\r\n                          fontSize: { xs: '0.75rem', sm: '0.875rem' },\r\n                          minWidth: { xs: '100px', sm: '120px' },\r\n                          whiteSpace: 'nowrap',\r\n                          borderColor: color.firstColor,\r\n                          color: color.firstColor,\r\n                          '&:hover': {\r\n                            bgcolor: '#f5f0ff'\r\n                          }\r\n                        }}\r\n                      >\r\n                        {gstSectionOpen ? 'Hide Details' : 'Change GST'}\r\n                      </Button>\r\n                    </Box>\r\n                  )}\r\n                </Box>\r\n              </Box>\r\n\r\n              {/* Optional GST Notice */}\r\n              {!gstinNumber && !gstSectionOpen && (\r\n                <Box sx={{\r\n                  p: { xs: 1, sm: 1.5 },\r\n                  borderRadius: 1.5,\r\n                  bgcolor: '#f0f7ff',\r\n                  border: '1px solid #cce5ff',\r\n                  mb: 2\r\n                }}>\r\n                  <Typography variant=\"body2\" sx={{\r\n                    color: '#0066cc',\r\n                    fontSize: { xs: '0.8rem', sm: '0.9rem' },\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: 1\r\n                  }}>\r\n                    <BusinessIcon fontSize=\"small\" />\r\n                    Need a business invoice? Add your GST details to get a tax invoice with your booking.\r\n                  </Typography>\r\n                </Box>\r\n              )}\r\n\r\n              {gstSectionOpen && (\r\n                <Box sx={{\r\n                  p: { xs: 1.5, sm: 2 },\r\n                  borderRadius: 2,\r\n                  bgcolor: '#f8f9fa',\r\n                  border: '1px solid #dee2e6',\r\n                  animation: 'slideDown 0.3s ease-out'\r\n                }}>\r\n                  {/* Loading state */}\r\n                  {loadingGSTRecords && (\r\n                    <Box sx={{ display: 'flex', justifyContent: 'center', my: 2 }}>\r\n                      <CircularProgress size={24} />\r\n                    </Box>\r\n                  )}\r\n\r\n                  {/* STEP 1: Show saved GST records if user is logged in */}\r\n                  {isLoggedIn() && userGSTRecords.length > 0 && !showNewGSTForm && (\r\n                    <Box sx={{ mb: 3 }}>\r\n                      <Typography variant=\"body2\" sx={{\r\n                        mb: 1.5,\r\n                        color: color.forthColor,\r\n                        fontWeight: 600,\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: 1,\r\n                        fontSize: { xs: '0.85rem', sm: '0.9rem' }\r\n                      }}>\r\n                        <BusinessIcon fontSize=\"small\" />\r\n                        Your Saved GST Records:\r\n                      </Typography>\r\n\r\n                      <Box sx={{\r\n                        p: { xs: 1, sm: 2 },\r\n                        borderRadius: 2,\r\n                        bgcolor: 'white',\r\n                        border: '1px solid #e0e0e0',\r\n                        maxHeight: { xs: '250px', sm: '300px' },\r\n                        overflowY: 'auto'\r\n                      }}>\r\n                        {userGSTRecords.length === 0 ? (\r\n                          <Box sx={{\r\n                            p: 3,\r\n                            textAlign: 'center',\r\n                            color: '#666'\r\n                          }}>\r\n                            <BusinessIcon sx={{ fontSize: 40, color: '#ddd', mb: 1 }} />\r\n                            <Typography variant=\"body2\">\r\n                              No saved GST records found\r\n                            </Typography>\r\n                            <Typography variant=\"caption\">\r\n                              Add your first GSTIN to save it for future bookings\r\n                            </Typography>\r\n                          </Box>\r\n                        ) : (\r\n                          userGSTRecords.map((record, index) => {\r\n                            const isVerified = record.verified === true || record.gstStatus === \"Active\";\r\n                            const isSelected = selectedGSTRecord?.id === record.id ||\r\n                              selectedGSTRecord?._id === record._id;\r\n\r\n                            return (\r\n                              <Box\r\n                                key={record._id || record.id || index}\r\n                                sx={{\r\n                                  p: { xs: 1, sm: 1.5 },\r\n                                  mb: 1.5,\r\n                                  borderRadius: 2,\r\n                                  border: isSelected ? `2px solid ${color.firstColor}` : '1px solid #ddd',\r\n                                  backgroundColor: isSelected ? '#f3e5f5' : 'white',\r\n                                  cursor: 'pointer',\r\n                                  '&:hover': {\r\n                                    borderColor: color.firstColor,\r\n                                    backgroundColor: '#faf5ff'\r\n                                  }\r\n                                }}\r\n                                onClick={() => handleGSTRecordSelect(record)}\r\n                              >\r\n                                <Box sx={{\r\n                                  display: 'flex',\r\n                                  flexDirection: { xs: 'column', sm: 'row' },\r\n                                  justifyContent: 'space-between',\r\n                                  alignItems: { xs: 'flex-start', sm: 'center' },\r\n                                  gap: { xs: 1, sm: 0 }\r\n                                }}>\r\n                                  <Box sx={{ flex: 1, width: '100%' }}>\r\n                                    <Box sx={{\r\n                                      display: 'flex',\r\n                                      flexDirection: { xs: 'column', sm: 'row' },\r\n                                      alignItems: { xs: 'flex-start', sm: 'center' },\r\n                                      gap: { xs: 0.5, sm: 1 },\r\n                                      mb: 0.5\r\n                                    }}>\r\n                                      <Typography variant=\"body2\" sx={{\r\n                                        fontWeight: 600,\r\n                                        fontSize: { xs: '0.85rem', sm: '0.9rem' }\r\n                                      }}>\r\n                                        {record.gstNumber}\r\n                                      </Typography>\r\n                                      <Box sx={{\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        gap: 0.5,\r\n                                        flexWrap: 'wrap'\r\n                                      }}>\r\n                                        {isVerified && (\r\n                                          <Tooltip title=\"Verified GST\">\r\n                                            <VerifiedIcon fontSize=\"small\" color=\"success\" />\r\n                                          </Tooltip>\r\n                                        )}\r\n                                        {record.gstStatus && (\r\n                                          <Chip\r\n                                            label={record.gstStatus}\r\n                                            size=\"small\"\r\n                                            color={record.gstStatus === \"Active\" ? \"success\" : \"error\"}\r\n                                            variant=\"outlined\"\r\n                                            sx={{ height: 20, fontSize: '0.65rem' }}\r\n                                          />\r\n                                        )}\r\n                                      </Box>\r\n                                    </Box>\r\n                                    <Typography variant=\"caption\" sx={{\r\n                                      color: '#666',\r\n                                      display: 'block',\r\n                                      mb: 0.5,\r\n                                      fontSize: { xs: '0.75rem', sm: '0.8rem' }\r\n                                    }}>\r\n                                      {record.legalName}\r\n                                    </Typography>\r\n                                    <Typography variant=\"caption\" sx={{\r\n                                      color: '#888',\r\n                                      display: 'block',\r\n                                      fontSize: { xs: '0.7rem', sm: '0.75rem' }\r\n                                    }}>\r\n                                      {record.address}\r\n                                    </Typography>\r\n                                  </Box>\r\n\r\n                                  <Box sx={{\r\n                                    display: 'flex',\r\n                                    alignItems: 'center',\r\n                                    gap: 0.5,\r\n                                    width: { xs: '100%', sm: 'auto' },\r\n                                    justifyContent: { xs: 'flex-end', sm: 'flex-start' },\r\n                                    mt: { xs: 1, sm: 0 }\r\n                                  }}>\r\n                                    {isSelected ? (\r\n                                      <Chip\r\n                                        label=\"Selected\"\r\n                                        size=\"small\"\r\n                                        color=\"success\"\r\n                                        icon={<CheckIcon />}\r\n                                        sx={{ height: 24, fontSize: '0.7rem' }}\r\n                                      />\r\n                                    ) : (\r\n                                      <Button\r\n                                        size=\"small\"\r\n                                        variant=\"outlined\"\r\n                                        onClick={(e) => {\r\n                                          e.stopPropagation();\r\n                                          handleGSTRecordSelect(record);\r\n                                        }}\r\n                                        sx={{\r\n                                          fontSize: '0.75rem',\r\n                                          minWidth: '70px'\r\n                                        }}\r\n                                      >\r\n                                        Select\r\n                                      </Button>\r\n                                    )}\r\n\r\n                                    <Box sx={{ display: 'flex', gap: 0.5 }}>\r\n                                      <Tooltip title=\"Copy GSTIN\">\r\n                                        <IconButton\r\n                                          size=\"small\"\r\n                                          sx={{ fontSize: { xs: '0.8rem', sm: '1rem' } }}\r\n                                          onClick={(e) => {\r\n                                            e.stopPropagation();\r\n                                            handleCopyGSTIN(record.gstNumber);\r\n                                          }}\r\n                                        >\r\n                                          <CopyIcon fontSize=\"small\" />\r\n                                        </IconButton>\r\n                                      </Tooltip>\r\n\r\n                                      <Tooltip title=\"Remove from account\">\r\n                                        <IconButton\r\n                                          size=\"small\"\r\n                                          color=\"error\"\r\n                                          sx={{ fontSize: { xs: '0.8rem', sm: '1rem' } }}\r\n                                          onClick={(e) => {\r\n                                            e.stopPropagation();\r\n                                            handleDeleteGST(record.id || record._id);\r\n                                          }}\r\n                                          disabled={deletingGST === (record.id || record._id)}\r\n                                        >\r\n                                          {deletingGST === (record.id || record._id) ? (\r\n                                            <CircularProgress size={16} />\r\n                                          ) : (\r\n                                            <DeleteIcon fontSize=\"small\" />\r\n                                          )}\r\n                                        </IconButton>\r\n                                      </Tooltip>\r\n                                    </Box>\r\n                                  </Box>\r\n                                </Box>\r\n                              </Box>\r\n                            );\r\n                          })\r\n                        )}\r\n                      </Box>\r\n\r\n                      {/* Add New GST Button */}\r\n                      <Box sx={{\r\n                        display: 'flex',\r\n                        justifyContent: 'center',\r\n                        mt: 2\r\n                      }}>\r\n                        <Button\r\n                          startIcon={<AddIcon />}\r\n                          variant=\"outlined\"\r\n                          onClick={handleAddNewGST}\r\n                          sx={{\r\n                            textTransform: 'none',\r\n                            fontSize: { xs: '0.8rem', sm: '0.875rem' }\r\n                          }}\r\n                        >\r\n                          Add New GST\r\n                        </Button>\r\n                      </Box>\r\n                    </Box>\r\n                  )}\r\n\r\n                  {/* STEP 2: Show GST verification form when adding new GST or if no saved records */}\r\n                  {(showNewGSTForm || !isLoggedIn() || (isLoggedIn() && userGSTRecords.length === 0)) && (\r\n                    <Box>\r\n                      <Typography variant=\"body2\" sx={{\r\n                        mb: 2,\r\n                        color: color.forthColor,\r\n                        fontWeight: 600,\r\n                        fontSize: { xs: '0.9rem', sm: '1rem' }\r\n                      }}>\r\n                        {showNewGSTForm ? 'Add New GSTIN' : 'Enter GSTIN for Business Invoice'}\r\n                      </Typography>\r\n\r\n                      {/* GSTIN Input */}\r\n                      <Box sx={{ mb: 2 }}>\r\n                        <Box sx={{\r\n                          display: 'flex',\r\n                          flexDirection: { xs: 'column', sm: 'row' },\r\n                          alignItems: { xs: 'stretch', sm: 'center' },\r\n                          gap: { xs: 1, sm: 1 },\r\n                          mb: 1\r\n                        }}>\r\n                          <CustomTextField\r\n                            label=\"GSTIN Number\"\r\n                            fullWidth\r\n                            value={gstinNumber}\r\n                            onChange={(e) => {\r\n                              const value = e.target.value.toUpperCase();\r\n                              setGstinNumber(value);\r\n                              // Auto-verify if 15 characters entered\r\n                              if (value.length === 15) {\r\n                                const gstinRegex = /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/i;\r\n                                if (!gstinRegex.test(value)) {\r\n                                  toast.error(\"Invalid GSTIN format. Please check the number.\");\r\n                                  setGstVerificationStatus(\"invalid\");\r\n                                }\r\n                              }\r\n                            }}\r\n                            placeholder=\"Enter 15-digit GSTIN\"\r\n                            inputRef={gstinFieldRef}\r\n                            disabled={gstVerificationStatus === \"verified\"}\r\n                            sx={{ flex: 1 }}\r\n                            size=\"small\"\r\n                          />\r\n\r\n                          <Box sx={{\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            gap: 1\r\n                          }}>\r\n                            {gstVerificationStatus === \"verified\" && (\r\n                              <Tooltip title=\"GSTIN Verified\">\r\n                                <VerifiedIcon color=\"success\" sx={{\r\n                                  fontSize: { xs: 24, sm: 28 }\r\n                                }} />\r\n                              </Tooltip>\r\n                            )}\r\n\r\n                            <Button\r\n                              variant=\"contained\"\r\n                              size=\"small\"\r\n                              onClick={handleVerifyGST}\r\n                              disabled={verifyingGst || gstVerificationStatus === \"verified\" || gstinNumber.length !== 15}\r\n                              sx={{\r\n                                textTransform: 'none',\r\n                                bgcolor: color.firstColor,\r\n                                fontSize: { xs: '0.75rem', sm: '0.875rem' },\r\n                                minWidth: { xs: '100px', sm: '120px' },\r\n                                height: { xs: '36px', sm: '40px' }\r\n                              }}\r\n                              startIcon={verifyingGst ? <CircularProgress size={16} color=\"inherit\" /> : null}\r\n                            >\r\n                              {verifyingGst ? 'Verifying...' : gstVerificationStatus === \"verified\" ? 'Verified' : 'Verify'}\r\n                            </Button>\r\n                          </Box>\r\n                        </Box>\r\n\r\n                        {gstVerificationStatus === \"invalid\" && (\r\n                          <Alert\r\n                            severity=\"error\"\r\n                            sx={{\r\n                              mt: 1,\r\n                              fontSize: '0.8rem',\r\n                              py: 0.5\r\n                            }}\r\n                          >\r\n                            Invalid GSTIN format. Please enter a valid 15-digit GSTIN.\r\n                          </Alert>\r\n                        )}\r\n\r\n                        {gstinNumber.length > 0 && gstinNumber.length < 15 && (\r\n                          <Typography variant=\"caption\" sx={{\r\n                            color: 'warning.main',\r\n                            display: 'block',\r\n                            mt: 0.5,\r\n                            fontSize: '0.75rem'\r\n                          }}>\r\n                            Enter 15-digit GSTIN to verify\r\n                          </Typography>\r\n                        )}\r\n                      </Box>\r\n\r\n                      {/* Show verified GST details */}\r\n                      {gstVerificationStatus === \"verified\" && (\r\n                        <>\r\n                          <CustomTextField\r\n                            label=\"Legal Business Name\"\r\n                            fullWidth\r\n                            margin=\"normal\"\r\n                            size=\"small\"\r\n                            value={legalName}\r\n                            onChange={(e) => setLegalName(e.target.value)}\r\n                            InputProps={{\r\n                              startAdornment: (\r\n                                <Tooltip title=\"Verified\">\r\n                                  <VerifiedIcon color=\"success\" sx={{ mr: 1, fontSize: 20 }} />\r\n                                </Tooltip>\r\n                              )\r\n                            }}\r\n                            sx={{ mb: 2 }}\r\n                          />\r\n\r\n                          <CustomTextField\r\n                            label=\"Registered Business Address\"\r\n                            fullWidth\r\n                            margin=\"normal\"\r\n                            size=\"small\"\r\n                            multiline\r\n                            rows={2}\r\n                            value={gstAddress}\r\n                            onChange={(e) => setGstAddress(e.target.value)}\r\n                            InputProps={{\r\n                              startAdornment: (\r\n                                <Tooltip title=\"Verified\">\r\n                                  <VerifiedIcon color=\"success\" sx={{ mr: 1, fontSize: 20 }} />\r\n                                </Tooltip>\r\n                              )\r\n                            }}\r\n                            sx={{ mb: 2 }}\r\n                          />\r\n\r\n                          <Alert\r\n                            severity=\"success\"\r\n                            sx={{\r\n                              mb: 2,\r\n                              fontSize: '0.9rem'\r\n                            }}\r\n                            icon={<VerifiedIcon />}\r\n                          >\r\n                            <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\r\n                              GSTIN verified successfully!\r\n                            </Typography>\r\n                            <Typography variant=\"caption\">\r\n                              This GST will be added to your invoice\r\n                            </Typography>\r\n                          </Alert>\r\n\r\n                          {/* For logged-in users: Show message that GST will be saved to account */}\r\n                          {isLoggedIn() && (\r\n                            <Typography variant=\"caption\" sx={{\r\n                              color: '#666',\r\n                              display: 'block',\r\n                              textAlign: 'center',\r\n                              mt: 1,\r\n                              fontSize: '0.8rem'\r\n                            }}>\r\n                              This GST record will be saved to your account for future bookings\r\n                            </Typography>\r\n                          )}\r\n                        </>\r\n                      )}\r\n\r\n                      {/* Back button for logged-in users with existing records */}\r\n                      {isLoggedIn() && userGSTRecords.length > 0 && showNewGSTForm && (\r\n                        <Box sx={{\r\n                          display: 'flex',\r\n                          justifyContent: 'center',\r\n                          mt: 2\r\n                        }}>\r\n                          <Button\r\n                            variant=\"text\"\r\n                            size=\"small\"\r\n                            onClick={() => {\r\n                              setShowNewGSTForm(false);\r\n                              setGstinNumber(\"\");\r\n                              setLegalName(\"\");\r\n                              setGstAddress(\"\");\r\n                              setGstVerificationStatus(\"none\");\r\n                            }}\r\n                            sx={{\r\n                              textTransform: 'none',\r\n                              fontSize: '0.8rem'\r\n                            }}\r\n                          >\r\n                             Back to Saved GST Records\r\n                          </Button>\r\n                        </Box>\r\n                      )}\r\n                    </Box>\r\n                  )}\r\n\r\n                  {/* STEP 3: Show selected GST summary */}\r\n                  {selectedGSTRecord && (\r\n                    <Alert\r\n                      severity=\"success\"\r\n                      sx={{\r\n                        mt: 2,\r\n                        fontSize: '0.9rem'\r\n                      }}\r\n                      icon={<CheckIcon />}\r\n                    >\r\n                      <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\r\n                        Selected GST for Invoice:\r\n                      </Typography>\r\n                      <Box sx={{ ml: 1, mt: 0.5 }}>\r\n                        <Typography variant=\"body2\" sx={{ fontWeight: 600 }}>\r\n                          {selectedGSTRecord.gstNumber}\r\n                        </Typography>\r\n                        <Typography variant=\"caption\" sx={{ color: '#388e3c', display: 'block' }}>\r\n                          {selectedGSTRecord.legalName}\r\n                        </Typography>\r\n                        <Typography variant=\"caption\" sx={{ color: '#666', display: 'block', mt: 0.5 }}>\r\n                          {selectedGSTRecord.address}\r\n                        </Typography>\r\n                      </Box>\r\n                      <Box sx={{ display: 'flex', justifyContent: 'flex-end', mt: 1 }}>\r\n                        <Button\r\n                          size=\"small\"\r\n                          color=\"error\"\r\n                          onClick={handleClearGST}\r\n                          sx={{ fontSize: '0.75rem' }}\r\n                        >\r\n                          Remove GST\r\n                        </Button>\r\n                      </Box>\r\n                    </Alert>\r\n                  )}\r\n\r\n                  {/* Optional GST Notice inside section */}\r\n                  {!gstinNumber && (\r\n                    <Box sx={{\r\n                      p: { xs: 1, sm: 1.5 },\r\n                      borderRadius: 1.5,\r\n                      bgcolor: '#f0f7ff',\r\n                      border: '1px solid #cce5ff',\r\n                      mt: 2\r\n                    }}>\r\n                      <Typography variant=\"body2\" sx={{\r\n                        color: '#0066cc',\r\n                        fontSize: { xs: '0.8rem', sm: '0.9rem' },\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        gap: 1\r\n                      }}>\r\n                        <InfoIcon fontSize=\"small\" />\r\n                        <strong>Optional:</strong> Add GST only if you need a business invoice. You can proceed without GST for personal bookings.\r\n                      </Typography>\r\n                    </Box>\r\n                  )}\r\n                </Box>\r\n              )}\r\n            </Box>\r\n\r\n            {/* Coupon Section - Auto Applied */}\r\n            <Box sx={{ mt: 3, mb: 2 }}>\r\n              <Typography\r\n                variant=\"subtitle1\"\r\n                sx={{ color: color.firstColor, fontWeight: \"bold\", mb: 1 }}\r\n              >\r\n                Huts4u Discount\r\n              </Typography>\r\n\r\n              {couponApplied ? (\r\n                <Box sx={{\r\n                  p: 2,\r\n                  borderRadius: 2,\r\n                  bgcolor: \"#e8f5e9\",\r\n                  border: \"1px solid #c8e6c9\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"space-between\"\r\n                }}>\r\n                  <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\r\n                    <OfferIcon color=\"success\" />\r\n                    <Box>\r\n                      <Typography sx={{ fontWeight: 600, color: \"#2e7d32\" }}>\r\n                        HUTS4U Discount Applied\r\n                      </Typography>\r\n                      <Typography variant=\"body2\" sx={{ color: \"#388e3c\" }}>\r\n                        discount on total amount\r\n                      </Typography>\r\n                      <Typography variant=\"caption\" sx={{ color: \"#666\", display: \"block\", mt: 0.5 }}>\r\n                        You saved  {couponDiscount.toFixed(2)}\r\n                      </Typography>\r\n                    </Box>\r\n                  </Box>\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    color=\"error\"\r\n                    size=\"small\"\r\n                    onClick={handleRemoveCoupon}\r\n                  >\r\n                    Remove\r\n                  </Button>\r\n                </Box>\r\n              ) : (\r\n                <Box sx={{\r\n                  p: 2,\r\n                  borderRadius: 2,\r\n                  bgcolor: \"#fff3e0\",\r\n                  border: \"1px solid #ffcc80\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"space-between\"\r\n                }}>\r\n                  <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 1 }}>\r\n                    <OfferIcon color=\"warning\" />\r\n                    <Box>\r\n                      <Typography sx={{ fontWeight: 600, color: \"#e65100\" }}>\r\n                        Huts4u Discount Available\r\n                      </Typography>\r\n                    </Box>\r\n                  </Box>\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    sx={{ background: color.firstColor }}\r\n                    size=\"small\"\r\n                    onClick={handleApplyCoupon}\r\n                  >\r\n                    Apply\r\n                  </Button>\r\n                </Box>\r\n              )}\r\n\r\n              {couponApplied && (\r\n                <Typography sx={{ color: \"green\", fontSize: 12, mt: 1, textAlign: \"center\" }}>\r\n                    Huts4u Discount automatically applied to your booking\r\n                </Typography>\r\n              )}\r\n            </Box>\r\n\r\n            {/* Terms acceptance checkbox */}\r\n            <Box sx={{ mt: 2 }}>\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox\r\n                    checked={termsChecked}\r\n                    onChange={(e) => {\r\n                      setTermsChecked(e.target.checked);\r\n                      // Clear validation error when user checks terms\r\n                      if (validationError && e.target.checked) {\r\n                        setValidationError(null);\r\n                      }\r\n                    }}\r\n                    color=\"primary\"\r\n                  />\r\n                }\r\n                label={\r\n                  <span>\r\n                    I accept the{\" \"}\r\n                    <span\r\n                      style={{\r\n                        color: color.firstColor,\r\n                        cursor: \"pointer\",\r\n                        textDecoration: \"underline\",\r\n                      }}\r\n                      onClick={() => setTermsOpen(true)}\r\n                    >\r\n                      Terms & Conditions\r\n                    </span>\r\n                  </span>\r\n                }\r\n              />\r\n            </Box>\r\n\r\n            {/* Submit button with improved validation - DISABLED until all conditions are met */}\r\n            <CustomButton\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              fullWidth\r\n              sx={{\r\n                mt: 2,\r\n                opacity: isFormValid() ? 1 : 0.7,\r\n                '&:disabled': {\r\n                  backgroundColor: '#e0e0e0',\r\n                  color: '#9e9e9e',\r\n                  cursor: 'not-allowed',\r\n                }\r\n              }}\r\n              type=\"submit\"\r\n              disabled={!isFormValid()}\r\n            >\r\n              {isLoggedIn() ? 'Pay Now' : 'Verify Phone & Pay'}\r\n            </CustomButton>\r\n\r\n            <LoginOtpModal\r\n              open={showOtpModal}\r\n              onClose={() => setShowOtpModal(false)}\r\n              onVerificationSuccess={handleOtpSuccess}\r\n              phone={otpData.phone}\r\n              name={otpData.name}\r\n              email={otpData.email}\r\n              token={otpData.token}\r\n            />\r\n\r\n            {/* Razorpay - STEP 3: Pass GST data to booking payload */}\r\n            {orderDetails && (\r\n              <RenderRazorpay\r\n                orderDetails={orderDetails}\r\n                amount={grandTotal}\r\n                bookingDetails={{\r\n                  hotel,\r\n                  room,\r\n                  guestInfo: formik.values,\r\n                  gstDetails: gstVerificationStatus === \"verified\" ? {\r\n                    gstNumber: gstinNumber,\r\n                    legalName,\r\n                    address: gstAddress,\r\n                    verified: true,\r\n                    gstRecordId: selectedGSTRecord?.id || selectedGSTRecord?._id,\r\n                    gstStatus: selectedGSTRecord?.gstStatus || \"Active\",\r\n                  } : null,\r\n                  timing: calculateCheckoutTime(),\r\n                  pricingDetails: {\r\n                    ...priceBreakdown,\r\n                    nights,\r\n                    rooms: requiredRooms.toString(),\r\n                    adults,\r\n                    children,\r\n                    bookingType,\r\n                    checkinDate,\r\n                    checkOutDate,\r\n                    checkinTime,\r\n                    slotDuration,\r\n                    extraGuestCount,\r\n                    extraGuestCharge,\r\n                    guestsPerRoom,\r\n                    inventoryData,\r\n                    unitBase: inventoryUnitBase,\r\n                  },\r\n                  bookingType,\r\n                  rooms: requiredRooms.toString(),\r\n                  adults,\r\n                  children,\r\n                }}\r\n              />\r\n            )}\r\n          </form>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* RIGHT: BILL SUMMARY */}\r\n      <Card\r\n        sx={{\r\n          p: 1,\r\n          background: \"white\",\r\n          border: \"none\",\r\n          boxShadow: 0,\r\n          borderRadius: \"12px\",\r\n          height: \"fit-content\",\r\n          minWidth: { md: \"350px\" },\r\n        }}\r\n      >\r\n        <CardContent>\r\n          <Typography\r\n            variant=\"h6\"\r\n            gutterBottom\r\n            sx={{ color: color.firstColor, fontWeight: \"bold\" }}\r\n          >\r\n            Your Bill Summary\r\n          </Typography>\r\n\r\n          {/* GST Info Badge if GST is added */}\r\n          {gstVerificationStatus === \"verified\" && (\r\n            <Box sx={{\r\n              mb: 2,\r\n              p: 1.5,\r\n              bgcolor: \"#e8f5e9\",\r\n              borderRadius: 1,\r\n              border: \"1px solid #c8e6c9\",\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: 1\r\n            }}>\r\n              <VerifiedIcon color=\"success\" fontSize=\"small\" />\r\n              <Box>\r\n                <Typography variant=\"body2\" sx={{ fontWeight: 600, color: \"#2e7d32\" }}>\r\n                  GST Invoice Enabled\r\n                </Typography>\r\n                <Typography variant=\"caption\" sx={{ color: \"#388e3c\", display: \"block\" }}>\r\n                  GSTIN: {gstinNumber}\r\n                </Typography>\r\n                <Typography variant=\"caption\" sx={{ color: \"#666\", display: \"block\" }}>\r\n                  {legalName}\r\n                </Typography>\r\n              </Box>\r\n            </Box>\r\n          )}\r\n\r\n          {/* Price Source Indicator */}\r\n          <Box sx={{\r\n            mb: 2,\r\n            p: 1.5,\r\n            bgcolor: \"#e3f2fd\",\r\n            borderRadius: 1,\r\n            border: \"1px solid #bbdefb\"\r\n          }}>\r\n            <Typography variant=\"body2\" sx={{ fontWeight: 600, color: \"#1565c0\" }}>\r\n              {getPriceSource()}\r\n            </Typography>\r\n            <Typography variant=\"caption\" sx={{ color: \"#1976d2\", display: \"block\", mt: 0.5 }}>\r\n              {bookingType === \"hourly\"\r\n                ? `${slotDuration} hrs  ${requiredRooms} room${requiredRooms && requiredRooms > 1 ? 's' : ''}`\r\n                : `${nights} night${nights > 1 ? 's' : ''}  ${requiredRooms} room${requiredRooms && requiredRooms > 1 ? 's' : ''}`}\r\n            </Typography>\r\n            {couponApplied && (\r\n              <Typography variant=\"caption\" sx={{ color: \"green\", fontWeight: 600, mt: 0.5, display: 'block' }}>\r\n                  Huts4u Discount Applied\r\n              </Typography>\r\n            )}\r\n          </Box>\r\n\r\n          {/* EXTRA GUEST CHARGE NOTICE */}\r\n          {extraGuestCount > 0 && (\r\n            <Box sx={{\r\n              mb: 2,\r\n              p: 1.5,\r\n              bgcolor: '#fff3e0',\r\n              borderRadius: '8px',\r\n              border: '1px solid #ffcc80'\r\n            }}>\r\n              <Typography variant=\"caption\" sx={{ fontWeight: 600, color: '#e65100', display: 'flex', alignItems: 'center', gap: 0.5, mb: 1 }}>\r\n                <PersonAddIcon fontSize=\"small\" />\r\n                Additional Guest Charges\r\n              </Typography>\r\n              <Typography variant=\"body2\" sx={{ ml: 2 }}>\r\n                {extraGuestCount} extra guest{extraGuestCount > 1 ? 's' : ''}:  {extraGuestCharge.toFixed(2)}\r\n              </Typography>\r\n              <Typography variant=\"caption\" sx={{ display: 'block', color: '#666', mt: 1, fontStyle: 'italic' }}>\r\n                Note: This amount will be collected directly by the property during check-in.\r\n              </Typography>\r\n            </Box>\r\n          )}\r\n\r\n          {/* TOP: Compact price view */}\r\n          <div\r\n            style={{\r\n              marginTop: \"10px\",\r\n              display: \"flex\",\r\n              flexWrap: \"wrap\",\r\n              flexDirection: \"column\",\r\n              gap: \"8px\",\r\n              alignItems: \"flex-end\",\r\n            }}\r\n          >\r\n            {/* 1) Top struck-through bigger: base + 700 */}\r\n            <Typography\r\n              sx={{\r\n                fontSize: \"16px\",\r\n                color: color.forthColor,\r\n                textDecoration: \"line-through\",\r\n                fontWeight: 600,\r\n                opacity: 0.95,\r\n              }}\r\n            >\r\n              {displayBase > 0\r\n                ? ` ${displayBasePlus700.toFixed(0)}`\r\n                : \"---\"}\r\n            </Typography>\r\n\r\n            {/* 2) Main bold price = base + platform */}\r\n            <Typography\r\n              sx={{\r\n                fontSize: \"24px\",\r\n                color: color.firstColor,\r\n                fontWeight: \"bold\",\r\n              }}\r\n            >\r\n              {displayCombinedBasePlatform > 0\r\n                ? ` ${displayCombinedBasePlatform.toFixed(0)}`\r\n                : \"\"}\r\n            </Typography>\r\n\r\n            {/* 3) GST breakdown */}\r\n            <Typography\r\n              sx={{\r\n                fontSize: \"13px\",\r\n                color: color.forthColor,\r\n                textAlign: \"right\",\r\n              }}\r\n            >\r\n              {displayGstTotal > 0 ? (\r\n                <>{displayGstTotal.toFixed(0)} taxes &amp; fees</>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n            </Typography>\r\n            <Divider sx={{ width: \"100%\", mt: 1 }} />\r\n\r\n            {/* 4) Final total */}\r\n            <div style={{ width: \"100%\", textAlign: \"right\" }}>\r\n              {/* Show coupon amount if applied */}\r\n              {couponDiscount > 0 && couponApplied && (\r\n                <>\r\n                  <Typography sx={{ fontSize: 13, color: color.forthColor }}>\r\n                    Subtotal before discount:  {totalWithoutDiscount.toFixed(2)}\r\n                  </Typography>\r\n                  <Typography\r\n                    sx={{\r\n                      fontSize: 14,\r\n                      color: \"green\",\r\n                      fontWeight: 600,\r\n                    }}\r\n                  >\r\n                    Huts4u Discount: -  {couponDiscount.toFixed(2)}\r\n                  </Typography>\r\n                </>\r\n              )}\r\n\r\n              <Typography\r\n                sx={{\r\n                  fontSize: \"16px\",\r\n                  color: color.firstColor,\r\n                  fontWeight: \"700\",\r\n                  mt: (couponDiscount > 0 && couponApplied) ? 1 : 0,\r\n                }}\r\n              >\r\n                {finalPrice > 0\r\n                  ? `Final:  ${payableAfterCoupon.toFixed(2)}`\r\n                  : \"---\"}\r\n              </Typography>\r\n            </div>\r\n          </div>\r\n\r\n          {/* DETAILED INVOICE-STYLE BREAKUP */}\r\n          <Box\r\n            sx={{\r\n              mt: 3,\r\n              borderRadius: 2,\r\n              border: \"1px dashed #ddd\",\r\n              p: 2,\r\n              backgroundColor: \"#fafafa\",\r\n            }}\r\n          >\r\n            <Typography\r\n              sx={{\r\n                fontSize: 13,\r\n                fontWeight: 600,\r\n                mb: 1,\r\n                color: color.forthColor,\r\n              }}\r\n            >\r\n              Detailed Breakup\r\n            </Typography>\r\n\r\n            {/* 1. Base Price + Hotel GST */}\r\n            <Typography sx={{ fontSize: 13 }}>\r\n              <strong>1. Base Price (Reimbursement)</strong>{\" \"}\r\n              <span style={{ fontSize: 11 }}>(HSN 9985)</span>\r\n              <span style={{ float: \"right\" }}>\r\n                 {(totalBase + gstOnBase).toFixed(2)}\r\n              </span>\r\n            </Typography>\r\n\r\n            {/* 2. Service Charges + CGST + SGST */}\r\n            <Typography sx={{ fontSize: 13, mt: 1 }}>\r\n              <strong>2. Service Charges</strong>{\" \"}\r\n              <span style={{ fontSize: 11 }}>(HSN 996111)</span>\r\n              <span style={{ float: \"right\" }}>\r\n                 {serviceTaxableValue.toFixed(2)}\r\n              </span>\r\n            </Typography>\r\n            <Typography sx={{ fontSize: 12, ml: 2, mt: 0.3 }}>\r\n              CGST @ 9% on Service\r\n              <span style={{ float: \"right\" }}>\r\n                 {cgstOnService.toFixed(2)}\r\n              </span>\r\n            </Typography>\r\n            <Typography sx={{ fontSize: 12, ml: 2 }}>\r\n              SGST @ 9% on Service\r\n              <span style={{ float: \"right\" }}>\r\n                 {sgstOnService.toFixed(2)}\r\n              </span>\r\n            </Typography>\r\n\r\n            {/* 3. Convenience Fees (Incl. GST) */}\r\n            <Typography sx={{ fontSize: 13, mt: 1 }}>\r\n              <strong>3. Convenience Fees (Incl. GST)</strong>{\" \"}\r\n              <span style={{ fontSize: 11 }}>(Reimbursement, HSN 9985)</span>\r\n              <span style={{ float: \"right\" }}>\r\n                 {convenienceFeeInclGst.toFixed(2)}\r\n              </span>\r\n            </Typography>\r\n\r\n            <Divider sx={{ my: 1.5 }} />\r\n\r\n            {/* SUBTOTAL BEFORE DISCOUNT */}\r\n            <Box sx={{ display: \"flex\", justifyContent: \"space-between\", mb: 1 }}>\r\n              <Typography sx={{ fontSize: 14, fontWeight: 600 }}>\r\n                Subtotal:\r\n              </Typography>\r\n              <Typography sx={{ fontSize: 14, fontWeight: 600 }}>\r\n                 {totalWithoutDiscount.toFixed(2)}\r\n              </Typography>\r\n            </Box>\r\n\r\n            {/* DISCOUNT - Only show if applied */}\r\n            {couponApplied && couponDiscount > 0 && (\r\n              <Box sx={{ display: \"flex\", justifyContent: \"space-between\", mb: 1.5 }}>\r\n                <Typography sx={{ fontSize: 14, fontWeight: 600, color: \"green\" }}>\r\n                  Huts4u Discount:\r\n                </Typography>\r\n                <Typography sx={{ fontSize: 14, fontWeight: 600, color: \"green\" }}>\r\n                  -  {couponDiscount.toFixed(2)}\r\n                </Typography>\r\n              </Box>\r\n            )}\r\n\r\n            <Divider sx={{ my: 1 }} />\r\n\r\n            {/* FINAL TOTAL PAYABLE */}\r\n            <Box sx={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", mt: 1.5 }}>\r\n              <Typography sx={{ fontSize: 16, fontWeight: 700, color: color.firstColor }}>\r\n                Total Payable\r\n              </Typography>\r\n              <Typography sx={{ fontSize: 18, fontWeight: 700, color: color.firstColor }}>\r\n                 {grandTotal.toFixed(2)}\r\n              </Typography>\r\n            </Box>\r\n\r\n            {/* GST Invoice Note if GST is added */}\r\n            {gstVerificationStatus === \"verified\" && (\r\n              <Box sx={{\r\n                mt: 1.5,\r\n                p: 1.5,\r\n                bgcolor: \"#e8f5e9\",\r\n                borderRadius: 1,\r\n                border: \"1px solid #c8e6c9\"\r\n              }}>\r\n                <Typography sx={{\r\n                  fontSize: 13,\r\n                  color: \"#2e7d32\",\r\n                  fontWeight: 600,\r\n                  textAlign: \"center\",\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  gap: 1\r\n                }}>\r\n                  <VerifiedIcon fontSize=\"small\" />\r\n                  GST Invoice will be generated with your booking\r\n                </Typography>\r\n              </Box>\r\n            )}\r\n\r\n            {/* Additional savings note */}\r\n            {couponApplied && couponDiscount > 0 && (\r\n              <Box sx={{ mt: 1.5, p: 1.5, bgcolor: \"#e8f5e9\", borderRadius: 1 }}>\r\n                <Typography sx={{ fontSize: 13, color: \"#2e7d32\", fontWeight: 600, textAlign: \"center\" }}>\r\n                   You saved  {couponDiscount.toFixed(2)} with Huts4u Discount!\r\n                </Typography>\r\n              </Box>\r\n            )}\r\n          </Box>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Terms & Conditions Dialog */}\r\n      <Dialog\r\n        open={termsOpen}\r\n        onClose={() => setTermsOpen(false)}\r\n        maxWidth=\"sm\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle>Terms & Conditions</DialogTitle>\r\n        <DialogContent>\r\n          <Typography variant=\"body2\" sx={{ whiteSpace: \"pre-line\" }}>\r\n            {termsText}\r\n          </Typography>\r\n          <Typography\r\n            variant=\"body2\"\r\n            sx={{\r\n              color: color.firstColor,\r\n              textDecoration: \"underline\",\r\n              cursor: \"pointer\",\r\n              fontWeight: 600,\r\n            }}\r\n            onClick={() => window.open(\"https://huts4u.com/terms\", \"_blank\")}\r\n          >\r\n            Open Huts4u Terms & Conditions\r\n          </Typography>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            onClick={() => {\r\n              setTermsOpen(false);\r\n            }}\r\n          >\r\n            Close\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default BookingSummary;\r\n\r\nconst typoStyle = {\r\n  borderRadius: \"52px\",\r\n  boxShadow: \"4px 4px 10px rgba(104, 39, 184, 0.17)\",\r\n  color: color.firstColor,\r\n  background: \"white\",\r\n  fontSize: { xs: \"12px\", md: \"14px\" },\r\n  width: \"fit-content\",\r\n  p: 1,\r\n  px: 2,\r\n  mb: 1,\r\n};","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z\"\n}), 'Add');","\"use client\";\n\nimport createSvgIcon from \"./utils/createSvgIcon.js\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon(/*#__PURE__*/_jsx(\"path\", {\n  d: \"M12 7V3H2v18h20V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8zm-2-8h-2v2h2zm0 4h-2v2h2z\"\n}), 'Business');"],"names":["createSvgIcon","_jsx","d","getCheckboxUtilityClass","slot","generateUtilityClass","generateUtilityClasses","_excluded","CheckboxRoot","styled","SwitchBase","shouldForwardProp","prop","rootShouldForwardProp","name","overridesResolver","props","styles","ownerState","root","indeterminate","concat","capitalize","size","color","memoTheme","_ref","theme","vars","palette","text","secondary","variants","disableRipple","style","backgroundColor","action","activeChannel","hoverOpacity","alpha","active","Object","entries","filter","createSimplePaletteValueFilter","map","_ref2","mainChannel","main","_ref3","checkboxClasses","checked","disabled","defaultCheckedIcon","CheckBoxIcon","defaultIcon","CheckBoxOutlineBlankIcon","defaultIndeterminateIcon","IndeterminateCheckBoxIcon","Checkbox","React","inProps","ref","_slotProps$input","_icon$props$fontSize","_indeterminateIcon$pr","useDefaultProps","checkedIcon","icon","iconProp","indeterminateIcon","indeterminateIconProp","inputProps","className","slots","slotProps","other","_objectWithoutProperties","_objectSpread","classes","composedClasses","composeClasses","useUtilityClasses","externalInputProps","input","RootSlot","rootSlotProps","useSlot","elementType","clsx","shouldForwardComponentProp","externalForwardedProps","additionalProps","type","fontSize","mergeSlotProps","orderDetails","bookingDetails","checkedInTimes","setCheckInTimes","useState","checkedOutTimes","setCheckOutTimes","open","setOpen","useNavigate","console","log","useEffect","_bookingDetails$room","bookingType","getOneRoomData","room","id","then","res","_res$data","_res$data$data","_res$data2","_res$data2$data","data","checkInTime","checkOutTime","handleClose","children","_jsxs","Dialog","onClose","maxWidth","fullWidth","sx","padding","borderRadius","DialogTitle","DialogContent","DialogActions","display","justifyContent","Button","textTransform","onClick","async","_bookingDetails$guest","_bookingDetails$guest2","_bookingDetails$guest3","src","Promise","resolve","script","document","createElement","onload","onerror","body","appendChild","window","Razorpay","alert","timingDetails","getTimingDetails","_bookingDetails$timin","_bookingDetails$timin2","_bookingDetails$timin3","_bookingDetails$timin4","timing","options","key","R_KEY_ID","amount","currency","order_id","prefill","guestInfo","email","contact","phoneNumber","handler","_bookingDetails$hotel","_bookingDetails$room2","_bookingDetails$guest4","_bookingDetails$timin5","_bookingDetails$timin6","_bookingDetails$hotel2","_res$data3","_res$data3$data","verifyPayment","orderId","response","razorpay_order_id","paymentId","razorpay_payment_id","signature","razorpay_signature","payLoad","userId","getUserId","hotelId","hotel","roomId","geustName","amountPaid","checkInDate","checkOutDate","geustDetails","adults","hotelName","propertyName","status","rooms","gstDetails","GstDetail","postBooking","_res$data4","_res$data4$data","_bookingDetails$hotel3","_bookingDetails$room3","_res$data5","_res$data5$data","_bookingDetails$prici","_bookingDetails$prici2","_bookingDetails$prici3","_bookingDetails$prici4","_res$data6","_res$data6$data","_res$data7","_res$data7$data","_bookingDetails$timin7","_res$data8","_res$data8$data","_bookingDetails$hotel4","_res$data9","_res$data9$data","_bookingDetails$room4","_bookingDetails$prici5","_bookingDetails$prici6","_bookingDetails$prici7","_bookingDetails$prici8","_res$data0","_res$data0$data","_bookingDetails$timin8","_res$data1","_bookingDetails$guest5","_bookingDetails$hotel5","_bookingDetails$hotel6","_bookingDetails$timin9","_bookingDetails$guest6","_bookingDetails$prici9","_bookingDetails$prici0","_bookingDetails$prici1","_bookingDetails$prici10","_bookingDetails$prici11","_bookingDetails$prici12","_bookingDetails$prici13","_bookingDetails$prici14","_bookingDetails$prici15","_bookingDetails$prici16","_bookingDetails$timin0","_bookingDetails$hotel7","_bookingDetails$hotel8","payoutPayLoad","bookingId","amountPaise","feePaise","pricingDetails","platformFee","gstOnPlatform","netAmountPaise","basePrice","gstOnBase","bookingsIncluded","bookingDate","scheduledAt","dayjs","toDate","transactionRef","gatewayResponse","failureReason","processedBy","note","mypaymentPayload","netmyAmountPaise","initiatedAt","Date","processedAt","createMyPayment","catch","err","createHotelPayment","toast","msg","messagetamplet","guestName","location","address","format","phone","razorpayfee","gstTotal","totalPrice","hotelEmail","receptionEmail","receptionistPhone","receptionMobile","bookingConfirm","href","error","variant","background","firstColor","border","transition","paddingRight","validationSchema","Yup","required","optional","test","value","slice","length","calculatePriceBreakdown","couponApplied","arguments","undefined","numericBase","Number","convenienceFee","gstOnConvenience","totalWithoutDiscount","couponDiscount","finalPrice","subtotalBeforeConvenience","BookingSummary","_location$state","_location$state2","_location$state3","_location$state4","_location$state5","_value$match","_hotel$propertyImages","useLocation","state","hotelData","selectedRoom","selectedSlot","inventoryData","queryParams","URLSearchParams","search","initialBookingType","get","initialCheckinTime","initialCheckinDate","initialCheckOutDate","initialRooms","initialAdults","initialChildren","setBookingType","checkinTime","setCheckinTime","checkinDate","setCheckinDate","setCheckOutDate","add","setRooms","setAdults","setChildren","editingCheckin","setEditingCheckin","editingCheckout","setEditingCheckout","editingTime","setEditingTime","tempCheckinDate","setTempCheckinDate","tempCheckOutDate","setTempCheckOutDate","tempCheckinTime","setTempCheckinTime","number","match","initialExtractedNumber","parseInt","slotDuration","setSlotDuration","tempSlotDuration","setTempSlotDuration","user","setUser","showOtpModal","setShowOtpModal","otpData","setOtpData","token","setOrderDetails","termsChecked","setTermsChecked","termsOpen","setTermsOpen","couponCode","setCouponCode","setCouponApplied","couponError","setCouponError","validationError","setValidationError","gstSectionOpen","setGstSectionOpen","gstinNumber","setGstinNumber","legalName","setLegalName","gstAddress","setGstAddress","gstVerificationStatus","setGstVerificationStatus","verifyingGst","setVerifyingGst","userGSTRecords","setUserGSTRecords","selectedGSTRecord","setSelectedGSTRecord","loadingGSTRecords","setLoadingGSTRecords","showNewGSTForm","setShowNewGSTForm","deletingGST","setDeletingGST","calculatedPrice","setCalculatedPrice","nameFieldRef","useRef","phoneFieldRef","gstinFieldRef","guestDistribution","distributeGuestsToRooms","totalGuests","standardOccupancy","maxOccupancy","additionalGuestRate","requiredRooms","extraGuestCount","extraGuestCharge","guestsPerRoom","Math","ceil","remainingGuests","i","roomIndex","forEach","guestsInRoom","extraInThisRoom","standardRoomOccupancy","maxRoomOccupancy","slotAvailability","checkSlotAvailability","_room$status","isAvailable","message","roomStatus","toLowerCase","unitBase","checkDay","dayInventory","find","inv","date","roomRates","rateFor3Hour","rateFor6Hour","rateFor12Hour","rateFor1Night","overnightRate","threeHourRate","sixHourRate","twelveHourRate","getInventoryPriceForDate","getSlotKey","toString","isLoggedIn","loadUserProfileAndGST","_profileRes$data","profileRes","getProfile","userData","_id","loadUserGSTRecords","_response$data","getAllGSTByUserId","gstRecords","Array","isArray","transformedRecords","record","gst_detail","mappingId","gstId","isPrimary","mappingCreatedAt","createdAt","mappingUpdatedAt","updatedAt","verifiedRecords","verified","gstStatus","firstRecord","gstNumber","tradeName","success","handleGSTRecordSelect","handleClearGST","info","calculateNights","inDate","outDate","isValid","diff","max","nights","priceBreakdown","calculateTotalPrice","gatewayFee","totalMultiplier","breakdown","totalBase","inventoryUnitBase","displayBase","displayBasePlus700","displayCombinedBasePlatform","displayGstTotal","payableAfterCoupon","toFixed","serviceTaxableValue","cgstOnService","sgstOnService","convenienceFeeInclGst","grandTotal","handlePayment","gstDataForBooking","gstRecordId","round","metadata","createOrder","navigate","formik","useFormik","initialValues","userName","enableReinitialize","onSubmit","values","_nameFieldRef$current","_nameFieldRef$current2","_phoneFieldRef$curren","trim","current","focus","scrollIntoView","behavior","block","sendOTP","updateGSTRecordWithUserId","_response$data9","updatePayload","updateGST","textContainerRef","imageHeight","setImageHeight","clientHeight","timeSlots","generateTimeSlots","hour","minute","time","padStart","push","label","isFormValid","isNameValid","isPhoneValid","isTermsAccepted","isSlotAvailable","handleFieldChange","field","setFieldValue","setFieldTouched","getPriceSource","Box","BoxStyle","mt","py","px","xs","md","flexDirection","gap","Card","p","boxShadow","CardContent","Typography","gutterBottom","fontWeight","Alert","severity","mb","ml","position","height","alignItems","CardMedia","component","width","objectFit","image","propertyImages","overflow","textOverflow","WebkitLineClamp","WebkitBoxOrient","fontFamily","forthColor","fontStyle","marginTop","flexWrap","TextField","onChange","e","target","InputLabelProps","shrink","InputProps","IconButton","handleCheckinDateSave","isAfter","CheckIcon","CloseIcon","_Fragment","typoStyle","EditIcon","FormControl","minWidth","InputLabel","Select","MenuItem","handleTimeSave","handleCheckoutDateSave","isBefore","roomCategory","bgcolor","guests","index","extraInRoom","PersonAddIcon","handleSubmit","CustomTextField","margin","onBlur","handleBlur","touched","Boolean","errors","helperText","String","inputRef","marginLeft","borderColor","borderWidth","PhoneInput","country","onlyCountries","disableDropdown","countryCodeEditable","enableSearch","placeholder","inputStyle","outline","paddingLeft","buttonStyle","containerStyle","dropdownStyle","sm","Chip","VerifiedIcon","whiteSpace","BusinessIcon","animation","my","CircularProgress","maxHeight","overflowY","textAlign","isVerified","isSelected","cursor","flex","Tooltip","title","stopPropagation","navigator","clipboard","writeText","CopyIcon","confirm","_response$data8","deleteGST","prev","handleDeleteGST","DeleteIcon","startIcon","AddIcon","handleAddNewGST","toUpperCase","_gstinFieldRef$curren","_response$data2","_response$data5","gstPayload","createGST","_response$data3","_response$data4","_gstData$pradr","_gstData$pradr2","gstData","result","lgnm","pradr","adr","selectedRecord","_response$data6","errorMessage","includes","_response$data7","existingGST","_updateResponse$data","updateResponse","updateError","_error$response","_error$response$data","errorData","startAdornment","mr","multiline","rows","InfoIcon","OfferIcon","handleRemoveCoupon","handleApplyCoupon","FormControlLabel","control","textDecoration","CustomButton","opacity","LoginOtpModal","onVerificationSuccess","handleOtpSuccess","RenderRazorpay","calculateCheckoutTime","checkInDateTime","checkOutDateTime","duration","Divider","float"],"ignoreList":[],"sourceRoot":""}