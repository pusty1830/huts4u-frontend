{"version":3,"file":"static/js/963.2840f84a.chunk.js","mappings":"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","sources":["components/data.tsx","pages/HotelDetails.tsx"],"sourcesContent":["import AcUnitIcon from \"@mui/icons-material/AcUnit\";\nimport AirportShuttleIcon from \"@mui/icons-material/AirportShuttle\";\nimport BeachAccessIcon from \"@mui/icons-material/BeachAccess\";\nimport BusinessCenterIcon from \"@mui/icons-material/BusinessCenter\";\nimport CasinoIcon from \"@mui/icons-material/Casino\";\nimport ChildCareIcon from \"@mui/icons-material/ChildCare\";\nimport DirectionsCarIcon from \"@mui/icons-material/DirectionsCar\";\nimport FireExtinguisherIcon from \"@mui/icons-material/FireExtinguisher\";\nimport FitnessCenterIcon from \"@mui/icons-material/FitnessCenter\";\nimport FreeBreakfastIcon from \"@mui/icons-material/FreeBreakfast\";\nimport KingBedIcon from \"@mui/icons-material/KingBed\";\nimport LocalBarIcon from \"@mui/icons-material/LocalBar\";\nimport LocalDiningIcon from \"@mui/icons-material/LocalDining\";\nimport LocalLaundryServiceIcon from \"@mui/icons-material/LocalLaundryService\";\nimport LocalParkingIcon from \"@mui/icons-material/LocalParking\";\nimport NightlifeIcon from \"@mui/icons-material/Nightlife\";\nimport OutdoorGrillIcon from \"@mui/icons-material/OutdoorGrill\";\nimport PetsIcon from \"@mui/icons-material/Pets\";\nimport PoolIcon from \"@mui/icons-material/Pool\";\nimport RoomServiceIcon from \"@mui/icons-material/RoomService\";\nimport SpaIcon from \"@mui/icons-material/Spa\";\nimport SportsTennisIcon from \"@mui/icons-material/SportsTennis\";\nimport TvIcon from \"@mui/icons-material/Tv\";\nimport WifiIcon from \"@mui/icons-material/Wifi\";\n\nexport const amenityIcons: { [key: string]: JSX.Element } = {\n  \"Swimming Pool\": <PoolIcon fontSize=\"small\" />,\n  Gym: <FitnessCenterIcon fontSize=\"small\" />,\n  \"Free WiFi\": <WifiIcon fontSize=\"small\" />,\n  \"Private Beach\": <BeachAccessIcon fontSize=\"small\" />,\n  Breakfast: <FreeBreakfastIcon fontSize=\"small\" />,\n  Parking: <LocalParkingIcon fontSize=\"small\" />,\n  Spa: <SpaIcon fontSize=\"small\" />,\n  Restaurant: <LocalDiningIcon fontSize=\"small\" />,\n  \"Airport Shuttle\": <AirportShuttleIcon fontSize=\"small\" />,\n  \"Business Center\": <BusinessCenterIcon fontSize=\"small\" />,\n  \"Pet Friendly\": <PetsIcon fontSize=\"small\" />,\n  Bar: <LocalBarIcon fontSize=\"small\" />,\n  \"Room Service\": <RoomServiceIcon fontSize=\"small\" />,\n  TV: <TvIcon fontSize=\"small\" />,\n  \"Air Conditioning\": <AcUnitIcon fontSize=\"small\" />,\n  \"Laundry Service\": <LocalLaundryServiceIcon fontSize=\"small\" />,\n  \"Child Care\": <ChildCareIcon fontSize=\"small\" />,\n  \"King Bed\": <KingBedIcon fontSize=\"small\" />,\n  Casino: <CasinoIcon fontSize=\"small\" />,\n  \"Car Rental\": <DirectionsCarIcon fontSize=\"small\" />,\n  \"Night Club\": <NightlifeIcon fontSize=\"small\" />,\n  \"Tennis Court\": <SportsTennisIcon fontSize=\"small\" />,\n  \"BBQ Facilities\": <OutdoorGrillIcon fontSize=\"small\" />,\n  \"Fire Safety\": <FireExtinguisherIcon fontSize=\"small\" />,\n};\n\n\nexport const amenitiesOptions = [\n  \"Swimming Pool\",\n  \"Gym\",\n  \"Free WiFi\",\n  \"Private Beach\",\n  \"Breakfast\",\n  \"Parking\",\n  \"Spa\",\n  \"Restaurant\",\n  \"Airport Shuttle\",\n  \"Business Center\",\n  \"Pet Friendly\",\n  \"Bar\",\n  \"Room Service\",\n  \"TV\",\n  \"Air Conditioning\",\n  \"Laundry Service\",\n  \"Child Care\",\n  \"King Bed\",\n  \"Casino\",\n  \"Car Rental\",\n  \"Night Club\",\n  \"Tennis Court\",\n  \"BBQ Facilities\",\n  \"Fire Safety\",\n];\n\n\nexport const roomTypes = [\n  /* ================= BASIC ROOMS ================= */\n  {\n    value: \"Single Non-AC Room\",\n    label: \"Single Non-AC Room\",\n    details: \"A basic room with a single bed and fan cooling, ideal for solo travelers.\",\n  },\n  {\n    value: \"Single AC Room\",\n    label: \"Single AC Room\",\n    details: \"An air-conditioned room with a single bed, ideal for solo travelers.\",\n  },\n  {\n    value: \"Double Non-AC Room\",\n    label: \"Double Non-AC Room\",\n    details: \"A non air-conditioned room with a double or twin bed, suitable for two guests.\",\n  },\n  {\n    value: \"Double AC Room\",\n    label: \"Double AC Room\",\n    details: \"An air-conditioned room with a double or twin bed, suitable for two guests.\",\n  },\n  {\n    value: \"Triple Non-AC Room\",\n    label: \"Triple Non-AC Room\",\n    details: \"A non air-conditioned room designed for three guests, with an extra bed.\",\n  },\n  {\n    value: \"Triple AC Room\",\n    label: \"Triple AC Room\",\n    details: \"An air-conditioned room designed for three guests, with an extra bed or sofa bed.\",\n  },\n\n  /* ================= PREMIUM ROOMS ================= */\n  {\n    value: \"Deluxe Non-AC Room\",\n    label: \"Deluxe Non-AC Room\",\n    details: \"A spacious non air-conditioned room with upgraded interiors and comfort amenities.\",\n  },\n  {\n    value: \"Deluxe AC Room\",\n    label: \"Deluxe AC Room\",\n    details: \"A spacious air-conditioned room with upgraded interiors and enhanced comfort.\",\n  },\n  {\n    value: \"Executive AC Room\",\n    label: \"Executive AC Room\",\n    details: \"Designed for business travelers with a work desk, premium amenities, and air conditioning.\",\n  },\n  {\n    value: \"Club AC Room\",\n    label: \"Club AC Room\",\n    details: \"Premium category offering lounge access, complimentary breakfast, and AC comfort.\",\n  },\n\n  /* ================= SUITES ================= */\n  {\n    value: \"Suite Room\",\n    label: \"Suite Room\",\n    details: \"A large room with a separate living area, suitable for families or executives.\",\n  },\n  {\n    value: \"Presidential Suite\",\n    label: \"Presidential Suite\",\n    details: \"A luxury suite with multiple rooms, high-end furnishings, and personalized services.\",\n  },\n  {\n    value: \"Royal Suite\",\n    label: \"Royal Suite\",\n    details: \"Inspired by Indian royalty, featuring grand interiors and luxury amenities.\",\n  },\n  {\n    value: \"Heritage Room\",\n    label: \"Heritage Room\",\n    details: \"Traditional dcor and antique furnishings, commonly found in heritage hotels.\",\n  },\n\n  /* ================= SPECIAL STAYS ================= */\n  {\n    value: \"Cottage/Villa\",\n    label: \"Cottage/Villa\",\n    details: \"Standalone accommodation with private spaces, often available in resorts.\",\n  },\n  {\n    value: \"Treehouse Room\",\n    label: \"Treehouse Room\",\n    details: \"Elevated rooms offering a unique stay experience in nature-focused retreats.\",\n  },\n  {\n    value: \"Houseboat Room\",\n    label: \"Houseboat Room\",\n    details: \"Floating hotel rooms offering a unique stay experience in backwaters.\",\n  },\n  {\n    value: \"Studio Apartment\",\n    label: \"Studio Apartment\",\n    details: \"A self-contained unit with a kitchenette, suitable for extended stays.\",\n  },\n  {\n    value: \"Serviced Apartment\",\n    label: \"Serviced Apartment\",\n    details: \"Fully furnished apartments with hotel-like services and amenities.\",\n  },\n];\n","// MUI Icons  only import the icons you use\r\nimport AddCircleOutline from '@mui/icons-material/AddCircleOutline';\r\nimport CheckCircle from '@mui/icons-material/CheckCircle';\r\nimport ExpandLess from '@mui/icons-material/ExpandLess';\r\nimport ExpandMore from '@mui/icons-material/ExpandMore';\r\nimport Star from '@mui/icons-material/Star';\r\nimport StarRounded from '@mui/icons-material/StarRounded';\r\nimport Block from '@mui/icons-material/Block';\r\nimport LocationOn from '@mui/icons-material/LocationOn';\r\nimport DirectionsCar from '@mui/icons-material/DirectionsCar';\r\nimport DirectionsTransit from '@mui/icons-material/DirectionsTransit';\r\nimport DirectionsWalk from '@mui/icons-material/DirectionsWalk';\r\nimport Search from '@mui/icons-material/Search';\r\nimport EventBusy from '@mui/icons-material/EventBusy';\r\nimport Warning from '@mui/icons-material/Warning';\r\nimport Restaurant from '@mui/icons-material/Restaurant';\r\nimport RestaurantMenu from '@mui/icons-material/RestaurantMenu';\r\nimport BreakfastDining from '@mui/icons-material/BreakfastDining';\r\nimport LunchDining from '@mui/icons-material/LunchDining';\r\nimport DinnerDining from '@mui/icons-material/DinnerDining';\r\nimport Close from '@mui/icons-material/Close';\r\nimport ArrowRightAlt from '@mui/icons-material/ArrowRightAlt';\r\n\r\n// MUI Components  import individually\r\nimport Box from '@mui/material/Box';\r\nimport Button from '@mui/material/Button';\r\nimport Card from '@mui/material/Card';\r\nimport CardMedia from '@mui/material/CardMedia';\r\nimport Chip from '@mui/material/Chip';\r\nimport Divider from '@mui/material/Divider';\r\nimport FormControl from '@mui/material/FormControl';\r\nimport Grid from '@mui/material/Grid';\r\nimport List from '@mui/material/List';\r\nimport RadioGroup from '@mui/material/RadioGroup';\r\nimport Tab from '@mui/material/Tab';\r\nimport Tabs from '@mui/material/Tabs';\r\nimport ToggleButton from '@mui/material/ToggleButton';\r\nimport Typography from '@mui/material/Typography';\r\nimport useMediaQuery from '@mui/material/useMediaQuery';\r\nimport Alert from '@mui/material/Alert';\r\nimport AlertTitle from '@mui/material/AlertTitle';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport Tooltip from '@mui/material/Tooltip';\r\nimport { styled } from '@mui/material/styles';\r\n\r\n// Third-party libraries\r\nimport dayjs from 'dayjs';\r\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { Helmet } from 'react-helmet-async';\r\n\r\n// Local components / services / constants\r\nimport color from '../components/color';\r\nimport CustomButton from '../components/CustomButton';\r\nimport { amenityIcons } from '../components/data';\r\nimport {\r\n  BoxStyle,\r\n  CustomRadio,\r\n  getRatingColor,\r\n  getRatingText,\r\n  ImageGrid,\r\n  RoomAmenities,\r\n  StyledLabel,\r\n} from '../components/style';\r\nimport { CDN_URL, MAPBOX_ACCESS_TOKEN } from '../services/Secret';\r\nimport { getAllRatings, getAllHotels, getMyAllHotelswithBelongsTo, getAllInventories, getHotelMeals } from '../services/services';\r\nimport { ClearAll, Info, SquareFoot } from '@mui/icons-material';\r\nimport { IconButton } from '@mui/material';\r\n\r\n/**\r\n * calculatePriceBreakdown (simplified - no discount)\r\n *\r\n * Flow:\r\n * - gstOnBase = 5% of base\r\n * - platformFee = 13% of (base + gstOnBase)\r\n * - gstOnPlatform = 18% of platformFee\r\n * - gatewayFee = 2% of (base + gstOnBase + platformFee + gstOnPlatform)\r\n * - gstOnGateway = 18% of gatewayFee\r\n * - gstTotal = gstOnBase + gstOnPlatform + gatewayFee + gstOnGateway\r\n * - finalPrice = base + platformFee + gstOnBase + gstOnPlatform + gatewayFee + gstOnGateway\r\n */\r\nconst calculatePriceBreakdown = (basePrice: number) => {\r\n  const numericBase = Number(basePrice) || 0;\r\n\r\n  if (!numericBase || numericBase <= 0) {\r\n    return {\r\n      basePrice: 0,\r\n      platformFee: 0,\r\n      gstOnBase: 0,\r\n      gstOnPlatform: 0,\r\n      gstTotal: 0,\r\n      gatewayFee: 0,\r\n      finalPrice: 0,\r\n    };\r\n  }\r\n\r\n  // 5% GST on base\r\n  const gstOnBase = numericBase * 0.05;\r\n\r\n  // platform fee = 13% on (base + gstOnBase)\r\n  const platformFee = (numericBase + gstOnBase) * 0.13;\r\n\r\n  // GST on platform (18%)\r\n  const gstOnPlatform = platformFee * 0.18;\r\n\r\n  // amount that gateway charges apply to (base + gstOnBase + platformFee + gstOnPlatform)\r\n  const amountBeforeGateway =\r\n    numericBase + gstOnBase + platformFee + gstOnPlatform;\r\n\r\n  // gateway fee (2%)\r\n  const gatewayFee = amountBeforeGateway * 0.02;\r\n\r\n  // GST on gateway fee (18%)\r\n  const gstOnGateway = gatewayFee * 0.18;\r\n\r\n  // combined GST & fees\r\n  const gstTotal = gstOnBase + gstOnPlatform + gatewayFee + gstOnGateway;\r\n\r\n  // final total\r\n  const finalPrice =\r\n    numericBase + platformFee + gstOnBase + gstOnPlatform + gatewayFee + gstOnGateway;\r\n\r\n  return {\r\n    basePrice: numericBase,\r\n    platformFee,\r\n    gstOnBase,\r\n    gstOnPlatform,\r\n    gstTotal,\r\n    gatewayFee,\r\n    finalPrice,\r\n  };\r\n};\r\n\r\n// Function to calculate average rating for a hotel\r\nconst calculateAverageRating = (ratings: any[]) => {\r\n  if (!ratings || !Array.isArray(ratings) || ratings.length === 0) return 0;\r\n\r\n  const total = ratings.reduce((sum, rating) => {\r\n    return sum + (Number(rating.rating) || 0);\r\n  }, 0);\r\n\r\n  const average = total / ratings.length;\r\n  return Math.round(average * 10) / 10;\r\n};\r\n\r\n// Function to get ratings for a specific hotel\r\nconst getRatingsForHotel = (ratingsData: any, hotelId: string) => {\r\n  if (!ratingsData || !hotelId) return [];\r\n\r\n  let ratingsArray = [];\r\n\r\n  if (Array.isArray(ratingsData)) {\r\n    ratingsArray = ratingsData;\r\n  } else if (ratingsData && typeof ratingsData === 'object') {\r\n    if (Array.isArray(ratingsData.data)) {\r\n      ratingsArray = ratingsData.data;\r\n    } else if (Array.isArray(ratingsData.rows)) {\r\n      ratingsArray = ratingsData.rows;\r\n    } else if (Array.isArray(ratingsData.result)) {\r\n      ratingsArray = ratingsData.result;\r\n    } else {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  if (!Array.isArray(ratingsArray)) {\r\n    return [];\r\n  }\r\n\r\n  return ratingsArray.filter(rating => {\r\n    const ratingHotelId = rating.hotelId || rating.propertyId || rating.hotel_id || rating.hotelID;\r\n    return ratingHotelId === hotelId ||\r\n      ratingHotelId?.toString() === hotelId?.toString();\r\n  });\r\n};\r\n\r\n// Function to check room availability based on inventory for a SPECIFIC DATE\r\nconst checkRoomAvailabilityForDate = (room: any, inventoryData: any[], checkDate: string, bookingType: string, checkinTime?: string) => {\r\n  if (!room || !checkDate) return false;\r\n\r\n  // First check room status from database\r\n  const roomStatus = room.status?.toLowerCase();\r\n  const isStatusAvailable = roomStatus === \"available\" || roomStatus === \"active\";\r\n  if (!isStatusAvailable) return false;\r\n\r\n  // If no inventory data, assume available\r\n  if (!inventoryData || inventoryData.length === 0) return true;\r\n\r\n  const roomId = room.id;\r\n  const checkDay = dayjs(checkDate).format('YYYY-MM-DD');\r\n\r\n  // Find inventory for this specific room and date\r\n  const dayInventory = inventoryData.find(inv =>\r\n    inv.roomId === roomId && dayjs(inv.date).format('YYYY-MM-DD') === checkDay\r\n  );\r\n\r\n  // If no inventory record for this date, assume available\r\n  if (!dayInventory) return true;\r\n\r\n  // Check if room is blocked in inventory\r\n  if (dayInventory.isBlocked) return false;\r\n\r\n  // Check availability based on booking type\r\n  if (bookingType === \"hourly\") {\r\n    // For hourly bookings, check specific time slot availability\r\n    if (checkinTime) {\r\n      const hour = dayjs(checkinTime, 'HH:mm').hour();\r\n      // Check specific hourly slots\r\n      if (hour >= 0 && hour < 3) {\r\n        return dayInventory.threeHourAvailable > dayInventory.threeHourBooked;\r\n      } else if (hour >= 3 && hour < 6) {\r\n        return dayInventory.sixHourAvailable > dayInventory.sixHourBooked;\r\n      } else if (hour >= 6 && hour < 9) {\r\n        return dayInventory.twelveHourAvailable > dayInventory.twelveHourBooked;\r\n      }\r\n    }\r\n    // If no specific time, check if any hourly slot is available\r\n    return (\r\n      dayInventory.threeHourAvailable > dayInventory.threeHourBooked ||\r\n      dayInventory.sixHourAvailable > dayInventory.sixHourBooked ||\r\n      dayInventory.twelveHourAvailable > dayInventory.twelveHourBooked\r\n    );\r\n  } else {\r\n    // For overnight bookings\r\n    return dayInventory.overnightAvailable > dayInventory.overnightBooked;\r\n  }\r\n};\r\n\r\n// Function to check room availability for date range (overnight stays)\r\nconst checkRoomAvailabilityForDateRange = (room: any, inventoryData: any[], checkinDate: string, checkoutDate: string) => {\r\n  if (!room || !checkinDate || !checkoutDate) return false;\r\n\r\n  // First check room status from database\r\n  const roomStatus = room.status?.toLowerCase();\r\n  const isStatusAvailable = roomStatus === \"available\" || roomStatus === \"active\";\r\n  if (!isStatusAvailable) return false;\r\n\r\n  const startDate = dayjs(checkinDate);\r\n  const endDate = dayjs(checkoutDate);\r\n\r\n  // Check each date in the range\r\n  for (let date = startDate; date.isBefore(endDate); date = date.add(1, 'day')) {\r\n    const dateStr = date.format('YYYY-MM-DD');\r\n\r\n    // Find inventory for this specific date\r\n    const dayInventory = inventoryData?.find(inv =>\r\n      inv.roomId === room.id && dayjs(inv.date).format('YYYY-MM-DD') === dateStr\r\n    );\r\n\r\n    if (dayInventory) {\r\n      // If inventory exists and room is blocked\r\n      if (dayInventory.isBlocked) return false;\r\n\r\n      // If no overnight availability\r\n      if (dayInventory.overnightAvailable <= dayInventory.overnightBooked) {\r\n        return false;\r\n      }\r\n    }\r\n    // If no inventory record for this date, continue checking next date\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\n// Function to get inventory-based price for a specific date\r\nconst getInventoryPriceForDate = (room: any, inventoryData: any[], checkDate: string, slot: string) => {\r\n  if (!room || !checkDate) return room[slot] || 0;\r\n\r\n  const roomId = room.id;\r\n  const checkDay = dayjs(checkDate).format('YYYY-MM-DD');\r\n\r\n  // Find inventory for this specific date\r\n  const dayInventory = inventoryData?.find(inv =>\r\n    inv.roomId === roomId && dayjs(inv.date).format('YYYY-MM-DD') === checkDay\r\n  );\r\n\r\n  if (!dayInventory) return room[slot] || 0;\r\n\r\n  // Return inventory-specific rate if available, otherwise room rate\r\n  switch (slot) {\r\n    case 'rateFor1Night':\r\n      return dayInventory.overnightRate || room.rateFor1Night || 0;\r\n    case 'rateFor3Hour':\r\n      return dayInventory.threeHourRate || room.rateFor3Hour || 0;\r\n    case 'rateFor6Hour':\r\n      return dayInventory.sixHourRate || room.rateFor6Hour || 0;\r\n    case 'rateFor12Hour':\r\n      return dayInventory.twelveHourRate || room.rateFor12Hour || 0;\r\n    default:\r\n      return room[slot] || 0;\r\n  }\r\n};\r\n\r\nconst HotelDetails: React.FC = () => {\r\n  const S3_BASE_URL = \"https://huts44u.s3.ap-south-1.amazonaws.com\";\r\n  const CDN_BASE_URL = CDN_URL;\r\n\r\n  const toCdn = (url?: string) => {\r\n    if (!url) return \"/default-hotel.jpg\";\r\n    return url.includes(S3_BASE_URL)\r\n      ? url.replace(S3_BASE_URL, CDN_BASE_URL)\r\n      : url;\r\n  };\r\n\r\n  const location = useLocation();\r\n  const queryParams = new URLSearchParams(location.search);\r\n\r\n  const bookingType = queryParams.get(\"bookingType\") ?? \"fullDay\";\r\n  const checkinTime = queryParams.get(\"time\") ?? \"\";\r\n  const checkinDate = queryParams.get(\"checkinDate\") ?? \"\";\r\n  const checkOutDate = queryParams.get(\"checkOutDate\") ?? \"\";\r\n  const parsedRooms = Number(queryParams.get(\"rooms\"));\r\n  const roomsCountParam =\r\n    Number.isFinite(parsedRooms) && parsedRooms > 0 ? Math.floor(parsedRooms) : 1;\r\n  const adults = queryParams.get(\"adults\") ?? \"1\";\r\n  const children = queryParams.get(\"children\") ?? \"0\";\r\n\r\n  const hotel =\r\n    (location.state && (location.state as any).hotelData) ||\r\n    ((location.state as any) || {});\r\n  hotel.rooms = hotel.rooms || [];\r\n  hotel.propertyDesc = hotel.propertyDesc || hotel.description || \"\";\r\n  hotel.propertyImages = hotel.propertyImages || [];\r\n\r\n  // Inventory state - store by roomId and date\r\n  const [inventoryData, setInventoryData] = useState<{ [key: string]: any[] }>({});\r\n  const [loadingInventory, setLoadingInventory] = useState<boolean>(true);\r\n\r\n  // Ratings state\r\n  const [allRatings, setAllRatings] = useState<any>(null);\r\n  const [hotelRatings, setHotelRatings] = useState<any[]>([]);\r\n  const [averageRating, setAverageRating] = useState<number>(0);\r\n  const [reviewCount, setReviewCount] = useState<number>(0);\r\n  const [loadingRatings, setLoadingRatings] = useState<boolean>(true);\r\n\r\n  // State for checking alternative stays in similar hotels\r\n  const [similarHotels, setSimilarHotels] = useState<any[]>([]);\r\n  const [loadingSimilarHotels, setLoadingSimilarHotels] = useState(false);\r\n  const [hasAlternativeStays, setHasAlternativeStays] = useState(false);\r\n  const [checkingAlternativeStays, setCheckingAlternativeStays] = useState(false);\r\n  const [similarHotelsPrices, setSimilarHotelsPrices] = useState({\r\n    minHourlyPrice: Infinity,\r\n    minOvernightPrice: Infinity,\r\n  });\r\n\r\n  // Meal plans state\r\n  const [mealPlans, setMealPlans] = useState<any[]>([]);\r\n  const [loadingMealPlans, setLoadingMealPlans] = useState<boolean>(true);\r\n  const [selectedMealPlan, setSelectedMealPlan] = useState<string>('Room Only'); // 'Room Only', 'EP', 'CP', 'AP'\r\n\r\n  // Fetch meal plans\r\n  const fetchMealPlans = async () => {\r\n    try {\r\n      setLoadingMealPlans(true);\r\n      const payload = {\r\n        data: { filter: \"\" },\r\n        page: 0,\r\n        pageSize: 1000,\r\n        order: [[\"createdAt\", \"ASC\"]],\r\n      };\r\n\r\n      const response = await getHotelMeals(payload);\r\n      let mealData = response?.data?.data;\r\n\r\n      // Handle different API response structures\r\n      let mealArray: any[] = [];\r\n      if (mealData?.data && Array.isArray(mealData.data)) {\r\n        mealArray = mealData.data;\r\n      } else if (mealData?.rows && Array.isArray(mealData.rows)) {\r\n        mealArray = mealData.rows;\r\n      } else if (mealData?.result && Array.isArray(mealData.result)) {\r\n        mealArray = mealData.result;\r\n      } else if (Array.isArray(mealData)) {\r\n        mealArray = mealData;\r\n      }\r\n\r\n      // Filter meal plans for current hotel\r\n      const hotelMealPlans = mealArray.filter((meal: any) =>\r\n        meal.hotelId === hotel.id || meal.hotelId?.toString() === hotel.id?.toString()\r\n      );\r\n\r\n      setMealPlans(hotelMealPlans);\r\n    } catch (error) {\r\n      console.error(\"Error fetching meal plans:\", error);\r\n      setMealPlans([]);\r\n    } finally {\r\n      setLoadingMealPlans(false);\r\n    }\r\n  };\r\n\r\n  // Get meal plans for a specific room\r\n  const getMealPlansForRoom = (roomId: string) => {\r\n    return mealPlans.filter(meal => meal.roomId === roomId || meal.roomId?.toString() === roomId?.toString());\r\n  };\r\n\r\n  // Update the getAvailableMealPlansForRoom function\r\n  const getAvailableMealPlansForRoom = (room: any) => {\r\n    const roomMealPlans = getMealPlansForRoom(room.id);\r\n    const availablePlans = ['Room Only'];\r\n\r\n    roomMealPlans.forEach(meal => {\r\n      // Try different field names\r\n      const mealType = meal.mealType || meal.mealPlan || meal.meal_type || meal.plan || meal.mealName;\r\n      if (mealType && !availablePlans.includes(mealType)) {\r\n        availablePlans.push(mealType);\r\n      }\r\n    });\r\n\r\n    return availablePlans;\r\n  };\r\n\r\n  // Update the calculateMealPlanPrice function to handle string prices\r\n  const calculateMealPlanPrice = (room: any, mealPlanType: string) => {\r\n    if (mealPlanType === 'Room Only') {\r\n      return 0; // No additional cost for room only\r\n    }\r\n\r\n    const roomMealPlans = getMealPlansForRoom(room.id);\r\n\r\n    // Try to find meal plan by different field names\r\n    const mealPlan = roomMealPlans.find(meal => {\r\n      const mealType = meal.mealType || meal.mealPlan || meal.meal_type || meal.plan || meal.mealName;\r\n      return mealType === mealPlanType;\r\n    });\r\n\r\n    if (!mealPlan) {\r\n      console.warn(`Meal plan ${mealPlanType} not found for room ${room.id}`);\r\n      return 0;\r\n    }\r\n\r\n    // Parse price string to number\r\n    const mealPriceStr = mealPlan.price || mealPlan.rate || mealPlan.cost || mealPlan.mealPrice || '0';\r\n    const mealPrice = parseFloat(mealPriceStr) || 0;\r\n\r\n    const standardOccupancy = room.standardRoomOccupancy || 1;\r\n\r\n    // For overnight bookings\r\n    if (bookingType !== \"hourly\") {\r\n      return mealPrice * standardOccupancy * nights;\r\n    } else {\r\n      // For hourly bookings, apply proportional meal cost\r\n      const hourlyMultiplier = selectedSlot.slot === \"rateFor12Hour\" ? 1 :\r\n        selectedSlot.slot === \"rateFor6Hour\" ? 0.5 : 0.25;\r\n      return mealPrice * standardOccupancy * hourlyMultiplier;\r\n    }\r\n  };\r\n\r\n  // Function to get room price (without meals)\r\n  const getRoomPriceOnly = (room: any, slot: string) => {\r\n    if (!room || !slot) return 0;\r\n    return getPriceForSlot(room, slot);\r\n  };\r\n\r\n  // Add a debug function to check meal plan data\r\n  const debugMealPlans = () => {\r\n    console.log('=== MEAL PLANS DEBUG ===');\r\n    console.log('All meal plans:', mealPlans);\r\n    console.log('Hotel ID:', hotel.id);\r\n\r\n    hotel.rooms.forEach((room: any) => {\r\n      const roomMealPlans = getMealPlansForRoom(room.id);\r\n      console.log(`Room ${room.id} (${room.roomCategory}) meal plans:`, roomMealPlans);\r\n\r\n      roomMealPlans.forEach((meal: any, index: number) => {\r\n        console.log(`  Meal ${index + 1}:`, {\r\n          id: meal.id,\r\n          hotelId: meal.hotelId,\r\n          roomId: meal.roomId,\r\n          mealType: meal.mealType,\r\n          mealPlan: meal.mealPlan,\r\n          meal_type: meal.meal_type,\r\n          plan: meal.plan,\r\n          price: meal.price,\r\n          rate: meal.rate,\r\n          cost: meal.cost,\r\n          allFields: Object.keys(meal)\r\n        });\r\n      });\r\n    });\r\n    console.log('=== END DEBUG ===');\r\n  };\r\n\r\n  // Add a useEffect to debug when meal plans load\r\n  useEffect(() => {\r\n    if (!loadingMealPlans && mealPlans.length > 0) {\r\n      debugMealPlans();\r\n    }\r\n  }, [loadingMealPlans, mealPlans]);\r\n\r\n  // Get meal plan icon\r\n  const getMealPlanIcon = (mealPlanType: string) => {\r\n    const type = mealPlanType?.toUpperCase();\r\n    switch (type) {\r\n      case 'EP':\r\n      case 'EUROPEAN PLAN':\r\n        return <BreakfastDining />;\r\n      case 'CP':\r\n      case 'CONTINENTAL PLAN':\r\n        return <RestaurantMenu />;\r\n      case 'AP':\r\n      case 'AMERICAN PLAN':\r\n      case 'FULL BOARD':\r\n        return <Restaurant />;\r\n      case 'MAP':\r\n      case 'MODIFIED AMERICAN PLAN':\r\n        return <RestaurantMenu />;\r\n      case 'ROOM ONLY':\r\n        return null;\r\n      default:\r\n        // Check if it contains breakfast/lunch/dinner keywords\r\n        if (type?.includes('BREAKFAST')) return <BreakfastDining />;\r\n        if (type?.includes('LUNCH')) return <LunchDining />;\r\n        if (type?.includes('DINNER')) return <DinnerDining />;\r\n        if (type?.includes('MEAL')) return <Restaurant />;\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const getMealPlanDescription = (mealPlanType: string) => {\r\n    const type = mealPlanType?.toUpperCase();\r\n    switch (type) {\r\n      case 'EP':\r\n      case 'EUROPEAN PLAN':\r\n        return 'Room + Breakfast';\r\n      case 'CP':\r\n      case 'CONTINENTAL PLAN':\r\n        return 'Room + Breakfast + Lunch/Dinner';\r\n      case 'AP':\r\n      case 'AMERICAN PLAN':\r\n      case 'FULL BOARD':\r\n        return 'All Meals Included';\r\n      case 'MAP':\r\n      case 'MODIFIED AMERICAN PLAN':\r\n        return 'Room + Breakfast + Dinner';\r\n      case 'ROOM ONLY':\r\n        return 'Room Only';\r\n      default:\r\n        return mealPlanType || 'Room Only';\r\n    }\r\n  };\r\n\r\n  // Fetch inventory for each room for the specific dates\r\n  const fetchInventoryForRooms = async () => {\r\n    try {\r\n      if (!hotel.id || !hotel.rooms || hotel.rooms.length === 0) {\r\n        setLoadingInventory(false);\r\n        return;\r\n      }\r\n\r\n      setLoadingInventory(true);\r\n\r\n      // Create date range\r\n      let startDate = checkinDate;\r\n      let endDate = checkOutDate;\r\n\r\n      if (bookingType === \"hourly\") {\r\n        // For hourly bookings, only check the checkin date\r\n        endDate = checkinDate;\r\n      } else if (!endDate) {\r\n        // For overnight without checkout date, assume 1 night\r\n        endDate = dayjs(checkinDate).add(1, 'day').format('YYYY-MM-DD');\r\n      }\r\n\r\n      const inventoryByRoom: { [key: string]: any[] } = {};\r\n\r\n      // Fetch inventory for each room individually\r\n      for (const room of hotel.rooms) {\r\n        try {\r\n          const payLoad = {\r\n            data: { filter: \"\", roomId: room.id, date: startDate },\r\n            page: 0,\r\n            pageSize: 1000,\r\n            order: [[\"createdAt\", \"ASC\"]],\r\n          }\r\n\r\n          const inventoryResponse = await getAllInventories(payLoad);\r\n          let inventoryData = inventoryResponse?.data?.data;\r\n\r\n          // Handle different API response structures\r\n          let inventoryArray: any[] = [];\r\n          if (inventoryData?.data && Array.isArray(inventoryData.data)) {\r\n            inventoryArray = inventoryData.data;\r\n          } else if (inventoryData?.rows && Array.isArray(inventoryData.rows)) {\r\n            inventoryArray = inventoryData.rows;\r\n          } else if (inventoryData?.result && Array.isArray(inventoryData.result)) {\r\n            inventoryArray = inventoryData.result;\r\n          } else if (Array.isArray(inventoryData)) {\r\n            inventoryArray = inventoryData;\r\n          }\r\n\r\n          inventoryByRoom[room.id] = inventoryArray;\r\n        } catch (error) {\r\n          console.error(`Error fetching inventory for room ${room.id}:`, error);\r\n          inventoryByRoom[room.id] = [];\r\n        }\r\n      }\r\n\r\n      setInventoryData(inventoryByRoom);\r\n    } catch (error) {\r\n      console.error(\"Error fetching inventory:\", error);\r\n      setInventoryData({});\r\n    } finally {\r\n      setLoadingInventory(false);\r\n    }\r\n  };\r\n\r\n  // Check if a specific room is available for the selected dates\r\n  const isRoomAvailable = (room: any) => {\r\n    // First check room status from database\r\n    const roomStatus = room.status?.toLowerCase();\r\n    const isStatusAvailable = roomStatus === \"available\" || roomStatus === \"active\";\r\n    if (!isStatusAvailable) return false;\r\n\r\n    if (bookingType === \"hourly\") {\r\n      // For hourly bookings, check specific checkin date\r\n      return checkRoomAvailabilityForDate(\r\n        room,\r\n        inventoryData[room.id] || [],\r\n        checkinDate,\r\n        bookingType,\r\n        checkinTime\r\n      );\r\n    } else {\r\n      // For overnight bookings, check date range\r\n      return checkRoomAvailabilityForDateRange(\r\n        room,\r\n        inventoryData[room.id] || [],\r\n        checkinDate,\r\n        checkOutDate || dayjs(checkinDate).add(1, 'day').format('YYYY-MM-DD')\r\n      );\r\n    }\r\n  };\r\n\r\n  // Check if a specific slot is available for a room\r\n  const isSlotAvailable = (room: any, slot: string) => {\r\n    if (!room || !slot || !checkinDate) return false;\r\n\r\n    // First check room status\r\n    const roomStatus = room.status?.toLowerCase();\r\n    const isStatusAvailable = roomStatus === \"available\" || roomStatus === \"active\";\r\n    if (!isStatusAvailable) return false;\r\n\r\n    const roomInventory = inventoryData[room.id] || [];\r\n    const checkDay = dayjs(checkinDate).format('YYYY-MM-DD');\r\n\r\n    // Find inventory for this specific date\r\n    const dayInventory = roomInventory.find(inv =>\r\n      dayjs(inv.date).format('YYYY-MM-DD') === checkDay\r\n    );\r\n\r\n    // If no inventory record, slot is available\r\n    if (!dayInventory) return true;\r\n\r\n    // Check if room is blocked\r\n    if (dayInventory.isBlocked) return false;\r\n\r\n    // Check specific slot availability\r\n    switch (slot) {\r\n      case 'rateFor1Night':\r\n        return dayInventory.overnightAvailable > dayInventory.overnightBooked;\r\n      case 'rateFor3Hour':\r\n        return dayInventory.threeHourAvailable > dayInventory.threeHourBooked;\r\n      case 'rateFor6Hour':\r\n        return dayInventory.sixHourAvailable > dayInventory.sixHourBooked;\r\n      case 'rateFor12Hour':\r\n        return dayInventory.twelveHourAvailable > dayInventory.twelveHourBooked;\r\n      default:\r\n        return true;\r\n    }\r\n  };\r\n\r\n  // Get price for a specific slot, considering inventory rates\r\n  const getPriceForSlot = (room: any, slot: string) => {\r\n    if (!room || !slot || !checkinDate) return room[slot] || 0;\r\n\r\n    return getInventoryPriceForDate(\r\n      room,\r\n      inventoryData[room.id] || [],\r\n      checkinDate,\r\n      slot\r\n    );\r\n  };\r\n\r\n  // Get total price including selected meal plan\r\n  const getTotalPriceWithMeals = (room: any, slot: string, mealPlanType: string) => {\r\n    const roomPrice = getPriceForSlot(room, slot);\r\n    const mealPrice = calculateMealPlanPrice(room, mealPlanType);\r\n    return roomPrice + mealPrice;\r\n  };\r\n\r\n  // Get inventory status for a room\r\n  const getRoomInventoryStatus = (room: any) => {\r\n    // First check room status from database\r\n    const roomStatus = room.status?.toLowerCase();\r\n    const isStatusAvailable = roomStatus === \"available\" || roomStatus === \"active\";\r\n\r\n    if (!isStatusAvailable) {\r\n      return {\r\n        isAvailable: false,\r\n        status: 'Unavailable',\r\n        icon: <Block />,\r\n        reason: 'Room is currently unavailable'\r\n      };\r\n    }\r\n\r\n    const roomInventory = inventoryData[room.id] || [];\r\n\r\n    if (roomInventory.length === 0) {\r\n      return {\r\n        isAvailable: true,\r\n        status: 'Available',\r\n        icon: null,\r\n        reason: 'Available for booking'\r\n      };\r\n    }\r\n\r\n    // For the specific checkin date\r\n    const checkDay = checkinDate ? dayjs(checkinDate).format('YYYY-MM-DD') : '';\r\n    const dayInventory = checkDay ? roomInventory.find(inv =>\r\n      dayjs(inv.date).format('YYYY-MM-DD') === checkDay\r\n    ) : null;\r\n\r\n    if (dayInventory) {\r\n      if (dayInventory.isBlocked) {\r\n        return {\r\n          isAvailable: false,\r\n          status: 'Blocked',\r\n          icon: <EventBusy />,\r\n          reason: 'Room is blocked for selected date'\r\n        };\r\n      }\r\n\r\n      // Check specific slot availability based on booking type\r\n      if (bookingType === \"hourly\") {\r\n        const hasHourlyAvailability =\r\n          dayInventory.threeHourAvailable > dayInventory.threeHourBooked ||\r\n          dayInventory.sixHourAvailable > dayInventory.sixHourBooked ||\r\n          dayInventory.twelveHourAvailable > dayInventory.twelveHourBooked;\r\n\r\n        if (!hasHourlyAvailability) {\r\n          return {\r\n            isAvailable: false,\r\n            status: 'Sold Out',\r\n            icon: <Block />,\r\n            reason: 'No hourly slots available for selected date'\r\n          };\r\n        }\r\n      } else {\r\n        if (dayInventory.overnightAvailable <= dayInventory.overnightBooked) {\r\n          return {\r\n            isAvailable: false,\r\n            status: 'Sold Out',\r\n            icon: <Block />,\r\n            reason: 'No overnight availability for selected date'\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      isAvailable: true,\r\n      status: 'Available',\r\n      icon: null,\r\n      reason: 'Available for booking'\r\n    };\r\n  };\r\n\r\n  // Filter rooms\r\n  const availableRooms = hotel.rooms.filter((room: any) => isRoomAvailable(room));\r\n  const unavailableRooms = hotel.rooms.filter((room: any) => !isRoomAvailable(room));\r\n\r\n  // Function to fetch all ratings\r\n  const fetchAllRatings = async () => {\r\n    try {\r\n      const payLoad = {\r\n        data: { filter: \"\" },\r\n        page: 0,\r\n        pageSize: 1000,\r\n        order: [[\"createdAt\", \"ASC\"]],\r\n      }\r\n      const ratingsResponse = await getAllRatings(payLoad);\r\n      let ratingsData = ratingsResponse?.data?.data;\r\n\r\n      // Handle different API response structures\r\n      if (ratingsData?.data && Array.isArray(ratingsData.data)) {\r\n        return ratingsData.data;\r\n      }\r\n      if (ratingsData?.rows && Array.isArray(ratingsData.rows)) {\r\n        return ratingsData.rows;\r\n      }\r\n      if (ratingsData?.result && Array.isArray(ratingsData.result)) {\r\n        return ratingsData.result;\r\n      }\r\n      if (Array.isArray(ratingsData)) {\r\n        return ratingsData;\r\n      }\r\n\r\n      return [];\r\n    } catch (error) {\r\n      console.error(\"Error fetching ratings:\", error);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  // Fetch ratings, inventory, and meal plans on component mount\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        setLoadingRatings(true);\r\n        const ratingsData = await fetchAllRatings();\r\n        setAllRatings(ratingsData);\r\n\r\n        // Get ratings for this specific hotel\r\n        const hotelId = hotel.id;\r\n        const ratingsForHotel = getRatingsForHotel(ratingsData, hotelId);\r\n        setHotelRatings(ratingsForHotel);\r\n\r\n        // Calculate average rating\r\n        const avgRating = calculateAverageRating(ratingsForHotel);\r\n        setAverageRating(avgRating);\r\n        setReviewCount(ratingsForHotel.length);\r\n      } catch (error) {\r\n        console.error(\"Error loading ratings:\", error);\r\n        setAverageRating(hotel?.ratings?.rating || 0);\r\n        setReviewCount(hotel?.reviews || 0);\r\n      } finally {\r\n        setLoadingRatings(false);\r\n      }\r\n    };\r\n\r\n    if (hotel.id) {\r\n      fetchData();\r\n      fetchInventoryForRooms();\r\n      fetchMealPlans();\r\n    } else {\r\n      // Use hotel data if ratings fetch fails\r\n      setAverageRating(hotel?.ratings?.rating || 0);\r\n      setReviewCount(hotel?.reviews || 0);\r\n      setLoadingRatings(false);\r\n    }\r\n  }, [hotel.id, checkinDate, checkOutDate, bookingType]);\r\n\r\n  // Fetch similar hotels and check for alternative stays\r\n  useEffect(() => {\r\n    const fetchSimilarHotelsAndCheckAlternative = async () => {\r\n      if (!hotel.propertyName || !hotel.id) return;\r\n\r\n      try {\r\n        setLoadingSimilarHotels(true);\r\n        setCheckingAlternativeStays(true);\r\n\r\n        // Fetch all hotels\r\n        const payload = {\r\n          data: {\r\n            filter: \"\",\r\n            status: \"Approved\"\r\n          },\r\n          page: 0,\r\n          pageSize: 1000,\r\n          order: [[\"createdAt\", \"ASC\"]],\r\n        };\r\n\r\n        const response = await getAllHotels(payload);\r\n        const allHotels = response?.data?.data?.rows || [];\r\n\r\n        // Filter hotels with similar name (case-insensitive partial match)\r\n        const currentName = hotel.propertyName?.toLowerCase() || '';\r\n        const similar = allHotels.filter((h: any) => {\r\n          // Skip current hotel\r\n          if (h.id === hotel.id) return false;\r\n\r\n          const otherName = h.propertyName?.toLowerCase() || '';\r\n\r\n          // Check for partial match\r\n          const words = currentName.split(' ').filter((w: string) => w.length > 2);\r\n          const hasMatchingWord = words.some((word: string) =>\r\n            otherName.includes(word)\r\n          );\r\n\r\n          return hasMatchingWord || otherName.includes(currentName) || currentName.includes(otherName);\r\n        });\r\n\r\n        // Fetch price information for similar hotels\r\n        const similarHotelsWithPrices = [];\r\n        let alternativeFound = false;\r\n        let minHourlyPrice = Infinity;\r\n        let minOvernightPrice = Infinity;\r\n\r\n        // Check each similar hotel for alternative stays (limit to 3 for performance)\r\n        for (const similarHotel of similar.slice(0, 3)) {\r\n          try {\r\n            const belongsToPayload = {\r\n              id: similarHotel.id,\r\n              secondTable: \"Room\",\r\n            };\r\n\r\n            const hotelRes = await getMyAllHotelswithBelongsTo(belongsToPayload);\r\n            const hotelWithRooms = hotelRes?.data || null;\r\n\r\n            if (hotelWithRooms && Array.isArray(hotelWithRooms.data) && hotelWithRooms.data.length) {\r\n              const rooms = hotelWithRooms.data[0]?.rooms || [];\r\n\r\n              // Check for hourly rates\r\n              let hotelHasHourly = false;\r\n              let hotelMinHourlyPrice = Infinity;\r\n\r\n              // Check for overnight rates\r\n              let hotelHasOvernight = false;\r\n              let hotelMinOvernightPrice = Infinity;\r\n\r\n              rooms.forEach((room: any) => {\r\n                // Check hourly rates\r\n                if (room.rateFor3Hour > 0) {\r\n                  hotelHasHourly = true;\r\n                  hotelMinHourlyPrice = Math.min(hotelMinHourlyPrice, room.rateFor3Hour);\r\n                }\r\n                if (room.rateFor6Hour > 0) {\r\n                  hotelHasHourly = true;\r\n                  hotelMinHourlyPrice = Math.min(hotelMinHourlyPrice, room.rateFor6Hour);\r\n                }\r\n                if (room.rateFor12Hour > 0) {\r\n                  hotelHasHourly = true;\r\n                  hotelMinHourlyPrice = Math.min(hotelMinHourlyPrice, room.rateFor12Hour);\r\n                }\r\n\r\n                // Check overnight rates\r\n                if (room.rateFor1Night > 0) {\r\n                  hotelHasOvernight = true;\r\n                  hotelMinOvernightPrice = Math.min(hotelMinOvernightPrice, room.rateFor1Night);\r\n                }\r\n              });\r\n\r\n              // Determine if this hotel offers the alternative booking type\r\n              const currentIsHourly = bookingType === \"hourly\";\r\n              const hasAlternative = currentIsHourly ? hotelHasOvernight : hotelHasHourly;\r\n\r\n              if (hasAlternative) {\r\n                alternativeFound = true;\r\n\r\n                // Update min prices\r\n                if (currentIsHourly && hotelHasOvernight) {\r\n                  minOvernightPrice = Math.min(minOvernightPrice, hotelMinOvernightPrice);\r\n                } else if (!currentIsHourly && hotelHasHourly) {\r\n                  minHourlyPrice = Math.min(minHourlyPrice, hotelMinHourlyPrice);\r\n                }\r\n              }\r\n\r\n              similarHotelsWithPrices.push({\r\n                ...similarHotel,\r\n                hasHourly: hotelHasHourly,\r\n                hasOvernight: hotelHasOvernight,\r\n                minHourlyPrice: hotelMinHourlyPrice !== Infinity ? hotelMinHourlyPrice : null,\r\n                minOvernightPrice: hotelMinOvernightPrice !== Infinity ? hotelMinOvernightPrice : null\r\n              });\r\n            }\r\n          } catch (error) {\r\n            console.error(`Error checking hotel ${similarHotel.id}:`, error);\r\n            // Continue with next hotel\r\n            similarHotelsWithPrices.push({\r\n              ...similarHotel,\r\n              hasHourly: false,\r\n              hasOvernight: false,\r\n              minHourlyPrice: null,\r\n              minOvernightPrice: null\r\n            });\r\n          }\r\n        }\r\n\r\n        setSimilarHotels(similarHotelsWithPrices);\r\n        setHasAlternativeStays(alternativeFound);\r\n        setSimilarHotelsPrices({\r\n          minHourlyPrice: minHourlyPrice !== Infinity ? minHourlyPrice : 0,\r\n          minOvernightPrice: minOvernightPrice !== Infinity ? minOvernightPrice : 0\r\n        });\r\n\r\n      } catch (error) {\r\n        console.error(\"Error fetching similar hotels:\", error);\r\n      } finally {\r\n        setLoadingSimilarHotels(false);\r\n        setCheckingAlternativeStays(false);\r\n      }\r\n    };\r\n\r\n    fetchSimilarHotelsAndCheckAlternative();\r\n  }, [hotel.id, hotel.propertyName, bookingType]);\r\n\r\n  const computeNights = () => {\r\n    if ((bookingType || \"\").toLowerCase() === \"hourly\") return 1;\r\n\r\n    if (checkinDate && checkOutDate) {\r\n      const inDate = dayjs(checkinDate);\r\n      const outDate = dayjs(checkOutDate);\r\n      if (inDate.isValid() && outDate.isValid()) {\r\n        const diff = outDate.diff(inDate, \"day\");\r\n        return Math.max(1, diff);\r\n      }\r\n    }\r\n\r\n    const urlNights = Number(queryParams.get(\"nights\"));\r\n    return Math.max(\r\n      1,\r\n      Number.isFinite(urlNights) && urlNights > 0 ? Math.floor(urlNights) : 1\r\n    );\r\n  };\r\n\r\n  const nights = computeNights();\r\n\r\n  const [selectedRoom, setSelectedRoom] = useState<any>(availableRooms[0] ?? null);\r\n  const [selectedSlot, setSelectedSlot] = useState<{\r\n    roomId: number | null;\r\n    slot: string | null;\r\n  }>({\r\n    roomId: availableRooms?.[0]?.id ?? null,\r\n    slot: bookingType === \"hourly\" ? \"rateFor3Hour\" : \"rateFor1Night\",\r\n  });\r\n\r\n  // Meal plan filter state\r\n  const [mealPlanFilter, setMealPlanFilter] = useState<string>('');\r\n\r\n  // --- New State for Mapbox ---\r\n  const [mapViewport, setMapViewport] = useState({\r\n    latitude: 20.5937, // Default to India center\r\n    longitude: 78.9629,\r\n    zoom: 12\r\n  });\r\n  const [mapLoaded, setMapLoaded] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!selectedRoom && availableRooms && availableRooms.length > 0) {\r\n      setSelectedRoom(availableRooms[0]);\r\n      setSelectedSlot({\r\n        roomId: availableRooms[0].id,\r\n        slot: bookingType === \"hourly\" ? \"rateFor3Hour\" : \"rateFor1Night\",\r\n      });\r\n    }\r\n  }, [availableRooms]);\r\n\r\n  const handleSlotSelection = (roomId: number, slot: string) => {\r\n    const room = availableRooms.find((r: any) => r.id === roomId);\r\n    if (room) setSelectedRoom(room);\r\n    setSelectedSlot({ roomId, slot });\r\n  };\r\n\r\n  const [showRoomDetails, setShowRoomDetails] = useState(false);\r\n  const [expanded, setExpanded] = useState(false);\r\n  const maxLength = 150;\r\n\r\n  const [isSticky, setIsSticky] = useState(false);\r\n  const [stopPosition, setStopPosition] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      const boxA = document.getElementById(\"boxA\");\r\n      const boxB = document.getElementById(\"boxB\");\r\n      const boxC = document.getElementById(\"boxC\");\r\n\r\n      if (!boxA || !boxB || !boxC) return;\r\n\r\n      const boxBRect = boxB.getBoundingClientRect();\r\n      const boxARect = boxA.getBoundingClientRect();\r\n\r\n      if (boxBRect.bottom <= window.innerHeight - 400) {\r\n        setIsSticky(true);\r\n      } else {\r\n        setIsSticky(false);\r\n      }\r\n\r\n      setStopPosition(boxARect.bottom + window.innerHeight);\r\n    };\r\n\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n    handleScroll();\r\n\r\n    return () => window.removeEventListener(\"scroll\", handleScroll);\r\n  }, []);\r\n\r\n  const [position, setPosition] = useState<\"relative\" | \"unset\">(\"relative\");\r\n  const boxRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    const observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        setPosition(entry.isIntersecting ? \"relative\" : \"unset\");\r\n      },\r\n      { threshold: 0.1 }\r\n    );\r\n\r\n    if (boxRef.current) {\r\n      observer.observe(boxRef.current);\r\n    }\r\n\r\n    return () => {\r\n      if (boxRef.current) {\r\n        observer.unobserve(boxRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const [value, setValue] = useState(0);\r\n  const [showDetails, setShowDetails] = useState(false);\r\n  const isMobile = useMediaQuery(\"(max-width: 900px)\");\r\n\r\n  const navigate = useNavigate();\r\n\r\n  // Function to geocode address using Mapbox\r\n  const geocodeAddress = useCallback(async (address: string) => {\r\n    try {\r\n      const response = await fetch(\r\n        `https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(address)}.json?access_token=${MAPBOX_ACCESS_TOKEN}`\r\n      );\r\n      const data = await response.json();\r\n\r\n      if (data.features && data.features.length > 0) {\r\n        const [lng, lat] = data.features[0].center;\r\n        setMapViewport(prev => ({\r\n          ...prev,\r\n          latitude: lat,\r\n          longitude: lng\r\n        }));\r\n        setMapLoaded(true);\r\n      }\r\n    } catch (error) {\r\n      console.error('Geocoding failed:', error);\r\n      setMapLoaded(true); // Map still loads even if geocoding fails\r\n    }\r\n  }, [MAPBOX_ACCESS_TOKEN]);\r\n\r\n  // Geocode on component mount or when address changes\r\n  useEffect(() => {\r\n    if (hotel.address) {\r\n      geocodeAddress(hotel.address);\r\n    }\r\n  }, [hotel.address, geocodeAddress]);\r\n\r\n  // Function to render sold out overlay with inventory info\r\n  const renderSoldOutOverlay = (room: any) => {\r\n    const inventoryStatus = getRoomInventoryStatus(room);\r\n\r\n    return (\r\n      <Box\r\n        sx={{\r\n          position: 'absolute',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          backgroundColor: 'rgba(0, 0, 0, 0.7)',\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          justifyContent: 'center',\r\n          alignItems: 'center',\r\n          zIndex: 2,\r\n          borderRadius: '12px',\r\n          color: 'white',\r\n          padding: 2,\r\n        }}\r\n      >\r\n        <Block sx={{ fontSize: 48, mb: 1, color: '#ff4444' }} />\r\n        <Typography variant=\"h6\" sx={{ fontWeight: 'bold', color: '#ff4444' }}>\r\n          {inventoryStatus.status.toUpperCase()}\r\n        </Typography>\r\n        <Typography variant=\"body2\" sx={{ mt: 1, textAlign: 'center' }}>\r\n          {inventoryStatus.reason}\r\n        </Typography>\r\n      </Box>\r\n    );\r\n  };\r\n\r\n  // Function to get price text based on booking type\r\n  const getPriceText = () => {\r\n    if (bookingType === \"hourly\") {\r\n      const minPrice = similarHotelsPrices.minOvernightPrice;\r\n      return minPrice > 0 ? `Similar hotels in Bhubaneswar offer overnight stays starting from ${minPrice} per night` : \"Similar hotels in Bhubaneswar offer overnight stays\";\r\n    } else {\r\n      const minPrice = similarHotelsPrices.minHourlyPrice;\r\n      return minPrice > 0 ? `Similar hotels in Bhubaneswar offer hourly stays starting from ${minPrice} for 3 hours` : \"Similar hotels in Bhubaneswar offer hourly stays\";\r\n    }\r\n  };\r\n\r\n  // Get filtered rooms based on meal plan filter\r\n  const getFilteredRooms = () => {\r\n    if (!mealPlanFilter || mealPlanFilter === 'All Meal Plans') {\r\n      return availableRooms;\r\n    }\r\n\r\n    return availableRooms.filter((room: any) => {\r\n      const roomMealPlans = getAvailableMealPlansForRoom(room);\r\n      return roomMealPlans.includes(mealPlanFilter);\r\n    });\r\n  };\r\n\r\n  // Get count of filtered rooms\r\n  const getFilteredRoomsCount = () => {\r\n    return getFilteredRooms().length;\r\n  };\r\n\r\n  // Per-unit price breakdown (no coupon logic)\r\n  const unitBasePrice =\r\n    selectedSlot.roomId && selectedSlot.slot && selectedRoom\r\n      ? getTotalPriceWithMeals(selectedRoom, selectedSlot.slot, selectedMealPlan)\r\n      : 0;\r\n  const unitBreakdown = calculatePriceBreakdown(unitBasePrice);\r\n\r\n  // Get room-only price for breakdown display\r\n  const unitRoomOnlyPrice = selectedSlot.roomId && selectedSlot.slot && selectedRoom\r\n    ? getRoomPriceOnly(selectedRoom, selectedSlot.slot)\r\n    : 0;\r\n  const unitRoomOnlyBreakdown = calculatePriceBreakdown(unitRoomOnlyPrice);\r\n\r\n  // Get meal price separately\r\n  const unitMealPrice = selectedRoom ? calculateMealPlanPrice(selectedRoom, selectedMealPlan) : 0;\r\n\r\n  // multipliers\r\n  const roomsMultiplier = roomsCountParam;\r\n  const perStayMultiplier =\r\n    (bookingType || \"\").toLowerCase() === \"hourly\" ? 1 : nights;\r\n  const totalMultiplier = roomsMultiplier * perStayMultiplier;\r\n\r\n  // totals (apply multiplier)\r\n  const totalBreakdown = {\r\n    basePrice: unitBreakdown.basePrice * totalMultiplier,\r\n    platformFee: unitBreakdown.platformFee * totalMultiplier,\r\n    gstOnBase: unitBreakdown.gstOnBase * totalMultiplier,\r\n    gstOnPlatform: unitBreakdown.gstOnPlatform * totalMultiplier,\r\n    gstTotal: unitBreakdown.gstTotal * totalMultiplier,\r\n    gatewayFee: unitBreakdown.gatewayFee * totalMultiplier,\r\n    finalPrice: unitBreakdown.finalPrice * totalMultiplier,\r\n  };\r\n\r\n  // Room-only totals for comparison\r\n  const totalRoomOnlyBasePrice = unitRoomOnlyBreakdown.basePrice * totalMultiplier;\r\n  const totalRoomOnlyPlatformFee = unitRoomOnlyBreakdown.platformFee * totalMultiplier;\r\n  const totalRoomOnlyCombined = totalRoomOnlyBasePrice + totalRoomOnlyPlatformFee;\r\n\r\n  // display values (TOTALS)\r\n  const displayBase = totalBreakdown.basePrice;\r\n  const displayBasePlus700 = displayBase + 700;\r\n  const displayCombinedBasePlatform =\r\n    totalBreakdown.basePrice + totalBreakdown.platformFee;\r\n  const displayGstTotal = totalBreakdown.gstTotal;\r\n\r\n  const hotelSchema = {\r\n    \"@context\": \"https://schema.org\",\r\n    \"@type\": \"Hotel\",\r\n    \"@id\": `https://huts4u.com/hotel/${hotel.id}`,\r\n    \"name\": hotel.propertyName,\r\n    \"url\": `https://huts4u.com/hotel/${hotel.id}`,\r\n    \"image\": (hotel.propertyImages || []).map((img: string) => toCdn(img)),\r\n    \"description\": hotel.propertyDesc,\r\n    \"address\": {\r\n      \"@type\": \"PostalAddress\",\r\n      \"streetAddress\": hotel.address,\r\n      \"addressLocality\": \"Bhubaneswar\",\r\n      \"addressRegion\": \"Odisha\",\r\n      \"addressCountry\": \"IN\"\r\n    },\r\n    \"geo\": mapViewport?.latitude && mapViewport?.longitude\r\n      ? {\r\n        \"@type\": \"GeoCoordinates\",\r\n        \"latitude\": mapViewport.latitude,\r\n        \"longitude\": mapViewport.longitude\r\n      }\r\n      : undefined,\r\n    \"amenityFeature\": Array.from(\r\n      new Set(\r\n        hotel?.rooms?.flatMap((room: any) => room.amenities || []) || []\r\n      )\r\n    ).map((amenity: any) => ({\r\n      \"@type\": \"LocationFeatureSpecification\",\r\n      \"name\": amenity,\r\n      \"value\": true\r\n    })),\r\n    ...(reviewCount > 0 && {\r\n      \"aggregateRating\": {\r\n        \"@type\": \"AggregateRating\",\r\n        \"ratingValue\": averageRating,\r\n        \"reviewCount\": reviewCount,\r\n        \"bestRating\": \"5\",\r\n        \"worstRating\": \"1\"\r\n      }\r\n    }),\r\n    \"makesOffer\": {\r\n      \"@type\": \"Offer\",\r\n      \"priceCurrency\": \"INR\",\r\n      \"price\": Math.round(displayCombinedBasePlatform),\r\n      \"availability\": availableRooms.length > 0\r\n        ? \"https://schema.org/InStock\"\r\n        : \"https://schema.org/OutOfStock\",\r\n      \"url\": window.location.href\r\n    }\r\n  };\r\n\r\n  // Function to handle Book Now click\r\n  const handleBookNow = () => {\r\n    if (availableRooms.length === 0) return;\r\n\r\n    if (selectedRoom && selectedSlot.slot) {\r\n      const isAvailable = isSlotAvailable(selectedRoom, selectedSlot.slot);\r\n      if (!isAvailable) {\r\n        alert('This room is no longer available. Please select another room or slot.');\r\n        return;\r\n      }\r\n    }\r\n\r\n    const queryString = new URLSearchParams(queryParams).toString();\r\n    const mealPrice = calculateMealPlanPrice(selectedRoom, selectedMealPlan);\r\n    const roomPrice = selectedSlot.slot ? getPriceForSlot(selectedRoom, selectedSlot.slot) : 0;\r\n    const totalBasePrice = roomPrice + mealPrice;\r\n\r\n    navigate(\r\n      `/booking-summary/${hotel.id}${queryString ? `?${queryString}` : \"\"}`,\r\n      {\r\n        state: {\r\n          hotelData: hotel,\r\n          selectedRoom: selectedRoom,\r\n          selectedSlot: selectedSlot,\r\n          selectedMealPlan: selectedMealPlan,\r\n          pricingDetails: {\r\n            rooms: roomsCountParam,\r\n            nights: perStayMultiplier,\r\n            basePrice: totalBasePrice * totalMultiplier,\r\n            platformFee: totalBreakdown.platformFee,\r\n            gstOnBase: totalBreakdown.gstOnBase,\r\n            gstOnPlatform: totalBreakdown.gstOnPlatform,\r\n            gstTotal: totalBreakdown.gstTotal,\r\n            gatewayFee: totalBreakdown.gatewayFee,\r\n            totalPrice: totalBreakdown.finalPrice,\r\n            mealPlan: selectedMealPlan,\r\n            mealPlanDescription: getMealPlanDescription(selectedMealPlan),\r\n            mealPlanPrice: mealPrice * totalMultiplier,\r\n            roomPrice: roomPrice * totalMultiplier,\r\n            addOn: selectedMealPlan !== 'Room Only' ? `${selectedMealPlan} (Meal Plan)` : 'No Add-ons',\r\n          },\r\n          inventoryData: inventoryData[selectedRoom?.id] || [],\r\n        },\r\n      }\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Box\r\n      id=\"boxA\"\r\n      sx={{\r\n        background: color.thirdColor,\r\n        px: { xs: 2, md: 4 },\r\n        py: 1,\r\n        position: \"relative\",\r\n      }}\r\n    >\r\n      <Helmet>\r\n        <title>{hotel.propertyName} in Bhubaneswar {bookingType === \"hourly\" ? \"Hourly\" : \"Overnight\"} Stay in Bhubaneswar by Huts4U</title>\r\n        <meta\r\n          name=\"description\"\r\n          content={`Book ${hotel.propertyName} in Bhubaneswar for safe and affordable ${bookingType === \"hourly\" ? \"hourly\" : \"overnight\"} stays with Huts4U. Perfect for short breaks, layovers, and flexible check-ins.`}\r\n        />\r\n        {/* Open Graph tags for social media */}\r\n        <meta property=\"og:title\" content={`${hotel.propertyName} in Bhubaneswar ${bookingType === \"hourly\" ? \"Hourly\" : \"Overnight\"} Stay by Huts4U`} />\r\n        <meta property=\"og:description\" content={`Book ${hotel.propertyName} for safe and affordable ${bookingType === \"hourly\" ? \"hourly\" : \"overnight\"} stays.`} />\r\n        {hotel.propertyImages && hotel.propertyImages[0] && (\r\n          <meta property=\"og:image\" content={toCdn(hotel.propertyImages[0])} />\r\n        )}\r\n        <meta property=\"og:type\" content=\"website\" />\r\n        <meta property=\"og:url\" content={window.location.href} />\r\n\r\n        {/* Twitter Card tags */}\r\n        <meta name=\"twitter:card\" content=\"summary_large_image\" />\r\n        <meta name=\"twitter:title\" content={`${hotel.propertyName} - ${bookingType === \"hourly\" ? \"Hourly\" : \"Overnight\"} Stay in Bhubaneswar`} />\r\n        <meta name=\"twitter:description\" content={`Book safe and affordable ${bookingType === \"hourly\" ? \"hourly\" : \"overnight\"} stays at ${hotel.propertyName} with Huts4U.`} />\r\n        {hotel.propertyImages && hotel.propertyImages[0] && (\r\n          <meta name=\"twitter:image\" content={toCdn(hotel.propertyImages[0])} />\r\n        )}\r\n\r\n        {/* Additional meta tags */}\r\n        <meta name=\"keywords\" content={`${hotel.propertyName}, Bhubaneswar hotel, ${bookingType === \"hourly\" ? \"hourly hotel\" : \"overnight stay\"}, short stay, affordable hotel, Huts4U`} />\r\n        <script type=\"application/ld+json\">\r\n          {JSON.stringify(hotelSchema)}\r\n        </script>\r\n      </Helmet>\r\n\r\n      <Box\r\n        sx={{\r\n          px: { xs: 0, md: 2 },\r\n        }}\r\n      >\r\n        <Box\r\n          ref={boxRef}\r\n          id=\"boxB\"\r\n          sx={{\r\n            ...BoxStyle,\r\n            px: { xs: 2, md: 3 },\r\n            py: 3,\r\n            position,\r\n          }}\r\n        >\r\n          {/* HEADER + IMAGES + HIGHLIGHTS */}\r\n          {/* HEADER RATING SECTION - Remove rating text when no reviews */}\r\n          <Box\r\n            sx={{\r\n              position: \"absolute\",\r\n              top: 24,\r\n              right: 24,\r\n              display: { xs: \"none\", md: \"flex\" },\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\",\r\n              gap: \"6px\",\r\n            }}\r\n          >\r\n            {/* Only show rating text if there are reviews */}\r\n            {reviewCount > 0 && (\r\n              <Typography\r\n                variant=\"body2\"\r\n                fontWeight={600}\r\n                color={color.firstColor}\r\n                lineHeight={1}\r\n                sx={{\r\n                  fontSize: { xs: \"12px\", md: \"14px\" },\r\n                  textAlign: \"center\",\r\n                }}\r\n              >\r\n                {/* Removed getRatingText - Only show count */}\r\n                <span style={{ fontSize: \"10px\" }}>\r\n                  ({reviewCount} review{reviewCount !== 1 ? 's' : ''})\r\n                </span>\r\n              </Typography>\r\n            )}\r\n\r\n            <Typography\r\n              variant=\"body2\"\r\n              fontWeight={600}\r\n              color=\"#fff\"\r\n              sx={{\r\n                background: reviewCount > 0 ? getRatingColor(averageRating) : '#bdbdbd',\r\n                px: 1,\r\n                borderRadius: \"4px\",\r\n                fontSize: { xs: \"14px\", md: \"16px\" },\r\n                boxShadow: \"0px -10px 10px rgba(0, 0, 0, 0.12) inset\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"4px\",\r\n              }}\r\n            >\r\n              {averageRating > 0 ? averageRating.toFixed(1) : \"N/A\"} <StarRounded />\r\n            </Typography>\r\n          </Box>\r\n\r\n          <Typography\r\n            variant=\"h5\"\r\n            sx={{\r\n              fontSize: { xs: \"18px\", md: \"24px\" },\r\n              fontWeight: 600,\r\n              color: color.firstColor,\r\n            }}\r\n          >\r\n            {hotel.propertyName}\r\n          </Typography>\r\n          <Typography\r\n            color=\"textSecondary\"\r\n            sx={{\r\n              fontFamily: \"CustomFontSB\",\r\n              fontSize: { xs: \"10px\", md: \"14px\" },\r\n              color: color.paperColor,\r\n              mt: { xs: 1, md: 0 },\r\n            }}\r\n          >\r\n            {hotel.address}\r\n          </Typography>\r\n\r\n          <Box py={2} sx={{ pr: { xs: 0, md: 2 }, mx: -1 }}>\r\n            <ImageGrid propertyImages={hotel.propertyImages} />\r\n          </Box>\r\n\r\n          <Box\r\n            sx={{\r\n              display: { xs: \"flex\", md: \"none\" },\r\n            }}\r\n          >\r\n            <Typography\r\n              variant=\"body2\"\r\n              fontWeight={600}\r\n              color={color.thirdColor}\r\n              sx={{\r\n                background: color.background,\r\n                px: 1,\r\n                borderRadius: \"4px\",\r\n                fontSize: \"14px\",\r\n                mb: 2,\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n                alignItems: \"center\",\r\n                gap: \"6px\",\r\n              }}\r\n            >\r\n              <Star /> {averageRating > 0 ? averageRating.toFixed(1) : \"N/A\"} (\r\n              {reviewCount} review{reviewCount !== 1 ? 's' : ''})\r\n            </Typography>\r\n          </Box>\r\n\r\n          <Box sx={{ maxWidth: { xs: \"100%\", md: \"calc(100% - 450px)\" } }}>\r\n            {/* DESCRIPTION */}\r\n            <Typography\r\n              color=\"textSecondary\"\r\n              sx={{\r\n                fontFamily: \"CustomFontB\",\r\n                fontSize: \"16px\",\r\n                color: color.paperColor,\r\n              }}\r\n            >\r\n              Property Description\r\n            </Typography>\r\n            <Typography\r\n              color=\"textSecondary\"\r\n              sx={{\r\n                fontSize: \"14px\",\r\n                mt: 1,\r\n              }}\r\n            >\r\n              {expanded || (hotel.propertyDesc || \"\").length <= maxLength\r\n                ? hotel.propertyDesc\r\n                : `${hotel.propertyDesc.substring(0, maxLength)}...`}\r\n              {(hotel.propertyDesc || \"\").length > maxLength && (\r\n                <Button\r\n                  sx={{\r\n                    textTransform: \"none\",\r\n                    fontSize: \"14px\",\r\n                    p: 0,\r\n                    ml: 1,\r\n                    minWidth: 0,\r\n                  }}\r\n                  onClick={() => setExpanded(!expanded)}\r\n                >\r\n                  {expanded ? \"Show less\" : \"More\"}\r\n                </Button>\r\n              )}\r\n            </Typography>\r\n            {/* ADDED: Check-in & Check-out Times above Highlights */}\r\n            {(hotel?.rooms?.[0]?.checkInTime || hotel?.rooms?.[0]?.checkOutTime) && (\r\n              <Box\r\n                sx={{\r\n                  display: \"flex\",\r\n                  gap: 3,\r\n                  mt: 2,\r\n                  mb: 1,\r\n                  flexWrap: \"wrap\",\r\n                }}\r\n              >\r\n                {hotel?.rooms?.[0]?.checkInTime && (\r\n                  <Box\r\n                    sx={{\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      gap: 0.5,\r\n                    }}\r\n                  >\r\n                    <Typography\r\n                      sx={{\r\n                        fontSize: { xs: \"13px\", md: \"14px\" },\r\n                        color: color.paperColor,\r\n                        fontWeight: 600,\r\n                      }}\r\n                    >\r\n                      Check-in:\r\n                    </Typography>\r\n                    <Typography\r\n                      sx={{\r\n                        fontSize: { xs: \"13px\", md: \"14px\" },\r\n                        color: color.firstColor,\r\n                        fontWeight: 700,\r\n                      }}\r\n                    >\r\n                      {hotel.rooms[0].checkInTime}\r\n                    </Typography>\r\n                  </Box>\r\n                )}\r\n\r\n                {hotel?.rooms?.[0]?.checkOutTime && (\r\n                  <Box\r\n                    sx={{\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      gap: 0.5,\r\n                    }}\r\n                  >\r\n                    <Typography\r\n                      sx={{\r\n                        fontSize: { xs: \"13px\", md: \"14px\" },\r\n                        color: color.paperColor,\r\n                        fontWeight: 600,\r\n                      }}\r\n                    >\r\n                      Check-out:\r\n                    </Typography>\r\n                    <Typography\r\n                      sx={{\r\n                        fontSize: { xs: \"13px\", md: \"14px\" },\r\n                        color: color.firstColor,\r\n                        fontWeight: 700,\r\n                      }}\r\n                    >\r\n                      {hotel.rooms[0].checkOutTime}\r\n                    </Typography>\r\n                  </Box>\r\n                )}\r\n              </Box>\r\n            )}\r\n\r\n            {/* HIGHLIGHTS */}\r\n            <Typography\r\n              sx={{\r\n                fontFamily: \"CustomFontB\",\r\n                fontSize: \"16px\",\r\n                color: color.paperColor,\r\n                mt: 2,\r\n              }}\r\n            >\r\n              Highlights\r\n            </Typography>\r\n\r\n            <Box\r\n              sx={{\r\n                display: \"flex\",\r\n                gap: { xs: 2, md: 6 },\r\n                flexWrap: \"wrap\",\r\n                mt: 3,\r\n                p: 2,\r\n                px: 4,\r\n                pt: 3,\r\n                backgroundColor: \"rgba(93, 93, 93, 0.14)\",\r\n                justifyContent: \"space-around\",\r\n                borderRadius: \"12px\",\r\n                width: \"fit-content\",\r\n              }}\r\n            >\r\n              {(hotel?.rooms?.[0]?.amenities || [])\r\n                .slice(0, 5)\r\n                .map((amenity: any, index: any) => (\r\n                  <div\r\n                    key={index}\r\n                    style={{\r\n                      display: \"flex\",\r\n                      flexDirection: \"column\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\",\r\n                    }}\r\n                  >\r\n                    <Chip\r\n                      icon={\r\n                        <Box sx={{ display: \"flex\", alignItems: \"center\" }}>\r\n                          {React.cloneElement(\r\n                            amenityIcons[amenity] || <AddCircleOutline />,\r\n                            {\r\n                              sx: {\r\n                                fontSize: { xs: 26, md: 34 },\r\n                                color: color.paperColor,\r\n                              },\r\n                            }\r\n                          )}\r\n                        </Box>\r\n                      }\r\n                      size=\"small\"\r\n                      sx={{ bgcolor: \"transparent\" }}\r\n                    />\r\n\r\n                    <Typography\r\n                      sx={{ fontSize: { xs: \"10px\", md: \"14px\" } }}\r\n                      mt={1.5}\r\n                    >\r\n                      {amenity}\r\n                    </Typography>\r\n                  </div>\r\n                ))}\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n\r\n        {/* LOWER TABS SECTION */}\r\n        <Box\r\n          sx={{\r\n            ...BoxStyle,\r\n            px: { xs: 1, md: 4 },\r\n            pb: 3,\r\n          }}\r\n        >\r\n          <Tabs\r\n            variant=\"scrollable\"\r\n            value={value}\r\n            onChange={(event, newValue) => setValue(newValue)}\r\n            sx={{\r\n              \"& .MuiTab-root\": {\r\n                textTransform: \"none\",\r\n                fontWeight: 600,\r\n                color: color.forthColor,\r\n                fontSize: \"1rem\",\r\n                p: 0,\r\n                minWidth: \"10px\",\r\n                mx: 1,\r\n                px: 0.5,\r\n              },\r\n              \"& .Mui-selected\": {\r\n                color: \"#000 !important\",\r\n                fontWeight: \"bold\",\r\n              },\r\n              \"& .MuiTabs-indicator\": {\r\n                backgroundColor: \"#000\",\r\n                height: 3,\r\n                borderRadius: \"4px\",\r\n              },\r\n            }}\r\n          >\r\n            <Tab label=\"Rooms\" />\r\n            <Tab label=\"Location\" />\r\n            <Tab label=\"Service & Amenities\" />\r\n            <Tab label=\"Policies\" />\r\n            {/* New Ratings Tab */}\r\n            <Tab label=\"Ratings & Reviews\" />\r\n          </Tabs>\r\n\r\n          <TabPanel value={value} index={0}>\r\n            {/* Main container for MMT-like layout */}\r\n            <Box sx={{\r\n              display: 'flex',\r\n              flexDirection: { xs: 'column-reverse', lg: 'row' }, // Reverse on mobile to show booking summary first\r\n              gap: { xs: 2, lg: 3 },\r\n              mt: { xs: 1, lg: 2 }\r\n            }}>\r\n\r\n              {/* LEFT SIDE - Rooms list (60% width) */}\r\n              <Box sx={{\r\n                flex: { xs: 1, lg: 0.6 },\r\n                overflow: 'visible',\r\n                order: { xs: 2, lg: 1 } // Show second on mobile, first on desktop\r\n              }}>\r\n                {/* Loading inventory indicator - Mobile optimized */}\r\n                {loadingInventory && (\r\n                  <Box sx={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: 2,\r\n                    mb: { xs: 2, lg: 3 },\r\n                    p: { xs: 1.5, lg: 2 }\r\n                  }}>\r\n                    <CircularProgress size={18} />\r\n                    <Typography variant=\"body2\" color=\"textSecondary\" fontSize={{ xs: '12px', lg: '14px' }}>\r\n                      Checking room availability...\r\n                    </Typography>\r\n                  </Box>\r\n                )}\r\n\r\n                {/* MEAL PLAN FILTER - Mobile optimized */}\r\n                <Box sx={{\r\n                  mb: { xs: 2, lg: 3 },\r\n                  p: { xs: 1.5, lg: 2 },\r\n                  bgcolor: 'background.paper',\r\n                  borderRadius: { xs: 1, lg: 2 },\r\n                  boxShadow: { xs: '0 1px 2px rgba(0,0,0,0.08)', lg: '0 1px 4px rgba(0,0,0,0.1)' },\r\n                  border: '1px solid #e0e0e0'\r\n                }}>\r\n                  <Box sx={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: { xs: 1, lg: 2 },\r\n                    mb: { xs: 0.5, lg: 1 }\r\n                  }}>\r\n                    <RestaurantMenu sx={{\r\n                      color: color.firstColor,\r\n                      fontSize: { xs: 18, lg: 20 }\r\n                    }} />\r\n                    <Typography variant=\"subtitle1\" fontWeight=\"bold\" fontSize={{ xs: '14px', lg: '16px' }}>\r\n                      Filter by Meal Plan\r\n                    </Typography>\r\n                  </Box>\r\n\r\n                  {/* Mobile: Scrollable chips, Desktop: Wrap */}\r\n                  <Box sx={{\r\n                    display: 'flex',\r\n                    flexWrap: { xs: 'nowrap', sm: 'wrap' },\r\n                    overflowX: { xs: 'auto', sm: 'visible' },\r\n                    gap: { xs: 0.5, lg: 1 },\r\n                    mt: { xs: 1, lg: 2 },\r\n                    pb: { xs: 0.5, lg: 0 }\r\n                  }}>\r\n                    {['All Meal Plans', 'Room Only'].concat(\r\n                      Array.from(new Set(\r\n                        availableRooms.flatMap((room: any) =>\r\n                          getAvailableMealPlansForRoom(room).filter((plan: string) => plan !== 'Room Only')\r\n                        )\r\n                      ))\r\n                    ).map((plan) => {\r\n                      const isSelected = mealPlanFilter === (plan === 'All Meal Plans' ? '' : plan);\r\n\r\n                      // Meal plan label mapping\r\n                      const planLabels: Record<string, string> = {\r\n                        'EP': 'Room + Breakfast',\r\n                        'CP': 'Room + Breakfast + Lunch/Dinner',\r\n                        'AP': 'Room + All Meals',\r\n                        'MAP': 'Room + Breakfast + Dinner',\r\n                        'Room Only': 'Room Only',\r\n                        'All Meal Plans': 'All Meal Plans'\r\n                      };\r\n\r\n                      const displayLabel = planLabels[plan] || plan;\r\n\r\n                      return (\r\n                        <Chip\r\n                          key={plan}\r\n                          label={displayLabel}\r\n                          clickable\r\n                          size={window.innerWidth < 600 ? \"small\" : \"medium\"}\r\n                          variant={isSelected ? \"filled\" : \"outlined\"}\r\n                          onClick={() => setMealPlanFilter(plan === 'All Meal Plans' ? '' : plan)}\r\n                          sx={{\r\n                            borderColor: isSelected ? color.firstColor : '#e0e0e0',\r\n                            backgroundColor: isSelected ? color.firstColor : '#ffffff',\r\n                            color: isSelected ? '#ffffff' : 'text.primary',\r\n                            fontWeight: isSelected ? 600 : 400,\r\n                            fontSize: { xs: '11px', sm: '12px', lg: '13px' },\r\n                            height: { xs: 28, lg: 32 },\r\n                            '& .MuiChip-label': {\r\n                              px: { xs: 1, lg: 1.5 }\r\n                            },\r\n                            flexShrink: 0,\r\n                            whiteSpace: 'nowrap'\r\n                          }}\r\n                        />\r\n                      );\r\n                    })}\r\n                  </Box>\r\n\r\n                  {/* Filter summary */}\r\n                  {mealPlanFilter && (\r\n                    <Box sx={{\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      flexWrap: 'wrap',\r\n                      gap: { xs: 0.5, lg: 1 },\r\n                      mt: { xs: 1, lg: 2 }\r\n                    }}>\r\n                      <Typography variant=\"body2\" color=\"textSecondary\" fontSize={{ xs: '11px', lg: '14px' }}>\r\n                        Showing rooms with:\r\n                      </Typography>\r\n                      <Chip\r\n                        label={\r\n                          (() => {\r\n                            const planLabels: Record<string, string> = {\r\n                              'EP': 'Room + Breakfast',\r\n                              'CP': 'Room + Breakfast + Lunch/Dinner',\r\n                              'AP': 'Room + All Meals',\r\n                              'MAP': 'Room + Breakfast + Dinner',\r\n                              'Room Only': 'Room Only'\r\n                            };\r\n                            return planLabels[mealPlanFilter] || mealPlanFilter;\r\n                          })()\r\n                        }\r\n                        size=\"small\"\r\n                        onDelete={() => setMealPlanFilter('')}\r\n                        deleteIcon={<Close sx={{ fontSize: { xs: 14, lg: 16 } }} />}\r\n                        sx={{\r\n                          fontWeight: 500,\r\n                          backgroundColor: '#e3f2fd',\r\n                          color: color.firstColor,\r\n                          fontSize: { xs: '11px', lg: '12px' },\r\n                          height: { xs: 24, lg: 28 }\r\n                        }}\r\n                      />\r\n                      <Typography variant=\"caption\" color=\"textSecondary\" fontSize={{ xs: '10px', lg: '12px' }}>\r\n                        ({getFilteredRoomsCount()} rooms available)\r\n                      </Typography>\r\n                    </Box>\r\n                  )}\r\n                </Box>\r\n\r\n                {/* Alert if all rooms are unavailable - Mobile optimized */}\r\n                {getFilteredRooms().length === 0 && !loadingInventory && (\r\n                  <Alert\r\n                    severity=\"error\"\r\n                    sx={{\r\n                      mb: { xs: 2, lg: 3 },\r\n                      borderRadius: { xs: 1, lg: 2 },\r\n                      border: '1px solid #ffcdd2',\r\n                      p: { xs: 1, lg: 2 }\r\n                    }}\r\n                    icon={<Block sx={{ fontSize: { xs: 18, lg: 20 } }} />}\r\n                  >\r\n                    <AlertTitle sx={{ fontSize: { xs: '13px', lg: '16px' } }}>\r\n                      No Rooms Available\r\n                    </AlertTitle>\r\n                    <Typography variant=\"body2\" fontSize={{ xs: '11px', lg: '14px' }}>\r\n                      {mealPlanFilter\r\n                        ? `No rooms with \"${mealPlanFilter}\" meal plan are available for your selected dates.`\r\n                        : 'All rooms in this hotel are currently unavailable for your selected dates. Please try different dates or explore other hotels.'\r\n                      }\r\n                    </Typography>\r\n                  </Alert>\r\n                )}\r\n\r\n                {/* Alert if some rooms are available - Mobile optimized */}\r\n                {unavailableRooms.length > 0 && getFilteredRooms().length > 0 && !loadingInventory && (\r\n                  <Alert\r\n                    severity=\"info\"\r\n                    sx={{\r\n                      mb: { xs: 2, lg: 3 },\r\n                      borderRadius: { xs: 1, lg: 2 },\r\n                      border: '1px solid #bbdefb',\r\n                      p: { xs: 1, lg: 2 }\r\n                    }}\r\n                    icon={<Info sx={{ fontSize: { xs: 18, lg: 20 } }} />}\r\n                  >\r\n                    <AlertTitle sx={{ fontSize: { xs: '13px', lg: '16px' } }}>\r\n                      Some Rooms Unavailable\r\n                    </AlertTitle>\r\n                    <Typography variant=\"body2\" fontSize={{ xs: '11px', lg: '14px' }}>\r\n                      {unavailableRooms.length} room{unavailableRooms.length > 1 ? 's are' : ' is'} currently unavailable.\r\n                      Showing {getFilteredRooms().length} available room{getFilteredRooms().length > 1 ? 's' : ''}.\r\n                    </Typography>\r\n                  </Alert>\r\n                )}\r\n\r\n                {/* Rooms Grid - Mobile optimized */}\r\n                <Box sx={{ display: 'flex', flexDirection: 'column', gap: { xs: 2, lg: 2 } }}>\r\n                  {getFilteredRooms().map((room: any) => {\r\n                    const inventoryStatus = getRoomInventoryStatus(room);\r\n                    const availableSlots = (bookingType || \"\").toLowerCase() === \"hourly\"\r\n                      ? [\"rateFor3Hour\", \"rateFor6Hour\", \"rateFor12Hour\"]\r\n                      : [\"rateFor1Night\"];\r\n\r\n                    const hasAvailableSlots = availableSlots.some(slot => {\r\n                      const price = getPriceForSlot(room, slot);\r\n                      return price > 0 && isSlotAvailable(room, slot);\r\n                    });\r\n\r\n                    return (\r\n                      <Card\r\n                        key={`available-${room.id}`}\r\n                        sx={{\r\n                          p: { xs: 1.5, lg: 2 },\r\n                          display: \"flex\",\r\n                          flexDirection: \"column\",\r\n                          alignItems: \"stretch\",\r\n                          background: '#ffffff',\r\n                          borderRadius: { xs: '8px', lg: '12px' },\r\n                          boxShadow: { xs: \"0 1px 3px rgba(0,0,0,0.08)\", lg: \"0 2px 8px rgba(0,0,0,0.12)\" },\r\n                          border: \"1px solid #e0e0e0\",\r\n                          position: \"relative\",\r\n                          overflow: \"visible\",\r\n                          cursor: hasAvailableSlots ? 'pointer' : 'default',\r\n                          opacity: hasAvailableSlots ? 1 : 0.7,\r\n                          transition: 'all 0.2s ease',\r\n                          '&:hover': {\r\n                            boxShadow: hasAvailableSlots ? { xs: \"0 2px 6px rgba(0,0,0,0.12)\", lg: \"0 4px 12px rgba(0,0,0,0.15)\" } : \"0 1px 3px rgba(0,0,0,0.08)\",\r\n                            borderColor: hasAvailableSlots ? color.firstColor : '#e0e0e0'\r\n                          }\r\n                        }}\r\n                        onClick={() => {\r\n                          if (!hasAvailableSlots) return;\r\n\r\n                          setSelectedRoom(room);\r\n                          const defaultSlot = bookingType === \"hourly\"\r\n                            ? (getPriceForSlot(room, \"rateFor3Hour\") > 0 && isSlotAvailable(room, \"rateFor3Hour\") ? \"rateFor3Hour\" :\r\n                              getPriceForSlot(room, \"rateFor6Hour\") > 0 && isSlotAvailable(room, \"rateFor6Hour\") ? \"rateFor6Hour\" :\r\n                                getPriceForSlot(room, \"rateFor12Hour\") > 0 && isSlotAvailable(room, \"rateFor12Hour\") ? \"rateFor12Hour\" : \"rateFor1Night\")\r\n                            : \"rateFor1Night\";\r\n                          setSelectedSlot({\r\n                            roomId: room.id,\r\n                            slot: defaultSlot\r\n                          });\r\n                        }}\r\n                      >\r\n                        {/* Selected Room Checkmark - Mobile optimized */}\r\n                        {selectedRoom?.id === room.id && (\r\n                          <CheckCircle\r\n                            sx={{\r\n                              position: \"absolute\",\r\n                              top: { xs: -6, lg: -10 },\r\n                              right: { xs: -6, lg: -10 },\r\n                              color: '#4caf50',\r\n                              background: '#ffffff',\r\n                              borderRadius: \"50%\",\r\n                              fontSize: { xs: '22px', lg: '28px' },\r\n                              boxShadow: '0 2px 4px rgba(0,0,0,0.2)',\r\n                              zIndex: 2\r\n                            }}\r\n                          />\r\n                        )}\r\n\r\n                        {/* Inventory status badge - Mobile optimized */}\r\n                        {inventoryStatus.icon && (\r\n                          <Tooltip title={inventoryStatus.reason}>\r\n                            <Box\r\n                              sx={{\r\n                                position: \"absolute\",\r\n                                top: { xs: 6, lg: 10 },\r\n                                left: { xs: 6, lg: 10 },\r\n                                background: 'rgba(0, 0, 0, 0.7)',\r\n                                color: 'white',\r\n                                borderRadius: '4px',\r\n                                padding: { xs: '2px 6px', lg: '4px 8px' },\r\n                                display: 'flex',\r\n                                alignItems: 'center',\r\n                                gap: '4px',\r\n                                zIndex: 1,\r\n                              }}\r\n                            >\r\n                              {React.cloneElement(inventoryStatus.icon, {\r\n                                sx: { fontSize: { xs: 12, lg: 14 } }\r\n                              })}\r\n                              <Typography variant=\"caption\" fontWeight=\"bold\" fontSize={{ xs: '9px', lg: '11px' }}>\r\n                                {inventoryStatus.status}\r\n                              </Typography>\r\n                            </Box>\r\n                          </Tooltip>\r\n                        )}\r\n\r\n                        {/* Top row: Image and basic info */}\r\n                        <Box sx={{\r\n                          display: 'flex',\r\n                          flexDirection: { xs: 'column', sm: 'row' },\r\n                          gap: { xs: 1, sm: 1.5, lg: 2 },\r\n                          mb: { xs: 1.5, lg: 2 }\r\n                        }}>\r\n                          {/* Room Image */}\r\n                          <Box sx={{\r\n                            width: { xs: '100%', sm: '150px', md: '200px', lg: '250px' },\r\n                            flexShrink: 0\r\n                          }}>\r\n                            <CardMedia\r\n                              component=\"img\"\r\n\r\n                              sx={{\r\n                                height: { xs: 120, sm: 140, lg: 160 },\r\n                                borderRadius: { xs: '6px', lg: '8px' },\r\n                                width: \"100%\",\r\n                                objectFit: 'cover'\r\n                              }}\r\n                              image={toCdn(room.roomImages)}\r\n                              alt={room.roomCategory}\r\n                            />\r\n                          </Box>\r\n\r\n                          {/* Room Info */}\r\n                          <Box sx={{ flex: 1, minWidth: 0 }}>\r\n                            <Typography\r\n                              variant=\"h6\"\r\n                              fontWeight={700}\r\n                              sx={{\r\n                                color: color.firstColor,\r\n                                fontSize: { xs: '14px', sm: '15px', lg: '16px' },\r\n                                lineHeight: 1.3,\r\n                                mb: { xs: 0.5, lg: 1 }\r\n                              }}\r\n                            >\r\n                              {room.roomCategory}\r\n                            </Typography>\r\n\r\n                            {/* Room Size */}\r\n                            <Box sx={{\r\n                              display: 'flex',\r\n                              alignItems: 'center',\r\n                              gap: 0.5,\r\n                              mb: { xs: 0.5, lg: 1 }\r\n                            }}>\r\n                              <SquareFoot sx={{ fontSize: { xs: 12, lg: 14 }, color: '#666' }} />\r\n                              <Typography variant=\"body2\" color=\"textSecondary\" fontSize={{ xs: '11px', lg: '14px' }}>\r\n                                {room.roomSize} sq.ft\r\n                              </Typography>\r\n                            </Box>\r\n\r\n                            {/* Room Amenities - Compact on mobile */}\r\n                            <Box sx={{\r\n                              display: { xs: 'none', sm: 'block' },\r\n                              maxHeight: { sm: '60px', lg: 'none' },\r\n                              overflow: 'hidden'\r\n                            }}>\r\n                              <RoomAmenities key={room.id} room={room} />\r\n                            </Box>\r\n                          </Box>\r\n                        </Box>\r\n\r\n                        {/* Mobile-only amenities */}\r\n                        <Box sx={{\r\n                          display: { xs: 'block', sm: 'none' },\r\n                          mb: 1\r\n                        }}>\r\n                          <RoomAmenities key={`mobile-${room.id}`} room={room} />\r\n                        </Box>\r\n\r\n                        {/* Room Details Toggle - Mobile optimized */}\r\n                        <Box sx={{\r\n                          display: 'flex',\r\n                          justifyContent: 'space-between',\r\n                          alignItems: 'center',\r\n                          mb: { xs: 1, lg: 1.5 }\r\n                        }}>\r\n                          <Button\r\n                            sx={{\r\n                              textTransform: \"none\",\r\n                              fontSize: { xs: '11px', lg: '12px' },\r\n                              p: 0,\r\n                              minWidth: 0,\r\n                              color: color.firstColor,\r\n                              fontWeight: 500\r\n                            }}\r\n                            onClick={(e) => {\r\n                              e.stopPropagation();\r\n                              setShowRoomDetails(!showRoomDetails);\r\n                            }}\r\n                            startIcon={showRoomDetails ?\r\n                              <ExpandLess sx={{ fontSize: { xs: 16, lg: 18 } }} /> :\r\n                              <ExpandMore sx={{ fontSize: { xs: 16, lg: 18 } }} />\r\n                            }\r\n                          >\r\n                            {showRoomDetails ? \"Show less\" : \"More details\"}\r\n                          </Button>\r\n\r\n                          {/* View Deal Button - Mobile */}\r\n                          <Button\r\n                            variant=\"contained\"\r\n                            size=\"small\"\r\n                            sx={{\r\n                              display: { xs: 'inline-flex', sm: 'none' },\r\n                              backgroundColor: color.firstColor,\r\n                              color: '#fff',\r\n                              fontWeight: 600,\r\n                              borderRadius: '4px',\r\n                              px: 1.5,\r\n                              py: 0.5,\r\n                              minWidth: '80px',\r\n                              fontSize: '11px',\r\n                              '&:hover': {\r\n                                backgroundColor: color.secondColor\r\n                              }\r\n                            }}\r\n                            onClick={(e) => {\r\n                              e.stopPropagation();\r\n                              if (hasAvailableSlots) {\r\n                                setSelectedRoom(room);\r\n                              }\r\n                            }}\r\n                          >\r\n                            View Deal\r\n                          </Button>\r\n                        </Box>\r\n\r\n                        {/* Expanded Room Details */}\r\n                        {showRoomDetails && (\r\n                          <Box sx={{\r\n                            mt: 1,\r\n                            p: { xs: 1, lg: 1.5 },\r\n                            bgcolor: '#f9f9f9',\r\n                            borderRadius: 1,\r\n                            mb: { xs: 1, lg: 1.5 }\r\n                          }}>\r\n                            <Grid container spacing={1}>\r\n                              <Grid item xs={6}>\r\n                                <Typography variant=\"caption\" color=\"textSecondary\" sx={{ display: 'block', fontSize: { xs: '10px', lg: '12px' } }}>\r\n                                  Standard Occupancy:\r\n                                </Typography>\r\n                                <Typography variant=\"caption\" fontWeight={600} sx={{ fontSize: { xs: '10px', lg: '12px' } }}>\r\n                                  {room.standardRoomOccupancy} guest(s)\r\n                                </Typography>\r\n                              </Grid>\r\n                              <Grid item xs={6}>\r\n                                <Typography variant=\"caption\" color=\"textSecondary\" sx={{ display: 'block', fontSize: { xs: '10px', lg: '12px' } }}>\r\n                                  Max Occupancy:\r\n                                </Typography>\r\n                                <Typography variant=\"caption\" fontWeight={600} sx={{ fontSize: { xs: '10px', lg: '12px' } }}>\r\n                                  {room.maxRoomOccupancy} guest(s)\r\n                                </Typography>\r\n                              </Grid>\r\n                              <Grid item xs={6}>\r\n                                <Typography variant=\"caption\" color=\"textSecondary\" sx={{ display: 'block', fontSize: { xs: '10px', lg: '12px' } }}>\r\n                                  Additional Adult:\r\n                                </Typography>\r\n                                <Typography variant=\"caption\" fontWeight={600} sx={{ fontSize: { xs: '10px', lg: '12px' } }}>\r\n                                  {room.additionalGuestRate}\r\n                                </Typography>\r\n                              </Grid>\r\n                              <Grid item xs={6}>\r\n                                <Typography variant=\"caption\" color=\"textSecondary\" sx={{ display: 'block', fontSize: { xs: '10px', lg: '12px' } }}>\r\n                                  Additional Child:\r\n                                </Typography>\r\n                                <Typography variant=\"caption\" fontWeight={600} sx={{ fontSize: { xs: '10px', lg: '12px' } }}>\r\n                                  {room.additionalChildRate}\r\n                                </Typography>\r\n                              </Grid>\r\n                            </Grid>\r\n                          </Box>\r\n                        )}\r\n\r\n                        {/* Pricing Section */}\r\n                        <Box sx={{\r\n                          width: '100%',\r\n                          borderTop: '1px solid #e0e0e0',\r\n                          pt: { xs: 1, lg: 1.5 }\r\n                        }}>\r\n                          {/* Price Slots - Mobile scrollable */}\r\n                          <Box sx={{\r\n                            display: \"flex\",\r\n                            gap: { xs: 0.5, lg: 1 },\r\n                            overflowX: { xs: 'auto', sm: 'visible' },\r\n                            pb: { xs: 0.5, lg: 0 },\r\n                            '&::-webkit-scrollbar': {\r\n                              height: '3px',\r\n                            },\r\n                            '&::-webkit-scrollbar-thumb': {\r\n                              backgroundColor: '#ccc',\r\n                              borderRadius: '1.5px',\r\n                            },\r\n                          }}>\r\n                            {availableSlots\r\n                              .filter(slotKey => {\r\n                                const price = getPriceForSlot(room, slotKey);\r\n                                return price > 0 && isSlotAvailable(room, slotKey);\r\n                              })\r\n                              .map((slotKey) => {\r\n                                const slotLabel = (bookingType || \"\").toLowerCase() === \"hourly\"\r\n                                  ? slotKey.replace(\"rateFor\", \"\").replace(\"Hour\", \"\") + \" hrs\"\r\n                                  : \"Per Night\";\r\n\r\n                                const roomPrice = getRoomPriceOnly(room, slotKey);\r\n                                const totalPrice = getTotalPriceWithMeals(room, slotKey, 'Room Only');\r\n                                const breakdown = calculatePriceBreakdown(totalPrice);\r\n                                const { basePrice, platformFee, gstTotal } = breakdown as any;\r\n                                const perUnitMain = basePrice + platformFee;\r\n                                const perUnitTaxes = gstTotal;\r\n\r\n                                return (\r\n                                  <Button\r\n                                    key={slotKey}\r\n                                    variant={selectedSlot.roomId === room.id && selectedSlot.slot === slotKey ? \"contained\" : \"outlined\"}\r\n                                    onClick={(e) => {\r\n                                      e.stopPropagation();\r\n                                      if (isSlotAvailable(room, slotKey)) {\r\n                                        handleSlotSelection(room.id, slotKey);\r\n                                        setSelectedMealPlan('Room Only');\r\n                                      }\r\n                                    }}\r\n                                    disabled={!isSlotAvailable(room, slotKey)}\r\n                                    sx={{\r\n                                      minWidth: { xs: '80px', sm: '90px', lg: '100px' },\r\n                                      py: { xs: 0.75, lg: 1 },\r\n                                      px: { xs: 0.5, lg: 1 },\r\n                                      display: 'flex',\r\n                                      flexDirection: 'column',\r\n                                      alignItems: 'center',\r\n                                      borderColor: selectedSlot.roomId === room.id && selectedSlot.slot === slotKey ? color.firstColor : '#ddd',\r\n                                      backgroundColor: selectedSlot.roomId === room.id && selectedSlot.slot === slotKey ? color.firstColor : 'transparent',\r\n                                      flexShrink: 0,\r\n                                      '&:hover': {\r\n                                        borderColor: color.firstColor,\r\n                                        backgroundColor: selectedSlot.roomId === room.id && selectedSlot.slot === slotKey ? color.firstColor : 'rgba(33, 150, 243, 0.04)'\r\n                                      }\r\n                                    }}\r\n                                  >\r\n                                    <Typography\r\n                                      variant=\"caption\"\r\n                                      fontWeight={600}\r\n                                      color={selectedSlot.roomId === room.id && selectedSlot.slot === slotKey ? '#fff' : '#666'}\r\n                                      fontSize={{ xs: '9px', lg: '11px' }}\r\n                                    >\r\n                                      {slotLabel}\r\n                                    </Typography>\r\n                                    <Typography\r\n                                      variant=\"body1\"\r\n                                      fontWeight={700}\r\n                                      color={selectedSlot.roomId === room.id && selectedSlot.slot === slotKey ? '#fff' : color.firstColor}\r\n                                      fontSize={{ xs: '12px', sm: '13px', lg: '14px' }}\r\n                                    >\r\n                                      {Math.round(perUnitMain)}\r\n                                    </Typography>\r\n                                    <Typography\r\n                                      variant=\"caption\"\r\n                                      color={selectedSlot.roomId === room.id && selectedSlot.slot === slotKey ? '#fff' : '#666'}\r\n                                      fontSize={{ xs: '8px', lg: '10px' }}\r\n                                    >\r\n                                      +{Math.round(perUnitTaxes)} taxes\r\n                                    </Typography>\r\n                                  </Button>\r\n                                );\r\n                              })}\r\n                          </Box>\r\n\r\n                          {/* View Deal Button - Desktop */}\r\n                          <Box sx={{\r\n                            mt: { xs: 1, lg: 2 },\r\n                            textAlign: { xs: 'left', sm: 'right' },\r\n                            display: { xs: 'none', sm: 'block' }\r\n                          }}>\r\n                            <Button\r\n                              variant=\"contained\"\r\n                              size=\"small\"\r\n                              sx={{\r\n                                backgroundColor: color.firstColor,\r\n                                color: '#fff',\r\n                                fontWeight: 600,\r\n                                borderRadius: '6px',\r\n                                px: 2,\r\n                                py: 1,\r\n                                minWidth: '120px',\r\n                                fontSize: { sm: '12px', lg: '13px' },\r\n                                '&:hover': {\r\n                                  backgroundColor: color.secondColor\r\n                                }\r\n                              }}\r\n                              onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                if (hasAvailableSlots) {\r\n                                  setSelectedRoom(room);\r\n                                }\r\n                              }}\r\n                            >\r\n                              View Deal\r\n                            </Button>\r\n                          </Box>\r\n                        </Box>\r\n                      </Card>\r\n                    );\r\n                  })}\r\n                </Box>\r\n\r\n                {/* Alternative Stays Button - Mobile optimized */}\r\n                {hasAlternativeStays && !loadingSimilarHotels && !checkingAlternativeStays && (\r\n                  <Box sx={{\r\n                    mt: 3,\r\n                    p: { xs: 1.5, lg: 2 },\r\n                    bgcolor: '#fff',\r\n                    borderRadius: { xs: '8px', lg: '12px' },\r\n                    border: '1px solid #e0e0e0',\r\n                    boxShadow: { xs: '0 1px 3px rgba(0,0,0,0.08)', lg: '0 2px 8px rgba(0,0,0,0.12)' }\r\n                  }}>\r\n                    <Typography variant=\"subtitle2\" fontWeight={600} mb={1} fontSize={{ xs: '13px', lg: '14px' }}>\r\n                      Looking for {bookingType === \"hourly\" ? \"overnight\" : \"hourly\"} stays?\r\n                    </Typography>\r\n                    <Button\r\n                      variant=\"outlined\"\r\n                      fullWidth\r\n                      startIcon={<Search sx={{ fontSize: { xs: 16, lg: 18 } }} />}\r\n                      onClick={() => {\r\n                        const searchParams = new URLSearchParams();\r\n                        searchParams.set(\"location\", \"Bhubaneswar\");\r\n                        const oppositeBookingType = bookingType === \"hourly\" ? \"fullDay\" : \"hourly\";\r\n                        searchParams.set(\"bookingType\", oppositeBookingType);\r\n\r\n                        if (oppositeBookingType === \"hourly\") {\r\n                          searchParams.set(\"bookingHours\", \"3\");\r\n                          searchParams.set(\"rooms\", \"1\");\r\n                          searchParams.set(\"adults\", \"1\");\r\n                          searchParams.set(\"children\", \"0\");\r\n                        } else {\r\n                          const today = dayjs().format('YYYY-MM-DD');\r\n                          const tomorrow = dayjs().add(1, 'day').format('YYYY-MM-DD');\r\n                          searchParams.set(\"checkinDate\", today);\r\n                          searchParams.set(\"checkOutDate\", tomorrow);\r\n                          searchParams.set(\"rooms\", \"1\");\r\n                          searchParams.set(\"adults\", \"1\");\r\n                          searchParams.set(\"children\", \"0\");\r\n                          searchParams.set(\"nights\", \"1\");\r\n                        }\r\n\r\n                        navigate(`/search?${searchParams.toString()}`);\r\n                      }}\r\n                      sx={{\r\n                        borderColor: color.firstColor,\r\n                        color: color.firstColor,\r\n                        fontSize: { xs: '12px', lg: '14px' },\r\n                        py: { xs: 0.75, lg: 1 },\r\n                        '&:hover': {\r\n                          borderColor: color.secondColor,\r\n                          backgroundColor: 'rgba(33, 150, 243, 0.04)'\r\n                        }\r\n                      }}\r\n                    >\r\n                      Search {bookingType === \"hourly\" ? \"Overnight\" : \"Hourly\"} Stays\r\n                    </Button>\r\n                  </Box>\r\n                )}\r\n              </Box>\r\n\r\n              {/* RIGHT SIDE - Booking Summary (40% width) - Mobile optimized */}\r\n              <Box sx={{\r\n                flex: { xs: 1, lg: 0.4 },\r\n                position: { xs: 'sticky', lg: 'sticky' },\r\n                top: { xs: 0, lg: 20 },\r\n                bottom: { xs: 0, lg: 'auto' },\r\n                alignSelf: { xs: 'stretch', lg: 'flex-start' },\r\n                height: { xs: '50vh', lg: 'calc(100vh - 100px)' }, // Changed from max-height to height\r\n                overflowY: 'auto',\r\n                zIndex: { xs: 1000, lg: 1 },\r\n                bgcolor: { xs: '#fff', lg: 'transparent' },\r\n                boxShadow: { xs: '0 -2px 10px rgba(0,0,0,0.1)', lg: 'none' },\r\n                borderTop: { xs: '1px solid #e0e0e0', lg: 'none' },\r\n                order: { xs: 1, lg: 2 },\r\n                '&::-webkit-scrollbar': { width: '4px' },\r\n                '&::-webkit-scrollbar-thumb': { backgroundColor: '#ccc', borderRadius: '2px' },\r\n              }}>\r\n                <Card sx={{\r\n                  borderRadius: { xs: 0, lg: '12px' },\r\n                  boxShadow: { xs: 'none', lg: '0 4px 12px rgba(0,0,0,0.1)' },\r\n                  border: { xs: 'none', lg: '1px solid #e0e0e0' },\r\n                  overflow: 'visible',\r\n                  minHeight: { xs: '100%', lg: '400px' }, // Changed to 100% for mobile\r\n                  display: 'flex',\r\n                  flexDirection: 'column'\r\n                }}>\r\n                  {/* Mobile header - Close button */}\r\n                  {isMobile && (\r\n                    <Box sx={{\r\n                      display: 'flex',\r\n                      justifyContent: 'space-between',\r\n                      alignItems: 'center',\r\n                      p: 1.5,\r\n                      borderBottom: '1px solid #e0e0e0',\r\n                      bgcolor: '#f9f9f9',\r\n                      flexShrink: 0 // Prevent header from shrinking\r\n                    }}>\r\n                      <Typography variant=\"subtitle1\" fontWeight={600}>\r\n                        Booking Summary\r\n                      </Typography>\r\n                      <IconButton size=\"small\" onClick={() => {/* Add close handler */ }}>\r\n                        <Close />\r\n                      </IconButton>\r\n                    </Box>\r\n                  )}\r\n\r\n                  {/* Scrollable content container */}\r\n                  <Box sx={{\r\n                    flex: 1,\r\n                    overflowY: 'auto',\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    '&::-webkit-scrollbar': { width: '3px' },\r\n                    '&::-webkit-scrollbar-thumb': { backgroundColor: '#ddd', borderRadius: '1.5px' },\r\n                  }}>\r\n                    {/* Selected Room Header */}\r\n                    <Box sx={{\r\n                      background: `linear-gradient(135deg, ${color.firstColor}, ${color.secondColor})`,\r\n                      p: { xs: 1.5, lg: 2 },\r\n                      borderTopLeftRadius: { xs: 0, lg: '12px' },\r\n                      borderTopRightRadius: { xs: 0, lg: '12px' },\r\n                      color: '#fff',\r\n                      textAlign: 'center',\r\n                      flexShrink: 0\r\n                    }}>\r\n                      <Typography variant=\"h6\" fontWeight={700} fontSize={{ xs: '15px', lg: '18px' }}>\r\n                        {selectedRoom ? selectedRoom.roomCategory : 'Select a Room'}\r\n                      </Typography>\r\n                      <Typography variant=\"caption\" sx={{ opacity: 0.9 }} fontSize={{ xs: '11px', lg: '12px' }}>\r\n                        {selectedRoom ? `${selectedRoom.roomSize} sq.ft` : 'Choose from available rooms'}\r\n                      </Typography>\r\n                    </Box>\r\n\r\n                    {/* Stay Details Section */}\r\n                    <Box sx={{\r\n                      p: { xs: 1.5, lg: 2 },\r\n                      flexShrink: 0\r\n                    }}>\r\n                      {/* Dates */}\r\n                      <Box sx={{ mb: { xs: 1.5, lg: 2 } }}>\r\n                        <Typography variant=\"subtitle2\" fontWeight={600} color=\"textSecondary\" mb={1} fontSize={{ xs: '12px', lg: '14px' }}>\r\n                          Stay Dates\r\n                        </Typography>\r\n                        <Box sx={{\r\n                          display: 'flex',\r\n                          alignItems: 'center',\r\n                          justifyContent: 'space-between',\r\n                          bgcolor: '#f5f5f5',\r\n                          p: { xs: 1, lg: 1.5 },\r\n                          borderRadius: '6px'\r\n                        }}>\r\n                          <Box sx={{ flex: 1 }}>\r\n                            <Typography variant=\"caption\" color=\"textSecondary\" fontSize={{ xs: '10px', lg: '12px' }}>Check-in</Typography>\r\n                            <Typography variant=\"body2\" fontWeight={700} color={color.firstColor} fontSize={{ xs: '12px', lg: '14px' }}>\r\n                              {checkinDate ? dayjs(checkinDate).format(\"DD MMM\") : \"Select\"}\r\n                            </Typography>\r\n                            {bookingType === \"hourly\" && checkinTime && (\r\n                              <Typography variant=\"caption\" color=\"textSecondary\" fontSize={{ xs: '9px', lg: '11px' }}>\r\n                                {dayjs(checkinTime, \"HH:mm\").format(\"hh:mm A\")}\r\n                              </Typography>\r\n                            )}\r\n                          </Box>\r\n                          <ArrowRightAlt sx={{ color: '#666', fontSize: { xs: 18, lg: 20 }, mx: { xs: 0.5, lg: 1 } }} />\r\n                          <Box sx={{ flex: 1, textAlign: 'right' }}>\r\n                            <Typography variant=\"caption\" color=\"textSecondary\" fontSize={{ xs: '10px', lg: '12px' }}>\r\n                              {bookingType === \"hourly\" ? \"Duration\" : \"Check-out\"}\r\n                            </Typography>\r\n                            {bookingType === \"hourly\" ? (\r\n                              <Typography variant=\"body2\" fontWeight={700} color={color.firstColor} fontSize={{ xs: '12px', lg: '14px' }}>\r\n                                {selectedSlot.slot === \"rateFor3Hour\" ? \"3H\" :\r\n                                  selectedSlot.slot === \"rateFor6Hour\" ? \"6H\" :\r\n                                    selectedSlot.slot === \"rateFor12Hour\" ? \"12H\" : \"Select\"}\r\n                              </Typography>\r\n                            ) : (\r\n                              <Typography variant=\"body2\" fontWeight={700} color={color.firstColor} fontSize={{ xs: '12px', lg: '14px' }}>\r\n                                {checkOutDate ? dayjs(checkOutDate).format(\"DD MMM\") : \"Select\"}\r\n                              </Typography>\r\n                            )}\r\n                          </Box>\r\n                        </Box>\r\n                        {bookingType !== \"hourly\" && perStayMultiplier > 0 && (\r\n                          <Typography variant=\"caption\" color=\"textSecondary\" sx={{ mt: 0.5, display: 'block', textAlign: 'center' }} fontSize={{ xs: '10px', lg: '12px' }}>\r\n                            {perStayMultiplier} night{perStayMultiplier > 1 ? 's' : ''} stay\r\n                          </Typography>\r\n                        )}\r\n                      </Box>\r\n\r\n                      {/* Room & Guests */}\r\n                      <Box sx={{ mb: { xs: 1.5, lg: 2 } }}>\r\n                        <Typography variant=\"subtitle2\" fontWeight={600} color=\"textSecondary\" mb={1} fontSize={{ xs: '12px', lg: '14px' }}>\r\n                          Room & Guests\r\n                        </Typography>\r\n                        <Box sx={{\r\n                          display: 'flex',\r\n                          justifyContent: 'space-between',\r\n                          alignItems: 'center',\r\n                          bgcolor: '#f5f5f5',\r\n                          p: { xs: 1, lg: 1.5 },\r\n                          borderRadius: '6px'\r\n                        }}>\r\n                          <Box>\r\n                            <Typography variant=\"body2\" fontWeight={700} color={color.firstColor} fontSize={{ xs: '13px', lg: '14px' }}>\r\n                              {roomsCountParam} Room{roomsCountParam > 1 ? 's' : ''}\r\n                            </Typography>\r\n                            <Typography variant=\"caption\" color=\"textSecondary\" fontSize={{ xs: '11px', lg: '12px' }}>\r\n                              {adults} Adult{adults !== \"1\" ? 's' : ''}\r\n                              {children !== \"0\" ? `, ${children} Child${children !== \"1\" ? 'ren' : ''}` : ''}\r\n                            </Typography>\r\n                          </Box>\r\n                          {selectedRoom && (\r\n                            <Chip\r\n                              label={`Max ${selectedRoom.standardRoomOccupancy}`}\r\n                              size=\"small\"\r\n                              sx={{\r\n                                bgcolor: color.firstColor,\r\n                                color: '#fff',\r\n                                fontSize: { xs: '10px', lg: '12px' },\r\n                                height: { xs: 24, lg: 28 }\r\n                              }}\r\n                            />\r\n                          )}\r\n                        </Box>\r\n                      </Box>\r\n                    </Box>\r\n\r\n                    <Divider sx={{ mx: { xs: 1.5, lg: 2 } }} />\r\n\r\n                    {/* Meal Plan Selection */}\r\n                    {/* Meal Plan Selection */}\r\n                    {selectedRoom && !loadingMealPlans && (\r\n                      <Box sx={{\r\n                        p: { xs: 1.5, lg: 2 },\r\n                        flexShrink: 0\r\n                      }}>\r\n                        <Typography variant=\"subtitle2\" fontWeight={600} color=\"textSecondary\" mb={1} fontSize={{ xs: '12px', lg: '14px' }}>\r\n                          Select Meal Plan\r\n                        </Typography>\r\n                        <Box sx={{\r\n                          display: 'flex',\r\n                          gap: { xs: 0.75, lg: 1 },\r\n                          overflowX: 'auto',\r\n                          pb: 1,\r\n                          '&::-webkit-scrollbar': { height: '3px' }\r\n                        }}>\r\n                          {getAvailableMealPlansForRoom(selectedRoom).map((plan: string) => {\r\n                            const mealPrice = calculateMealPlanPrice(selectedRoom, plan);\r\n                            const roomPrice = selectedSlot.slot ? getRoomPriceOnly(selectedRoom, selectedSlot.slot) : 0;\r\n\r\n                            // Calculate breakdowns separately\r\n                            const roomOnlyTotal = roomPrice;\r\n                            const roomBreakdown = calculatePriceBreakdown(roomOnlyTotal);\r\n\r\n                            let mealBreakdown = null;\r\n                            if (plan !== 'Room Only') {\r\n                              mealBreakdown = calculatePriceBreakdown(mealPrice);\r\n                            }\r\n\r\n                            // Calculate totals with multiplier\r\n                            const totalRoomPrice = (roomBreakdown.basePrice + roomBreakdown.platformFee) * totalMultiplier;\r\n                            const totalRoomTax = roomBreakdown.gstTotal * totalMultiplier;\r\n\r\n                            let totalMealPrice = 0;\r\n                            let totalMealTax = 0;\r\n                            if (plan !== 'Room Only' && mealBreakdown) {\r\n                              totalMealPrice = (mealBreakdown.basePrice + mealBreakdown.platformFee) * totalMultiplier;\r\n                              totalMealTax = mealBreakdown.gstTotal * totalMultiplier;\r\n                            }\r\n\r\n                            const totalForPlan = totalRoomPrice + totalMealPrice;\r\n                            const totalTaxForPlan = totalRoomTax + totalMealTax;\r\n\r\n                            return (\r\n                              <Card\r\n                                key={plan}\r\n                                onClick={() => setSelectedMealPlan(plan)}\r\n                                sx={{\r\n                                  minWidth: { xs: 160, lg: 180 },\r\n                                  border: `2px solid ${selectedMealPlan === plan ? color.firstColor : '#e0e0e0'}`,\r\n                                  borderRadius: '6px',\r\n                                  cursor: 'pointer',\r\n                                  bgcolor: selectedMealPlan === plan ? '#e3f2fd' : '#fff',\r\n                                  transition: 'all 0.2s ease',\r\n                                  flexShrink: 0,\r\n                                  '&:hover': { borderColor: color.firstColor }\r\n                                }}\r\n                              >\r\n                                <Box sx={{ p: { xs: 1, lg: 1.5 } }}>\r\n                                  {/* Plan Name and Icon */}\r\n                                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5, mb: 1 }}>\r\n                                    {getMealPlanIcon(plan) || <RestaurantMenu sx={{ fontSize: { xs: 14, lg: 16 } }} />}\r\n                                    <Typography variant=\"body2\" fontWeight={600} fontSize={{ xs: '12px', lg: '13px' }}>\r\n                                      {getMealPlanDescription(plan)}\r\n                                    </Typography>\r\n                                  </Box>\r\n                                  <Typography variant=\"caption\" color=\"textSecondary\" fontSize={{ xs: '10px', lg: '11px' }}>\r\n                                    {plan === 'Room Only' ? 'No meals' : 'Includes meals'}\r\n                                  </Typography>\r\n\r\n                                  {/* Price Display */}\r\n                                  <Typography variant=\"body1\" fontWeight={700} color={color.firstColor} fontSize={{ xs: '13px', lg: '15px' }}>\r\n                                    {Math.round(totalForPlan)}\r\n                                  </Typography>\r\n\r\n                                  <Typography variant=\"caption\" color=\"textSecondary\" fontSize={{ xs: '8px', lg: '9px' }} sx={{ display: 'block' }}>\r\n                                    + {Math.round(totalTaxForPlan)} taxes & fees\r\n                                  </Typography>\r\n\r\n\r\n                                  {/* Total with taxes */}\r\n\r\n                                </Box>\r\n                              </Card>\r\n                            );\r\n                          })}\r\n                        </Box>\r\n                      </Box>\r\n                    )}\r\n\r\n                    <Divider sx={{ mx: { xs: 1.5, lg: 2 } }} />\r\n\r\n                    {/* Price Breakdown */}\r\n                    <Box sx={{\r\n                      p: { xs: 1.5, lg: 2 },\r\n                      flexShrink: 0\r\n                    }}>\r\n                      <Typography variant=\"subtitle2\" fontWeight={600} color=\"textSecondary\" mb={2} fontSize={{ xs: '12px', lg: '14px' }}>\r\n                        Price Summary\r\n                      </Typography>\r\n\r\n                      {/* Calculate breakdowns exactly like meal plan cards */}\r\n                      {(() => {\r\n                        // Get the room price and calculate breakdown\r\n                        const roomPrice = selectedSlot.slot ? getRoomPriceOnly(selectedRoom, selectedSlot.slot) : 0;\r\n                        const roomBreakdown = calculatePriceBreakdown(roomPrice);\r\n\r\n                        // Calculate meal breakdown if meal plan is selected\r\n                        let mealBreakdown = null;\r\n                        if (selectedMealPlan !== 'Room Only') {\r\n                          const mealPrice = calculateMealPlanPrice(selectedRoom, selectedMealPlan);\r\n                          mealBreakdown = calculatePriceBreakdown(mealPrice);\r\n                        }\r\n\r\n                        // Calculate totals with multiplier - SAME LOGIC as meal plan cards\r\n                        const totalRoomPrice = (roomBreakdown.basePrice + roomBreakdown.platformFee) * totalMultiplier;\r\n                        const totalRoomTax = roomBreakdown.gstTotal * totalMultiplier;\r\n\r\n                        let totalMealPrice = 0;\r\n                        let totalMealTax = 0;\r\n                        if (selectedMealPlan !== 'Room Only' && mealBreakdown) {\r\n                          totalMealPrice = (mealBreakdown.basePrice + mealBreakdown.platformFee) * totalMultiplier;\r\n                          totalMealTax = mealBreakdown.gstTotal * totalMultiplier;\r\n                        }\r\n\r\n                        // Calculate the base price (without taxes)\r\n                        const totalBasePrice = totalRoomPrice + totalMealPrice;\r\n\r\n                        // Calculate the total tax - SAME as meal plan cards\r\n                        const totalTax = totalRoomTax + totalMealTax;\r\n\r\n                        return (\r\n                          <>\r\n                            {/* Total Amount - Same format as meal plan cards */}\r\n                            <Box sx={{\r\n                              bgcolor: '#f9f9f9',\r\n                              p: { xs: 1.5, lg: 2 },\r\n                              borderRadius: '6px',\r\n                              border: '1px solid #e0e0e0',\r\n                              mb: 2\r\n                            }}>\r\n                              <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                                <Box>\r\n                                  <Typography variant=\"h6\" fontWeight={700} fontSize={{ xs: '14px', lg: '16px' }}>\r\n                                    Total Amount\r\n                                  </Typography>\r\n                                </Box>\r\n                                <Box sx={{ textAlign: 'right' }}>\r\n                                  {/* Show base price (without taxes) - Just like meal plan cards */}\r\n                                  <Typography variant=\"h5\" fontWeight={800} color={color.firstColor} fontSize={{ xs: '16px', lg: '20px' }}>\r\n                                    {Math.round(totalBasePrice)}\r\n                                  </Typography>\r\n\r\n                                  {/* Show taxes & fees separately - USING SAME CALCULATION as meal plan cards */}\r\n                                  <Typography variant=\"caption\" color=\"textSecondary\" fontSize={{ xs: '10px', lg: '12px' }}>\r\n                                    + {Math.round(totalTax)} taxes & fees\r\n                                  </Typography>\r\n                                </Box>\r\n                              </Box>\r\n                            </Box>\r\n\r\n                            {/* Savings Info */}\r\n                            {displayBasePlus700 > displayCombinedBasePlatform && (\r\n                              <Alert\r\n                                severity=\"success\"\r\n                                sx={{\r\n                                  mb: 2,\r\n                                  borderRadius: '6px',\r\n                                  py: { xs: 0.5, lg: 1 },\r\n                                  '& .MuiAlert-icon': { fontSize: { xs: 16, lg: 20 } }\r\n                                }}\r\n                              >\r\n                                <Typography variant=\"caption\" fontWeight={600} fontSize={{ xs: '11px', lg: '12px' }}>\r\n                                  You save {Math.round(displayBasePlus700 - displayCombinedBasePlatform)}!\r\n                                </Typography>\r\n                              </Alert>\r\n                            )}\r\n                          </>\r\n                        );\r\n                      })()}\r\n                    </Box>\r\n                  </Box>\r\n\r\n                  {/* Book Now Button - Fixed at bottom */}\r\n                  <Box sx={{\r\n                    p: { xs: 1.5, lg: 2 },\r\n                    pt: 0,\r\n                    bgcolor: '#fff',\r\n                    borderTop: { xs: '1px solid #e0e0e0', lg: 'none' },\r\n                    flexShrink: 0,\r\n                    position: 'sticky',\r\n                    bottom: 0,\r\n                    zIndex: 10\r\n                  }}>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      fullWidth\r\n                      size=\"large\"\r\n                      onClick={handleBookNow}\r\n                      disabled={availableRooms.length === 0}\r\n                      sx={{\r\n                        height: { xs: '48px', lg: '56px' },\r\n                        fontSize: { xs: '15px', lg: '16px' },\r\n                        fontWeight: 700,\r\n                        background: `linear-gradient(135deg, ${color.firstColor}, ${color.secondColor})`,\r\n                        borderRadius: '8px',\r\n                        boxShadow: '0 4px 12px rgba(33, 150, 243, 0.3)',\r\n                        '&:hover': {\r\n                          background: `linear-gradient(135deg, ${color.secondColor}, ${color.firstColor})`,\r\n                          boxShadow: '0 6px 16px rgba(33, 150, 243, 0.4)'\r\n                        },\r\n                        '&:disabled': {\r\n                          background: '#ccc',\r\n                          boxShadow: 'none'\r\n                        }\r\n                      }}\r\n                    >\r\n                      {availableRooms.length === 0 ? 'No Rooms Available' : 'Book Now'}\r\n                    </Button>\r\n\r\n\r\n                  </Box>\r\n                </Card>\r\n              </Box>\r\n            </Box>\r\n          </TabPanel>\r\n\r\n          <TabPanel value={value} index={1}>\r\n            <Box sx={{ mt: 2 }}>\r\n              <Typography\r\n                sx={{\r\n                  fontFamily: \"CustomFontB\",\r\n                  fontSize: \"16px\",\r\n                  color: color.paperColor,\r\n                  mb: 2,\r\n                }}\r\n              >\r\n                Hotel Location\r\n              </Typography>\r\n\r\n              {/* Hotel Address with Google Maps Link */}\r\n              <Box sx={{\r\n                mb: 3,\r\n                p: 2,\r\n                bgcolor: 'rgba(93, 93, 93, 0.1)',\r\n                borderRadius: '12px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'space-between',\r\n                flexWrap: 'wrap',\r\n                gap: 2\r\n              }}>\r\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, flex: 1 }}>\r\n                  <LocationOn sx={{ fontSize: 24, color: color.firstColor }} />\r\n                  <Box>\r\n                    <Typography color=\"textSecondary\" fontWeight={600}>\r\n                      Address:\r\n                    </Typography>\r\n                    <Typography color=\"textSecondary\">\r\n                      {hotel.address}\r\n                    </Typography>\r\n                  </Box>\r\n                </Box>\r\n\r\n                <Button\r\n                  variant=\"contained\"\r\n                  size=\"small\"\r\n                  startIcon={<LocationOn />}\r\n                  onClick={() => {\r\n                    // Check if we have a Google Maps URL\r\n                    if (hotel.googleBusinessPage) {\r\n                      // Directly open the Google Maps URL\r\n                      window.open(hotel.googleBusinessPage, '_blank');\r\n                    } else if (hotel.address) {\r\n                      // Fallback to creating a Google Maps search URL\r\n                      const mapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(hotel.address)}`;\r\n                      window.open(mapsUrl, '_blank');\r\n                    }\r\n                  }}\r\n                  sx={{\r\n                    bgcolor: color.firstColor,\r\n                    '&:hover': { bgcolor: color.background }\r\n                  }}\r\n                >\r\n                  {hotel.googleBusinessPage ? 'View on Google Maps' : 'Open in Google Maps'}\r\n                </Button>\r\n              </Box>\r\n\r\n              {/* Simple Static Map */}\r\n              <Box\r\n                sx={{\r\n                  width: '100%',\r\n                  height: '400px',\r\n                  borderRadius: '12px',\r\n                  overflow: 'hidden',\r\n                  border: `2px solid ${color.forthColor}`,\r\n                  position: 'relative',\r\n                  bgcolor: 'grey.100',\r\n                  mb: 3\r\n                }}\r\n              >\r\n                {MAPBOX_ACCESS_TOKEN ? (\r\n                  <img\r\n                    src={`https://api.mapbox.com/styles/v1/mapbox/streets-v12/static/pin-l(${mapViewport.longitude},${mapViewport.latitude})/${mapViewport.longitude},${mapViewport.latitude},${mapViewport.zoom}/800x400?access_token=${MAPBOX_ACCESS_TOKEN}`}\r\n                    alt=\"Hotel Location\"\r\n                    style={{\r\n                      width: '100%',\r\n                      height: '100%',\r\n                      objectFit: 'cover',\r\n                      cursor: 'pointer'\r\n                    }}\r\n                    onClick={() => {\r\n                      // Use Google Maps URL if available\r\n                      if (hotel.googleBusinessPage) {\r\n                        window.open(hotel.googleBusinessPage, '_blank');\r\n                      } else if (hotel.address) {\r\n                        const mapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(hotel.address)}`;\r\n                        window.open(mapsUrl, '_blank');\r\n                      }\r\n                    }}\r\n                    onError={(e) => {\r\n                      setMapLoaded(false);\r\n                    }}\r\n                  />\r\n                ) : (\r\n                  <Box\r\n                    sx={{\r\n                      width: '100%',\r\n                      height: '100%',\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      justifyContent: 'center',\r\n                      flexDirection: 'column',\r\n                      p: 3,\r\n                      cursor: 'pointer'\r\n                    }}\r\n                    onClick={() => {\r\n                      // Use Google Maps URL if available\r\n                      if (hotel.googleBusinessPage) {\r\n                        window.open(hotel.googleBusinessPage, '_blank');\r\n                      } else if (hotel.address) {\r\n                        const mapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(hotel.address)}`;\r\n                        window.open(mapsUrl, '_blank');\r\n                      }\r\n                    }}\r\n                  >\r\n                    <Typography color=\"textSecondary\" variant=\"h6\" sx={{ mb: 2 }}>\r\n                      Map Preview\r\n                    </Typography>\r\n                    <Typography color=\"textSecondary\" align=\"center\">\r\n                      Location: {hotel.address}\r\n                    </Typography>\r\n                    <Typography color=\"textSecondary\" align=\"center\" sx={{ mt: 1 }}>\r\n                      {hotel.googleBusinessPage ? 'Click to view on Google Maps' : 'Click to view on Google Maps'}\r\n                    </Typography>\r\n                  </Box>\r\n                )}\r\n\r\n                <Typography\r\n                  variant=\"caption\"\r\n                  sx={{\r\n                    position: 'absolute',\r\n                    bottom: 4,\r\n                    right: 4,\r\n                    bgcolor: 'rgba(255,255,255,0.7)',\r\n                    px: 1,\r\n                    borderRadius: 1,\r\n                    fontSize: '10px'\r\n                  }}\r\n                >\r\n                   Mapbox  OpenStreetMap\r\n                </Typography>\r\n              </Box>\r\n\r\n              {/* Interactive Directions */}\r\n              <Box sx={{ mt: 3, p: 2, bgcolor: 'rgba(93, 93, 93, 0.1)', borderRadius: '12px' }}>\r\n                <Typography\r\n                  sx={{\r\n                    fontFamily: \"CustomFontB\",\r\n                    fontSize: \"16px\",\r\n                    color: color.paperColor,\r\n                    mb: 1,\r\n                  }}\r\n                >\r\n                  Get Directions\r\n                </Typography>\r\n\r\n                <Box sx={{ display: 'flex', gap: 2, flexWrap: 'wrap', mt: 2 }}>\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    size=\"small\"\r\n                    startIcon={<DirectionsCar />}\r\n                    onClick={() => {\r\n                      // Extract place ID or coordinates from Google Maps URL if available\r\n                      if (hotel.googleBusinessPage) {\r\n                        // Try to extract place ID or coordinates from the URL\r\n                        const url = hotel.googleBusinessPage;\r\n                        // Check if it's a Google Maps URL with place ID or coordinates\r\n                        if (url.includes('place/')) {\r\n                          // Extract place ID from URL like: https://maps.app.goo.gl/xxxx or https://www.google.com/maps/place/...\r\n                          window.open(url, '_blank');\r\n                        } else {\r\n                          // For other Google Maps URLs, use it directly\r\n                          window.open(url, '_blank');\r\n                        }\r\n                      } else if (hotel.address) {\r\n                        const url = `https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(hotel.address)}&travelmode=driving`;\r\n                        window.open(url, '_blank');\r\n                      }\r\n                    }}\r\n                    sx={{ borderColor: color.firstColor, color: color.firstColor }}\r\n                  >\r\n                    Drive\r\n                  </Button>\r\n\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    size=\"small\"\r\n                    startIcon={<DirectionsTransit />}\r\n                    onClick={() => {\r\n                      if (hotel.googleBusinessPage) {\r\n                        // Use the Google Maps URL for transit directions\r\n                        // You might need to append transit mode parameters\r\n                        window.open(hotel.googleBusinessPage, '_blank');\r\n                      } else if (hotel.address) {\r\n                        const url = `https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(hotel.address)}&travelmode=transit`;\r\n                        window.open(url, '_blank');\r\n                      }\r\n                    }}\r\n                    sx={{ borderColor: color.firstColor, color: color.firstColor }}\r\n                  >\r\n                    Transit\r\n                  </Button>\r\n\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    size=\"small\"\r\n                    startIcon={<DirectionsWalk />}\r\n                    onClick={() => {\r\n                      if (hotel.googleBusinessPage) {\r\n                        window.open(hotel.googleBusinessPage, '_blank');\r\n                      } else if (hotel.address) {\r\n                        const url = `https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(hotel.address)}&travelmode=walking`;\r\n                        window.open(url, '_blank');\r\n                      }\r\n                    }}\r\n                    sx={{ borderColor: color.firstColor, color: color.firstColor }}\r\n                  >\r\n                    Walk\r\n                  </Button>\r\n                </Box>\r\n              </Box>\r\n\r\n              {/* Nearby Points of Interest */}\r\n              <Box sx={{ mt: 3 }}>\r\n                <Typography\r\n                  sx={{\r\n                    fontFamily: \"CustomFontB\",\r\n                    fontSize: \"14px\",\r\n                    color: color.paperColor,\r\n                    mb: 1,\r\n                  }}\r\n                >\r\n                  What's Nearby\r\n                </Typography>\r\n                <Typography color=\"textSecondary\" variant=\"body2\">\r\n                  Use the interactive map above to explore nearby restaurants, attractions, and transportation options around the hotel.\r\n                </Typography>\r\n                {hotel.googleBusinessPage && (\r\n                  <Typography color=\"textSecondary\" variant=\"body2\" sx={{ mt: 1 }}>\r\n                    Click any button above to view detailed information on Google Maps.\r\n                  </Typography>\r\n                )}\r\n              </Box>\r\n            </Box>\r\n          </TabPanel>\r\n\r\n          <TabPanel value={value} index={2}>\r\n            <Box>\r\n              {hotel.extraService && (\r\n                <>\r\n                  <Typography\r\n                    sx={{\r\n                      fontFamily: \"CustomFontB\",\r\n                      fontSize: \"16px\",\r\n                      color: color.paperColor,\r\n                      mb: 1,\r\n                    }}\r\n                  >\r\n                    Extra Services\r\n                  </Typography>\r\n                  <Box mb={3}>\r\n                    {hotel.extraService.split(/[,]/).map((service: string, index: number) => (\r\n                      <Box\r\n                        key={index}\r\n                        sx={{\r\n                          display: \"flex\",\r\n                          alignItems: \"flex-start\",\r\n                          mb: 1,\r\n                        }}\r\n                      >\r\n                        <Typography\r\n                          sx={{\r\n                            color: color.paperColor,\r\n                            mr: 1,\r\n                            mt: 0.2,\r\n                          }}\r\n                        >\r\n                          \r\n                        </Typography>\r\n                        <Typography\r\n                          sx={{\r\n                            fontSize: \"14px\",\r\n                            lineHeight: 1.6,\r\n                          }}\r\n                        >\r\n                          {service.trim()}\r\n                        </Typography>\r\n                      </Box>\r\n                    ))}\r\n                  </Box>\r\n                </>\r\n              )}\r\n\r\n              <Typography\r\n                sx={{\r\n                  fontFamily: \"CustomFontB\",\r\n                  fontSize: \"16px\",\r\n                  color: color.paperColor,\r\n                  mb: 2,\r\n                }}\r\n              >\r\n                Amenities\r\n              </Typography>\r\n              <Box\r\n                sx={{\r\n                  display: \"flex\",\r\n                  flexDirection: \"column\",\r\n                  gap: 2,\r\n                  mt: 2,\r\n                  p: 2,\r\n                  px: 4,\r\n                  pt: 3,\r\n                  backgroundColor: \"rgba(93, 93, 93, 0.14)\",\r\n                  justifyContent: \"space-around\",\r\n                  borderRadius: \"12px\",\r\n                  width: \"fit-content\",\r\n                }}\r\n              >\r\n                {Array.from(\r\n                  new Set<string>(\r\n                    hotel?.rooms?.flatMap(\r\n                      (room: any) => room.amenities\r\n                    ) || []\r\n                  )\r\n                )\r\n                  .slice(0, 5)\r\n                  .map((amenity: string, index: number) => (\r\n                    <div\r\n                      key={index}\r\n                      style={{\r\n                        display: \"flex\",\r\n                        alignItems: \"center\",\r\n                        justifyContent: \"flex-start\",\r\n                      }}\r\n                    >\r\n                      <Chip\r\n                        icon={\r\n                          <Box\r\n                            sx={{\r\n                              display: \"flex\",\r\n                              alignItems: \"center\",\r\n                            }}\r\n                          >\r\n                            {React.cloneElement(\r\n                              amenityIcons[amenity] ||\r\n                              <AddCircleOutline />,\r\n                              {\r\n                                sx: {\r\n                                  fontSize: { xs: 26, md: 30 },\r\n                                  color: color.paperColor,\r\n                                },\r\n                              }\r\n                            )}\r\n                          </Box>\r\n                        }\r\n                        size=\"small\"\r\n                        sx={{ bgcolor: \"transparent\" }}\r\n                      />\r\n                      <Typography\r\n                        sx={{\r\n                          fontSize: { xs: \"10px\", md: \"14px\" },\r\n                        }}\r\n                      >\r\n                        {amenity}\r\n                      </Typography>\r\n                    </div>\r\n                  ))}\r\n              </Box>\r\n            </Box>\r\n          </TabPanel>\r\n\r\n          <TabPanel value={value} index={3}>\r\n            <Typography\r\n              sx={{\r\n                fontFamily: \"CustomFontB\",\r\n                fontSize: \"16px\",\r\n                color: color.paperColor,\r\n                mb: 2,\r\n              }}\r\n            >\r\n              Property Policies\r\n            </Typography>\r\n            <Box>\r\n              {hotel.propertyPolicy?.split(/[,]/).map((policy: string, index: number) => (\r\n                <Box\r\n                  key={index}\r\n                  sx={{\r\n                    display: \"flex\",\r\n                    alignItems: \"flex-start\",\r\n                    mb: 1.5,\r\n                  }}\r\n                >\r\n                  <Typography\r\n                    sx={{\r\n                      color: color.paperColor,\r\n                      mr: 1.5,\r\n                      mt: 0.2,\r\n                      fontWeight: \"bold\",\r\n                    }}\r\n                  >\r\n                    \r\n                  </Typography>\r\n                  <Typography\r\n                    sx={{\r\n                      fontSize: \"14px\",\r\n                      lineHeight: 1.6,\r\n                    }}\r\n                  >\r\n                    {policy.trim()}\r\n                  </Typography>\r\n                </Box>\r\n              ))}\r\n            </Box>\r\n          </TabPanel>\r\n\r\n          {/* NEW RATINGS TAB */}\r\n          <TabPanel value={value} index={4}>\r\n            <Box sx={{ mt: 2 }}>\r\n              <Typography\r\n                sx={{\r\n                  fontFamily: \"CustomFontB\",\r\n                  fontSize: \"16px\",\r\n                  color: color.paperColor,\r\n                  mb: 2,\r\n                }}\r\n              >\r\n                Ratings & Reviews\r\n              </Typography>\r\n\r\n              {loadingRatings ? (\r\n                <Typography textAlign=\"center\" color=\"textSecondary\">\r\n                  Loading reviews...\r\n                </Typography>\r\n              ) : hotelRatings.length > 0 ? (\r\n                <>\r\n                  {/* Overall Rating Summary - Only show when there are reviews */}\r\n                  <Box sx={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    mb: 4,\r\n                    p: 3,\r\n                    bgcolor: 'rgba(93, 93, 93, 0.1)',\r\n                    borderRadius: '12px',\r\n                    flexWrap: 'wrap',\r\n                    gap: 3\r\n                  }}>\r\n                    <Box sx={{ textAlign: 'center', minWidth: 120 }}>\r\n                      <Typography variant=\"h2\" fontWeight=\"bold\" color={color.firstColor}>\r\n                        {averageRating.toFixed(1)}\r\n                      </Typography>\r\n                      <Typography variant=\"body2\" color=\"textSecondary\">\r\n                        out of 5\r\n                      </Typography>\r\n                      <Box sx={{ display: 'flex', justifyContent: 'center', mt: 1 }}>\r\n                        {[1, 2, 3, 4, 5].map((star) => (\r\n                          <Star\r\n                            key={star}\r\n                            sx={{\r\n                              color: star <= Math.round(averageRating) ? '#FFD700' : '#ddd',\r\n                              fontSize: 20\r\n                            }}\r\n                          />\r\n                        ))}\r\n                      </Box>\r\n                    </Box>\r\n\r\n                    <Box sx={{ flex: 1 }}>\r\n                      <Typography variant=\"h6\" gutterBottom>\r\n                        {reviewCount} Review{reviewCount !== 1 ? 's' : ''}\r\n                      </Typography>\r\n                    </Box>\r\n                  </Box>\r\n\r\n                  {/* Individual Reviews */}\r\n                  <Box sx={{ display: 'flex', flexDirection: 'column', gap: 3 }}>\r\n                    {hotelRatings.map((rating: any, index: number) => (\r\n                      <Box\r\n                        key={index}\r\n                        sx={{\r\n                          p: 3,\r\n                          border: `1px solid ${color.forthColor}`,\r\n                          borderRadius: '12px',\r\n                          bgcolor: 'white'\r\n                        }}\r\n                      >\r\n                        <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 2 }}>\r\n                          <Box>\r\n                            <Typography variant=\"subtitle1\" fontWeight=\"bold\">\r\n                              {rating.userName || 'Anonymous User'}\r\n                            </Typography>\r\n                            <Typography variant=\"body2\" color=\"textSecondary\">\r\n                              {rating.createdAt ? dayjs(rating.createdAt).format('MMMM D, YYYY') : 'Date not available'}\r\n                            </Typography>\r\n                          </Box>\r\n                          <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n                            {[1, 2, 3, 4, 5].map((star) => (\r\n                              <Star\r\n                                key={star}\r\n                                sx={{\r\n                                  color: star <= (rating.rating || 0) ? '#FFD700' : '#ddd',\r\n                                  fontSize: 16\r\n                                }}\r\n                              />\r\n                            ))}\r\n                            <Typography variant=\"body2\" sx={{ ml: 1, fontWeight: 'bold' }}>\r\n                              {rating.rating || 0}.0\r\n                            </Typography>\r\n                          </Box>\r\n                        </Box>\r\n\r\n                        {rating.review && (\r\n                          <Typography variant=\"body1\" paragraph>\r\n                            {rating.review}\r\n                          </Typography>\r\n                        )}\r\n\r\n                        {/* Show rating categories if available */}\r\n                        {rating.cleanliness && (\r\n                          <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 2, mt: 2 }}>\r\n                            <Typography variant=\"body2\">\r\n                              Cleanliness: {rating.cleanliness}/5\r\n                            </Typography>\r\n                            {rating.comfort && (\r\n                              <Typography variant=\"body2\">\r\n                                Comfort: {rating.comfort}/5\r\n                              </Typography>\r\n                            )}\r\n                            {rating.location && (\r\n                              <Typography variant=\"body2\">\r\n                                Location: {rating.location}/5\r\n                              </Typography>\r\n                            )}\r\n                            {rating.service && (\r\n                              <Typography variant=\"body2\">\r\n                                Service: {rating.service}/5\r\n                              </Typography>\r\n                            )}\r\n                          </Box>\r\n                        )}\r\n                      </Box>\r\n                    ))}\r\n                  </Box>\r\n\r\n                  {/* Review Summary Stats */}\r\n                  <Box sx={{ mt: 4, p: 3, bgcolor: 'rgba(93, 93, 93, 0.05)', borderRadius: '12px' }}>\r\n                    <Typography variant=\"h6\" gutterBottom>\r\n                      Review Summary\r\n                    </Typography>\r\n                    <Grid container spacing={2}>\r\n                      {[5, 4, 3, 2, 1].map((star) => {\r\n                        const count = hotelRatings.filter((r: any) => Math.round(r.rating || 0) === star).length;\r\n                        const percentage = reviewCount > 0 ? (count / reviewCount) * 100 : 0;\r\n\r\n                        return (\r\n                          <Grid item xs={12} key={star}>\r\n                            <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>\r\n                              <Typography variant=\"body2\" sx={{ minWidth: 60 }}>\r\n                                {star} stars\r\n                              </Typography>\r\n                              <Box sx={{ flex: 1, height: 8, bgcolor: '#eee', borderRadius: 4 }}>\r\n                                <Box\r\n                                  sx={{\r\n                                    width: `${percentage}%`,\r\n                                    height: '100%',\r\n                                    bgcolor: star >= 4 ? '#4CAF50' : star === 3 ? '#FFC107' : '#F44336',\r\n                                    borderRadius: 4\r\n                                  }}\r\n                                />\r\n                              </Box>\r\n                              <Typography variant=\"body2\" sx={{ minWidth: 40 }}>\r\n                                {count}\r\n                              </Typography>\r\n                            </Box>\r\n                          </Grid>\r\n                        );\r\n                      })}\r\n                    </Grid>\r\n                  </Box>\r\n                </>\r\n              ) : (\r\n                /* No Reviews Section - Clean and simple */\r\n                <Box sx={{\r\n                  textAlign: 'center',\r\n                  py: 8,\r\n                  display: 'flex',\r\n                  flexDirection: 'column',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center'\r\n                }}>\r\n                  <StarRounded sx={{\r\n                    fontSize: 80,\r\n                    color: '#e0e0e0',\r\n                    mb: 3,\r\n                    opacity: 0.7\r\n                  }} />\r\n                  <Typography variant=\"h5\" fontWeight=\"bold\" color=\"textSecondary\" gutterBottom>\r\n                    No Reviews Yet\r\n                  </Typography>\r\n                  <Typography variant=\"body1\" color=\"textSecondary\" sx={{ maxWidth: 400, mb: 4 }}>\r\n                    Be the first to share your experience with this property!\r\n                  </Typography>\r\n                </Box>\r\n              )}\r\n            </Box>\r\n          </TabPanel>\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default HotelDetails;\r\n\r\nconst StyledToggleButton = styled(ToggleButton)(({ theme }) => ({\r\n  borderRadius: \"4px\",\r\n  textTransform: \"none\",\r\n  fontSize: \"12px\",\r\n  padding: \"0px 10px\",\r\n  fontWeight: 600,\r\n  border: \"1px solid rgba(61, 61, 61, 0.4)\",\r\n  \"&.Mui-selected\": {\r\n    background: color.background,\r\n    color: \"white\",\r\n  },\r\n  \"&:disabled\": {\r\n    opacity: 0.5,\r\n    cursor: \"not-allowed\",\r\n  },\r\n}));\r\n\r\nconst TabPanel = ({\r\n  children,\r\n  value,\r\n  index,\r\n}: {\r\n  children: React.ReactNode;\r\n  value: number;\r\n  index: number;\r\n}) => {\r\n  return (\r\n    <div hidden={value !== index}>\r\n      {value === index && (\r\n        <Box p={1} mt={3}>\r\n          <Typography>{children}</Typography>\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n};"],"names":["amenityIcons","_jsx","PoolIcon","fontSize","Gym","FitnessCenterIcon","WifiIcon","BeachAccessIcon","Breakfast","FreeBreakfastIcon","Parking","LocalParkingIcon","Spa","SpaIcon","Restaurant","LocalDiningIcon","AirportShuttleIcon","BusinessCenterIcon","PetsIcon","Bar","LocalBarIcon","RoomServiceIcon","TV","TvIcon","AcUnitIcon","LocalLaundryServiceIcon","ChildCareIcon","KingBedIcon","Casino","CasinoIcon","DirectionsCarIcon","NightlifeIcon","SportsTennisIcon","OutdoorGrillIcon","FireExtinguisherIcon","calculatePriceBreakdown","basePrice","numericBase","Number","platformFee","gstOnBase","gstOnPlatform","gstTotal","gatewayFee","finalPrice","gstOnGateway","HotelDetails","_queryParams$get","_queryParams$get2","_queryParams$get3","_queryParams$get4","_queryParams$get5","_queryParams$get6","_availableRooms$","_availableRooms$0$id","_availableRooms$2","_hotel$rooms","_hotel$rooms2","_hotel$rooms2$","_hotel$rooms3","_hotel$rooms3$","_hotel$rooms4","_hotel$rooms4$","_hotel$rooms5","_hotel$rooms5$","_hotel$rooms6","_hotel$rooms6$","_hotel$rooms7","_hotel$propertyPolicy","S3_BASE_URL","CDN_BASE_URL","CDN_URL","toCdn","url","includes","replace","location","useLocation","queryParams","URLSearchParams","search","bookingType","get","checkinTime","checkinDate","checkOutDate","parsedRooms","roomsCountParam","isFinite","Math","floor","adults","children","hotel","state","hotelData","rooms","propertyDesc","description","propertyImages","inventoryData","setInventoryData","useState","loadingInventory","setLoadingInventory","allRatings","setAllRatings","hotelRatings","setHotelRatings","averageRating","setAverageRating","reviewCount","setReviewCount","loadingRatings","setLoadingRatings","similarHotels","setSimilarHotels","loadingSimilarHotels","setLoadingSimilarHotels","hasAlternativeStays","setHasAlternativeStays","checkingAlternativeStays","setCheckingAlternativeStays","similarHotelsPrices","setSimilarHotelsPrices","minHourlyPrice","Infinity","minOvernightPrice","mealPlans","setMealPlans","loadingMealPlans","setLoadingMealPlans","selectedMealPlan","setSelectedMealPlan","getMealPlansForRoom","roomId","filter","meal","_meal$roomId","toString","getAvailableMealPlansForRoom","room","roomMealPlans","id","availablePlans","forEach","mealType","mealPlan","meal_type","plan","mealName","push","calculateMealPlanPrice","mealPlanType","find","console","warn","concat","mealPriceStr","price","rate","cost","mealPrice","parseFloat","standardOccupancy","standardRoomOccupancy","nights","selectedSlot","slot","getRoomPriceOnly","getPriceForSlot","useEffect","length","log","roomCategory","index","hotelId","allFields","Object","keys","getMealPlanIcon","type","toUpperCase","BreakfastDining","RestaurantMenu","LunchDining","DinnerDining","getMealPlanDescription","isRoomAvailable","_room$status3","roomStatus","status","toLowerCase","checkRoomAvailabilityForDate","checkDate","_room$status","checkDay","dayjs","format","dayInventory","inv","date","isBlocked","hour","threeHourAvailable","threeHourBooked","sixHourAvailable","sixHourBooked","twelveHourAvailable","twelveHourBooked","overnightAvailable","overnightBooked","checkRoomAvailabilityForDateRange","checkoutDate","_room$status2","startDate","endDate","isBefore","add","dateStr","isSlotAvailable","_room$status4","roomInventory","getInventoryPriceForDate","overnightRate","rateFor1Night","threeHourRate","rateFor3Hour","sixHourRate","rateFor6Hour","twelveHourRate","rateFor12Hour","getTotalPriceWithMeals","getRoomInventoryStatus","_room$status5","isAvailable","icon","Block","reason","EventBusy","availableRooms","unavailableRooms","fetchData","async","ratingsData","_ratingsResponse$data","payLoad","data","page","pageSize","order","ratingsResponse","getAllRatings","Array","isArray","rows","result","error","fetchAllRatings","ratingsForHotel","getRatingsForHotel","ratingsArray","rating","ratingHotelId","propertyId","hotel_id","hotelID","avgRating","ratings","average","reduce","sum","round","calculateAverageRating","_hotel$ratings","reviews","_hotel$ratings2","inventoryByRoom","_inventoryResponse$da","inventoryResponse","getAllInventories","inventoryArray","fetchInventoryForRooms","_response$data","payload","response","getHotelMeals","mealData","mealArray","hotelMealPlans","_meal$hotelId","_hotel$id","fetchMealPlans","propertyName","_response$data2","_response$data2$data","_hotel$propertyName","getAllHotels","allHotels","currentName","similar","h","_h$propertyName","otherName","split","w","some","word","similarHotelsWithPrices","alternativeFound","similarHotel","slice","belongsToPayload","secondTable","hotelRes","getMyAllHotelswithBelongsTo","hotelWithRooms","_hotelWithRooms$data$","hotelHasHourly","hotelMinHourlyPrice","hotelHasOvernight","hotelMinOvernightPrice","min","currentIsHourly","_objectSpread","hasHourly","hasOvernight","fetchSimilarHotelsAndCheckAlternative","computeNights","inDate","outDate","isValid","diff","max","urlNights","selectedRoom","setSelectedRoom","setSelectedSlot","mealPlanFilter","setMealPlanFilter","mapViewport","setMapViewport","latitude","longitude","zoom","mapLoaded","setMapLoaded","showRoomDetails","setShowRoomDetails","expanded","setExpanded","isSticky","setIsSticky","stopPosition","setStopPosition","handleScroll","boxA","document","getElementById","boxB","boxC","boxBRect","getBoundingClientRect","boxARect","bottom","window","innerHeight","addEventListener","removeEventListener","position","setPosition","boxRef","useRef","observer","IntersectionObserver","_ref","entry","isIntersecting","threshold","current","observe","unobserve","value","setValue","showDetails","setShowDetails","isMobile","useMediaQuery","navigate","useNavigate","geocodeAddress","useCallback","fetch","encodeURIComponent","address","MAPBOX_ACCESS_TOKEN","json","features","lng","lat","center","prev","getFilteredRooms","unitBasePrice","unitBreakdown","unitRoomOnlyPrice","unitRoomOnlyBreakdown","roomsMultiplier","perStayMultiplier","totalMultiplier","totalBreakdown","displayBasePlus700","displayCombinedBasePlatform","hotelSchema","map","img","undefined","from","Set","flatMap","amenities","amenity","href","_jsxs","Box","sx","background","color","thirdColor","px","xs","md","py","Helmet","name","content","property","JSON","stringify","ref","BoxStyle","top","right","display","justifyContent","alignItems","gap","Typography","variant","fontWeight","firstColor","lineHeight","textAlign","style","getRatingColor","borderRadius","boxShadow","toFixed","StarRounded","fontFamily","paperColor","mt","pr","mx","ImageGrid","mb","Star","maxWidth","substring","Button","textTransform","p","ml","minWidth","onClick","checkInTime","checkOutTime","flexWrap","pt","backgroundColor","width","flexDirection","Chip","React","AddCircleOutline","size","bgcolor","pb","Tabs","onChange","event","newValue","forthColor","height","Tab","label","TabPanel","lg","flex","overflow","CircularProgress","border","sm","overflowX","isSelected","displayLabel","clickable","innerWidth","borderColor","flexShrink","whiteSpace","onDelete","deleteIcon","Close","Alert","severity","AlertTitle","Info","inventoryStatus","availableSlots","hasAvailableSlots","Card","cursor","opacity","transition","defaultSlot","CheckCircle","zIndex","Tooltip","title","left","padding","CardMedia","component","objectFit","image","roomImages","alt","SquareFoot","roomSize","maxHeight","RoomAmenities","e","stopPropagation","startIcon","ExpandLess","ExpandMore","secondColor","Grid","container","spacing","item","maxRoomOccupancy","additionalGuestRate","additionalChildRate","borderTop","slotKey","slotLabel","totalPrice","breakdown","perUnitMain","perUnitTaxes","handleSlotSelection","r","disabled","fullWidth","Search","searchParams","set","oppositeBookingType","today","tomorrow","alignSelf","overflowY","minHeight","borderBottom","IconButton","borderTopLeftRadius","borderTopRightRadius","ArrowRightAlt","Divider","roomPrice","roomBreakdown","mealBreakdown","totalRoomPrice","totalRoomTax","totalMealPrice","totalMealTax","totalForPlan","totalTaxForPlan","totalBasePrice","totalTax","_Fragment","handleBookNow","alert","queryString","pricingDetails","mealPlanDescription","mealPlanPrice","addOn","LocationOn","googleBusinessPage","open","mapsUrl","src","onError","align","DirectionsCar","DirectionsTransit","DirectionsWalk","extraService","service","mr","trim","propertyPolicy","policy","star","gutterBottom","userName","createdAt","review","paragraph","cleanliness","comfort","count","percentage","styled","ToggleButton","_ref2","theme","_ref3","hidden"],"ignoreList":[],"sourceRoot":""}