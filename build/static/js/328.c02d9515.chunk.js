"use strict";(self.webpackChunkhuts4u=self.webpackChunkhuts4u||[]).push([[328],{70141:(e,o,i)=>{i.d(o,{A:()=>l});var t=i(59662),n=i(70579);const l=(0,t.A)((0,n.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},72328:(e,o,i)=>{i.r(o),i.d(o,{calculatePriceBreakdown:()=>we,default:()=>Ne});var t=i(89379),n=i(7353),l=i(12110),s=i(26494),r=i(94496),a=i(14194),d=i(11906),c=i(36591),u=i(67784),m=i(17392),x=i(53193),h=i(79190),p=i(57465),v=i(32143),f=i(43845),g=i(81637),A=i(77739),b=i(74605),y=i(80045),j=i(65043),S=i(58387),D=i(98610),k=i(39768),C=i(33064),I=i(59662),z=i(70579);const T=(0,I.A)((0,z.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),Y=(0,I.A)((0,z.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),R=(0,I.A)((0,z.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var P=i(6803),M=i(61475),w=i(92532),N=i(72372);function F(e){return(0,N.Ay)("MuiCheckbox",e)}const H=(0,w.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]);var W=i(34535),G=i(56262),O=i(52445),V=i(98206),B=i(81139),E=i(4162);const L=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","disableRipple","className","slots","slotProps"],_=(0,W.Ay)(C.A,{shouldForwardProp:e=>(0,M.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:i}=e;return[o.root,i.indeterminate&&o.indeterminate,o["size".concat((0,P.A)(i.size))],"default"!==i.color&&o["color".concat((0,P.A)(i.color))]]}})((0,G.A)(e=>{let{theme:o}=e;return{color:(o.vars||o).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:o.vars?"rgba(".concat(o.vars.palette.action.activeChannel," / ").concat(o.vars.palette.action.hoverOpacity,")"):(0,k.X4)(o.palette.action.active,o.palette.action.hoverOpacity)}}},...Object.entries(o.palette).filter((0,O.A)()).map(e=>{let[i]=e;return{props:{color:i,disableRipple:!1},style:{"&:hover":{backgroundColor:o.vars?"rgba(".concat(o.vars.palette[i].mainChannel," / ").concat(o.vars.palette.action.hoverOpacity,")"):(0,k.X4)(o.palette[i].main,o.palette.action.hoverOpacity)}}}}),...Object.entries(o.palette).filter((0,O.A)()).map(e=>{let[i]=e;return{props:{color:i},style:{["&.".concat(H.checked,", &.").concat(H.indeterminate)]:{color:(o.vars||o).palette[i].main},["&.".concat(H.disabled)]:{color:(o.vars||o).palette.action.disabled}}}}),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}})),U=(0,z.jsx)(Y,{}),X=(0,z.jsx)(T,{}),Z=(0,z.jsx)(R,{}),q=j.forwardRef(function(e,o){var i,n,l;const s=(0,V.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:r=U,color:a="primary",icon:d=X,indeterminate:c=!1,indeterminateIcon:u=Z,inputProps:m,size:x="medium",disableRipple:h=!1,className:p,slots:v={},slotProps:f={}}=s,g=(0,y.A)(s,L),A=c?u:d,b=c?u:r,k=(0,t.A)((0,t.A)({},s),{},{disableRipple:h,color:a,indeterminate:c,size:x}),C=(e=>{const{classes:o,indeterminate:i,color:n,size:l}=e,s={root:["root",i&&"indeterminate","color".concat((0,P.A)(n)),"size".concat((0,P.A)(l))]},r=(0,D.A)(s,F,o);return(0,t.A)((0,t.A)({},o),r)})(k),I=null!==(i=f.input)&&void 0!==i?i:m,[T,Y]=(0,E.A)("root",{ref:o,elementType:_,className:(0,S.A)(C.root,p),shouldForwardComponentProp:!0,externalForwardedProps:(0,t.A)({slots:v,slotProps:f},g),ownerState:k,additionalProps:{type:"checkbox",icon:j.cloneElement(A,{fontSize:null!==(n=A.props.fontSize)&&void 0!==n?n:x}),checkedIcon:j.cloneElement(b,{fontSize:null!==(l=b.props.fontSize)&&void 0!==l?l:x}),disableRipple:h,slots:v,slotProps:{input:(0,B.A)("function"===typeof I?I(k):I,{"data-indeterminate":c})}}});return(0,z.jsx)(T,(0,t.A)((0,t.A)({},Y),{},{classes:C}))}),$=q;var K=i(39336),Q=i(83462),J=i(26600),ee=i(35316),oe=i(29347);const ie=(0,I.A)((0,z.jsx)("path",{d:"M7.5 11C9.43 11 11 9.43 11 7.5S9.43 4 7.5 4 4 5.57 4 7.5 5.57 11 7.5 11m0-5C8.33 6 9 6.67 9 7.5S8.33 9 7.5 9 6 8.33 6 7.5 6.67 6 7.5 6M4.0025 18.5832 18.59 3.9955l1.4142 1.4143L5.4167 19.9974zM16.5 13c-1.93 0-3.5 1.57-3.5 3.5s1.57 3.5 3.5 3.5 3.5-1.57 3.5-3.5-1.57-3.5-3.5-3.5m0 5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"Percent"),te=(0,I.A)((0,z.jsx)("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoney"),ne=(0,I.A)((0,z.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");var le=i(33438),se=i(83560),re=i(86687);const ae=(0,I.A)((0,z.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd"),de=(0,I.A)([(0,z.jsx)("path",{d:"M12.79 21 3 11.21v2c0 .53.21 1.04.59 1.41l7.79 7.79c.78.78 2.05.78 2.83 0l6.21-6.21c.78-.78.78-2.05 0-2.83z"},"0"),(0,z.jsx)("path",{d:"M11.38 17.41c.78.78 2.05.78 2.83 0l6.21-6.21c.78-.78.78-2.05 0-2.83L12.63.58C12.25.21 11.74 0 11.21 0H5C3.9 0 3 .9 3 2v6.21c0 .53.21 1.04.59 1.41zM7.25 3c.69 0 1.25.56 1.25 1.25S7.94 5.5 7.25 5.5 6 4.94 6 4.25 6.56 3 7.25 3"},"1")],"Discount"),ce=(0,I.A)((0,z.jsx)("path",{d:"m21.41 11.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58s1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41s-.23-1.06-.59-1.42M5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7"}),"LocalOffer"),ue=(0,I.A)((0,z.jsx)("path",{d:"m23 12-2.44-2.79.34-3.69-3.61-.82-1.89-3.2L12 2.96 8.6 1.5 6.71 4.69 3.1 5.5l.34 3.7L1 12l2.44 2.79-.34 3.7 3.61.82L8.6 22.5l3.4-1.47 3.4 1.46 1.89-3.19 3.61-.82-.34-3.69zm-12.91 4.72-3.8-3.81 1.48-1.48 2.32 2.33 5.85-5.87 1.48 1.48z"}),"Verified");var me=i(84770);const xe=(0,I.A)((0,z.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy"),he=(0,I.A)((0,z.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");var pe=i(70141),ve=i(60446),fe=i.n(ve),ge=i(63516),Ae=i(17195),be=i.n(Ae),ye=i(73216),je=i(57488),Se=i(80899),De=i(31716),ke=i(69995),Ce=i(59007),Ie=i(33580),ze=i(82533);const Te=e=>{let{orderDetails:o,bookingDetails:i}=e;const[n,l]=(0,j.useState)(""),[s,r]=(0,j.useState)(""),[a,c]=((0,ye.Zp)(),(0,j.useState)(!0));console.log(i),(0,j.useEffect)(()=>{var e;"hourly"!==(null===i||void 0===i?void 0:i.bookingType)&&(0,ke.ge)(null===i||void 0===i||null===(e=i.room)||void 0===e?void 0:e.id).then(e=>{var o,i,t,n;l((null===e||void 0===e||null===(o=e.data)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.checkInTime)||""),r((null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.checkOutTime)||"")})},[i]);const u=()=>c(!1);return(0,z.jsx)("div",{children:(0,z.jsxs)(Q.A,{open:a,onClose:u,maxWidth:"xs",fullWidth:!0,sx:{"& .MuiPaper-root":{padding:"8px",borderRadius:"16px"}},children:[(0,z.jsx)(J.A,{children:"Complete Your Payment"}),(0,z.jsx)(ee.A,{children:(0,z.jsx)("p",{children:"Ensure your payment details are correct before proceeding."})}),(0,z.jsxs)(oe.A,{style:{display:"flex",justifyContent:"flex-end"},children:[(0,z.jsx)(d.A,{style:{textTransform:"none",color:"black"},onClick:u,children:"Cancel"}),(0,z.jsx)(d.A,{onClick:async()=>{var e,l,r;var a;if(!await(a="https://checkout.razorpay.com/v1/checkout.js",new Promise(e=>{const o=document.createElement("script");o.src=a,o.onload=()=>e(!0),o.onerror=()=>e(!1),document.body.appendChild(o)}))||!window.Razorpay)return void alert("Failed to load Razorpay SDK.");const d=(()=>{var e,o,t,l;return"hourly"===(null===i||void 0===i?void 0:i.bookingType)?{checkInTime:null===i||void 0===i||null===(e=i.timing)||void 0===e?void 0:e.checkInTime,checkOutTime:null===i||void 0===i||null===(o=i.timing)||void 0===o?void 0:o.checkOutTime}:{checkInTime:n||(null===i||void 0===i||null===(t=i.timing)||void 0===t?void 0:t.checkInTime),checkOutTime:s||(null===i||void 0===i||null===(l=i.timing)||void 0===l?void 0:l.checkOutTime)}})(),c={key:Ce.tz||"",amount:o.data.amount,currency:o.data.currency,order_id:o.data.id,prefill:{name:null===i||void 0===i||null===(e=i.guestInfo)||void 0===e?void 0:e.name,email:null===i||void 0===i||null===(l=i.guestInfo)||void 0===l?void 0:l.email,contact:null===i||void 0===i||null===(r=i.guestInfo)||void 0===r?void 0:r.phoneNumber},handler:async e=>{try{var n,l,s,r,a,c,u,m;const x=await(0,ke.KF)({orderId:e.razorpay_order_id,paymentId:e.razorpay_payment_id,signature:e.razorpay_signature});console.log(x),alert("Payment Successful");const h=(0,t.A)({userId:(0,ze.F6)(),hotelId:null===i||void 0===i||null===(n=i.hotel)||void 0===n?void 0:n.id,roomId:null===i||void 0===i||null===(l=i.room)||void 0===l?void 0:l.id,geustName:null===i||void 0===i||null===(s=i.guestInfo)||void 0===s?void 0:s.name,amountPaid:o.data.amount,checkInDate:null===i||void 0===i||null===(r=i.timing)||void 0===r?void 0:r.checkInDate,checkInTime:d.checkInTime,checkOutTime:d.checkOutTime,checkOutDate:null===i||void 0===i||null===(a=i.timing)||void 0===a?void 0:a.checkOutDate,bookingType:null===i||void 0===i?void 0:i.bookingType,geustDetails:null===i||void 0===i?void 0:i.guestInfo,adults:null===i||void 0===i?void 0:i.adults,children:null===i||void 0===i?void 0:i.children,hotelName:null===i||void 0===i||null===(c=i.hotel)||void 0===c?void 0:c.propertyName,status:"pending",paymentId:null===x||void 0===x||null===(u=x.data)||void 0===u||null===(m=u.data)||void 0===m?void 0:m.id,rooms:null===i||void 0===i?void 0:i.rooms},(null===i||void 0===i?void 0:i.gstDetails)&&{GstDetail:i.gstDetails});console.log(h),(0,ke.UY)(h).then(e=>{var n,l,s,r,a,c,u,m,x,h,p,v,f,g,A,b,y,j,S,D,k,C,I,z,T,Y,R,P,M,w,N,F,H,W,G,O,V,B,E,L,_,U,X,Z,q,$,K;const Q=(0,t.A)({userId:(0,ze.F6)(),paymentId:null===e||void 0===e||null===(n=e.data)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.id,hotelId:null===i||void 0===i||null===(s=i.hotel)||void 0===s?void 0:s.id,roomId:null===i||void 0===i||null===(r=i.room)||void 0===r?void 0:r.id,bookingId:null===e||void 0===e||null===(a=e.data)||void 0===a||null===(c=a.data)||void 0===c?void 0:c.id,amountPaise:o.data.amount,feePaise:100*((null===i||void 0===i||null===(u=i.pricingDetails)||void 0===u?void 0:u.platformFee)+(null===i||void 0===i||null===(m=i.pricingDetails)||void 0===m?void 0:m.gstOnPlatform)),netAmountPaise:100*((null===i||void 0===i||null===(x=i.pricingDetails)||void 0===x?void 0:x.basePrice)+(null===i||void 0===i||null===(h=i.pricingDetails)||void 0===h?void 0:h.gstOnBase)),currency:"INR",bookingsIncluded:[{id:null===e||void 0===e||null===(p=e.data)||void 0===p||null===(v=p.data)||void 0===v?void 0:v.id,bookingDate:null===e||void 0===e||null===(f=e.data)||void 0===f||null===(g=f.data)||void 0===g?void 0:g.checkInDate}],scheduledAt:fe()(null===i||void 0===i||null===(A=i.timing)||void 0===A?void 0:A.checkInDate,"DD MMM YYYY").toDate(),status:"pending",transactionRef:null,gatewayResponse:null,failureReason:null,processedBy:null,note:"Daily PayOut "},(null===i||void 0===i?void 0:i.gstDetails)&&{GstDetail:i.gstDetails}),J=(0,t.A)({userId:(0,ze.F6)(),paymentId:null===e||void 0===e||null===(b=e.data)||void 0===b||null===(y=b.data)||void 0===y?void 0:y.id,hotelId:null===i||void 0===i||null===(j=i.hotel)||void 0===j?void 0:j.id,bookingId:null===e||void 0===e||null===(S=e.data)||void 0===S||null===(D=S.data)||void 0===D?void 0:D.id,roomId:null===i||void 0===i||null===(k=i.room)||void 0===k?void 0:k.id,amountPaise:o.data.amount,feePaise:100*((null===i||void 0===i||null===(C=i.pricingDetails)||void 0===C?void 0:C.platformFee)+(null===i||void 0===i||null===(I=i.pricingDetails)||void 0===I?void 0:I.gstOnPlatform)),netmyAmountPaise:100*((null===i||void 0===i||null===(z=i.pricingDetails)||void 0===z?void 0:z.platformFee)+(null===i||void 0===i||null===(T=i.pricingDetails)||void 0===T?void 0:T.gstOnPlatform)),currency:"INR",bookingsIncluded:[null===e||void 0===e||null===(Y=e.data)||void 0===Y||null===(R=Y.data)||void 0===R?void 0:R.id],scheduledAt:fe()(null===i||void 0===i||null===(P=i.timing)||void 0===P?void 0:P.checkInDate,"DD MMM YYYY").toDate(),initiatedAt:new Date,processedAt:null,status:"pending",transactionRef:null,gatewayResponse:null,failureReason:null,processedBy:null,note:"Auto payout settlement"},(null===i||void 0===i?void 0:i.gstDetails)&&{GstDetail:i.gstDetails});console.log(J),(0,ke.VL)(J).then(e=>{console.log("My Payment is scheduled")}).catch(e=>{console.log("error while creating the mypayment",e)}),console.log(Q),(0,ke.fT)(Q).then(e=>{console.log("My Payout is scheduled")}).catch(e=>{console.log("error while creating the PayOut ",e)}),(0,je.oR)(null===e||void 0===e||null===(M=e.data)||void 0===M?void 0:M.msg);const ee={guestName:null===i||void 0===i||null===(w=i.guestInfo)||void 0===w?void 0:w.name,location:null===i||void 0===i||null===(N=i.hotel)||void 0===N?void 0:N.address,hotelName:null===i||void 0===i||null===(F=i.hotel)||void 0===F?void 0:F.propertyName,checkInDate:fe()(null===i||void 0===i||null===(H=i.timing)||void 0===H?void 0:H.checkInDate,"DD MMM YYYY").format("DD MMM YYYY"),checkInTime:d.checkInTime,phone:null===i||void 0===i||null===(W=i.guestInfo)||void 0===W?void 0:W.phoneNumber,amountPaid:(null===i||void 0===i||null===(G=i.pricingDetails)||void 0===G?void 0:G.basePrice)+(null===i||void 0===i||null===(O=i.pricingDetails)||void 0===O?void 0:O.gstOnBase),basePrice:null===i||void 0===i||null===(V=i.pricingDetails)||void 0===V?void 0:V.basePrice,gstOnBase:null===i||void 0===i||null===(B=i.pricingDetails)||void 0===B?void 0:B.gstOnBase,razorpayfee:(null===i||void 0===i||null===(E=i.pricingDetails)||void 0===E?void 0:E.gstTotal)-((null===i||void 0===i||null===(L=i.pricingDetails)||void 0===L?void 0:L.gstOnBase)+(null===i||void 0===i||null===(_=i.pricingDetails)||void 0===_?void 0:_.gstOnPlatform)),platformFee:null===i||void 0===i||null===(U=i.pricingDetails)||void 0===U?void 0:U.platformFee,gstOnPlatform:null===i||void 0===i||null===(X=i.pricingDetails)||void 0===X?void 0:X.gstOnPlatform,totalPrice:null===i||void 0===i||null===(Z=i.pricingDetails)||void 0===Z?void 0:Z.totalPrice,adults:null===i||void 0===i?void 0:i.adults,children:null===i||void 0===i?void 0:i.children,rooms:1,checkOutTime:d.checkOutTime,checkOutDate:fe()(null===i||void 0===i||null===(q=i.timing)||void 0===q?void 0:q.checkOutDate,"DD MMM YYYY").format("DD MMM YYYY"),hotelEmail:null===i||void 0===i||null===($=i.hotel)||void 0===$?void 0:$.receptionEmail,receptionistPhone:null===i||void 0===i||null===(K=i.hotel)||void 0===K?void 0:K.receptionMobile};console.log(ee),(0,ke.Ud)(ee).then(e=>{console.log("message send to the wp",e)}).catch(e=>{console.log(e)}),window.location.href="/my-bookings"}).catch(e=>{console.log(e)})}catch(x){alert("Payment verification failed. Please try again.")}}};new window.Razorpay(c).open()},variant:"contained",style:{background:Ie.A.firstColor,fontSize:"18px",textTransform:"none",border:"solid 1px white"},sx:{padding:"2px 10px",transition:"all 0.4s ease","&:hover":{paddingRight:"20px"}},children:"Proceed to Pay"})]})]})})};var Ye=i(61968),Re=i(88553),Pe=i(75456);const Me=Se.Ik({name:Se.Yj().required("Guest name is required"),email:Se.Yj().email("Invalid email").optional(),phoneNumber:Se.Yj().required("Phone number is required").test("is-valid-phone","Enter a valid phone number",e=>{if(!e)return!1;return e.slice(2).length>=10})}),we=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;const t=Number(e)||0,n=Number(o)||0;if(!t||t<=0)return{basePrice:0,mealPlanPrice:0,gstOnBase:0,platformFee:0,gstOnPlatform:0,convenienceFee:0,gstOnConvenience:0,totalWithoutDiscount:0,hotelDiscount:0,couponDiscount:0,totalDiscount:0,finalPrice:0};const l=t+n,s=.05*l,r=.13*(l+s),a=.18*r,d=l+s+r+a,c=.02*d,u=.18*c,m=d+c+u;let x=0;i.hotelDiscountValue>0&&i.hotelDiscountType&&(x="percentage"===i.hotelDiscountType?m*(i.hotelDiscountValue/100):Math.min(i.hotelDiscountValue,m));let h=0;i.couponApplied&&(h=m*i.couponValue);const p=x+h;return{basePrice:t,mealPlanPrice:n,gstOnBase:s,platformFee:r,gstOnPlatform:a,convenienceFee:c,gstOnConvenience:u,totalWithoutDiscount:m,hotelDiscount:x,couponDiscount:h,totalDiscount:p,finalPrice:m-p}},Ne=()=>{var e,o,i,y,S,D,k,C;const I=(0,ye.zy)(),T=null===(e=I.state)||void 0===e?void 0:e.hotelData,Y=null===(o=I.state)||void 0===o?void 0:o.selectedRoom,R=null===(i=I.state)||void 0===i?void 0:i.selectedSlot,P=null===(y=I.state)||void 0===y?void 0:y.selectedMealPlan,M=(null===(S=I.state)||void 0===S?void 0:S.pricingDetails)||{},w=(null===(D=I.state)||void 0===D?void 0:D.inventoryData)||[],N=new URLSearchParams(I.search);console.log("BookingSummary - location:",I.state);const F=N.get("bookingType"),H=N.get("time"),W=N.get("checkinDate"),G=N.get("checkOutDate"),O=N.get("rooms"),V=N.get("adults"),B=N.get("children"),[E,L]=(0,j.useState)(F),[_,U]=(0,j.useState)(H||"12:00"),[X,Z]=(0,j.useState)(W||fe()().format("YYYY-MM-DD")),[q,ve]=(0,j.useState)(G||fe()().add(1,"day").format("YYYY-MM-DD")),[Ae,Se]=(0,j.useState)(O||"1"),[Ce,Ne]=(0,j.useState)(V||"1"),[He,We]=(0,j.useState)(B||"0"),[Ge,Oe]=(0,j.useState)(!1),[Ve,Be]=(0,j.useState)(!1),[Ee,Le]=(0,j.useState)(!1),[_e,Ue]=(0,j.useState)(W||fe()().format("YYYY-MM-DD")),[Xe,Ze]=(0,j.useState)(G||fe()().add(1,"day").format("YYYY-MM-DD")),[qe,$e]=(0,j.useState)(H||"12:00"),Ke=null===R||void 0===R?void 0:R.slot,Qe=null===Ke||void 0===Ke||null===(k=Ke.match(/\d+/))||void 0===k?void 0:k[0],Je=Qe?parseInt(Qe,10):3,[eo,oo]=(0,j.useState)(Je),[io,to]=(0,j.useState)(Je),[no,lo]=(0,j.useState)({}),[so,ro]=(0,j.useState)(!1),[ao,co]=(0,j.useState)({phone:"",name:"",email:"",token:""}),[uo,mo]=(0,j.useState)(null),[xo,ho]=(0,j.useState)(!1),[po,vo]=(0,j.useState)(!1),[fo,go]=(0,j.useState)([]),[Ao,bo]=(0,j.useState)(!1),[yo,jo]=(0,j.useState)(!1),[So,Do]=(0,j.useState)(null),[ko,Co]=(0,j.useState)("HUTS4U"),[Io,zo]=(0,j.useState)(!0),[To]=(0,j.useState)(.05),[Yo,Ro]=(0,j.useState)(null),[Po,Mo]=(0,j.useState)(!1),[wo,No]=(0,j.useState)(""),[Fo,Ho]=(0,j.useState)(""),[Wo,Go]=(0,j.useState)(""),[Oo,Vo]=(0,j.useState)("none"),[Bo,Eo]=(0,j.useState)(!1),[Lo,_o]=(0,j.useState)([]),[Uo,Xo]=(0,j.useState)(null),[Zo,qo]=(0,j.useState)(!1),[$o,Ko]=(0,j.useState)(!1),[Qo,Jo]=(0,j.useState)(null),[ei,oi]=(0,j.useState)(null),[ii,ti]=(0,j.useState)(P||"EP"),[ni,li]=(0,j.useState)((null===M||void 0===M?void 0:M.mealPlanPrice)||0),[si,ri]=(0,j.useState)((null===M||void 0===M?void 0:M.mealPlanDescription)||""),ai=(0,j.useRef)(null),di=(0,j.useRef)(null),ci=(0,j.useRef)(null),ui=((e,o,i,t)=>{let n=0,l=0,s=0;const r=[];if(e<=0)return{requiredRooms:1,extraGuestCount:0,extraGuestCharge:0,guestsPerRoom:[0]};n=Math.ceil(e/i);let a=e;for(let c=0;c<n;c++)a>=o?(r[c]=o,a-=o):(r[c]=a,a=0);let d=0;for(;a>0&&d<n;)r[d]<i&&(r[d]+=1,a-=1),d++,d>=n&&a>0&&(d=0);return r.forEach(e=>{if(e>o){const i=e-o;l+=i,s+=i*t}}),{requiredRooms:n,extraGuestCount:l,extraGuestCharge:s,guestsPerRoom:r}})(Number(Ce)+Number(He),(null===Y||void 0===Y?void 0:Y.standardRoomOccupancy)||1,(null===Y||void 0===Y?void 0:Y.maxRoomOccupancy)||1,(null===Y||void 0===Y?void 0:Y.additionalGuestRate)||0),{requiredRooms:mi,extraGuestCount:xi,extraGuestCharge:hi,guestsPerRoom:pi}=ui,vi=(()=>{var e;if(!Y)return{isAvailable:!1,message:"Room information is missing"};const o=null===(e=Y.status)||void 0===e?void 0:e.toLowerCase();return"available"===o||"active"===o?{isAvailable:!0,message:"Available"}:{isAvailable:!1,message:"This room is currently not available"}})(),fi=Number((e=>{if(!Y||!X||!e)return 0;const o=fe()(X).format("YYYY-MM-DD"),i=null===w||void 0===w?void 0:w.find(e=>fe()(e.date).format("YYYY-MM-DD")===o);if(!i)switch(e){case"rateFor1Night":return Y.rateFor1Night||0;case"rateFor3Hour":return Y.rateFor3Hour||0;case"rateFor6Hour":return Y.rateFor6Hour||0;case"rateFor12Hour":return Y.rateFor12Hour||0;default:return 0}switch(e){case"rateFor1Night":return i.overnightRate||Y.rateFor1Night||0;case"rateFor3Hour":return i.threeHourRate||Y.rateFor3Hour||0;case"rateFor6Hour":return i.sixHourRate||Y.rateFor6Hour||0;case"rateFor12Hour":return i.twelveHourRate||Y.rateFor12Hour||0;default:return 0}})((()=>{if("hourly"!==E)return"rateFor1Night";switch(eo){case 3:default:return"rateFor3Hour";case 6:return"rateFor6Hour";case 12:return"rateFor12Hour"}})()));(0,j.useEffect)(()=>{Number(Ae)!==mi&&Se(mi.toString())},[Ce,He,Y]),(0,j.useEffect)(()=>{null!==T&&void 0!==T&&T.id&&gi()},[null===T||void 0===T?void 0:T.id]),(0,j.useEffect)(()=>{M&&(oi(M),M.mealPlanPrice&&li(M.mealPlanPrice),M.mealPlanDescription&&ri(M.mealPlanDescription))},[M]);const gi=async()=>{if(null!==T&&void 0!==T&&T.id){bo(!0);try{var e,o,i;const t={data:{filter:"",hotelId:parseInt(T.id),isActive:!0},page:0,pageSize:1e3,order:[["createdAt","ASC"]]},n=await(0,ke.cz)(t);let l=[];if(null!==n&&void 0!==n&&null!==(e=n.data)&&void 0!==e&&null!==(o=e.data)&&void 0!==o&&o.rows?l=n.data.data.rows:null!==n&&void 0!==n&&null!==(i=n.data)&&void 0!==i&&i.data?l=n.data.data:null!==n&&void 0!==n&&n.data&&(l=Array.isArray(n.data)?n.data:[n.data]),go(l),l.length>0){const e=l[0];Do({id:e.id,hotelId:e.hotelId,roomId:e.roomId,discountType:e.discountType,discountValue:parseFloat(e.discountValue)||0,isActive:e.isActive}),jo(!0),je.oR.success("Hotel discount applied: ".concat(e.discountValue).concat("percentage"===e.discountType?"%":"\u20b9"," off"))}}catch(t){console.error("Error fetching hotel discounts:",t),je.oR.error("Failed to load hotel discounts")}finally{bo(!1)}}};(0,j.useEffect)(()=>{(0,ze.M3)()&&Ai()},[]);const Ai=async()=>{try{var e;const o=await(0,ke.E$)(),i=null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.data;lo(i),null!==i&&void 0!==i&&i._id&&bi(i._id)}catch(o){console.log("Error loading profile:",o),je.oR.error("Failed to load user profile")}},bi=async e=>{if(e){qo(!0);try{var o;const i=await(0,ke.dt)(e);let n=[];null!==i&&void 0!==i&&null!==(o=i.data)&&void 0!==o&&o.data&&Array.isArray(i.data.data)?n=i.data.data:Array.isArray(null===i||void 0===i?void 0:i.data)&&(n=i.data);const l=n.map(e=>e.gst_detail&&"object"===typeof e.gst_detail?(0,t.A)((0,t.A)({},e.gst_detail),{},{mappingId:e.id,userId:e.userId,gstId:e.gstId,isPrimary:e.isPrimary||!1,mappingCreatedAt:e.createdAt,mappingUpdatedAt:e.updatedAt}):e);_o(l);const s=l.filter(e=>!0===e.verified||"Active"===e.gstStatus);if(s.length>0){const e=s[0];Xo(e),No(e.gstNumber||""),Ho(e.legalName||e.tradeName||""),Go(e.address||""),Vo("verified"),Mo(!0),je.oR.success("Auto-selected GST: ".concat(e.gstNumber))}else l.length>0&&Mo(!0)}catch(i){console.error("Error loading GST records:",i)}finally{qo(!1)}}},yi=e=>{Xo(e),No(e.gstNumber||""),Ho(e.legalName||""),Go(e.address||""),Vo(!0===e.verified||"Active"===e.gstStatus?"verified":"none"),Ko(!1),je.oR.success("Selected GSTIN: ".concat(e.gstNumber))},ji=()=>{Xo(null),No(""),Ho(""),Go(""),Vo("none"),Ko(!1),je.oR.info("GST selection cleared")},Si=()=>{if(!X||!q)return 1;const e=fe()(X,"YYYY-MM-DD",!0),o=fe()(q,"YYYY-MM-DD",!0);if(!e.isValid()||!o.isValid())return 1;const i=o.diff(e,"day");return Math.max(1,i)},Di=Si(),ki=(()=>{if(ei&&!Ge&&!Ve&&!Ee){let e;if("hourly"===E){e=mi*(eo/3)}else e=mi*Di;const o=ni*mi*("hourly"===E?1:Di),i=(ei.basePrice,we(ei.basePrice||0,o,{hotelDiscountValue:yo&&(null===So||void 0===So?void 0:So.discountValue)||0,hotelDiscountType:yo&&(null===So||void 0===So?void 0:So.discountType)||null,couponApplied:Io,couponValue:.05}));return(0,t.A)((0,t.A)({},i),{},{nights:Di,totalMultiplier:e,bookingType:E,slotDuration:eo,requiredRooms:mi,unitBase:(ei.basePrice||0)/mi/("hourly"===E?eo/3:Di),totalMealPlanPrice:o,mealPlanDescription:si})}let e;if("hourly"===E){e=mi*(eo/3)}else e=mi*Di;const o=ni*mi*("hourly"===E?1:Di),i=we(fi*e,o,{hotelDiscountValue:yo&&(null===So||void 0===So?void 0:So.discountValue)||0,hotelDiscountType:yo&&(null===So||void 0===So?void 0:So.discountType)||null,couponApplied:Io,couponValue:.05});return(0,t.A)((0,t.A)({},i),{},{nights:Di,totalMultiplier:e,bookingType:E,slotDuration:eo,requiredRooms:mi,unitBase:fi,totalMealPlanPrice:o,mealPlanDescription:si})})(),{basePrice:Ci,mealPlanPrice:Ii,gstOnBase:zi,platformFee:Ti,gstOnPlatform:Yi,convenienceFee:Ri,gstOnConvenience:Pi,totalWithoutDiscount:Mi,hotelDiscount:wi,couponDiscount:Ni,totalDiscount:Fi,finalPrice:Hi,unitBase:Wi,mealPlanDescription:Gi}=ki,Oi=Ci+Ii,Vi=Oi+Ti,Bi=zi+Yi+Ri+Pi,Ei=Number(Hi.toFixed(2)),Li=Ti,_i=Yi/2,Ui=Yi/2,Xi=Ri+Pi,Zi=Ei,qi=async()=>{try{if(!Zi||Zi<=0)return void je.oR.error("Booking amount cannot be zero.");const e=(null===T||void 0===T?void 0:T.id)||(null===T||void 0===T?void 0:T._id);if(!e)return void je.oR.error("Hotel information is missing");let o=null;"verified"===Oo&&wo&&(o={gstNumber:wo,legalName:Fo,address:Wo,verified:!0,gstRecordId:(null===Uo||void 0===Uo?void 0:Uo.id)||(null===Uo||void 0===Uo?void 0:Uo._id),gstStatus:(null===Uo||void 0===Uo?void 0:Uo.gstStatus)||"Active"});const i={hotelDiscount:yo?{discountId:null===So||void 0===So?void 0:So.id,discountType:null===So||void 0===So?void 0:So.discountType,discountValue:null===So||void 0===So?void 0:So.discountValue,discountAmount:wi}:null,couponDiscount:Io?{couponCode:ko,discountValue:.05,discountAmount:Ni}:null,totalDiscount:Fi},t={amount:Math.round(Zi),currency:"INR",metadata:{gstDetails:o,discountDetails:i,bookingType:E,hotelId:e,roomId:(null===Y||void 0===Y?void 0:Y.id)||(null===Y||void 0===Y?void 0:Y._id),mealPlan:ii,mealPlanPrice:Ii,mealPlanDescription:Gi,checkinDate:X,checkOutDate:q,checkinTime:_,slotDuration:eo,rooms:mi,adults:Ce,children:He,extraGuestCount:xi,extraGuestCharge:hi,guestsPerRoom:pi,bookingDetails:{propertyName:null===T||void 0===T?void 0:T.propertyName,roomCategory:null===Y||void 0===Y?void 0:Y.roomCategory,address:null===T||void 0===T?void 0:T.address,checkInDate:fe()(X).format("DD MMM YYYY"),checkOutDate:fe()(q).format("DD MMM YYYY"),duration:"hourly"===E?"".concat(eo," hours"):"".concat(Di," nights")}}},n=await(0,ke.fS)(t);null!==n&&void 0!==n&&n.data?mo(n.data):je.oR.error("Payment failed. Please try again.")}catch(e){console.error("Error during payment:",e),je.oR.error("Payment failed. Please try again.")}},$i=(0,ye.Zp)(),Ki=(0,ge.Wx)({initialValues:{name:no.userName||"",email:no.email||"",phoneNumber:no.phoneNumber?"91".concat(no.phoneNumber):"91"},validationSchema:Me,enableReinitialize:!0,onSubmit:e=>{if(Ro(null),vi.isAvailable){var o,i,t;if(!e.name.trim())return Ro("Guest name is required"),null===(o=ai.current)||void 0===o||o.focus(),void(null===(i=ai.current)||void 0===i||i.scrollIntoView({behavior:"smooth",block:"center"}));if(!e.phoneNumber||"91"===e.phoneNumber||e.phoneNumber.length<12)return Ro("Valid phone number is required"),void(null===(t=di.current)||void 0===t||t.scrollIntoView({behavior:"smooth",block:"center"}));if(xo)if((0,ze.M3)())qi();else{const o={name:e.name,email:e.email,phone:e.phoneNumber.slice(2)};(0,ke.AJ)(o).then(o=>{var i;ro(!0),(0,je.oR)("OTP sent successfully. Please verify the OTP."),co({phone:e.phoneNumber.slice(2),name:e.name,email:e.email,token:null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.data})}).catch(e=>{console.log(e)})}else Ro("Please accept Terms & Conditions before proceeding.")}else Ro(vi.message)}}),Qi=async()=>{try{const o=(0,ze.F6)(),i=(null===Uo||void 0===Uo?void 0:Uo.id)||(null===Uo||void 0===Uo?void 0:Uo._id);if(o&&i){var e;const t={userId:o},n=await(0,ke.yZ)(i,t);null!==n&&void 0!==n&&null!==(e=n.data)&&void 0!==e&&e.success&&(je.oR.success("GST record linked to your account!"),bi(o))}qi()}catch(o){console.error("Error updating GST with user ID:",o),je.oR.error("Could not link GST to account. Proceeding with payment..."),qi()}},Ji=(0,j.useRef)(null),[et,ot]=(0,j.useState)("auto");(0,j.useEffect)(()=>{Ji.current&&ot("".concat(Ji.current.clientHeight,"px"))},[T,Di,eo]);const it=(()=>{const e=[];for(let o=0;o<24;o++)for(let i=0;i<60;i+=30){const t="".concat(o.toString().padStart(2,"0"),":").concat(i.toString().padStart(2,"0"));e.push({value:t,label:fe()(t,"HH:mm").format("hh:mm A")})}return e})(),tt=()=>{const e=""!==Ki.values.name.trim(),o=Ki.values.phoneNumber&&"91"!==Ki.values.phoneNumber&&Ki.values.phoneNumber.length>=12,i=xo,t=vi.isAvailable;return e&&o&&i&&t},nt=(e,o)=>{Ki.setFieldValue(e,o),Ki.setFieldTouched(e,!0),Yo&&Ro(null)},lt=()=>{const e=fe()(X).format("YYYY-MM-DD");return(null===w||void 0===w?void 0:w.find(o=>fe()(o.date).format("YYYY-MM-DD")===e))?"Dynamic Inventory Pricing":"Standard Rate"},st=e=>"percentage"===e?(0,z.jsx)(ie,{}):(0,z.jsx)(te,{}),rt=e=>"percentage"===e?"% off":"\u20b9 off";return(0,z.jsxs)(n.A,{sx:(0,t.A)((0,t.A)({},Ye.VX),{},{background:"#f6f6f6",mt:0,py:4,px:{xs:1,md:3},display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"center",gap:"20px"}),children:[(0,z.jsx)(l.A,{sx:{p:1,background:"white",maxWidth:"700px",border:"none",boxShadow:0,borderRadius:"12px"},children:(0,z.jsxs)(s.A,{children:[(0,z.jsx)(r.A,{variant:"h6",gutterBottom:!0,sx:{color:Ie.A.firstColor,fontWeight:"bold"},children:"Your Booking Summary"}),!vi.isAvailable&&(0,z.jsxs)(a.A,{severity:"error",sx:{mb:2,borderRadius:2,"& .MuiAlert-message":{fontSize:"14px",fontWeight:500}},children:[vi.message,(0,z.jsx)(d.A,{variant:"outlined",size:"small",sx:{ml:2},onClick:()=>$i(-1),children:"Go Back"})]}),(0,z.jsxs)(n.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:{xs:0,md:2},position:"relative",mt:2,height:"fit-content",alignItems:"stretch"},children:[(0,z.jsx)(c.A,{component:"img",sx:{width:{xs:"100%",md:"250px"},borderRadius:"12px",objectFit:"cover",height:et,transition:"height 0.3s ease"},image:null===T||void 0===T||null===(C=T.propertyImages)||void 0===C?void 0:C[0]}),(0,z.jsxs)("div",{style:{height:"fit-content"},ref:Ji,children:[(0,z.jsx)(r.A,{sx:{fontSize:"20px",fontWeight:600,color:Ie.A.firstColor,mt:{xs:1.5,md:1},display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitLineClamp:1,WebkitBoxOrient:"vertical"},children:null===T||void 0===T?void 0:T.propertyName}),(0,z.jsx)(r.A,{sx:{fontFamily:"CustomFontSB",fontSize:{xs:"12px",md:"14px"},display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitLineClamp:1,WebkitBoxOrient:"vertical"},children:null===T||void 0===T?void 0:T.address}),(0,z.jsx)(r.A,{sx:{fontSize:14,color:Ie.A.forthColor,fontStyle:"italic",mb:1,mt:.5},children:"hourly"===E?"Hourly Booking":"Daily/Overnight Booking"}),(0,z.jsxs)("div",{style:{marginTop:"10px",display:"flex",flexWrap:"wrap",flexDirection:"column",gap:"4px"},children:[(0,z.jsx)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:Ge?(0,z.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,z.jsx)(u.A,{type:"date",size:"small",value:_e,onChange:e=>{Ue(e.target.value),oi(null)},InputLabelProps:{shrink:!0},sx:{width:150},InputProps:{sx:{height:36}}}),(0,z.jsx)(m.A,{size:"small",onClick:()=>{if(_e)if(fe()(_e,"YYYY-MM-DD",!0).isValid())if("hourly"===E)Z(_e),Oe(!1),je.oR.success("Check-in date updated");else{if(fe()(_e).isAfter(fe()(Xe)))return void je.oR.error("Check-in date cannot be after check-out date");Z(_e),Oe(!1),je.oR.success("Check-in date updated")}else je.oR.error("Invalid date format. Please use YYYY-MM-DD format");else je.oR.error("Please select a check-in date")},sx:{color:"green"},children:(0,z.jsx)(ne,{})}),(0,z.jsx)(m.A,{size:"small",onClick:()=>{Ue(X),Oe(!1)},sx:{color:"red"},children:(0,z.jsx)(le.A,{})})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(r.A,{sx:Fe,children:[(0,z.jsx)("strong",{children:"Check-In Date:"})," ",fe()(X,"YYYY-MM-DD").format("DD MMM YYYY")]}),(0,z.jsx)(m.A,{size:"small",onClick:()=>{Ue(X),Oe(!0)},sx:{ml:-1},children:(0,z.jsx)(se.A,{fontSize:"small"})})]})}),"hourly"===E&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(n.A,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:Ee?(0,z.jsxs)(n.A,{sx:{display:"flex",flexDirection:"column",gap:1,width:"100%"},children:[(0,z.jsx)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:(0,z.jsxs)(x.A,{size:"small",sx:{minWidth:120},children:[(0,z.jsx)(h.A,{children:"Check-in Time"}),(0,z.jsx)(p.A,{value:qe,onChange:e=>$e(e.target.value),label:"Check-in Time",children:it.map(e=>(0,z.jsx)(v.A,{value:e.value,children:e.label},e.value))})]})}),(0,z.jsxs)(n.A,{sx:{display:"flex",gap:1},children:[(0,z.jsx)(m.A,{size:"small",onClick:()=>{qe?qe.match(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/)?(U(qe),oo(io),Le(!1),je.oR.success("Check-in time and duration updated")):je.oR.error("Invalid time format. Please use HH:mm format"):je.oR.error("Please select a check-in time")},sx:{color:"green"},children:(0,z.jsx)(ne,{})}),(0,z.jsx)(m.A,{size:"small",onClick:()=>{$e(_),to(eo),Le(!1)},sx:{color:"red"},children:(0,z.jsx)(le.A,{})})]})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(r.A,{sx:Fe,children:[(0,z.jsx)("strong",{children:"Check-In Time:"})," ",_&&fe()(_,"HH:mm",!0).isValid()?fe()(_,"HH:mm").format("hh:mm A"):"12:00 PM"]}),(0,z.jsx)(m.A,{size:"small",onClick:()=>{$e(_),to(eo),Le(!0)},sx:{ml:-1},children:(0,z.jsx)(se.A,{fontSize:"small"})})]})}),(0,z.jsxs)(r.A,{sx:Fe,children:[(0,z.jsx)("strong",{children:"Check-Out Time:"})," ",fe()("".concat(X," ").concat(_),"YYYY-MM-DD HH:mm").add(eo,"hour").format("DD MMM YYYY hh:mm A")]})]}),"hourly"!==E&&(0,z.jsx)(n.A,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:Ve?(0,z.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,z.jsx)(u.A,{type:"date",size:"small",value:Xe,onChange:e=>{Ze(e.target.value),oi(null)},InputLabelProps:{shrink:!0},sx:{width:150},InputProps:{sx:{height:36}}}),(0,z.jsx)(m.A,{size:"small",onClick:()=>{Xe?fe()(Xe,"YYYY-MM-DD",!0).isValid()?fe()(Xe).isBefore(fe()(_e))?je.oR.error("Check-out date cannot be before check-in date"):(ve(Xe),Be(!1),je.oR.success("Check-out date updated")):je.oR.error("Invalid date format. Please use YYYY-MM-DD format"):je.oR.error("Please select a check-out date")},sx:{color:"green"},children:(0,z.jsx)(ne,{})}),(0,z.jsx)(m.A,{size:"small",onClick:()=>{Ze(q),Be(!1)},sx:{color:"red"},children:(0,z.jsx)(le.A,{})})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(r.A,{sx:Fe,children:[(0,z.jsx)("strong",{children:"Check-Out Date:"})," ",fe()(q,"YYYY-MM-DD").format("DD MMM YYYY")]}),(0,z.jsx)(m.A,{size:"small",onClick:()=>{Ze(q),Be(!0)},sx:{ml:-1},children:(0,z.jsx)(se.A,{fontSize:"small"})})]})}),"hourly"===E?(0,z.jsxs)(r.A,{sx:Fe,children:[(0,z.jsx)("strong",{children:"Duration: "}),eo," hrs"]}):(0,z.jsxs)(r.A,{sx:Fe,children:[(0,z.jsx)("strong",{children:"Nights: "}),Di," night",Di>1?"s":""]}),(0,z.jsxs)(r.A,{sx:Fe,children:[(0,z.jsx)("strong",{children:"Room type:"})," ",null===Y||void 0===Y?void 0:Y.roomCategory]}),ni>0&&Gi&&(0,z.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,z.jsxs)(r.A,{sx:(0,t.A)((0,t.A)({},Fe),{},{bgcolor:"#e8f5e9",border:"1px solid #c8e6c9"}),children:[(0,z.jsx)("strong",{children:"Meal Plan:"})," ",Gi]}),(0,z.jsx)(re.A,{fontSize:"small",sx:{color:Ie.A.firstColor}})]}),(0,z.jsx)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:(0,z.jsxs)(r.A,{sx:Fe,children:[(0,z.jsx)("strong",{children:"Room Info: "}),mi," Room",mi&&mi>1?"s":"",",",Ce," Adult",Ce&&Number(Ce)>1?"s":"",",",He," Child",He&&Number(He)>1?"ren":""]})}),(0,z.jsxs)(r.A,{sx:{fontSize:12,color:Ie.A.forthColor,mt:1,fontStyle:"italic"},children:[lt()," \u2022 Price may vary by date and availability"]})]})]})]}),(0,z.jsxs)(n.A,{sx:{mt:2,p:1.5,bgcolor:"#f5f5f5",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[(0,z.jsx)(r.A,{variant:"caption",sx:{fontWeight:600,color:Ie.A.forthColor,display:"block",mb:.5},children:"Room Occupancy Rules"}),(0,z.jsxs)(n.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[(0,z.jsxs)(r.A,{variant:"caption",sx:{bgcolor:"#e3f2fd",color:"#1976d2",px:1,py:.5,borderRadius:"4px"},children:["Standard: ",(null===Y||void 0===Y?void 0:Y.standardRoomOccupancy)||1," guest",(null===Y||void 0===Y?void 0:Y.standardRoomOccupancy)>1?"s":""]}),(0,z.jsxs)(r.A,{variant:"caption",sx:{bgcolor:"#fff3e0",color:"#f57c00",px:1,py:.5,borderRadius:"4px"},children:["Maximum: ",(null===Y||void 0===Y?void 0:Y.maxRoomOccupancy)||1," guest",(null===Y||void 0===Y?void 0:Y.maxRoomOccupancy)>1?"s":""]}),(0,z.jsxs)(r.A,{variant:"caption",sx:{bgcolor:"#e8f5e9",color:"#2e7d32",px:1,py:.5,borderRadius:"4px"},children:["Your Guest: ",Number(Ce)+Number(He)," guest",Number(Ce)+Number(He)>1?"s":""]}),(0,z.jsxs)(r.A,{variant:"caption",sx:{bgcolor:"#f3e5f5",color:"#7b1fa2",px:1,py:.5,borderRadius:"4px"},children:["Rooms needed: ",mi]})]}),pi&&pi.length>0&&(0,z.jsxs)(n.A,{sx:{mt:2},children:[(0,z.jsx)(r.A,{variant:"caption",sx:{fontWeight:600,color:Ie.A.forthColor,display:"block",mb:.5},children:"Room-wise Guest Distribution:"}),(0,z.jsx)(n.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:pi.map((e,o)=>{const i=(null===Y||void 0===Y?void 0:Y.standardRoomOccupancy)||1,t=e>i?e-i:0;return(0,z.jsxs)(r.A,{variant:"caption",sx:{bgcolor:t>0?"#ffebee":"#e8f5e9",color:t>0?"#c62828":"#2e7d32",px:1,py:.5,borderRadius:"4px"},children:["Room ",o+1,": ",e," guest",1!==e?"s":"",t>0&&" (+".concat(t," extra)")]},o)})})]}),xi>0&&(0,z.jsxs)(n.A,{sx:{mt:1.5,p:1,bgcolor:"#fff3e0",borderRadius:"6px",border:"1px solid #ffcc80"},children:[(0,z.jsxs)(r.A,{variant:"caption",sx:{fontWeight:600,color:"#e65100",display:"flex",alignItems:"center",gap:.5,mb:1},children:[(0,z.jsx)(ae,{fontSize:"small"}),"Additional Guest Charges (Payable at Property):"]}),(0,z.jsxs)(n.A,{sx:{ml:2,mt:.5},children:[(0,z.jsxs)(r.A,{variant:"caption",sx:{display:"block"},children:["\u2022 ",xi," extra guest",xi>1?"s":""," across ",mi," room",mi>1?"s":"","(Standard occupancy: ",(null===Y||void 0===Y?void 0:Y.standardRoomOccupancy)||1," guest",(null===Y||void 0===Y?void 0:Y.standardRoomOccupancy)>1?"s":""," per room)"]}),(0,z.jsxs)(r.A,{variant:"caption",sx:{display:"block",fontWeight:600,color:"#e65100",mt:.5},children:["\u2022 Total extra charge: \u20b9 ",hi.toFixed(2)]}),(0,z.jsx)(r.A,{variant:"caption",sx:{display:"block",color:"#666",mt:.5},children:"Note: This amount will be collected directly by the property during check-in."})]})]})]}),Yo&&(0,z.jsx)(a.A,{severity:"error",sx:{mt:3,mb:2,borderRadius:2,"& .MuiAlert-message":{fontSize:"14px",fontWeight:500}},onClose:()=>Ro(null),children:Yo}),(0,z.jsxs)("form",{onSubmit:Ki.handleSubmit,children:[(0,z.jsx)(r.A,{variant:"h6",mt:4,sx:{color:Ie.A.firstColor,fontWeight:"bold"},children:"Guest Information"}),(0,z.jsx)(Ye.XY,{label:"Guest Name *",name:"name",fullWidth:!0,margin:"normal",value:Ki.values.name,onChange:e=>nt("name",e.target.value),onBlur:Ki.handleBlur,error:Ki.touched.name&&Boolean(Ki.errors.name),helperText:Ki.touched.name&&Ki.errors.name?String(Ki.errors.name):" ",inputRef:ai,sx:{"& .MuiFormHelperText-root":{color:"red",fontSize:"12px",marginLeft:1,marginTop:.5,fontWeight:500},"& .MuiOutlinedInput-root":{"&.Mui-error fieldset":{borderColor:"red",borderWidth:"2px"}}}}),(0,z.jsxs)(n.A,{sx:{display:"flex",flexDirection:"column",width:{xs:"100%",md:"100%"}},children:[(0,z.jsx)(be(),{country:"in",onlyCountries:["in"],disableDropdown:!0,countryCodeEditable:!1,enableSearch:!1,value:Ki.values.phoneNumber,placeholder:"Phone Number",onChange:e=>Ki.setFieldValue("phoneNumber",e),onBlur:()=>Ki.setFieldTouched("phoneNumber",!0),inputStyle:{width:"100%",height:"56px",borderRadius:"52px",border:"none",outline:"none",boxShadow:"4px 4px 10px rgba(104, 39, 184, 0.17)",color:Ie.A.firstColor,paddingLeft:"60px",fontSize:"16px",backgroundColor:"white"},buttonStyle:{borderRadius:"52px 0 0 52px",backgroundColor:"white",border:"none"},containerStyle:{width:"100%"},dropdownStyle:{borderRadius:"12px"}}),Ki.touched.phoneNumber&&Ki.errors.phoneNumber&&(0,z.jsx)(r.A,{sx:{color:"red",fontSize:"12px",mt:.5,ml:"14px"},children:Ki.errors.phoneNumber})]}),(0,z.jsx)(Ye.XY,{label:"Email Address (Optional)",name:"email",fullWidth:!0,margin:"normal",value:Ki.values.email,onChange:e=>nt("email",e.target.value),onBlur:Ki.handleBlur,error:Ki.touched.email&&Boolean(Ki.errors.email),helperText:Ki.touched.email&&Ki.errors.email?String(Ki.errors.email):" ",sx:{"& .MuiFormHelperText-root":{fontSize:"12px",marginLeft:1,marginTop:.5}}}),(0,z.jsxs)(n.A,{sx:{mt:3,mb:2},children:[(0,z.jsx)(r.A,{variant:"subtitle1",sx:{color:Ie.A.firstColor,fontWeight:"bold",mb:1},children:"Available Discounts"}),fo.length>0&&(0,z.jsx)(n.A,{sx:{mb:2},children:yo?(0,z.jsxs)(n.A,{sx:{p:2,borderRadius:2,bgcolor:"#e8f5e9",border:"1px solid #c8e6c9",display:"flex",alignItems:"center",justifyContent:"space-between",animation:So?"fadeInScale 0.5s ease-out":"none","@keyframes fadeInScale":{"0%":{opacity:0,transform:"scale(0.95)"},"100%":{opacity:1,transform:"scale(1)"}}},children:[(0,z.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,z.jsx)(de,{color:"success"}),(0,z.jsxs)(n.A,{children:[(0,z.jsx)(r.A,{sx:{fontWeight:600,color:"#2e7d32"},children:"Hotel Discount Applied"}),(0,z.jsxs)(r.A,{variant:"body2",sx:{color:"#388e3c",display:"flex",alignItems:"center",gap:.5},children:[st((null===So||void 0===So?void 0:So.discountType)||"flat"),(null===So||void 0===So?void 0:So.discountValue)||0,rt((null===So||void 0===So?void 0:So.discountType)||"flat")]}),(0,z.jsxs)(r.A,{variant:"caption",sx:{color:"#666",display:"block",mt:.5},children:["You saved \u20b9 ",wi.toFixed(2)]})]})]}),(0,z.jsx)(d.A,{variant:"outlined",color:"error",size:"small",onClick:()=>{Do(null),jo(!1),je.oR.info("Hotel discount removed")},children:"Remove"})]}):(0,z.jsxs)(n.A,{sx:{p:2,borderRadius:2,bgcolor:"#e3f2fd",border:"1px solid #bbdefb",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,z.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,z.jsx)(de,{color:"primary"}),(0,z.jsxs)(n.A,{children:[(0,z.jsx)(r.A,{sx:{fontWeight:600,color:"#1565c0"},children:"Hotel Discount Available"}),(0,z.jsxs)(r.A,{variant:"body2",sx:{color:"#1976d2",display:"flex",alignItems:"center",gap:.5},children:[st(fo[0].discountType),fo[0].discountValue,rt(fo[0].discountType)]})]})]}),(0,z.jsx)(d.A,{variant:"contained",sx:{background:Ie.A.firstColor},size:"small",onClick:()=>{if(fo.length>0&&!yo){const e=fo[0];Do({id:e.id,hotelId:e.hotelId,roomId:e.roomId,discountType:e.discountType,discountValue:parseFloat(e.discountValue)||0,isActive:e.isActive}),jo(!0),je.oR.success("Hotel discount applied: ".concat(e.discountValue).concat("percentage"===e.discountType?"%":"\u20b9"," off"))}},children:"Apply"})]})}),Io?(0,z.jsxs)(n.A,{sx:{p:2,borderRadius:2,bgcolor:"#e8f5e9",border:"1px solid #c8e6c9",display:"flex",alignItems:"center",justifyContent:"space-between",animation:Io?"fadeInScale 0.5s ease-out":"none"},children:[(0,z.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,z.jsx)(ce,{color:"success"}),(0,z.jsxs)(n.A,{children:[(0,z.jsx)(r.A,{sx:{fontWeight:600,color:"#2e7d32"},children:"Huts4u Discount Applied"}),(0,z.jsxs)(r.A,{variant:"caption",sx:{color:"#666",display:"block",mt:.5},children:["You saved \u20b9 ",Ni.toFixed(2)]})]})]}),(0,z.jsx)(d.A,{variant:"outlined",color:"error",size:"small",onClick:()=>{zo(!1),je.oR.info("Huts4u Discount removed")},children:"Remove"})]}):(0,z.jsxs)(n.A,{sx:{p:2,borderRadius:2,bgcolor:"#fff3e0",border:"1px solid #ffcc80",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,z.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,z.jsx)(ce,{color:"warning"}),(0,z.jsxs)(n.A,{children:[(0,z.jsx)(r.A,{sx:{fontWeight:600,color:"#e65100"},children:"Huts4u Discount Available"}),(0,z.jsx)(r.A,{variant:"body2",sx:{color:"#e65100"},children:"5% off on total amount"})]})]}),(0,z.jsx)(d.A,{variant:"contained",sx:{background:Ie.A.firstColor},size:"small",onClick:()=>{zo(!0),je.oR.success("Huts4u Discount applied!")},children:"Apply"})]}),(yo||Io)&&(0,z.jsxs)(n.A,{sx:{mt:2,p:1.5,borderRadius:2,bgcolor:"#f5f0ff",border:"1px solid #d1c4e9",animation:"slideInFromLeft 0.5s ease-out","@keyframes slideInFromLeft":{"0%":{opacity:0,transform:"translateX(-20px)"},"100%":{opacity:1,transform:"translateX(0)"}}},children:[(0,z.jsx)(r.A,{sx:{fontSize:14,fontWeight:600,color:Ie.A.firstColor,mb:.5},children:"Total Discounts Applied:"}),(0,z.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,z.jsx)(r.A,{variant:"body2",sx:{color:"#666"},children:"Total savings:"}),(0,z.jsxs)(r.A,{variant:"body2",sx:{fontWeight:600,color:"#2e7d32",animation:Fi>0?"pulse 1s ease-in-out":"none","@keyframes pulse":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(1.1)"},"100%":{transform:"scale(1)"}}},children:["\u20b9 ",Fi.toFixed(2)]})]})]})]}),(0,z.jsxs)(n.A,{sx:{mt:3,mb:2},children:[(0,z.jsxs)(n.A,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},mb:1,gap:{xs:1,sm:0}},children:[(0,z.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,z.jsx)(r.A,{variant:"subtitle1",sx:{color:Ie.A.firstColor,fontWeight:"bold",fontSize:{xs:"1rem",sm:"1.1rem"}},children:"GST Details(Optional)"}),wo&&(0,z.jsx)(f.A,{label:"GST Added \u2713",color:"success",size:"small",icon:(0,z.jsx)(ue,{}),sx:{fontSize:{xs:"0.7rem",sm:"0.8rem"},height:{xs:28,sm:32}}})]}),(0,z.jsx)(n.A,{sx:{display:"flex",gap:1,width:{xs:"100%",sm:"auto"}},children:wo?(0,z.jsxs)(n.A,{sx:{display:"flex",gap:1},children:[(0,z.jsx)(d.A,{size:"small",variant:"outlined",onClick:ji,sx:{textTransform:"none",fontSize:{xs:"0.75rem",sm:"0.875rem"},minWidth:{xs:"80px",sm:"100px"},whiteSpace:"nowrap",borderColor:"#ff6b6b",color:"#ff6b6b","&:hover":{bgcolor:"#ffeaea",borderColor:"#ff4444"}},children:"Remove"}),(0,z.jsx)(d.A,{size:"small",variant:"outlined",onClick:()=>Mo(!Po),sx:{textTransform:"none",fontSize:{xs:"0.75rem",sm:"0.875rem"},minWidth:{xs:"100px",sm:"120px"},whiteSpace:"nowrap",borderColor:Ie.A.firstColor,color:Ie.A.firstColor,"&:hover":{bgcolor:"#f5f0ff"}},children:Po?"Hide Details":"Change GST"})]}):(0,z.jsx)(d.A,{size:"small",variant:Po?"outlined":"contained",onClick:()=>{Mo(!Po),(0,ze.M3)()&&!Po&&bi((0,ze.F6)())},sx:{textTransform:"none",fontSize:{xs:"0.75rem",sm:"0.875rem"},minWidth:{xs:"100px",sm:"120px"},whiteSpace:"nowrap",bgcolor:Po?"transparent":Ie.A.firstColor,color:Po?Ie.A.firstColor:"white",borderColor:Po?Ie.A.firstColor:"transparent","&:hover":{bgcolor:Po?"#f5f0ff":Ie.A.firstColor,borderColor:Ie.A.firstColor}},children:Po?"Cancel":"Add GST"})})]}),!wo&&!Po&&(0,z.jsx)(n.A,{sx:{p:{xs:1,sm:1.5},borderRadius:1.5,bgcolor:"#f0f7ff",border:"1px solid #cce5ff",mb:2},children:(0,z.jsxs)(r.A,{variant:"body2",sx:{color:"#0066cc",fontSize:{xs:"0.8rem",sm:"0.9rem"},display:"flex",alignItems:"center",gap:1},children:[(0,z.jsx)(me.A,{fontSize:"small"}),"Need a business invoice? Add your GST details to get a tax invoice with your booking."]})}),Po&&(0,z.jsxs)(n.A,{sx:{p:{xs:1.5,sm:2},borderRadius:2,bgcolor:"#f8f9fa",border:"1px solid #dee2e6",animation:"slideDown 0.3s ease-out"},children:[Zo&&(0,z.jsx)(n.A,{sx:{display:"flex",justifyContent:"center",my:2},children:(0,z.jsx)(g.A,{size:24})}),(0,ze.M3)()&&Lo.length>0&&!$o&&(0,z.jsxs)(n.A,{sx:{mb:3},children:[(0,z.jsxs)(r.A,{variant:"body2",sx:{mb:1.5,color:Ie.A.forthColor,fontWeight:600,display:"flex",alignItems:"center",gap:1,fontSize:{xs:"0.85rem",sm:"0.9rem"}},children:[(0,z.jsx)(me.A,{fontSize:"small"}),"Your Saved GST Records:"]}),(0,z.jsx)(n.A,{sx:{p:{xs:1,sm:2},borderRadius:2,bgcolor:"white",border:"1px solid #e0e0e0",maxHeight:{xs:"250px",sm:"300px"},overflowY:"auto"},children:0===Lo.length?(0,z.jsxs)(n.A,{sx:{p:3,textAlign:"center",color:"#666"},children:[(0,z.jsx)(me.A,{sx:{fontSize:40,color:"#ddd",mb:1}}),(0,z.jsx)(r.A,{variant:"body2",children:"No saved GST records found"}),(0,z.jsx)(r.A,{variant:"caption",children:"Add your first GSTIN to save it for future bookings"})]}):Lo.map((e,o)=>{const i=!0===e.verified||"Active"===e.gstStatus,t=(null===Uo||void 0===Uo?void 0:Uo.id)===e.id||(null===Uo||void 0===Uo?void 0:Uo._id)===e._id;return(0,z.jsx)(n.A,{sx:{p:{xs:1,sm:1.5},mb:1.5,borderRadius:2,border:t?"2px solid ".concat(Ie.A.firstColor):"1px solid #ddd",backgroundColor:t?"#f3e5f5":"white",cursor:"pointer","&:hover":{borderColor:Ie.A.firstColor,backgroundColor:"#faf5ff"}},onClick:()=>yi(e),children:(0,z.jsxs)(n.A,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},gap:{xs:1,sm:0}},children:[(0,z.jsxs)(n.A,{sx:{flex:1,width:"100%"},children:[(0,z.jsxs)(n.A,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"flex-start",sm:"center"},gap:{xs:.5,sm:1},mb:.5},children:[(0,z.jsx)(r.A,{variant:"body2",sx:{fontWeight:600,fontSize:{xs:"0.85rem",sm:"0.9rem"}},children:e.gstNumber}),(0,z.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:.5,flexWrap:"wrap"},children:[i&&(0,z.jsx)(A.A,{title:"Verified GST",children:(0,z.jsx)(ue,{fontSize:"small",color:"success"})}),e.gstStatus&&(0,z.jsx)(f.A,{label:e.gstStatus,size:"small",color:"Active"===e.gstStatus?"success":"error",variant:"outlined",sx:{height:20,fontSize:"0.65rem"}})]})]}),(0,z.jsx)(r.A,{variant:"caption",sx:{color:"#666",display:"block",mb:.5,fontSize:{xs:"0.75rem",sm:"0.8rem"}},children:e.legalName}),(0,z.jsx)(r.A,{variant:"caption",sx:{color:"#888",display:"block",fontSize:{xs:"0.7rem",sm:"0.75rem"}},children:e.address})]}),(0,z.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:.5,width:{xs:"100%",sm:"auto"},justifyContent:{xs:"flex-end",sm:"flex-start"},mt:{xs:1,sm:0}},children:[t?(0,z.jsx)(f.A,{label:"Selected",size:"small",color:"success",icon:(0,z.jsx)(ne,{}),sx:{height:24,fontSize:"0.7rem"}}):(0,z.jsx)(d.A,{size:"small",variant:"outlined",onClick:o=>{o.stopPropagation(),yi(e)},sx:{fontSize:"0.75rem",minWidth:"70px"},children:"Select"}),(0,z.jsxs)(n.A,{sx:{display:"flex",gap:.5},children:[(0,z.jsx)(A.A,{title:"Copy GSTIN",children:(0,z.jsx)(m.A,{size:"small",sx:{fontSize:{xs:"0.8rem",sm:"1rem"}},onClick:o=>{var i;o.stopPropagation(),i=e.gstNumber,navigator.clipboard.writeText(i).then(()=>je.oR.success("GSTIN copied to clipboard")).catch(()=>je.oR.error("Failed to copy GSTIN"))},children:(0,z.jsx)(xe,{fontSize:"small"})})}),(0,z.jsx)(A.A,{title:"Remove from account",children:(0,z.jsx)(m.A,{size:"small",color:"error",sx:{fontSize:{xs:"0.8rem",sm:"1rem"}},onClick:o=>{o.stopPropagation(),(async e=>{if((0,ze.M3)()){if(window.confirm("Are you sure you want to remove this GST from your account?")){Jo(e);try{var o;const i={userId:(0,ze.F6)()},t=await(0,ke.Av)(e,i.userId);null!==t&&void 0!==t&&null!==(o=t.data)&&void 0!==o&&o.success?(je.oR.success("GST removed from your account"),_o(o=>o.filter(o=>o.id!==e&&o._id!==e)),!Uo||Uo.id!==e&&Uo._id!==e||ji()):je.oR.error("Failed to remove GST")}catch(i){console.error("Error deleting GST:",i),je.oR.error("Failed to remove GST")}finally{Jo(null)}}}else je.oR.error("Please login to manage GST records")})(e.id||e._id)},disabled:Qo===(e.id||e._id),children:Qo===(e.id||e._id)?(0,z.jsx)(g.A,{size:16}):(0,z.jsx)(he,{fontSize:"small"})})})]})]})]})},e._id||e.id||o)})}),(0,z.jsx)(n.A,{sx:{display:"flex",justifyContent:"center",mt:2},children:(0,z.jsx)(d.A,{startIcon:(0,z.jsx)(pe.A,{}),variant:"outlined",onClick:()=>{Ko(!0),No(""),Ho(""),Go(""),Vo("none"),Xo(null)},sx:{textTransform:"none",fontSize:{xs:"0.8rem",sm:"0.875rem"}},children:"Add New GST"})})]}),($o||!(0,ze.M3)()||(0,ze.M3)()&&0===Lo.length)&&(0,z.jsxs)(n.A,{children:[(0,z.jsx)(r.A,{variant:"body2",sx:{mb:2,color:Ie.A.forthColor,fontWeight:600,fontSize:{xs:"0.9rem",sm:"1rem"}},children:$o?"Add New GSTIN":"Enter GSTIN for Business Invoice"}),(0,z.jsxs)(n.A,{sx:{mb:2},children:[(0,z.jsxs)(n.A,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"stretch",sm:"center"},gap:{xs:1,sm:1},mb:1},children:[(0,z.jsx)(Ye.XY,{label:"GSTIN Number",fullWidth:!0,value:wo,onChange:e=>{const o=e.target.value.toUpperCase();if(No(o),15===o.length){/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/i.test(o)||(je.oR.error("Invalid GSTIN format. Please check the number."),Vo("invalid"))}},placeholder:"Enter 15-digit GSTIN",inputRef:ci,disabled:"verified"===Oo,sx:{flex:1},size:"small"}),(0,z.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:["verified"===Oo&&(0,z.jsx)(A.A,{title:"GSTIN Verified",children:(0,z.jsx)(ue,{color:"success",sx:{fontSize:{xs:24,sm:28}}})}),(0,z.jsx)(d.A,{variant:"contained",size:"small",onClick:async()=>{var e;if(!wo.trim())return je.oR.error("Please enter GSTIN number"),void(null===(e=ci.current)||void 0===e||e.focus());if(!/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/i.test(wo.toUpperCase()))return je.oR.error("Please enter a valid 15-digit GSTIN format"),void Vo("invalid");Eo(!0),Vo("pending");try{var o,i;const e=(0,ze.M3)()?(0,ze.F6)():null,u=(0,t.A)({gstNumber:wo.toUpperCase()},e&&{userId:e}),m=await(0,ke.Lb)(u);if(null!==m&&void 0!==m&&null!==(o=m.data)&&void 0!==o&&o.data){var n,l,s,r;const o=(null===(n=m.data)||void 0===n?void 0:n.data)||(null===(l=m.data)||void 0===l?void 0:l.result);Vo("verified"),Ho((null===o||void 0===o?void 0:o.legalName)||(null===o||void 0===o?void 0:o.lgnm)||""),Go((null===o||void 0===o?void 0:o.address)||(null===o||void 0===o||null===(s=o.pradr)||void 0===s?void 0:s.adr)||"");const i=(0,t.A)((0,t.A)({},o),{},{id:null===o||void 0===o?void 0:o.id,gstNumber:(null===o||void 0===o?void 0:o.gstNumber)||wo.toUpperCase(),legalName:(null===o||void 0===o?void 0:o.legalName)||(null===o||void 0===o?void 0:o.lgnm)||"",address:(null===o||void 0===o?void 0:o.address)||(null===o||void 0===o||null===(r=o.pradr)||void 0===r?void 0:r.adr)||"",verified:!0});Xo(i),je.oR.success("GSTIN verified successfully!"),e&&bi(e)}else if("BAD_REQUEST"===(null===m||void 0===m||null===(i=m.data)||void 0===i?void 0:i.status)){var a;const o=(null===(a=m.data)||void 0===a?void 0:a.message)||"GST verification failed";if(o.includes("already exists")){var d;const o=null===(d=m.data)||void 0===d?void 0:d.data;if(e&&null!==o&&void 0!==o&&o.id)try{var c;const i=await(0,ke.yZ)(o.id,{userId:e});null!==i&&void 0!==i&&null!==(c=i.data)&&void 0!==c&&c.success&&je.oR.success("GST linked to your account!")}catch(x){console.error("Error updating GST user ID:",x)}Vo("verified"),No(o.gstNumber||wo.toUpperCase()),Ho(o.legalName||""),Go(o.address||""),Xo(o),je.oR.info("Using existing GST record")}else Vo("invalid"),je.oR.error(o)}else Vo("invalid"),je.oR.error("GST verification failed. Please try again.")}catch(h){var u,m;if(console.error("GST verification error:",h),Vo("invalid"),"BAD_REQUEST"===(null===(u=h.response)||void 0===u||null===(m=u.data)||void 0===m?void 0:m.status)){const e=h.response.data;null!==e&&void 0!==e&&e.data?(Vo("verified"),Ho(e.data.legalName||""),Go(e.data.address||""),Xo(e.data),je.oR.info("Using existing GST record")):je.oR.error((null===e||void 0===e?void 0:e.message)||"Invalid GST number")}else je.oR.error("Failed to verify GST. Please check your internet connection.")}finally{Eo(!1)}},disabled:Bo||"verified"===Oo||15!==wo.length,sx:{textTransform:"none",bgcolor:Ie.A.firstColor,fontSize:{xs:"0.75rem",sm:"0.875rem"},minWidth:{xs:"100px",sm:"120px"},height:{xs:"36px",sm:"40px"}},startIcon:Bo?(0,z.jsx)(g.A,{size:16,color:"inherit"}):null,children:Bo?"Verifying...":"verified"===Oo?"Verified":"Verify"})]})]}),"invalid"===Oo&&(0,z.jsx)(a.A,{severity:"error",sx:{mt:1,fontSize:"0.8rem",py:.5},children:"Invalid GSTIN format. Please enter a valid 15-digit GSTIN."}),wo.length>0&&wo.length<15&&(0,z.jsx)(r.A,{variant:"caption",sx:{color:"warning.main",display:"block",mt:.5,fontSize:"0.75rem"},children:"Enter 15-digit GSTIN to verify"})]}),"verified"===Oo&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Ye.XY,{label:"Legal Business Name",fullWidth:!0,margin:"normal",size:"small",value:Fo,onChange:e=>Ho(e.target.value),InputProps:{startAdornment:(0,z.jsx)(A.A,{title:"Verified",children:(0,z.jsx)(ue,{color:"success",sx:{mr:1,fontSize:20}})})},sx:{mb:2}}),(0,z.jsx)(Ye.XY,{label:"Registered Business Address",fullWidth:!0,margin:"normal",size:"small",multiline:!0,rows:2,value:Wo,onChange:e=>Go(e.target.value),InputProps:{startAdornment:(0,z.jsx)(A.A,{title:"Verified",children:(0,z.jsx)(ue,{color:"success",sx:{mr:1,fontSize:20}})})},sx:{mb:2}}),(0,z.jsxs)(a.A,{severity:"success",sx:{mb:2,fontSize:"0.9rem"},icon:(0,z.jsx)(ue,{}),children:[(0,z.jsx)(r.A,{variant:"body2",sx:{fontWeight:600},children:"GSTIN verified successfully!"}),(0,z.jsx)(r.A,{variant:"caption",children:"This GST will be added to your invoice"})]}),(0,ze.M3)()&&(0,z.jsx)(r.A,{variant:"caption",sx:{color:"#666",display:"block",textAlign:"center",mt:1,fontSize:"0.8rem"},children:"This GST record will be saved to your account for future bookings"})]}),(0,ze.M3)()&&Lo.length>0&&$o&&(0,z.jsx)(n.A,{sx:{display:"flex",justifyContent:"center",mt:2},children:(0,z.jsx)(d.A,{variant:"text",size:"small",onClick:()=>{Ko(!1),No(""),Ho(""),Go(""),Vo("none")},sx:{textTransform:"none",fontSize:"0.8rem"},children:"\u2190 Back to Saved GST Records"})})]}),Uo&&(0,z.jsxs)(a.A,{severity:"success",sx:{mt:2,fontSize:"0.9rem"},icon:(0,z.jsx)(ne,{}),children:[(0,z.jsx)(r.A,{variant:"body2",sx:{fontWeight:600},children:"Selected GST for Invoice:"}),(0,z.jsxs)(n.A,{sx:{ml:1,mt:.5},children:[(0,z.jsx)(r.A,{variant:"body2",sx:{fontWeight:600},children:Uo.gstNumber}),(0,z.jsx)(r.A,{variant:"caption",sx:{color:"#388e3c",display:"block"},children:Uo.legalName}),(0,z.jsx)(r.A,{variant:"caption",sx:{color:"#666",display:"block",mt:.5},children:Uo.address})]}),(0,z.jsx)(n.A,{sx:{display:"flex",justifyContent:"flex-end",mt:1},children:(0,z.jsx)(d.A,{size:"small",color:"error",onClick:ji,sx:{fontSize:"0.75rem"},children:"Remove GST"})})]}),!wo&&(0,z.jsx)(n.A,{sx:{p:{xs:1,sm:1.5},borderRadius:1.5,bgcolor:"#f0f7ff",border:"1px solid #cce5ff",mt:2},children:(0,z.jsxs)(r.A,{variant:"body2",sx:{color:"#0066cc",fontSize:{xs:"0.8rem",sm:"0.9rem"},display:"flex",alignItems:"center",gap:1},children:[(0,z.jsx)(Pe.A,{fontSize:"small"}),(0,z.jsx)("strong",{children:"Optional:"})," Add GST only if you need a business invoice. You can proceed without GST for personal bookings."]})})]})]}),(0,z.jsx)(n.A,{sx:{mt:2},children:(0,z.jsx)(b.A,{control:(0,z.jsx)($,{checked:xo,onChange:e=>{ho(e.target.checked),Yo&&e.target.checked&&Ro(null)},color:"primary"}),label:(0,z.jsxs)("span",{children:["I accept the"," ",(0,z.jsx)("span",{style:{color:Ie.A.firstColor,cursor:"pointer",textDecoration:"underline"},onClick:()=>vo(!0),children:"Terms & Conditions"})]})})}),(0,z.jsx)(De.A,{variant:"contained",color:"primary",fullWidth:!0,sx:{mt:2,opacity:tt()?1:.7,"&:disabled":{backgroundColor:"#e0e0e0",color:"#9e9e9e",cursor:"not-allowed"}},type:"submit",disabled:!tt(),children:(0,ze.M3)()?"Pay Now":"Verify Phone & Pay"}),(0,z.jsx)(Re.A,{open:so,onClose:()=>ro(!1),onVerificationSuccess:()=>{ro(!1),"verified"===Oo&&Uo&&(0,ze.M3)()&&!Uo.userId?Qi():qi()},phone:ao.phone,name:ao.name,email:ao.email,token:ao.token}),uo&&(0,z.jsx)(Te,{orderDetails:uo,amount:Zi,bookingDetails:{hotel:T,room:Y,guestInfo:Ki.values,gstDetails:"verified"===Oo?{gstNumber:wo,legalName:Fo,address:Wo,verified:!0,gstRecordId:(null===Uo||void 0===Uo?void 0:Uo.id)||(null===Uo||void 0===Uo?void 0:Uo._id),gstStatus:(null===Uo||void 0===Uo?void 0:Uo.gstStatus)||"Active"}:null,discountDetails:{hotelDiscount:yo?{discountId:null===So||void 0===So?void 0:So.id,discountType:null===So||void 0===So?void 0:So.discountType,discountValue:null===So||void 0===So?void 0:So.discountValue,discountAmount:wi}:null,couponDiscount:Io?{couponCode:ko,discountValue:.05,discountAmount:Ni}:null,totalDiscount:Fi},timing:(()=>{if("hourly"===E&&_&&X&&eo){const e=fe()("".concat(X," ").concat(_),"YYYY-MM-DD HH:mm"),o=e.add(eo,"hour");return{checkInDate:e.format("DD MMM YYYY"),checkInTime:e.format("hh:mm A"),checkOutDate:o.format("DD MMM YYYY"),checkOutTime:o.format("hh:mm A"),duration:"".concat(eo," hrs"),bookingType:"hourly"}}{const e=Si();return{checkInDate:fe()(X,"YYYY-MM-DD").format("DD MMM YYYY"),checkInTime:"12:00 PM",checkOutDate:fe()(q,"YYYY-MM-DD").format("DD MMM YYYY"),checkOutTime:"11:00 AM",duration:"".concat(e," night").concat(e>1?"s":""),bookingType:"daily"}}})(),pricingDetails:(0,t.A)((0,t.A)({},ki),{},{nights:Di,rooms:mi.toString(),adults:Ce,children:He,bookingType:E,checkinDate:X,checkOutDate:q,checkinTime:_,slotDuration:eo,extraGuestCount:xi,extraGuestCharge:hi,guestsPerRoom:pi,inventoryData:w,unitBase:Wi,mealPlan:ii,mealPlanPrice:Ii,mealPlanDescription:Gi}),bookingType:E,rooms:mi.toString(),adults:Ce,children:He}})]})]})}),(0,z.jsx)(l.A,{sx:{p:1,background:"white",border:"none",boxShadow:0,borderRadius:"12px",height:"fit-content",minWidth:{md:"350px"}},children:(0,z.jsxs)(s.A,{children:[(0,z.jsx)(r.A,{variant:"h6",gutterBottom:!0,sx:{color:Ie.A.firstColor,fontWeight:"bold"},children:"Your Bill Summary"}),(yo||Io)&&(0,z.jsxs)(n.A,{sx:{mb:2,p:1.5,bgcolor:"#e8f5e9",borderRadius:1,border:"1px solid #c8e6c9",display:"flex",alignItems:"center",gap:1},children:[(0,z.jsx)(de,{color:"success",fontSize:"small"}),(0,z.jsxs)(n.A,{children:[(0,z.jsx)(r.A,{variant:"body2",sx:{fontWeight:600,color:"#2e7d32"},children:"Discounts Applied"}),(0,z.jsxs)(r.A,{variant:"caption",sx:{color:"#388e3c",display:"block"},children:["Total savings: \u20b9 ",Fi.toFixed(2)]}),(0,z.jsxs)(n.A,{sx:{display:"flex",gap:1,mt:.5},children:[yo&&(0,z.jsx)(f.A,{size:"small",label:"Hotel Discount: \u20b9 ".concat(wi.toFixed(2)),color:"success",variant:"outlined"}),Io&&(0,z.jsx)(f.A,{size:"small",label:"Huts4u: \u20b9 ".concat(Ni.toFixed(2)),color:"primary",variant:"outlined"})]})]})]}),"verified"===Oo&&(0,z.jsxs)(n.A,{sx:{mb:2,p:1.5,bgcolor:"#e8f5e9",borderRadius:1,border:"1px solid #c8e6c9",display:"flex",alignItems:"center",gap:1},children:[(0,z.jsx)(ue,{color:"success",fontSize:"small"}),(0,z.jsxs)(n.A,{children:[(0,z.jsx)(r.A,{variant:"body2",sx:{fontWeight:600,color:"#2e7d32"},children:"GST Invoice Enabled"}),(0,z.jsxs)(r.A,{variant:"caption",sx:{color:"#388e3c",display:"block"},children:["GSTIN: ",wo]}),(0,z.jsx)(r.A,{variant:"caption",sx:{color:"#666",display:"block"},children:Fo})]})]}),(null===M||void 0===M?void 0:M.mealPlanPrice)>0&&(null===M||void 0===M?void 0:M.mealPlanDescription)&&(0,z.jsxs)(n.A,{sx:{mb:2,p:1.5,bgcolor:"#fff3e0",borderRadius:1,border:"1px solid #ffcc80",display:"flex",alignItems:"center",gap:1},children:[(0,z.jsx)(re.A,{color:"warning",fontSize:"small"}),(0,z.jsxs)(n.A,{children:[(0,z.jsx)(r.A,{variant:"body2",sx:{fontWeight:600,color:"#e65100"},children:"Meal Plan Included"}),(0,z.jsx)(r.A,{variant:"caption",sx:{color:"#e65100",display:"block"},children:M.mealPlanDescription}),(0,z.jsx)(r.A,{variant:"caption",sx:{color:"#666",display:"block"},children:"Meal charges included in base price"})]})]}),(0,z.jsxs)(n.A,{sx:{mb:2,p:1.5,bgcolor:"#e3f2fd",borderRadius:1,border:"1px solid #bbdefb"},children:[(0,z.jsx)(r.A,{variant:"body2",sx:{fontWeight:600,color:"#1565c0"},children:lt()}),(0,z.jsx)(r.A,{variant:"caption",sx:{color:"#1976d2",display:"block",mt:.5},children:"hourly"===E?"".concat(eo," hrs \u2022 ").concat(mi," room").concat(mi&&mi>1?"s":""):"".concat(Di," night").concat(Di>1?"s":""," \u2022 ").concat(mi," room").concat(mi&&mi>1?"s":"")}),(null===M||void 0===M?void 0:M.mealPlanPrice)>0&&(0,z.jsxs)(r.A,{variant:"caption",sx:{color:"#e65100",fontWeight:600,mt:.5,display:"block"},children:["\u2713 ",M.mealPlanDescription," Included"]}),Io&&(0,z.jsx)(r.A,{variant:"caption",sx:{color:"green",fontWeight:600,mt:.5,display:"block"},children:"\u2713  Huts4u Discount Applied"}),yo&&(0,z.jsx)(r.A,{variant:"caption",sx:{color:"#2e7d32",fontWeight:600,mt:.5,display:"block"},children:"\u2713  Hotel Discount Applied"})]}),xi>0&&(0,z.jsxs)(n.A,{sx:{mb:2,p:1.5,bgcolor:"#fff3e0",borderRadius:"8px",border:"1px solid #ffcc80"},children:[(0,z.jsxs)(r.A,{variant:"caption",sx:{fontWeight:600,color:"#e65100",display:"flex",alignItems:"center",gap:.5,mb:1},children:[(0,z.jsx)(ae,{fontSize:"small"}),"Additional Guest Charges"]}),(0,z.jsxs)(r.A,{variant:"body2",sx:{ml:2},children:[xi," extra guest",xi>1?"s":"",": \u20b9 ",hi.toFixed(2)]}),(0,z.jsx)(r.A,{variant:"caption",sx:{display:"block",color:"#666",mt:1,fontStyle:"italic"},children:"Note: This amount will be collected directly by the property during check-in."})]}),(0,z.jsxs)("div",{style:{marginTop:"10px",display:"flex",flexWrap:"wrap",flexDirection:"column",gap:"8px",alignItems:"flex-end"},children:[(0,z.jsx)(r.A,{sx:{fontSize:"24px",color:Ie.A.firstColor,fontWeight:"bold",animation:yo?"priceDropAnimation 0.6s ease-out":"none","@keyframes priceDropAnimation":{"0%":{opacity:0,transform:"scale(0.9)"},"70%":{opacity:1,transform:"scale(1.05)"},"100%":{opacity:1,transform:"scale(1)"}}},children:Vi>0?"\u20b9 ".concat(Vi.toFixed(0)):"\u2014"}),(0,z.jsx)(r.A,{sx:{fontSize:"13px",color:Ie.A.forthColor,textAlign:"right"},children:Bi>0?(0,z.jsxs)(z.Fragment,{children:["+ \u20b9",Bi.toFixed(0)," taxes & fees"]}):"\u2014"}),(0,z.jsx)(K.A,{sx:{width:"100%",mt:1}}),(0,z.jsxs)("div",{style:{width:"100%",textAlign:"right"},children:[(0,z.jsxs)(r.A,{sx:{fontSize:13,color:Ie.A.forthColor},children:["Subtotal before discount: \u20b9 ",Mi.toFixed(2)]}),yo&&wi>0&&(0,z.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:1,animation:"slideInDiscount 0.5s ease-out","@keyframes slideInDiscount":{"0%":{opacity:0,transform:"translateX(-20px)"},"100%":{opacity:1,transform:"translateX(0)"}}},children:[(0,z.jsx)(r.A,{sx:{fontSize:14,color:"#2e7d32",fontWeight:600},children:"Hotel Discount:"}),(0,z.jsxs)(r.A,{sx:{fontSize:14,color:"#2e7d32",fontWeight:600,animation:"discountFlash 0.8s ease-in-out","@keyframes discountFlash":{"0%, 100%":{color:"#2e7d32"},"50%":{color:"#4caf50"}}},children:["- \u20b9 ",wi.toFixed(2)]})]}),Io&&Ni>0&&(0,z.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:1,animation:"slideInDiscount 0.5s ease-out 0.2s",animationFillMode:"both"},children:[(0,z.jsx)(r.A,{sx:{fontSize:14,color:"green",fontWeight:600},children:"Huts4u Discount:"}),(0,z.jsxs)(r.A,{sx:{fontSize:14,color:"green",fontWeight:600,animation:"discountFlash 0.8s ease-in-out 0.3s",animationFillMode:"both"},children:["- \u20b9 ",Ni.toFixed(2)]})]}),(0,z.jsx)(r.A,{sx:{fontSize:"16px",color:Ie.A.firstColor,fontWeight:"700",mt:wi>0||Ni>0?1:0,animation:yo||Io?"bounceIn 0.8s ease-out":"none","@keyframes bounceIn":{"0%":{opacity:0,transform:"scale(0.3)"},"50%":{opacity:1,transform:"scale(1.05)"},"70%":{transform:"scale(0.95)"},"100%":{opacity:1,transform:"scale(1)"}}},children:Hi>0?"Final: \u20b9 ".concat(Ei.toFixed(2)):"---"})]})]}),(0,z.jsxs)(n.A,{sx:{mt:3,borderRadius:2,border:"1px dashed #ddd",p:2,backgroundColor:"#fafafa"},children:[(0,z.jsx)(r.A,{sx:{fontSize:13,fontWeight:600,mb:1,color:Ie.A.forthColor},children:"Detailed Breakup"}),(0,z.jsxs)(r.A,{sx:{fontSize:13},children:[(0,z.jsx)("strong",{children:"1. Base Price"}),(0,z.jsxs)("span",{style:{float:"right"},children:["\u20b9 ",(Ci+Ii+zi).toFixed(2)]})]}),(0,z.jsxs)(r.A,{sx:{fontSize:13,mt:1},children:[(0,z.jsx)("strong",{children:"2. Service Charges"}),(0,z.jsx)("span",{style:{fontSize:11},children:" (HSN 996111)"}),(0,z.jsxs)("span",{style:{float:"right"},children:["\u20b9 ",Li.toFixed(2)]})]}),(0,z.jsxs)(r.A,{sx:{fontSize:12,ml:2,mt:.3},children:["CGST @ 9% on Service",(0,z.jsxs)("span",{style:{float:"right"},children:["\u20b9 ",_i.toFixed(2)]})]}),(0,z.jsxs)(r.A,{sx:{fontSize:12,ml:2},children:["SGST @ 9% on Service",(0,z.jsxs)("span",{style:{float:"right"},children:["\u20b9 ",Ui.toFixed(2)]})]}),(0,z.jsxs)(r.A,{sx:{fontSize:13,mt:1},children:[(0,z.jsx)("strong",{children:"3. Convenience Fees (Incl. GST)"}),(0,z.jsxs)("span",{style:{float:"right"},children:["\u20b9 ",Xi.toFixed(2)]})]}),(0,z.jsx)(K.A,{sx:{my:1.5}}),(0,z.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,z.jsx)(r.A,{sx:{fontSize:14,fontWeight:600},children:"Subtotal:"}),(0,z.jsxs)(r.A,{sx:{fontSize:14,fontWeight:600},children:["\u20b9 ",Mi.toFixed(2)]})]}),(yo||Io)&&(0,z.jsxs)(z.Fragment,{children:[yo&&wi>0&&(0,z.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",mb:1,animation:yo?"slideInLeft 0.5s ease-out":"none","@keyframes slideInLeft":{"0%":{opacity:0,transform:"translateX(-20px)"},"100%":{opacity:1,transform:"translateX(0)"}}},children:[(0,z.jsx)(r.A,{sx:{fontSize:14,fontWeight:600,color:"#2e7d32"},children:"Hotel Discount:"}),(0,z.jsxs)(r.A,{sx:{fontSize:14,fontWeight:600,color:"#2e7d32",animation:yo?"discountPulse 1s ease-in-out":"none","@keyframes discountPulse":{"0%, 100%":{transform:"scale(1)"},"50%":{transform:"scale(1.1)"}}},children:["- \u20b9 ",wi.toFixed(2)]})]}),Io&&Ni>0&&(0,z.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",mb:1.5,animation:Io?"slideInLeft 0.5s ease-out 0.2s":"none",animationFillMode:"both"},children:[(0,z.jsx)(r.A,{sx:{fontSize:14,fontWeight:600,color:"green"},children:"Huts4u Discount:"}),(0,z.jsxs)(r.A,{sx:{fontSize:14,fontWeight:600,color:"green",animation:Io?"discountPulse 1s ease-in-out 0.3s":"none",animationFillMode:"both"},children:["- \u20b9 ",Ni.toFixed(2)]})]}),(0,z.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",mb:1.5,animation:Fi>0?"slideInLeft 0.5s ease-out 0.4s":"none",animationFillMode:"both"},children:[(0,z.jsx)(r.A,{sx:{fontSize:14,fontWeight:600},children:"Total Discount:"}),(0,z.jsxs)(r.A,{sx:{fontSize:14,fontWeight:600,color:"red",animation:Fi>0?"highlightDiscount 1s ease-in-out":"none","@keyframes highlightDiscount":{"0%":{color:"red"},"50%":{color:"#ff6b6b"},"100%":{color:"red"}}},children:["- \u20b9 ",Fi.toFixed(2)]})]})]}),(0,z.jsx)(K.A,{sx:{my:1}}),(0,z.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,z.jsx)(r.A,{sx:{fontSize:14,fontWeight:600},children:"Total After Discount:"}),(0,z.jsxs)(r.A,{sx:{fontSize:14,fontWeight:600,color:Ie.A.firstColor},children:["\u20b9 ",(Mi-Fi).toFixed(2)]})]}),(0,z.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:1.5,pt:1.5,borderTop:"1px solid #ddd",animation:Hi>0?"finalTotalAnimation 0.8s ease-out":"none","@keyframes finalTotalAnimation":{"0%":{opacity:0,transform:"translateY(10px)"},"100%":{opacity:1,transform:"translateY(0)"}}},children:[(0,z.jsx)(r.A,{sx:{fontSize:16,fontWeight:700,color:Ie.A.firstColor},children:"Total Payable"}),(0,z.jsxs)(r.A,{sx:{fontSize:18,fontWeight:700,color:Ie.A.firstColor,animation:Hi>0?"totalBounce 0.8s ease-out":"none","@keyframes totalBounce":{"0%":{transform:"scale(0.8)"},"50%":{transform:"scale(1.1)"},"100%":{transform:"scale(1)"}}},children:["\u20b9 ",Zi.toFixed(2)]})]}),(0,z.jsxs)(n.A,{sx:{mt:1.5},children:[(yo||Io)&&(0,z.jsx)(n.A,{sx:{p:1.5,bgcolor:"#e8f5e9",borderRadius:1,border:"1px solid #c8e6c9",mb:1,animation:"slideInBottom 0.5s ease-out","@keyframes slideInBottom":{"0%":{opacity:0,transform:"translateY(20px)"},"100%":{opacity:1,transform:"translateY(0)"}}},children:(0,z.jsxs)(r.A,{sx:{fontSize:13,color:"#2e7d32",fontWeight:600,textAlign:"center"},children:["\ud83c\udf89 You saved \u20b9 ",Fi.toFixed(2)," with discounts!"]})}),"verified"===Oo&&(0,z.jsx)(n.A,{sx:{p:1.5,bgcolor:"#e8f5e9",borderRadius:1,border:"1px solid #c8e6c9",animation:"slideInBottom 0.5s ease-out 0.2s",animationFillMode:"both"},children:(0,z.jsxs)(r.A,{sx:{fontSize:13,color:"#2e7d32",fontWeight:600,textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[(0,z.jsx)(ue,{fontSize:"small"}),"GST Invoice will be generated with your booking"]})})]})]})]})}),(0,z.jsxs)(Q.A,{open:po,onClose:()=>vo(!1),maxWidth:"sm",fullWidth:!0,children:[(0,z.jsx)(J.A,{children:"Terms & Conditions"}),(0,z.jsxs)(ee.A,{children:[(0,z.jsx)(r.A,{variant:"body2",sx:{whiteSpace:"pre-line"},children:"\nBy booking, you agree to the property's terms and conditions, cancellation policy, and house rules.\nYou also agree to follow Huts4u's official Terms & Conditions mentioned on the link below.\nPlease ensure you have read and understood all applicable policies.\n"}),(0,z.jsx)(r.A,{variant:"body2",sx:{color:Ie.A.firstColor,textDecoration:"underline",cursor:"pointer",fontWeight:600},onClick:()=>window.open("https://huts4u.com/terms","_blank"),children:"Open Huts4u Terms & Conditions"})]}),(0,z.jsx)(oe.A,{children:(0,z.jsx)(d.A,{onClick:()=>{vo(!1)},children:"Close"})})]})]})},Fe={borderRadius:"52px",boxShadow:"4px 4px 10px rgba(104, 39, 184, 0.17)",color:Ie.A.firstColor,background:"white",fontSize:{xs:"12px",md:"14px"},width:"fit-content",p:1,px:2,mb:1}},84770:(e,o,i)=>{i.d(o,{A:()=>l});var t=i(59662),n=i(70579);const l=(0,t.A)((0,n.jsx)("path",{d:"M12 7V3H2v18h20V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8zm-2-8h-2v2h2zm0 4h-2v2h2z"}),"Business")},86687:(e,o,i)=>{i.d(o,{A:()=>l});var t=i(59662),n=i(70579);const l=(0,t.A)((0,n.jsx)("path",{d:"M11 9H9V2H7v7H5V2H3v7c0 2.12 1.66 3.84 3.75 3.97V22h2.5v-9.03C11.34 12.84 13 11.12 13 9V2h-2zm5-3v8h2.5v8H21V2c-2.76 0-5 2.24-5 4"}),"Restaurant")}}]);
//# sourceMappingURL=328.c02d9515.chunk.js.map