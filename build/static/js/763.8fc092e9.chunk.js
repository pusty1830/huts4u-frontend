"use strict";(self.webpackChunkhuts4u=self.webpackChunkhuts4u||[]).push([[763],{45763:(e,t,o)=>{o.r(t),o.d(t,{default:()=>se});var r=o(89379),n=o(91082),s=o(96509),a=o(41209),l=o(79484),i=o(19749),c=o(34535),d=o(84511),u=o(71828),p=o(85442),x=o(7353),h=o(94496),m=o(60446),f=o.n(m),g=o(90246),y=o(65043),b=o(73216),A=o(33580),j=o(31716),v=o(58390),C=o(72138),w=o(89302),S=o(70579);const k=e=>{let{date:t,setDate:o,label:r}=e;return(0,S.jsx)(v.$,{dateAdapter:w.R,children:(0,S.jsxs)(x.A,{sx:{display:"flex",flexDirection:"column",bgcolor:A.A.thirdColor,borderRadius:2,p:1,textAlign:"left",color:A.A.firstColor},children:[(0,S.jsx)(h.A,{sx:{px:"10px",fontSize:{xs:"14px",md:"16px"},fontFamily:"CustomFontM"},children:r}),(0,S.jsx)(C.$,{value:t,onChange:o,shouldDisableDate:e=>e.isBefore(f()(),"day"),slotProps:{textField:{sx:{bgcolor:A.A.thirdColor,borderRadius:2,maxWidth:"200px",border:"none",outline:"none",boxShadow:"none","& fieldset":{border:"none"},"&:hover":{bgcolor:"#f5f5f5"},"& .MuiInputBase-input":{padding:"0px 10px",color:A.A.firstColor,fontFamily:"CustomFontB",fontSize:{xs:"18px",md:"20px"}}}}}})]})})};var T=o(73285);const R=e=>{let{time:t,setTime:o,label:r,bookingType:n="hourly",checkinDate:s=null}=e;return(0,S.jsx)(v.$,{dateAdapter:w.R,children:(0,S.jsxs)(x.A,{sx:{display:"flex",flexDirection:"column",bgcolor:A.A.thirdColor,borderRadius:2,p:1,textAlign:"left",color:A.A.firstColor,minWidth:{xs:"80%",md:"auto"}},children:[(0,S.jsx)(h.A,{sx:{px:"10px",fontSize:{xs:"14px",md:"16px"},fontFamily:"CustomFontM"},children:r}),(0,S.jsx)(T.o,{value:t,onChange:e=>{o(e)},views:["hours"],slotProps:{textField:{sx:{bgcolor:A.A.thirdColor,borderRadius:2,width:"100%",border:"none",outline:"none",boxShadow:"none","& fieldset":{border:"none"},"&:hover":{bgcolor:"#f5f5f5"},"& .MuiInputBase-input":{padding:"0px 10px",color:A.A.firstColor,fontFamily:"CustomFontB",fontSize:{xs:"18px",md:"20px"}}}}}})]})})};var D=o(67784),z=o(95953),M=o(61596),F=o(35721),_=o(30681),P=o(48734),W=o(2050),B=o(83462),E=o(26600),I=o(35316),O=o(98533),L=o(29347),H=o(11906),Y=o(49800);var G=o(59007),N=o(69995),V=o(26372),q=o(99390),U=o(84770),$=o(59275),K=o(17289);const Q=G.AQ,X=e=>{let{label:t,onSelect:o,value:r,setValue:s}=e;const[a,l]=(0,y.useState)(r||""),[i,c]=(0,y.useState)([]),[d,u]=(0,y.useState)([]),[p,m]=(0,y.useState)(null),[f,g]=(0,y.useState)(!1),[b,j]=(0,y.useState)(!1),[v,C]=(0,y.useState)(!0),[w,k]=(0,y.useState)(!1),[T,R]=(0,y.useState)(!1),[X,Z]=(0,y.useState)([]),[J,ee]=(0,y.useState)(!1),te=(0,y.useRef)(null),oe=((0,y.useRef)(null),(0,y.useRef)(null)),re=(0,y.useRef)(!1),ne=G.j6;(0,y.useEffect)(()=>{(async()=>{try{var e,t;const o={data:{filter:"",status:"Approved"},page:0,pageSize:1e3,order:[["createdAt","ASC"]]},r=await(0,N.Vy)(o),n=((null===r||void 0===r||null===(e=r.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.rows)||[]).map(e=>({id:e.id,propertyName:e.propertyName||"",address:e.address||"",city:e.city||"",latitude:e.latitude||0,longitude:e.longitude||0,propertyType:e.propertyType||""}));Z(n),ee(!0),console.log("Hotels loaded for search:",n.length)}catch(o){console.error("Error fetching hotels:",o)}})()},[]);const se=(0,y.useCallback)(e=>{if(re.current)return void e();if(document.querySelector('script[src*="maps.googleapis.com/maps/api/js"]'))return re.current=!0,void setTimeout(e,100);g(!0);const t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=".concat(Q,"&libraries=places&callback=initMap"),t.async=!0,t.defer=!0,window.initMap=()=>{console.log("Google Maps initialized"),re.current=!0,g(!1),e()},t.onerror=()=>{console.error("Failed to load Google Maps script"),g(!1)},document.head.appendChild(t)},[]),ae=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),le=async()=>{j(!0);try{const e=await(async()=>{try{return navigator.geolocation?new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(t=>{const{latitude:o,longitude:r}=t.coords;e({latitude:o,longitude:r})},e=>{t(new Error(e.message))},{enableHighAccuracy:!0})}):"granted"===(await Y.L.requestPermissions({permissions:["location"]})).location?(await Y.L.getCurrentPosition({enableHighAccuracy:!0})).coords:null}catch(e){return null}})();let t,n;if(e&&"object"===typeof e&&("latitude"in e&&"longitude"in e?(t=e.latitude,n=e.longitude):"coords"in e&&e.coords?(t=e.coords.latitude,n=e.coords.longitude):"lat"in e&&"lng"in e&&(t=e.lat,n=e.lng)),void 0!==t&&void 0!==n)try{const e=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(n,",").concat(t,".json?access_token=").concat(ne)),r=await e.json();if(r.features&&r.features.length>0){const e=r.features[0].place_name;l(e),s(e),o({display_name:e,lat:t,lon:n,place_id:null,name:r.features[0].text,geometry:{location:{lat:()=>t,lng:()=>n}}})}}catch(r){console.error("Error fetching current location name:",r)}else console.warn("Could not extract coordinates from location:",e),C(!1),ae()||T||k(!0)}catch(r){var e,t;console.error("Error getting current location:",r),C(!1);(1===r.code||(null===(e=r.message)||void 0===e?void 0:e.includes("permission"))||(null===(t=r.message)||void 0===t?void 0:t.includes("denied")))&&(R(!0),ae()?console.log("Mobile location permission denied - user must enable in browser settings"):k(!0))}finally{j(!1)}},ie=()=>{k(!1),C(!1)};(0,y.useEffect)(()=>{r||le()},[r]),(0,y.useEffect)(()=>{if(Q)return se(()=>{if(window.google&&window.google.maps&&window.google.maps.places)try{const e=document.createElement("div");oe.current=new google.maps.places.PlacesService(e),console.log("Google Places Service initialized successfully")}catch(e){console.error("Error initializing Google Places Service:",e)}else console.error("Google Maps Places library not available")}),()=>{oe.current=null}},[se]),(0,y.useEffect)(()=>{l(r||"")},[r]);const ce=async e=>{try{var t;const o="85.74,20.21,85.9,20.32",r=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json?access_token=").concat(ne,"&autocomplete=true&bbox=").concat(o,"&limit=10&proximity=85.8245,20.2961")),n=(null===(t=(await r.json()).features)||void 0===t?void 0:t.map(e=>({place_id:e.id,formatted_address:e.place_name,name:e.text,geometry:{location:{lat:()=>e.center[1],lng:()=>e.center[0]}}})))||[];c(n)}catch(o){console.error("Error fetching Mapbox suggestions:",o),c([])}},de=e=>{if("hotel"!==e.type){const t=e.data.types||[];return t.includes("hotel")||t.includes("lodging")?(0,S.jsx)(V.A,{sx:{color:"#2196f3"}}):t.includes("restaurant")||t.includes("food")?(0,S.jsx)(K.A,{sx:{color:"#4caf50"}}):t.includes("shopping_mall")||t.includes("store")?(0,S.jsx)(U.A,{sx:{color:"#ff9800"}}):(0,S.jsx)(n.A,{sx:{color:"#f44336"}})}var t;switch(null===(t=e.data.propertyType)||void 0===t?void 0:t.toLowerCase()){case"hotel":return(0,S.jsx)(V.A,{sx:{color:"#1976d2"}});case"villa":return(0,S.jsx)(q.A,{sx:{color:"#4caf50"}});case"resort":return(0,S.jsx)(U.A,{sx:{color:"#ff9800"}});case"apartment":return(0,S.jsx)($.A,{sx:{color:"#9c27b0"}});default:return(0,S.jsx)(V.A,{sx:{color:"#757575"}})}},ue=[...d.map(e=>({type:"hotel",data:e,displayText:e.propertyName,address:e.address,city:e.city,propertyType:e.propertyType})),...i.map(e=>({type:"location",data:e,displayText:e.formatted_address||e.name,address:e.formatted_address,name:e.name,types:e.types||[]}))].sort((e,t)=>{if("hotel"===e.type&&"hotel"!==t.type)return-1;if("hotel"===t.type&&"hotel"!==e.type)return 1;const o=e.displayText.toLowerCase(),r=t.displayText.toLowerCase(),n=a.toLowerCase();return o===n&&r!==n?-1:r===n&&o!==n?1:o.startsWith(n)&&!r.startsWith(n)?-1:r.startsWith(n)&&!o.startsWith(n)?1:o.includes(n)&&!r.includes(n)?-1:r.includes(n)&&!o.includes(n)?1:o.localeCompare(r)});return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(x.A,{sx:{display:"flex",flexDirection:"column",bgcolor:A.A.thirdColor,borderRadius:2,p:1,textAlign:"left",color:A.A.firstColor,position:"relative"},children:[(0,S.jsxs)(h.A,{sx:{px:"10px",fontSize:{xs:"14px",md:"16px"},fontFamily:"CustomFontM",display:"flex",alignItems:"center",gap:1},children:[t,f&&" (loading Google Maps...)",b&&" (getting your location...)"]}),(0,S.jsx)(x.A,{sx:{display:"flex",alignItems:"center",color:A.A.firstColor,borderRadius:2,minWidth:{xs:"250px",md:"300px"}},children:(0,S.jsx)(D.A,{variant:"standard",InputProps:{disableUnderline:!0,inputProps:{autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-expanded":ue.length>0,"aria-controls":"location-suggestions-list"}},type:"text",value:a,onChange:async e=>{const t=e.target.value;if(l(t),m(e.currentTarget),t.trim())if(t.length>1){const e=(e=>{if(!e.trim()||!J)return[];const t=e.toLowerCase().trim();return X.filter(e=>e.propertyName.toLowerCase().includes(t)).slice(0,10)})(t);if(u(e),oe.current)try{const e=await(async e=>oe.current&&e.trim()?new Promise(t=>{var o;const r={query:e,location:new google.maps.LatLng(20.2961,85.8245),radius:5e4};null===(o=oe.current)||void 0===o||o.textSearch(r,(e,o)=>{if(o===google.maps.places.PlacesServiceStatus.OK&&e){const o=e.map(e=>({place_id:e.place_id,formatted_address:e.formatted_address,name:e.name,geometry:e.geometry,types:e.types||[]}));t(o)}else console.log("Google Places search status:",o),t([])})}):[])(t);c(e)}catch(o){console.error("Error fetching Google Places suggestions:",o),re.current&&window.google||ce(t)}else re.current&&window.google||ce(t)}else c([]),u([]);else s(null),c([]),u([])},placeholder:"Search hotels or locations in Bhubaneswar...",inputRef:te,fullWidth:!0,sx:{bgcolor:A.A.thirdColor,borderRadius:2,width:"100%",border:"none",outline:"none",boxShadow:"none","& fieldset":{border:"none"},"&:hover":{bgcolor:"#f5f5f5"},"& .MuiInputBase-input":{color:A.A.firstColor,fontFamily:"CustomFontB",fontSize:{xs:"18px",md:"20px"},width:"100%","&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px white inset",WebkitTextFillColor:A.A.firstColor}}}})}),!b&&!v&&(0,S.jsx)(x.A,{sx:{mt:1,px:"10px"},children:(0,S.jsx)(h.A,{onClick:()=>{ae()?alert("Please enable location services in your browser settings to use this feature."):le()},sx:{color:"primary.main",cursor:"pointer",textDecoration:"underline",fontSize:"12px",fontFamily:"CustomFontB",display:"inline-block"},children:"Use my current location"})}),ue.length>0&&(0,S.jsx)(z.A,{open:ue.length>0,anchorEl:p,placement:"bottom-start",modifiers:[{name:"preventOverflow",enabled:!0,options:{altAxis:!0,altBoundary:!0,tether:!0,rootBoundary:"document",padding:8}},{name:"offset",options:{offset:[0,8]}}],style:{zIndex:9999,position:"absolute"},sx:{width:"fit-content",maxWidth:"90vw",minWidth:{xs:"calc(100vw - 32px)",sm:"400px",md:"500px"},translate:{xs:"0 0",md:"-40px 10px"}},children:(0,S.jsx)(M.A,{id:"location-suggestions-list",sx:{width:"100%",maxHeight:"400px",overflow:"auto",boxShadow:"0 4px 20px rgba(0,0,0,0.15)",borderRadius:"8px",border:"1px solid #e0e0e0"},children:(0,S.jsxs)(F.A,{dense:!0,sx:{py:0},children:[(0,S.jsx)(_.Ay,{sx:{bgcolor:"#f8f9fa",borderBottom:"1px solid #e9ecef",py:.75,px:2},children:(0,S.jsx)(P.A,{primary:(0,S.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,S.jsx)(h.A,{sx:{fontSize:"12px",fontWeight:600,color:"#6c757d"},children:d.length>0&&i.length>0?"".concat(d.length," hotels & ").concat(i.length," locations found"):d.length>0?"".concat(d.length," hotels found"):"".concat(i.length," locations found")}),(0,S.jsx)(h.A,{sx:{fontSize:"10px",color:"#adb5bd"},children:"Press \u2b06\u2b07 to navigate, \u21b5 to select"})]})})}),ue.map((e,t)=>{var r,n,a,i;return(0,S.jsxs)(_.Ay,{component:"li",onClick:()=>{"hotel"===e.type?(e=>{const t=e.propertyName;l(t),u([]),c([]),s(t),o({display_name:t,lat:e.latitude||0,lon:e.longitude||0,place_id:null,name:e.propertyName,hotelId:e.id,address:e.address,city:e.city,type:"hotel"})})(e.data):(e=>{var t,r,n,a;const i=e.formatted_address||e.place_name;l(i),c([]),u([]),s(i),o({display_name:i,lat:(null===(t=e.geometry)||void 0===t||null===(r=t.location)||void 0===r?void 0:r.lat())||(e.center?e.center[1]:0),lon:(null===(n=e.geometry)||void 0===n||null===(a=n.location)||void 0===a?void 0:a.lng())||(e.center?e.center[0]:0),place_id:e.place_id,name:e.name,type:"location"})})(e.data)},sx:{cursor:"pointer","&:hover":{bgcolor:"rgba(0, 0, 0, 0.04)"},borderBottom:t<ue.length-1?"1px solid #f0f0f0":"none",py:1.5,px:2,transition:"background-color 0.2s","&:active":{bgcolor:"rgba(0, 0, 0, 0.08)"}},children:[(0,S.jsx)(W.A,{sx:{minWidth:44,color:"#666"},children:de(e)}),(0,S.jsx)(P.A,{primary:(0,S.jsxs)(x.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,S.jsxs)(x.A,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[(0,S.jsx)(h.A,{sx:{fontSize:"14px",fontWeight:600,color:"#212529",lineHeight:1.2},children:e.displayText}),"hotel"===e.type?(0,S.jsx)(h.A,{component:"span",sx:{fontSize:"10px",bgcolor:"Hotel"===e.data.propertyType?"#e3f2fd":"Villa"===e.data.propertyType?"#e8f5e9":"Resort"===e.data.propertyType?"#fff3e0":"Apartment"===e.data.propertyType?"#f3e5f5":"#f5f5f5",color:"Hotel"===e.data.propertyType?"#1976d2":"Villa"===e.data.propertyType?"#4caf50":"Resort"===e.data.propertyType?"#ff9800":"Apartment"===e.data.propertyType?"#9c27b0":"#757575",px:1,py:.25,borderRadius:"4px",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.5px"},children:e.data.propertyType||"Property"}):(0,S.jsx)(h.A,{component:"span",sx:{fontSize:"10px",bgcolor:"#f0f0f0",color:"#666",px:1,py:.25,borderRadius:"4px",fontWeight:500,textTransform:"capitalize"},children:null!==(r=e.data.types)&&void 0!==r&&r.includes("hotel")||null!==(n=e.data.types)&&void 0!==n&&n.includes("lodging")?"Hotel":null!==(a=e.data.types)&&void 0!==a&&a.includes("restaurant")?"Restaurant":null!==(i=e.data.types)&&void 0!==i&&i.includes("shopping_mall")?"Shopping":"Location"})]}),(0,S.jsxs)(h.A,{sx:{fontSize:"12px",color:"#6c757d",mt:.5,lineHeight:1.3,display:"flex",alignItems:"flex-start",gap:.5},children:[(0,S.jsx)(K.A,{sx:{fontSize:"12px",mt:"1px",flexShrink:0}}),"hotel"===e.type?"".concat(e.data.address||"").concat(e.data.city?", ".concat(e.data.city):"").trim():e.data.formatted_address||e.data.name]})]}),sx:{"& .MuiListItemText-primary":{marginBottom:0}}})]},"".concat(e.type,"-").concat(t,"-").concat(e.data.id||e.data.place_id))})]})})}),!Q&&(0,S.jsx)(h.A,{color:"error",fontSize:"12px",mt:1,px:"10px",children:"Error: Google Maps API key is missing"})]}),(0,S.jsxs)(B.A,{open:w&&!ae(),onClose:ie,children:[(0,S.jsx)(E.A,{children:"Location Access Required"}),(0,S.jsx)(I.A,{children:(0,S.jsx)(O.A,{children:"This app needs access to your location to provide better service. Would you like to enable location services?"})}),(0,S.jsxs)(L.A,{children:[(0,S.jsx)(H.A,{onClick:ie,color:"primary",children:"No, thanks"}),(0,S.jsx)(H.A,{onClick:()=>{k(!1),ae()?(async()=>{if(!ae()||!("geolocation"in navigator))return k(!0),!1;try{return await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),C(!0),k(!1),le(),!0}catch(e){return console.error("Mobile location permission error:",e),1===e.code?(C(!1),k(!0)):2===e.code?(console.warn("Position unavailable on mobile"),C(!1)):3===e.code&&console.warn("Location request timed out on mobile"),!1}})():le()},color:"primary",variant:"contained",autoFocus:!0,children:"Enable Location"})]})]})]})};var Z=o(70141),J=o(48920),ee=o(41020),te=o(17392);const oe=e=>{let{label:t,rooms:o,adults:r,children:n,setRooms:s,setAdults:a,setChildren:l}=e;const[i,c]=(0,y.useState)(null),d=()=>{c(null)},u=Boolean(i);return(0,S.jsxs)(x.A,{sx:{display:"flex",flexDirection:"column",bgcolor:A.A.thirdColor,borderRadius:2,p:1,textAlign:"left",color:A.A.firstColor,minWidth:"200px"},children:[(0,S.jsx)(h.A,{sx:{px:"10px",fontSize:{xs:"14px",md:"16px"},fontFamily:"CustomFontM"},children:t}),(0,S.jsx)(x.A,{sx:{cursor:"pointer",px:1},onClick:e=>{c(e.currentTarget)},children:(0,S.jsxs)(h.A,{sx:{fontSize:{xs:"18px",md:"20px"},fontFamily:"CustomFontB"},children:[o," Room, ",r," Adults"]})}),(0,S.jsx)(ee.Ay,{open:u,anchorEl:i,onClose:d,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,S.jsxs)(x.A,{sx:{p:2,bgcolor:A.A.thirdColor,borderRadius:2,width:250},children:[["Rooms","Adults","Children"].map((e,t)=>{const i=0===t?o:1===t?r:n,c=0===t?s:1===t?a:l;return(0,S.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",my:1},children:[(0,S.jsx)(h.A,{fontWeight:600,children:e}),(0,S.jsxs)(x.A,{sx:{display:"flex",alignItems:"center"},children:[(0,S.jsx)(te.A,{onClick:()=>c(Math.max(0,i-1)),children:(0,S.jsx)(J.A,{})}),(0,S.jsx)(h.A,{fontWeight:600,sx:{mx:2},children:i}),(0,S.jsx)(te.A,{onClick:()=>c(i+1),children:(0,S.jsx)(Z.A,{})})]})]},e)}),(0,S.jsx)(j.A,{customStyles:{padding:"6px",width:"100%",marginTop:"15px",fontSize:"16px"},onClick:d,variant:"contained",children:"Confirm"})]})})]})},re=(0,c.Ay)(d.A)(e=>{let{theme:t}=e;return{padding:"4px 10px",textTransform:"none",borderRadius:"6px",fontFamily:"CustomFontB",background:"rgba(163, 163, 163, 0.21)",boxShadow:"-4px -4px 10px rgba(0, 0, 0, 0.11) inset",fontSize:"inherit","&.Mui-selected":{background:A.A.background,color:"white","&:hover":{background:A.A.background}}}}),ne=e=>{let{bookingType:t,handleBookingType:o}=e;return(0,S.jsxs)(u.A,{value:t,exclusive:!0,onChange:o,sx:{mb:2,background:A.A.thirdColor,p:2,py:1,borderRadius:"8px",border:"none",fontSize:{xs:"14px",md:"16px"}},children:[(0,S.jsx)(re,{value:"hourly",children:"Hourly"}),(0,S.jsx)(re,{value:"fullDay",children:"Full Day"}),(0,S.jsx)(re,{value:"villa",children:"Villa"})]})},se=()=>{var e;const t=(0,b.Zp)(),o=(0,b.zy)(),c=g.A.parse(o.search),[d,u]=(0,y.useState)(null),m=(0,p.A)("(max-width: 900px)"),[v,C]=(0,y.useState)(c.bookingType||"hourly"),[w,T]=(0,y.useState)(!1),D=(0,y.useRef)(!1),z=(0,y.useRef)(""),M=(0,y.useRef)(!0),F=(0,y.useRef)(!1),_=(0,y.useRef)(!0),[P,W]=(0,y.useState)(null!==(e=c.location)&&void 0!==e?e:null),[B,E]=(0,y.useState)(c.checkinDate?f()(c.checkinDate):f()()),[I,O]=(0,y.useState)(c.checkOutDate?f()(c.checkOutDate):f()().add(1,"day")),[L,H]=(0,y.useState)(()=>{if(c.time)return f()("2024-01-01T".concat(c.time));const e=f()();e.hour();return e.minute()>0?e.add(1,"hour").startOf("hour"):e.startOf("hour")}),[Y,G]=(0,y.useState)({rooms:Number(c.rooms)||1,adults:Number(c.adults)||2,children:Number(c.children)||0}),N=(0,y.useCallback)((e,t)=>{G(o=>(0,r.A)((0,r.A)({},o),{},{[e]:t})),T(!0)},[]),V=(0,y.useCallback)(()=>{if("hourly"===v)return 1;if(!B||!I)return 1;const e=B.startOf("day"),t=I.startOf("day").diff(e,"day");return t>0?t:1},[v,B,I]);(0,y.useEffect)(()=>{if("hourly"!==v&&B&&(!I||I.startOf("day").isSame(B.startOf("day"))||I.startOf("day").isBefore(B.startOf("day")))){const e=B.add(1,"day");O(e)}},[B,v,I]);const q=(0,y.useCallback)(e=>{if(!e)return H(null),void T(!0);const t=e.minute();let o=e;o=t>0?e.add(1,"hour").startOf("hour"):e.startOf("hour"),H(o),T(!0)},[]),U=(0,y.useCallback)(()=>{if(D.current)return;D.current=!0;const e=V(),o={bookingType:v,location:P,rooms:Y.rooms,adults:Y.adults,children:Y.children,nights:"hourly"===v?1:e};"hourly"===v&&L&&(o.time=L.format("HH:mm"),o.bookingHours="3"),B&&(o.checkinDate=B.format("YYYY-MM-DD")),"hourly"!==v&&I&&(o.checkOutDate=I.format("YYYY-MM-DD"));const r=new URLSearchParams;Object.entries(o).forEach(e=>{let[t,o]=e;void 0!==o&&null!==o&&""!==o&&r.append(t,String(o))});const n=r.toString();n!==z.current||F.current?(z.current=n,F.current=!1,t("/search?".concat(n)),Q(!1),setTimeout(()=>{D.current=!1},300)):D.current=!1},[v,P,B,I,L,Y,V,t]);(0,y.useEffect)(()=>{if(M.current){if("/"!==o.pathname&&P){if("hourly"!==v||L){const e=setTimeout(()=>{D.current||U()},100);return()=>clearTimeout(e)}{const e=f()(),t=(e.hour(),e.minute());let o=e.startOf("hour");t>0&&(o=e.add(1,"hour").startOf("hour")),H(o),T(!0)}}M.current=!1}else if("/"!==o.pathname&&w&&F.current){const e=setTimeout(()=>{if(!D.current&&P){if("hourly"===v&&!L){const e=f()(),t=(e.hour(),e.minute());let o=e.startOf("hour");return t>0&&(o=e.add(1,"hour").startOf("hour")),void H(o)}U()}},100);return()=>clearTimeout(e)}},[v,w,P,L,U,o.pathname]),(0,y.useEffect)(()=>{if(M.current)return;if("/"===o.pathname)return;if(!w)return;if(F.current)return;if(!P)return;if("hourly"===v&&!L)return;const e=setTimeout(()=>{D.current||U()},300);return()=>{clearTimeout(e)}},[w,v,P,B,I,L,Y,U,o.pathname]);const $=(0,b.zy)(),[K,Q]=(0,y.useState)(!1),Z=(0,y.useCallback)(function(e){!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?E(e):O(e),T(!0)},[]),J=(0,y.useCallback)(e=>{W(e),T(!0)},[]);return(0,y.useEffect)(()=>{T(!1),M.current=!0,F.current=!1},[o.pathname]),(0,S.jsxs)("div",{children:[(0,S.jsxs)(x.A,{sx:{p:1,pt:3.5,background:A.A.background,borderRadius:3,textAlign:"center",position:"relative",mt:{xs:"/"!==$.pathname?3:1,md:1}},children:[(0,S.jsx)(x.A,{sx:{width:"100%",position:"absolute",top:{xs:-35,md:-35},left:"50%",transform:"translateX(-50%)"},children:(0,S.jsx)(ne,{bookingType:v,handleBookingType:(e,t)=>{null!==t&&t!==v&&(F.current=!0,C(t),T(!0),_.current=!1)}})}),!K&&"/"!==$.pathname&&(0,S.jsxs)(x.A,{onClick:()=>Q(!0),sx:{display:{md:"none",xs:"flex"},flexWrap:"wrap",alignItems:"center",justifyContent:"space-around",mb:.5,mt:-1},children:[(0,S.jsxs)(h.A,{sx:(0,r.A)((0,r.A)({},ae),{},{width:"100%"}),children:[(0,S.jsx)(n.A,{})," ",P||"Select Location"]}),(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:2,width:"100%"},children:[(0,S.jsxs)(h.A,{sx:ae,children:[(0,S.jsx)(s.A,{})," ",B?B.format("YYYY-MM-DD"):"Select Date"]}),"hourly"===v?(0,S.jsxs)(h.A,{sx:ae,children:[(0,S.jsx)(a.A,{})," ",L?L.format("HH:mm"):"Select Time"]}):(0,S.jsxs)(h.A,{sx:ae,children:[(0,S.jsx)(s.A,{})," ",I?I.format("YYYY-MM-DD"):"Select Date"]})]})]}),("/"===$.pathname||K||!m)&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(x.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"space-around",mb:2,px:2,gap:1},children:[(0,S.jsx)(X,{label:"City, Property name or Location",onSelect:e=>{u({display_name:e.display_name,lat:e.lat,lon:e.lon,hotelId:e.hotelId}),W(e.display_name)},value:null!==P&&void 0!==P?P:null===d||void 0===d?void 0:d.display_name,setValue:J}),(0,S.jsx)(k,{date:B,setDate:e=>Z(e,!0),label:"Checkin Date"}),"hourly"===v?(0,S.jsx)(R,{time:L,setTime:q,label:"Checkin Time"}):(0,S.jsx)(k,{date:I,setDate:e=>Z(e,!1),label:"Checkout Date"}),(0,S.jsx)(oe,{label:"Room & Guests",rooms:Y.rooms,adults:Y.adults,children:Y.children,setRooms:e=>N("rooms",e),setAdults:e=>N("adults",e),setChildren:e=>N("children",e)}),(0,S.jsx)("div",{children:"/"!==$.pathname&&(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(j.A,{customStyles:{background:A.A.thirdColor,padding:"10px"},onClick:U,variant:"contained",disabled:!P||"hourly"===v&&!L,children:(0,S.jsx)(l.A,{sx:{color:A.A.firstColor,fontSize:"28px"}})})})})]}),"/"!==$.pathname&&(0,S.jsx)(i.A,{onClick:()=>Q(!1),sx:{position:"absolute",top:4,right:4,color:"white",display:{md:"none",xs:"flex",fontWeight:"bold"}}})]})]}),"/"===$.pathname&&(0,S.jsx)("div",{style:{width:"100%",display:"flex",marginTop:"20px"},children:(0,S.jsx)(j.A,{customStyles:{margin:"auto"},onClick:U,startIcon:(0,S.jsx)(l.A,{}),variant:"contained",disabled:!P||"hourly"===v&&!L,children:"Search Huts4u"})})]})},ae={borderRadius:"52px",boxShadow:"4px 4px 10px rgba(104, 39, 184, 0.17)",color:A.A.firstColor,background:A.A.thirdColor,fontSize:{xs:"12px",md:"14px"},width:"100%",display:"flex",alignItems:"center",gap:"6px",p:1,px:2,m:1}}}]);
//# sourceMappingURL=763.8fc092e9.chunk.js.map