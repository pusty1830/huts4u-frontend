"use strict";(self.webpackChunkhuts4u=self.webpackChunkhuts4u||[]).push([[537],{43641:(e,t,o)=>{o.d(t,{E_:()=>H});var r=o(1706),a=o(20228),s=o(91783),i=o(23783),n=o(36715),l=o(24233),c=o(80286),d=o(2739),x=o(97187),u=o(8537),h=o(55968),p=o(10116),g=o(37460),m=o(4353),f=o(66717),v=o(78174),A=o(82372),b=o(43998),y=o(29206),S=o(63824),w=o(64340),j=o(5192),k=o(30270),C=o(95645),z=o(70579);const H={"Swimming Pool":(0,z.jsx)(y.A,{fontSize:"small"}),Gym:(0,z.jsx)(x.A,{fontSize:"small"}),"Free WiFi":(0,z.jsx)(C.A,{fontSize:"small"}),"Private Beach":(0,z.jsx)(s.A,{fontSize:"small"}),Breakfast:(0,z.jsx)(u.A,{fontSize:"small"}),Parking:(0,z.jsx)(f.A,{fontSize:"small"}),Spa:(0,z.jsx)(w.A,{fontSize:"small"}),Restaurant:(0,z.jsx)(g.A,{fontSize:"small"}),"Airport Shuttle":(0,z.jsx)(a.A,{fontSize:"small"}),"Business Center":(0,z.jsx)(i.A,{fontSize:"small"}),"Pet Friendly":(0,z.jsx)(b.A,{fontSize:"small"}),Bar:(0,z.jsx)(p.A,{fontSize:"small"}),"Room Service":(0,z.jsx)(S.A,{fontSize:"small"}),TV:(0,z.jsx)(k.A,{fontSize:"small"}),"Air Conditioning":(0,z.jsx)(r.A,{fontSize:"small"}),"Laundry Service":(0,z.jsx)(m.A,{fontSize:"small"}),"Child Care":(0,z.jsx)(l.A,{fontSize:"small"}),"King Bed":(0,z.jsx)(h.A,{fontSize:"small"}),Casino:(0,z.jsx)(n.A,{fontSize:"small"}),"Car Rental":(0,z.jsx)(c.A,{fontSize:"small"}),"Night Club":(0,z.jsx)(v.A,{fontSize:"small"}),"Tennis Court":(0,z.jsx)(j.A,{fontSize:"small"}),"BBQ Facilities":(0,z.jsx)(A.A,{fontSize:"small"}),"Fire Safety":(0,z.jsx)(d.A,{fontSize:"small"})}},46537:(e,t,o)=>{o.r(t),o.d(t,{calculatePriceBreakdown:()=>Z,default:()=>se});var r=o(89379),a=o(29435),s=o(20751),i=o(91794),n=o(59383),l=o(4247),c=o(10990),d=o(12110),x=o(7353),u=o(78185),h=o(77739),p=o(36591),g=o(26494),m=o(94496),f=o(43845),v=o(97629),A=o(57972),b=o(68903),y=o(94109),S=o(41985),w=o(91576),j=o(84511),k=o(74605),C=o(26240),z=o(34535),H=o(85442),F=o(65043),B=o(73216),R=o(33580),M=o(31716),D=o(43641),W=o(61968),Y=o(69995),I=o(45763),N=o(60446),P=o.n(N),L=o(49367),T=o(59007),_=o(70579);const E={hotels:[],ratings:null,inventories:null,hourlyClosures:[],lastFetched:0,TTL:3e5},O=e=>{let{isMobile:t}=e;return(0,_.jsx)(d.A,{sx:{mb:2,height:{xs:"auto",md:220}},children:(0,_.jsxs)(x.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},height:"100%"},children:[(0,_.jsx)(u.A,{variant:"rectangular",width:t?"100%":300,height:t?200:"100%"}),(0,_.jsxs)(x.A,{sx:{p:2,flex:1,position:"relative",display:"flex",flexDirection:"column"},children:[(0,_.jsx)(u.A,{width:"40%",height:24}),(0,_.jsx)(u.A,{width:"60%",height:20,sx:{mt:1}}),(0,_.jsx)(u.A,{width:"80%",height:20,sx:{mt:1}}),(0,_.jsx)(x.A,{sx:{display:"flex",gap:1,mt:2,flexWrap:"wrap"},children:[...Array(3)].map((e,t)=>(0,_.jsx)(u.A,{width:80,height:24},t))}),(0,_.jsxs)(x.A,{sx:{mt:"auto",display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[(0,_.jsxs)(x.A,{children:[(0,_.jsx)(u.A,{width:120,height:28}),(0,_.jsx)(u.A,{width:180,height:36,sx:{mt:1}}),(0,_.jsx)(u.A,{width:140,height:20,sx:{mt:1}})]}),(0,_.jsx)(u.A,{width:100,height:40,variant:"rectangular",sx:{borderRadius:"8px"}})]})]})]})})},U=(e,t,o,r)=>{if(!e||!o)return 0;const a=e.id,s=P()(o).format("YYYY-MM-DD"),i=null===t||void 0===t?void 0:t.find(e=>e.roomId===a&&P()(e.date).format("YYYY-MM-DD")===s);if(i)switch(r){case"rateFor1Night":return i.overnightRate||0;case"rateFor3Hour":return i.threeHourRate||0;case"rateFor6Hour":return i.sixHourRate||0;case"rateFor12Hour":return i.twelveHourRate||0;default:return 0}return e[r]||0},G=(e,t,o,r,a)=>{var s;if(!e||!o)return!1;const i=null===(s=e.status)||void 0===s?void 0:s.toLowerCase();if(!("available"===i||"active"===i))return!1;const n=P()(o).format("YYYY-MM-DD"),l=null===t||void 0===t?void 0:t.find(e=>P()(e.date).format("YYYY-MM-DD")===n);if(!l)return!0;if(l.isBlocked)return!1;switch(r){case"rateFor1Night":return l.overnightAvailable>l.overnightBooked;case"rateFor3Hour":return l.threeHourAvailable>l.threeHourBooked;case"rateFor6Hour":return l.sixHourAvailable>l.sixHourBooked;case"rateFor12Hour":return l.twelveHourAvailable>l.twelveHourBooked;default:return!0}},V=function(e,t,o,r,a){var s,i;if("hourly"===a){const t=((e,t,o,r)=>{const a=t.filter(t=>t.hotelId===e.id&&!0===t.active);if(0===a.length)return{isClosed:!1,closureReason:""};const s=P()(o);for(const l of a){const e=P()(l.closureDate);if(s.isBefore(e,"day"))continue;let t=0;if(r){const[e,o]=r.split(":").map(Number);t=60*e+o}else{const e=P()();t=60*e.hour()+e.minute()}const[o,a]=l.startTime.split(":").map(Number),[i,n]=l.endTime.split(":").map(Number),c=60*o+a,d=60*i+n;let x=!1;if(x=c<=d?t>=c&&t<d:t>=c||t<d,x)return{isClosed:!1,closureReason:""}}let i="";const n=a[0];return n&&(i=ee(n.startTime)),{isClosed:!0,closureReason:"Hotel opens at ".concat(i)}})(e,arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],r,arguments.length>6?arguments[6]:void 0);if(t.isClosed)return console.log("   \u274c Hotel has hourly closure: ".concat(t.closureReason)),{isAvailable:!1,status:"Closed",reason:t.closureReason}}console.log("\ud83d\udd0d Checking hotel: ".concat(null===e||void 0===e?void 0:e.propertyName)),console.log("   - Hotel roomAvailable: ".concat((null===e||void 0===e?void 0:e.roomAvailable)||"Available")),console.log("   - Room status: ".concat(null===t||void 0===t||null===(s=t.status)||void 0===s?void 0:s.toLowerCase()));if("Unavailable"===((null===e||void 0===e?void 0:e.roomAvailable)||"Available"))return console.log("   \u274c Hotel marked as Unavailable in roomAvailable field"),{isAvailable:!1,status:"Sold Out",reason:"Hotel is currently sold out"};const n=null===t||void 0===t||null===(i=t.status)||void 0===i?void 0:i.toLowerCase();if(!("available"===n||"active"===n))return console.log("   \u274c Room status not available: ".concat(n)),{isAvailable:!1,status:"Sold Out",reason:"Room is currently sold out"};const l=r?P()(r).format("YYYY-MM-DD"):"";if(console.log("   - Check date: ".concat(l)),!l)return{isAvailable:!0,status:"Available",reason:"Available for booking (no date specified)"};const c=l?o.find(e=>P()(e.date).format("YYYY-MM-DD")===l):null;if(c){if(console.log("   - Found inventory for date"),console.log("   - Inventory isBlocked: ".concat(c.isBlocked)),c.isBlocked)return{isAvailable:!1,status:"Blocked",reason:"Room is blocked for selected date"};if("hourly"===a){const e=c.threeHourAvailable>c.threeHourBooked,t=c.sixHourAvailable>c.sixHourBooked,o=c.twelveHourAvailable>c.twelveHourBooked;console.log("   - Hourly availability check:"),console.log("     - 3h: ".concat(c.threeHourAvailable,"/").concat(c.threeHourBooked," = ").concat(e)),console.log("     - 6h: ".concat(c.sixHourAvailable,"/").concat(c.sixHourBooked," = ").concat(t)),console.log("     - 12h: ".concat(c.twelveHourAvailable,"/").concat(c.twelveHourBooked," = ").concat(o));if(!(e||t||o))return console.log("   \u274c No hourly slots available"),{isAvailable:!1,status:"Sold Out",reason:"No hourly slots available for selected date"}}else{const e=c.overnightAvailable>c.overnightBooked;if(console.log("   - Overnight availability: ".concat(c.overnightAvailable,"/").concat(c.overnightBooked," = ").concat(e)),!e)return{isAvailable:!1,status:"Sold Out",reason:"No overnight availability for selected date"}}}else console.log("   - No inventory found for date, assuming available");return console.log("   \u2705 Hotel is available"),{isAvailable:!0,status:"Available",reason:"Available for booking"}},X=function(e){var t;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;if(null===e||void 0===e||null===(t=e.rooms)||void 0===t||!t[0])return 0;const s=e.rooms[0];let i=[];if("Unavailable"===((null===e||void 0===e?void 0:e.roomAvailable)||"Available"))return 0;if("hourly"===a){i=[{key:"rateFor3Hour",rate:U(s,o,r,"rateFor3Hour"),available:G(s,o,r,"rateFor3Hour")},{key:"rateFor6Hour",rate:U(s,o,r,"rateFor6Hour"),available:G(s,o,r,"rateFor6Hour")},{key:"rateFor12Hour",rate:U(s,o,r,"rateFor12Hour"),available:G(s,o,r,"rateFor12Hour")}].filter(e=>e.rate>0&&e.available).map(e=>e.rate),0===i.length&&(i=[s.rateFor3Hour||0,s.rateFor6Hour||0,s.rateFor12Hour||0].filter(e=>e>0))}else{const e=U(s,o,r,"rateFor1Night"),t=G(s,o,r,"rateFor1Night");e>0&&t?i.push(e):s.rateFor1Night>0&&i.push(s.rateFor1Night)}return i.length?Math.min(...i):0},Z=e=>{const t=Number(e)||0;if(!t||t<=0)return{basePrice:0,platformFee:0,gstOnBase:0,gstOnPlatform:0,gatewayFee:0,gstOnGateway:0,gstTotal:0,finalPrice:0};const o=.05*t,r=.13*(t+o),a=.18*r,s=.02*(t+o+r+a),i=.18*s,n=o+a+i+s;return{basePrice:t,platformFee:r,gstOnBase:o,gstOnPlatform:a,gatewayFee:s,gstOnGateway:i,gstTotal:n,finalPrice:t+r+n}},q=e=>e.toLocaleString("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}),J=e=>{if(!e||!Array.isArray(e)||0===e.length)return 0;const t=e.reduce((e,t)=>e+(Number(t.rating)||0),0);return Math.round(t/e.length*10)/10},K=(e,t)=>{if(!e||!t)return[];let o=[];if(Array.isArray(e))o=e;else if(e&&"object"===typeof e)if(Array.isArray(e.data))o=e.data;else if(Array.isArray(e.rows))o=e.rows;else{if(!Array.isArray(e.result))return[];o=e.result}return Array.isArray(o)?o.filter(e=>{const o=e.hotelId||e.propertyId||e.hotel_id||e.hotelID;return o===t||(null===o||void 0===o?void 0:o.toString())===(null===t||void 0===t?void 0:t.toString())}):[]},Q=async(e,t)=>{try{var o,r,a,s,i,n,l;const c={data:{filter:"",roomId:e,date:t},page:0,pageSize:1e3,order:[["createdAt","ASC"]]},d=await(0,Y.ww)(c);let x=[];return null!==d&&void 0!==d&&null!==(o=d.data)&&void 0!==o&&null!==(r=o.data)&&void 0!==r&&r.data&&Array.isArray(d.data.data.data)?x=d.data.data.data:null!==d&&void 0!==d&&null!==(a=d.data)&&void 0!==a&&null!==(s=a.data)&&void 0!==s&&s.rows&&Array.isArray(d.data.data.rows)?x=d.data.data.rows:null!==d&&void 0!==d&&null!==(i=d.data)&&void 0!==i&&null!==(n=i.data)&&void 0!==n&&n.result&&Array.isArray(d.data.data.result)?x=d.data.data.result:Array.isArray(null===d||void 0===d||null===(l=d.data)||void 0===l?void 0:l.data)&&(x=d.data.data),x}catch(c){return console.error("Error fetching inventory for room ".concat(e,":"),c),[]}},$=async()=>{try{var e,t,o;const r={data:{filter:"",active:!0},page:0,pageSize:1e3,order:[["closureDate","ASC"]]},a=await(0,Y.mI)(r);let s=[];return null!==a&&void 0!==a&&null!==(e=a.data)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.rows&&Array.isArray(a.data.data.rows)?s=a.data.data.rows:Array.isArray(null===a||void 0===a||null===(o=a.data)||void 0===o?void 0:o.data)&&(s=a.data.data),console.log("\u2705 Fetched ".concat(s.length," hourly closures")),s}catch(r){return console.error("Error fetching hourly closures:",r),[]}},ee=e=>{if(!e)return"N/A";try{const[t,o]=e.split(":"),r=parseInt(t),a=r>=12?"PM":"AM";return"".concat(r%12||12,":").concat(o," ").concat(a)}catch(t){return e}},te=e=>{var t,o,i,n,u,v,A,b,y;let{hotel:S,queryParams:w,isMobile:j,hotelRatings:k=[],inventoryData:C=[],hourlyClosures:z=[]}=e;const H=T.hr,F=T.w4,M=(0,B.Zp)(),Y=j?2:4,I=(null===S||void 0===S||null===(t=S.rooms)||void 0===t||null===(o=t[0])||void 0===o||null===(i=o.amenities)||void 0===i?void 0:i.slice(0,Y))||[],N=Math.max(0,((null===S||void 0===S||null===(n=S.rooms)||void 0===n||null===(u=n[0])||void 0===u||null===(v=u.amenities)||void 0===v?void 0:v.length)||0)-Y),L=(null===S||void 0===S?void 0:S.isPremium)||!1,E=(null===S||void 0===S||null===(A=S.rooms)||void 0===A?void 0:A[0])||{},O=w.get("bookingType")||"fullDay",K=w.get("checkinDate")||P()().format("YYYY-MM-DD"),Q=w.get("time")||"",$=w.get("bookingHours")||"3",ee=Math.max(1,Number(w.get("rooms"))||1),te="hourly"===O?1:Math.max(1,Number(w.get("nights"))||1),oe=V(S,E,C,K,O,z,Q),re=oe.isAvailable,ae=X(S,C,K,O,Q),se=Z(ae),ie=se.finalPrice,ne=se.basePrice,le=se.platformFee,ce=se.gstTotal,de=ee*te,xe=+ne*de,ue=+le*de,he=+ce*de,pe=+ie*de,ge=xe+700,me=k.length>0?J(k):(null===S||void 0===S||null===(b=S.ratings)||void 0===b?void 0:b.rating)||0,fe=k.length||(null===S||void 0===S?void 0:S.reviews)||0,ve="hourly"===O?[{key:"3",label:"3 Hrs",slot:"rateFor3Hour",rate:U(E,C,K,"rateFor3Hour"),available:G(E,C,K,"rateFor3Hour")},{key:"6",label:"6 Hrs",slot:"rateFor6Hour",rate:U(E,C,K,"rateFor6Hour"),available:G(E,C,K,"rateFor6Hour")},{key:"12",label:"12 Hrs",slot:"rateFor12Hour",rate:U(E,C,K,"rateFor12Hour"),available:G(E,C,K,"rateFor12Hour")}].filter(e=>e.rate>0&&e.available).map(e=>{const t=Z(e.rate),o=t.basePrice,a=t.platformFee,s=t.gstTotal,i=o*ee,n=a*ee,l=s*ee,c=i+n+l;return(0,r.A)((0,r.A)({},e),{},{totalBase:i,totalPlatform:n,totalGst:l,totalFinal:c})}):[],Ae=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return e?e.length<=t?e:e.substring(0,t)+"...":"Address not available"},be=()=>{if(!re)return;const e=w.toString();M("/hotel/".concat(S.id).concat(e?"?".concat(e):""),{state:{hotelData:S}})};return(0,_.jsxs)(d.A,{onClick:be,sx:{display:"flex",flexDirection:{xs:"column",md:"row"},mb:3,background:re?R.A.thirdColor:"#f5f5f5",boxShadow:"0px 4px 12px rgba(0, 0, 0, 0.1)",borderRadius:"16px",transition:"all 0.3s ease",cursor:re?"pointer":"not-allowed",border:"1px solid ".concat(re?"transparent":"#e0e0e0"),position:"relative",overflow:"hidden",minHeight:{xs:"auto",md:220},"&:hover":{transform:re?"translateY(-4px)":"none",boxShadow:re?"0px 8px 24px rgba(0, 0, 0, 0.15)":"0px 4px 12px rgba(0, 0, 0, 0.1)",borderColor:re?R.A.firstColor:"#e0e0e0"},opacity:re?1:.7},children:[!re&&(0,_.jsx)(h.A,{title:oe.reason,children:(0,_.jsx)(x.A,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2,background:"rgba(0,0,0,0.6)",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"16px"},children:(0,_.jsxs)(x.A,{sx:{background:(e=>{switch(e){case"Closed":return"#ff6b6b";case"Sold Out":default:return"#ff4444";case"Blocked":return"#ffaa00"}})(oe.status),color:"white",px:3,py:1.5,borderRadius:"8px",fontWeight:"bold",fontSize:{xs:"13px",md:"14px"},transform:"rotate(-3deg)",boxShadow:"0 4px 8px rgba(255, 77, 77, 0.3)",display:"flex",alignItems:"center",gap:1},children:[(0,_.jsx)(s.A,{sx:{fontSize:20}}),oe.status.toUpperCase()]})})}),(0,_.jsxs)(x.A,{sx:{width:{xs:"100%",md:300},height:{xs:200,md:"100%"},minHeight:{xs:200,md:220},maxHeight:{xs:200,md:250},position:"relative",overflow:"hidden",flexShrink:0},children:[(0,_.jsx)(p.A,{component:"img",sx:{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.5s ease",filter:re?"none":"grayscale(80%) brightness(0.9)",opacity:re?1:.7,"&:hover":{transform:re?"scale(1.05)":"none"}},image:(ye=(null===S||void 0===S||null===(y=S.propertyImages)||void 0===y?void 0:y[0])||"https://via.placeholder.com/400x250?text=No+Image",ye?ye.includes(H)?ye.replace(H,F):ye:"/default-hotel.jpg"),alt:null===S||void 0===S?void 0:S.propertyName,loading:"lazy"}),L&&(0,_.jsxs)(x.A,{sx:{position:"absolute",top:12,left:12,background:"linear-gradient(135deg, #FFD700, #FFA500)",color:"#000",px:1.5,py:.5,borderRadius:"6px",fontSize:"10px",fontWeight:"bold",display:"flex",alignItems:"center",gap:"4px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",zIndex:1},children:[(0,_.jsx)(c.A,{sx:{fontSize:"12px"}})," PREMIUM"]})]}),(0,_.jsxs)(g.A,{sx:{padding:{xs:"16px",md:"20px 24px"},width:"100%",display:"flex",flexDirection:"column",flex:1,position:"relative"},children:[L&&(0,_.jsx)(x.A,{sx:{width:"fit-content",mb:1.5},children:(0,_.jsxs)(m.A,{sx:{fontWeight:700,color:"#000",width:"fit-content",px:1.5,py:.5,borderRadius:"6px",fontSize:"10px",background:"linear-gradient(135deg, #FFD700, #FFA500)",display:"flex",alignItems:"center",gap:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[(0,_.jsx)(c.A,{sx:{fontSize:"12px"}})," Huts4u PREMIUM"]})}),(0,_.jsxs)(x.A,{sx:{mb:1.5},children:[(0,_.jsx)(m.A,{sx:{fontSize:{xs:"17px",md:"20px"},fontWeight:700,color:re?R.A.firstColor:"#666",display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitLineClamp:1,WebkitBoxOrient:"vertical",lineHeight:1.2},children:null===S||void 0===S?void 0:S.propertyName}),(0,_.jsxs)(m.A,{sx:{fontFamily:"CustomFontSB",fontSize:{xs:"12px",md:"14px"},color:re?"#666":"#888",display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitLineClamp:1,WebkitBoxOrient:"vertical",mt:.5,lineHeight:1.3},children:["\ud83d\udccd ",Ae((null===S||void 0===S?void 0:S.address)||(null===S||void 0===S?void 0:S.city)||"",35)+"  BBSR"]})]}),!j&&(0,_.jsxs)(x.A,{sx:{position:"absolute",top:{xs:"auto",md:20},right:{xs:"auto",md:24},display:"flex",flexDirection:"column",alignItems:"flex-end",mb:1.5},children:[(0,_.jsx)(x.A,{sx:{display:"flex",alignItems:"center",gap:"4px",mb:.5},children:me>0?(0,_.jsxs)(x.A,{sx:{background:(0,W.t0)(me),color:"#fff",px:1.2,py:.6,borderRadius:"8px",fontSize:"14px",fontWeight:700,display:"flex",alignItems:"center",gap:"4px",minWidth:"60px",justifyContent:"center",boxShadow:"0 2px 6px rgba(0,0,0,0.2)"},children:[me.toFixed(1),(0,_.jsx)(l.A,{sx:{fontSize:"14px"}})]}):(0,_.jsxs)(x.A,{sx:{background:"rgba(0,0,0,0.05)",color:"#888",px:1.2,py:.6,borderRadius:"8px",fontSize:"14px",fontWeight:700,display:"flex",alignItems:"center",gap:"4px",minWidth:"60px",justifyContent:"center",border:"1px dashed #ddd"},children:["N/A",(0,_.jsx)(l.A,{sx:{fontSize:"14px",color:"#aaa"}})]})}),fe>0?(0,_.jsxs)(m.A,{variant:"body2",fontWeight:600,color:re?"#666":"#aaa",sx:{fontSize:"11px",textAlign:"right"},children:["(",fe," review",1!==fe?"s":"",")"]}):(0,_.jsx)(m.A,{variant:"body2",fontWeight:600,color:re?"#888":"#aaa",sx:{fontSize:"11px",fontStyle:"italic"},children:"No reviews yet"})]}),(0,_.jsxs)(x.A,{sx:{display:"flex",gap:.5,flexWrap:"wrap",mt:1.5,mb:{xs:2,md:1.5}},children:[I.map((e,t)=>(0,_.jsx)(f.A,{label:e,icon:D.E_[e]||(0,_.jsx)(a.A,{}),size:"small",sx:{bgcolor:"rgba(75, 42, 173, 0.1)",fontSize:{xs:"10px",md:"11px"},color:re?"#4B2AAD":"#aaa",height:"24px",border:"1px solid rgba(75, 42, 173, 0.2)","& .MuiChip-icon":{fontSize:{xs:"12px",md:"14px"},color:re?"#4B2AAD":"#aaa",marginLeft:"4px",marginRight:"-4px"}}},t)),N>0&&(0,_.jsx)(f.A,{label:"+".concat(N," more"),size:"small",sx:{bgcolor:re?"rgba(0,0,0,0.05)":"#f5f5f5",fontSize:{xs:"10px",md:"11px"},color:re?"#666":"#aaa",height:"24px"}})]}),(0,_.jsxs)(x.A,{sx:{display:"flex",flexDirection:"column",gap:{xs:2,md:1},mt:"auto",pt:{xs:3,md:0},borderTop:{xs:"1px dashed #e0e0e0",md:"none"}},children:[j&&(0,_.jsx)(x.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:(0,_.jsxs)(x.A,{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[me>0?(0,_.jsxs)(x.A,{sx:{background:(0,W.t0)(me),color:"#fff",px:1,py:.5,borderRadius:"6px",fontSize:"13px",fontWeight:700,display:"flex",alignItems:"center",gap:"4px",minWidth:"55px",justifyContent:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:[me.toFixed(1),(0,_.jsx)(l.A,{sx:{fontSize:"13px"}})]}):(0,_.jsxs)(x.A,{sx:{background:"rgba(0,0,0,0.05)",color:"#888",px:1,py:.5,borderRadius:"6px",fontSize:"13px",fontWeight:700,display:"flex",alignItems:"center",gap:"4px",minWidth:"55px",justifyContent:"center",border:"1px dashed #ddd"},children:["N/A",(0,_.jsx)(l.A,{sx:{fontSize:"13px",color:"#aaa"}})]}),fe>0?(0,_.jsxs)(m.A,{variant:"body2",fontWeight:600,color:re?"#666":"#aaa",sx:{fontSize:"12px"},children:["(",fe," review",1!==fe?"s":"",")"]}):(0,_.jsx)(m.A,{variant:"body2",fontWeight:600,color:re?"#888":"#aaa",sx:{fontSize:"12px",fontStyle:"italic"},children:"No reviews yet"})]})}),"hourly"===O?(0,_.jsx)(x.A,{sx:{width:"100%"},children:ve.length>0?(()=>{const e=ve.find(e=>e.key===$);if(!e)return(0,_.jsx)(m.A,{sx:{fontSize:"12px",color:"#888",textAlign:"center",py:2},children:"Not available for selected hours"});const t=Math.round(e.totalBase+e.totalPlatform),o=Math.round(e.totalGst);return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(x.A,{sx:{display:"flex",gap:{xs:.5,sm:1},mb:2,justifyContent:{xs:"flex-start",sm:"flex-start"},flexWrap:"nowrap",overflowX:{xs:"auto",sm:"visible"},pb:{xs:1,sm:0},"&::-webkit-scrollbar":{height:"4px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1"},"&::-webkit-scrollbar-thumb":{background:"#ccc",borderRadius:"2px"}},children:ve.map(e=>{const t=e.key===$;return(0,_.jsx)(x.A,{onClick:t=>{t.stopPropagation(),re&&(e=>{if(!re)return;const t=new URLSearchParams(w.toString());t.set("bookingHours",e),M("/search?".concat(t.toString()),{replace:!0})})(e.key)},sx:{flexShrink:0,textAlign:"center",py:{xs:.75,sm:1},px:{xs:.75,sm:1.5},borderRadius:"8px",cursor:re?"pointer":"not-allowed",fontSize:{xs:"11px",sm:"12px",md:"13px"},fontWeight:700,background:t?re?"#4B2AAD":"#aaa":"rgba(75, 42, 173, 0.1)",color:t?"#fff":re?"#4B2AAD":"#888",border:"1px solid ".concat(t?"#4B2AAD":"rgba(75, 42, 173, 0.3)"),transition:"all 0.2s ease",opacity:re?1:.6,minWidth:{xs:"70px",sm:"80px"},whiteSpace:"nowrap","&:hover":re?{transform:"translateY(-1px)",boxShadow:"0 2px 8px rgba(75, 42, 173, 0.3)"}:{}},children:e.label},e.key)})}),(0,_.jsxs)(x.A,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"stretch",sm:"center"},gap:{xs:1.5,sm:2,md:3}},children:[(0,_.jsxs)(x.A,{sx:{flex:1},children:[(0,_.jsxs)(m.A,{sx:{fontSize:{xs:"12px",md:"13px"},color:re?"#666":"#888",mb:.5,fontWeight:500,display:"flex",alignItems:"center",gap:.5,flexWrap:"wrap"},children:[(0,_.jsxs)("span",{children:[ee," room",ee>1?"s":""]}),(0,_.jsx)("span",{children:"\u2022"}),(0,_.jsx)("span",{children:e.label})]}),(0,_.jsxs)(x.A,{sx:{display:"flex",alignItems:"baseline",gap:1,flexWrap:"wrap"},children:[(0,_.jsx)(m.A,{sx:{fontSize:{xs:"20px",sm:"22px",md:"24px"},fontWeight:800,color:re?R.A.firstColor:"#888",lineHeight:1},children:re?q(t):"---"}),re&&(0,_.jsxs)(m.A,{sx:{fontSize:{xs:"11px",md:"12px"},color:"#666",fontWeight:500},children:["+ ",q(o)," taxes & fees"]})]})]}),re?(0,_.jsx)(x.A,{onClick:e=>{e.stopPropagation(),be()},sx:{background:"linear-gradient(135deg, #4B2AAD, #6C4BD3)",color:"#fff",px:{xs:0,sm:2.5,md:3},py:{xs:0,sm:1.25,md:1.5},borderRadius:"10px",textAlign:"center",minWidth:{xs:"40%",sm:"120px",md:"140px"},cursor:"pointer",transition:"all 0.3s ease",mt:{xs:1,sm:0},marginRight:{xs:3},display:"flex",alignItems:"center",justifyContent:"center",height:{xs:"44px",sm:"48px"},"&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(75, 42, 173, 0.4)"}},children:(0,_.jsx)(m.A,{sx:{fontSize:{xs:"14px",sm:"15px",md:"16px"},fontWeight:700,whiteSpace:"nowrap"},children:"Book Now"})}):(0,_.jsx)(x.A,{sx:{background:"#e0e0e0",color:"#888",px:{xs:0,sm:2.5,md:3},py:{xs:0,sm:1.25,md:1.5},borderRadius:"10px",textAlign:"center",minWidth:{xs:"40%",sm:"120px",md:"140px"},cursor:"not-allowed",mt:{xs:1,sm:0},marginRight:{xs:3},display:"flex",alignItems:"center",justifyContent:"center",height:{xs:"44px",sm:"48px"}},children:(0,_.jsx)(m.A,{sx:{fontSize:{xs:"14px",sm:"15px",md:"16px"},fontWeight:700,whiteSpace:"nowrap"},children:oe.status})})]})]})})():(0,_.jsx)(m.A,{sx:{fontSize:"12px",color:"#888",textAlign:"center",py:2,border:"1px dashed #ddd",borderRadius:"8px",background:"#f9f9f9"},children:"Not available for hourly stay"})}):(0,_.jsxs)(x.A,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"stretch",sm:"center"},gap:{xs:1.5,sm:2,md:3},width:"100%"},children:[(0,_.jsxs)(x.A,{sx:{flex:1,minWidth:0},children:[re&&ge>0&&(0,_.jsx)(m.A,{sx:{fontSize:{xs:"12px",md:"14px"},color:re?"#999":"#aaa",textDecoration:"line-through",fontWeight:500,mb:.5},children:q(Math.round(ge))}),(0,_.jsxs)(x.A,{sx:{display:"flex",alignItems:"baseline",gap:1,flexWrap:"wrap"},children:[(0,_.jsx)(m.A,{sx:{fontSize:{xs:"22px",sm:"24px",md:"26px"},color:re?R.A.firstColor:"#888",fontWeight:800,lineHeight:1},children:re&&xe+ue>0?"".concat(q(Math.round(xe+ue))):"---"}),re&&pe>0&&(0,_.jsxs)(m.A,{sx:{fontSize:{xs:"11px",md:"13px"},color:"#666",fontWeight:500},children:["+ ",q(Math.round(he))," taxes & fees"]})]}),(0,_.jsxs)(m.A,{sx:{fontSize:{xs:"12px",md:"13px"},color:re?"#666":"#aaa",mt:1,fontWeight:500,display:"flex",alignItems:"center",gap:.5,flexWrap:"wrap"},children:[(0,_.jsxs)("span",{children:[ee," room",ee>1?"s":""]}),"hourly"!==O&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("span",{children:"\u2022"}),(0,_.jsxs)("span",{children:[te," night",te>1?"s":""]})]})]})]}),re?(0,_.jsx)(x.A,{onClick:e=>{e.stopPropagation(),be()},sx:{background:"linear-gradient(135deg, #4B2AAD, #6C4BD3)",color:"#fff",px:{xs:0,sm:2.5,md:3},py:{xs:0,sm:1.25,md:1.5},borderRadius:"10px",textAlign:"center",minWidth:{xs:"40%",sm:"130px",md:"150px"},cursor:"pointer",transition:"all 0.3s ease",mt:{xs:1,sm:0},marginRight:{xs:3},display:"flex",alignItems:"center",justifyContent:"center",height:{xs:"44px",sm:"48px"},"&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(75, 42, 173, 0.4)"}},children:(0,_.jsx)(m.A,{sx:{fontSize:{xs:"14px",sm:"15px",md:"16px"},fontWeight:700,whiteSpace:"nowrap"},children:"Book Now"})}):(0,_.jsx)(x.A,{sx:{background:"#e0e0e0",color:"#888",px:{xs:0,sm:2.5,md:3},py:{xs:0,sm:1.25,md:1.5},borderRadius:"10px",textAlign:"center",minWidth:{xs:"40%",sm:"130px",md:"150px"},cursor:"not-allowed",mt:{xs:1,sm:0},marginRight:{xs:3},display:"flex",alignItems:"center",justifyContent:"center",height:{xs:"44px",sm:"48px"}},children:(0,_.jsx)(m.A,{sx:{fontSize:{xs:"14px",sm:"15px",md:"16px"},fontWeight:700,whiteSpace:"nowrap"},children:oe.status})})]})]})]})]});var ye},oe={background:"linear-gradient(135deg, #f3eee1, #e8e0cf)",width:"fit-content",borderRadius:"8px",p:1.5,m:-2,mx:-4,mb:2,fontWeight:700,color:R.A.firstColor,fontSize:{xs:"16px",md:"18px"},boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},re=(0,z.Ay)(j.A)(e=>{let{theme:t}=e;return{borderRadius:"8px",textTransform:"none",fontSize:"13px",padding:"6px 12px",fontWeight:600,border:"1px solid rgba(75, 42, 173, 0.3)",transition:"all 0.2s ease","&.Mui-selected":{backgroundColor:R.A.secondColor,color:"white",borderColor:R.A.secondColor,boxShadow:"0 2px 8px rgba(75, 42, 173, 0.3)","&:hover":{backgroundColor:R.A.firstColor}},"&:hover":{backgroundColor:"rgba(75, 42, 173, 0.1)"}}}),ae=(0,z.Ay)(k.A)({"& .MuiFormControlLabel-label":{fontSize:"14px",fontWeight:600,color:"#333"}}),se=()=>{const e=(0,B.Zp)(),t=(0,B.zy)(),[o,a]=(0,F.useState)([]),[s,l]=(0,F.useState)([]),[c,d]=(0,F.useState)([]),[h,p]=(0,F.useState)(null),[g,f]=(0,F.useState)({}),[j,k]=(0,F.useState)([]),[z,D]=(0,F.useState)(!0),[N,T]=(0,F.useState)(!1),[U,G]=(0,F.useState)(1),[V,q]=(0,F.useState)(1),[ee,se]=(0,F.useState)(!1),[ie,ne]=(0,F.useState)(new Set),[le,ce]=(0,F.useState)([]),de=new URLSearchParams(t.search),xe=(0,C.A)(),ue=(0,H.A)(xe.breakpoints.down("sm")),he=(0,H.A)(xe.breakpoints.between("sm","md")),pe=((0,H.A)(xe.breakpoints.up("md")),(0,F.useRef)(!1)),ge=(0,F.useRef)(null);(0,F.useEffect)(()=>{const e=Number(de.get("page"))||1;G(e)},[t.search]);const me=async()=>{try{var e;const t={data:{filter:""},page:0,pageSize:1e3,order:[["createdAt","ASC"]]},o=await(0,Y.Ge)(t);let r=null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.data;return null!==r&&void 0!==r&&r.data&&Array.isArray(r.data)?r.data:null!==r&&void 0!==r&&r.rows&&Array.isArray(r.rows)?r.rows:null!==r&&void 0!==r&&r.result&&Array.isArray(r.result)?r.result:Array.isArray(r)?r:[]}catch(t){return console.error("Error fetching ratings:",t),[]}},fe=async(e,t)=>{const o={};if(!e.rooms||0===e.rooms.length)return o;for(const a of e.rooms)try{const e=await Q(a.id,t);o[a.id]=e}catch(r){console.error("Error fetching inventory for room ".concat(a.id,":"),r),o[a.id]=[]}return o},ve=(e,t)=>e.map(e=>{const o=e.id,a=K(t,o),s=J(a);return(0,r.A)((0,r.A)({},e),{},{ratings:{rating:s,count:a.length}})}),Ae=async(e,t,o)=>{const r=e.slice(t,o).map(async e=>{try{const t={id:e,secondTable:"Room"},o=await(0,Y.YT)(t),r=(null===o||void 0===o?void 0:o.data)||null;return r&&Array.isArray(r.data)&&r.data.length?r.data[0]:null}catch(t){return console.error("Error fetching hotel ".concat(e,":"),t),null}});return(await Promise.all(r)).filter(e=>null!==e)};(0,F.useEffect)(()=>((async()=>{if(!pe.current){pe.current=!0;try{var e,t;if(D(!0),E.hotels.length>0&&Date.now()-E.lastFetched<E.TTL&&E.ratings&&E.hourlyClosures)return console.log("Using cached data"),a(E.hotels),p(E.ratings),k(E.hourlyClosures),D(!1),void(pe.current=!1);const s={data:{filter:"",status:"Approved"},page:0,pageSize:1e3,order:[["createdAt","ASC"]]},i=await(0,Y.Vy)(s),n=(null===i||void 0===i||null===(e=i.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.rows)||[];console.log("Total hotels from API:",n.length);const l=n.map(e=>e.id);ce(l);const[c,d]=await Promise.all([me(),$()]);E.hourlyClosures=d,E.ratings=c;const x=5*(U-1),u=x+5,h=l.slice(x,u);console.log("Fetching first batch: ".concat(h.length," hotels"));const g=await Ae(h,0,h.length);ne(new Set(h));const m=ve(g,c),v=de.get("checkinDate")||P()().format("YYYY-MM-DD"),A=m.map(async e=>{const t=await fe(e,v);return{hotelId:e.id,inventory:t}}),b=(await Promise.all(A)).reduce((e,t)=>{let{hotelId:o,inventory:r}=t;return e[o]=r,e},{});if(f(b),a(m),p(c),k(d),D(!1),E.hotels=[...m],E.lastFetched=Date.now(),l.length>h.length){se(!0);const e=new Set(h),t=l.filter(t=>!e.has(t));console.log("Background loading: ".concat(t.length," hotels (excluding ").concat(h.length," already loaded)"));const s=Math.ceil(t.length/30);for(let i=0;i<s;i++){const e=30*i,n=e+30,l=t.slice(e,n);try{console.log("Fetching background batch ".concat(i+1,"/").concat(s,": ").concat(l.length," hotels"));const e=await Ae(l,0,l.length);if(e.length>0){const t=ve(e,c),o=t.map(async e=>{const t=await fe(e,v);return{hotelId:e.id,inventory:t}}),s=(await Promise.all(o)).reduce((e,t)=>{let{hotelId:o,inventory:r}=t;return e[o]=r,e},{});f(e=>(0,r.A)((0,r.A)({},e),s)),a(e=>[...e,...t]),console.log("\u2705 Added ".concat(t.length," hotels. ")),E.hotels=[...E.hotels,...t],E.lastFetched=Date.now(),ne(e=>{const t=new Set(e);return l.forEach(e=>t.add(e)),t})}else console.log("\u26a0\ufe0f Batch ".concat(i+1," returned 0 hotels"));i<s-1&&await new Promise(e=>setTimeout(e,100))}catch(o){console.error("Error in batch ".concat(i+1,":"),o)}}se(!1)}}catch(s){console.error("Error fetching hotels with rooms:",s),a([]),D(!1)}finally{pe.current=!1}}})(),()=>{ge.current&&ge.current.abort()}),[t.search]);(0,F.useEffect)(()=>{if(!z){const e=(()=>{const e=de.get("location")||"",t=de.get("bookingType"),a=(de.get("bookingHours"),de.get("sortBy")),s=Number(de.get("maxBudget"))||2e4,i=Number(de.get("minBudget"))||100,n=de.get("checkinDate")||P()().format("YYYY-MM-DD"),l=de.get("time")||"",c="hourly"===t?1:Math.max(1,Number(de.get("nights"))||1),d=e=>{var o,r,a;const s=(null===(o=g[e.id])||void 0===o?void 0:o[null===(r=e.rooms)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.id])||[],i=X(e,s,n,t||"fullDay",l);return i?Z(i).finalPrice*c:1/0};let x=o.filter(e=>{if("fullDay"===t){var o,r;const t="Overnight"===(null===e||void 0===e||null===(o=e.rooms)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.stayType);return"Hotel"===e.propertyType&&t}var a,s;return"hourly"===t?"Hourly"===(null===e||void 0===e||null===(a=e.rooms)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.stayType)&&(null===e||void 0===e||e.roomAvailable,!0):"villa"===t&&"Villa"===e.propertyType});x=x.filter(e=>{const t=d(e);return"Unavailable"===((null===e||void 0===e?void 0:e.roomAvailable)||"Available")||t>=i&&t<=s&&t!==1/0}),x=x.map(t=>{if(""!==e.trim()){const o=(e=>{if(!e.trim())return"mixed";const t=e.toLowerCase().trim(),o=["hotel","inn","resort","villa","apartment","guest house","lodging","accommodation","stay","room","suite"],r=["near","close to","beside","next to","opposite","adjacent","in","at","area","locality","road","street","lane","avenue"],a=o.some(e=>t.includes(e))||/^[A-Z][a-z]+\s+[A-Z][a-z]+/.test(e)||/Hotel\s+|Resort\s+|Inn\s+/i.test(e),s=r.some(e=>t.includes(e))||/patia|sahid|jaydev|infocity|kiit|soa|chandrasekharpur|railway|airport/i.test(t)||/near\s+|close to\s+/i.test(t);if(a&&!s)return"hotel";if(s&&!a)return"location";const i=t.split(/\s+/);let n=0,l=0;return i.forEach(e=>{o.includes(e)&&n++,(r.includes(e)||["patia","bhubaneswar","bbsr","kiit","airport"].includes(e))&&l++}),n>l?"hotel":l>n?"location":"mixed"})(e);console.log('\ud83d\udd0d Search Type Detected: "'.concat(e,'" \u2192 ').concat(o));const{score:a,isExactHotelMatch:s,isExactLocationMatch:i}=((e,t,o)=>{let r=0,a=!1,s=!1;if(!t.trim())return{score:0,isExactHotelMatch:!1,isExactLocationMatch:!1};const i=t.toLowerCase().trim(),n=((null===e||void 0===e?void 0:e.propertyName)||"").toLowerCase(),l=((null===e||void 0===e?void 0:e.address)||"").toLowerCase(),c=((null===e||void 0===e?void 0:e.city)||"").toLowerCase(),d=((null===e||void 0===e?void 0:e.area)||"").toLowerCase(),x=i.split(/[,\s]+/).map(e=>e.trim()).filter(e=>e.length>0);n===i&&(r+=1e3,a=!0),n.startsWith(i)&&(r+="hotel"===o?500:300),n.includes(i)&&(r+="hotel"===o?400:200);let u=0;for(const p of x)p.length>1&&n.includes(p)&&(u++,r+="hotel"===o?150:75);u===x.length&&x.length>0&&(r+="hotel"===o?200:100);const h="location"===o?3:"mixed"===o?2:1;for(const p of x)p.length>2&&(l===p&&(r+=100*h,s=!0),l.includes(p)&&(r+=40*h),d===p&&(r+=120*h,s=!0),d.includes(p)&&(r+=50*h),c===p&&(r+=80*h),c.includes(p)&&(r+=30*h));if(i.includes("near ")||i.includes("close to ")){const e=i.replace(/(near |close to )/,"").trim();(l.includes(e)||d.includes(e))&&(r+=200*h)}if("hotel"!==o){(c.includes("bhubaneswar")||c.includes("bbsr"))&&(r+=20);const e=["patia","sahid nagar","jaydev vihar","infocity","chandrasekharpur"];for(const t of e)i.includes(t)&&(d.includes(t)||l.includes(t))&&(r+=150*h)}return{score:r,isExactHotelMatch:a,isExactLocationMatch:s}})(t,e,o),n="Unavailable"!==((null===t||void 0===t?void 0:t.roomAvailable)||"Available");return(0,r.A)((0,r.A)({},t),{},{_relevanceScore:a,_isExactHotelMatch:s,_isExactLocationMatch:i,_searchType:o,_isAvailable:n})}const o="Unavailable"!==((null===t||void 0===t?void 0:t.roomAvailable)||"Available");return(0,r.A)((0,r.A)({},t),{},{_relevanceScore:0,_isExactHotelMatch:!1,_isExactLocationMatch:!1,_searchType:"mixed",_isAvailable:o})}),x.sort((e,t)=>{if(e._isAvailable&&!t._isAvailable)return-1;if(t._isAvailable&&!e._isAvailable)return 1;const o=(t._locationRelevanceScore||0)-(e._locationRelevanceScore||0);if(0!==o)return o;if(e._isExactMatch&&!t._isExactMatch)return-1;if(t._isExactMatch&&!e._isExactMatch)return 1;if(e._hasLocationMatch&&!t._hasLocationMatch)return-1;if(t._hasLocationMatch&&!e._hasLocationMatch)return 1;const r=(t._relevanceScore||0)-(e._relevanceScore||0);if(0!==r)return r;var s,i;if("rating"===a)return(Number(null===t||void 0===t||null===(s=t.ratings)||void 0===s?void 0:s.rating)||0)-(Number(null===e||void 0===e||null===(i=e.ratings)||void 0===i?void 0:i.rating)||0);if("lowToHigh"===a)return d(e)-d(t);if("highToLow"===a)return d(t)-d(e);if("popularity"===a)return(Number(null===t||void 0===t?void 0:t.reviews)||0)-(Number(null===e||void 0===e?void 0:e.reviews)||0);{const o=(t._locationRelevanceScore||0)-(e._locationRelevanceScore||0);return 0!==o?o:d(e)-d(t)}});const u=Math.max(1,Number(de.get("rooms"))||1),h=x.map(e=>{var o,a,s;const i=(null===(o=g[e.id])||void 0===o?void 0:o[null===(a=e.rooms)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.id])||[],c=X(e,i,n,t||"fullDay",l),d=Z(c),x=d.finalPrice,h="hourly"===t?1:Math.max(1,Number(de.get("nights"))||1),p=u*h;return(0,r.A)((0,r.A)({},e),{},{_pricing:{perRoomFinal:x,perRoomBase:d.basePrice,perRoomPlatform:d.platformFee,perRoomGstTotal:d.gstTotal,roomsCount:u,nights:h,totalFinal:+x*p,totalBase:+d.basePrice*p,totalPlatform:+d.platformFee*p,totalGst:+d.gstTotal*p}})}),p=h.filter(e=>e._locationRelevanceScore>=50),m=h.filter(e=>e._locationRelevanceScore>=20&&e._locationRelevanceScore<50),f=h.filter(e=>e._locationRelevanceScore<20&&e._locationRelevanceScore>0),v=h.filter(e=>0===e._locationRelevanceScore);return console.log("\ud83d\udccd Location Relevance Analysis:"),console.log("  \ud83d\udd25 High relevance (>=50): ".concat(p.length," hotels")),console.log("  \u26a1 Medium relevance (20-49): ".concat(m.length," hotels")),console.log("  \ud83d\udd0d Low relevance (1-19): ".concat(f.length," hotels")),console.log("  \u274c No relevance: ".concat(v.length," hotels")),h.slice(0,5).forEach((e,t)=>{console.log("".concat(t+1,". ").concat(e.propertyName," - Location Score: ").concat(e._locationRelevanceScore," - Address: ").concat(e.address))}),h})();l(e);const t=e.length;console.log("Total items for pagination: ".concat(t));const a=Math.ceil(t/5);q(a);const s=5*(U-1),i=s+5,n=e.slice(s,i);d(n)}},[z,o,t.search,U,g,j]);const be=(0,F.useCallback)((t,o)=>{G(o);const s=new URLSearchParams(de.toString());s.set("page",o.toString()),e({search:s.toString()},{replace:!0});const i=5*(o-1),n=i+5,l=le.slice(i,n).filter(e=>!ie.has(e));l.length>0&&!ee&&(async()=>{try{const e=await Ae(l,0,l.length);if(e.length>0&&h){const t=ve(e,h),o=de.get("checkinDate")||P()().format("YYYY-MM-DD"),s=t.map(async e=>{const t=await fe(e,o);return{hotelId:e.id,inventory:t}}),i=(await Promise.all(s)).reduce((e,t)=>{let{hotelId:o,inventory:r}=t;return e[o]=r,e},{});f(e=>(0,r.A)((0,r.A)({},e),i)),a(e=>{const o=new Set(e.map(e=>e.id)),r=t.filter(e=>!o.has(e.id));return[...e,...r]}),ne(e=>{const t=new Set(e);return l.forEach(e=>t.add(e)),t}),E.hotels=[...E.hotels,...t],E.lastFetched=Date.now()}}catch(e){console.error("Error fetching missing hotels:",e)}})(),window.scrollTo({top:0,behavior:"smooth"})},[le,ie,ee,h,de,e]),ye=[Number(de.get("minBudget"))||100,Number(de.get("maxBudget"))||2e4],Se=de.get("bookingHours")||"3",we=de.get("sortBy")||"all",[je,ke]=(0,F.useState)(ye),[Ce,ze]=(0,F.useState)(Se),[He,Fe]=(0,F.useState)(we),Be=(o,r)=>{const a=new URLSearchParams(t.search);Array.isArray(r)?(a.set("minBudget",String(r[0])),a.set("maxBudget",String(r[1]))):a.set(o,String(r)),a.set("page","1"),G(1),e({search:a.toString()},{replace:!0})};(0,F.useEffect)(()=>{const o=new URLSearchParams(t.search);let r=!1;o.has("minBudget")||(o.set("minBudget",String(ye[0])),r=!0),o.has("maxBudget")||(o.set("maxBudget",String(ye[1])),r=!0),o.has("bookingHours")||(o.set("bookingHours",Se),r=!0),o.has("sortBy")||(o.set("sortBy",we),r=!0),o.has("page")||(o.set("page","1"),r=!0),r&&e({search:o.toString()},{replace:!0})},[]);const Re=(0,_.jsxs)(x.A,{sx:{position:"sticky",top:20},children:[(0,_.jsxs)(x.A,{sx:(0,r.A)((0,r.A)({},W.VX),{},{mt:3}),children:[(0,_.jsx)(m.A,{sx:(0,r.A)((0,r.A)({},oe),{},{mb:5}),children:"Budget"}),(0,_.jsx)(v.Ay,{value:je,onChange:(e,t,o)=>{Array.isArray(t)&&(ke(t),Be("minBudget",t[0]),Be("maxBudget",t[1]))},step:100,min:100,max:2e4,sx:{color:R.A.secondColor,"& .MuiSlider-thumb":{backgroundColor:"white",border:"2px solid ".concat(R.A.secondColor),width:20,height:20},"& .MuiSlider-valueLabel":{backgroundColor:R.A.secondColor,color:"white",fontSize:"12px",borderRadius:"5px",padding:"2px 8px"},"& .MuiSlider-track":{height:6},"& .MuiSlider-rail":{height:6,opacity:.3}},valueLabelFormat:e=>"\u20b9".concat(e),valueLabelDisplay:"on"}),(0,_.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between",mt:1},children:[(0,_.jsxs)(m.A,{sx:{fontSize:"14px",fontWeight:600,color:R.A.firstColor},children:["\u20b9",je[0]]}),(0,_.jsxs)(m.A,{sx:{fontSize:"14px",fontWeight:600,color:R.A.firstColor},children:["\u20b9",je[1]]})]})]}),"hourly"===de.get("bookingType")&&(0,_.jsxs)(x.A,{sx:(0,r.A)({},W.VX),children:[(0,_.jsx)(m.A,{sx:(0,r.A)({},oe),children:"Book For"}),(0,_.jsx)(x.A,{sx:{display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",gap:"8px",mt:1},children:["3","6","12"].map(e=>(0,_.jsxs)(re,{value:e,selected:Ce===e,onClick:()=>{return ze(t=e),void Be("bookingHours",t);var t},sx:{flex:1,minWidth:{xs:"30%",sm:"auto"},py:1,fontSize:{xs:"11px",sm:"12px",md:"13px"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[e," Hours"]},e))})]}),(0,_.jsxs)(x.A,{sx:(0,r.A)({},W.VX),children:[(0,_.jsx)(m.A,{sx:(0,r.A)({},oe),children:"Sort By"}),(0,_.jsxs)(A.A,{sx:{mt:0},value:He,onChange:e=>{return t=e.target.value,Fe(t),void Be("sortBy",t);var t},children:[(0,_.jsx)(ae,{value:"all",control:(0,_.jsx)(W.YY,{}),label:"All"}),(0,_.jsx)(ae,{value:"lowToHigh",control:(0,_.jsx)(W.YY,{}),label:"Price Low To High"}),(0,_.jsx)(ae,{value:"highToLow",control:(0,_.jsx)(W.YY,{}),label:"Price High To Low"}),(0,_.jsx)(ae,{value:"popularity",control:(0,_.jsx)(W.YY,{}),label:"Popularity"}),(0,_.jsx)(ae,{value:"rating",control:(0,_.jsx)(W.YY,{}),label:"Customer Rating"}),(0,_.jsx)(ae,{value:"locationRelevance",control:(0,_.jsx)(W.YY,{}),label:"Near Search Location"})]})]}),(0,_.jsx)(x.A,{sx:(0,r.A)((0,r.A)({},W.VX),{},{mt:3}),children:(0,_.jsx)(M.A,{variant:"contained",onClick:()=>{ue&&T(!1);const t=new URLSearchParams(de.toString());t.set("page","1"),e({search:t.toString()},{replace:!0})},customStyles:{width:"100%",padding:"12px",fontSize:"16px",fontWeight:700,background:"linear-gradient(135deg, #4B2AAD, #6C4BD3)",boxShadow:"0 4px 12px rgba(75, 42, 173, 0.3)"},children:"Apply Filters"})}),ee&&(0,_.jsx)(x.A,{sx:(0,r.A)((0,r.A)({},W.VX),{},{mt:2}),children:(0,_.jsx)(m.A,{sx:{fontSize:"12px",color:"#666",textAlign:"center"},children:"Loading more hotels in background..."})})]}),Me={"@context":"https://schema.org","@type":"ItemList",itemListElement:c.map((e,t)=>({"@type":"ListItem",position:t+1,url:"https://huts4u.com/hotel/".concat(e.id),name:e.propertyName}))};return(0,_.jsxs)(x.A,{sx:{background:R.A.thirdColor,p:{xs:2,sm:3,md:4},minHeight:"100vh"},children:[(0,_.jsxs)(L.mg,{children:[(0,_.jsx)("title",{children:"Search Hotels in Bhubaneswar | Huts4u"}),(0,_.jsx)("meta",{name:"description",content:"Search and book hourly hotels in Bhubaneswar quickly. Find hotels near you for short stays, business trips, or leisure visits."}),(0,_.jsx)("link",{rel:"canonical",href:"https://huts4u.com/search"}),(0,_.jsx)("script",{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"WebPage",name:"Search Hotels",url:"https://huts4u.com/search"})}),c.length>0&&(0,_.jsx)("script",{type:"application/ld+json",children:JSON.stringify(Me)})]}),(0,_.jsx)(I.A,{}),(0,_.jsxs)(b.Ay,{container:!0,spacing:{xs:2,md:3},children:[ue?(0,_.jsx)(y.Ay,{anchor:"left",open:N,onClose:()=>T(!1),sx:{"& .MuiDrawer-paper":{width:{xs:"100%",sm:"85%"},maxWidth:400,height:"100%",overflowY:"auto"}},children:(0,_.jsxs)(x.A,{sx:{p:{xs:2,sm:3},height:"100%",overflowY:"auto"},children:[(0,_.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,position:"sticky",top:0,zIndex:1,pb:2,borderBottom:"1px solid #eee"},children:[(0,_.jsx)(m.A,{variant:"h5",sx:{background:"linear-gradient(135deg, #f3eee1, #e8e0cf)",width:"fit-content",borderRadius:"8px",p:1.5,fontWeight:700,color:R.A.firstColor,fontSize:{xs:"16px",md:"18px"},boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:"Filter & Sort"}),(0,_.jsx)(i.A,{onClick:()=>T(!1),sx:{fontSize:28,color:R.A.firstColor,cursor:"pointer","&:hover":{opacity:.8}}})]}),Re]})}):(0,_.jsx)(b.Ay,{item:!0,xs:12,md:3,lg:2.5,children:Re}),(0,_.jsxs)(b.Ay,{item:!0,xs:12,md:9,lg:9.5,children:[(0,_.jsxs)(x.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},mb:3,flexWrap:"wrap",gap:2,flexDirection:{xs:"column",sm:"row"}},children:[z?(0,_.jsx)(u.A,{width:200,height:32}):(0,_.jsxs)(x.A,{children:[(0,_.jsxs)(m.A,{variant:"h6",sx:{fontWeight:700,fontSize:{xs:"17px",sm:"18px",md:"20px"},color:R.A.firstColor,marginTop:"10px"},children:[s.length," properties found",ee&&" (loading more...)"]}),V>1&&(0,_.jsxs)(m.A,{variant:"body2",sx:{color:"#666",fontSize:{xs:"13px",md:"14px"},mt:.5},children:["Page ",U," of ",V,ee&&" \u2022 Background loading active"]})]}),ue&&(0,_.jsx)(x.A,{sx:{display:"flex",gap:1,width:"100%"},children:(0,_.jsx)(M.A,{customStyles:{padding:"8px 16px",fontSize:"14px",borderRadius:"8px",flex:1},onClick:()=>T(!0),variant:"contained",startIcon:(0,_.jsx)(n.A,{}),children:"Filter & Sort"})})]}),z?[...Array(5)].map((e,t)=>(0,_.jsx)(O,{isMobile:ue},t)):c.length>0?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(x.A,{sx:{mb:4},children:c.map(e=>{var t,o,r;const a=e.id,s=K(h,a),i=(null===(t=g[a])||void 0===t?void 0:t[null===(o=e.rooms)||void 0===o||null===(r=o[0])||void 0===r?void 0:r.id])||[];return(0,_.jsx)(te,{hotel:e,queryParams:de,isMobile:ue,hotelRatings:s,inventoryData:i,hourlyClosures:j},e.id)})}),V>1&&(0,_.jsxs)(x.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mt:4,mb:2,flexDirection:{xs:"column",sm:"row"},gap:{xs:2,sm:0}},children:[(0,_.jsx)(S.A,{count:V,page:U,onChange:be,color:"primary",size:ue||he?"medium":"large",showFirstButton:!ue,showLastButton:!ue,siblingCount:ue?1:2,boundaryCount:ue?1:2,renderItem:e=>(0,_.jsx)(w.A,(0,r.A)((0,r.A)({},e),{},{sx:{"&.Mui-selected":{backgroundColor:R.A.firstColor,color:R.A.thirdColor,"&:hover":{backgroundColor:R.A.secondColor}},"&.MuiPaginationItem-root":{fontWeight:600,fontSize:{xs:"14px",md:"14px"},minWidth:{xs:"36px",sm:"40px",md:"48px"},height:{xs:"36px",sm:"40px",md:"48px"}}}}))}),!ue&&(0,_.jsxs)(m.A,{variant:"body2",sx:{ml:2,color:"#666",fontSize:"14px",fontWeight:500,whiteSpace:"nowrap"},children:["Showing ",Math.min(5*(U-1)+1,s.length),"-",Math.min(5*U,s.length)," of ",s.length," properties"]})]})]}):(0,_.jsx)(x.A,{sx:{textAlign:"center",py:8,px:2},children:(0,_.jsxs)(x.A,{sx:{maxWidth:400,mx:"auto",p:4,borderRadius:"16px",background:"linear-gradient(135deg, #f8f9ff, #f0f2ff)",boxShadow:"0 4px 20px rgba(0,0,0,0.05)"},children:[(0,_.jsx)(m.A,{variant:"h5",sx:{fontWeight:700,color:R.A.firstColor,mb:2,fontSize:{xs:"20px",md:"22px"}},children:"No properties found"}),(0,_.jsx)(m.A,{variant:"body1",sx:{color:"#666",mb:3,fontSize:{xs:"14px",md:"16px"}},children:"Try adjusting your search criteria or filters"}),(0,_.jsx)(M.A,{variant:"contained",onClick:()=>e("/"),customStyles:{background:"linear-gradient(135deg, #4B2AAD, #6C4BD3)",borderRadius:"8px",fontSize:"15px",fontWeight:600},children:"Search Again"})]})})]})]})]})}}}]);
//# sourceMappingURL=537.329c0ff7.chunk.js.map