"use strict";(self.webpackChunkhuts4u=self.webpackChunkhuts4u||[]).push([[812],{51962:(e,o,t)=>{t.d(o,{A:()=>w});var i=t(80045),n=t(89379),l=t(65043),r=t(58387),a=t(98610),s=t(39768),d=t(33064),c=t(59662),u=t(70579);const h=(0,c.A)((0,u.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),m=(0,c.A)((0,u.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),x=(0,c.A)((0,u.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var p=t(6803),v=t(61475),f=t(92532),g=t(72372);function b(e){return(0,g.Ay)("MuiCheckbox",e)}const A=(0,f.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]);var y=t(34535),j=t(56262),k=t(52445),D=t(98206),Y=t(81139),S=t(4162);const C=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","disableRipple","className","slots","slotProps"],M=(0,y.Ay)(d.A,{shouldForwardProp:e=>(0,v.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.root,t.indeterminate&&o.indeterminate,o["size".concat((0,p.A)(t.size))],"default"!==t.color&&o["color".concat((0,p.A)(t.color))]]}})((0,j.A)(e=>{let{theme:o}=e;return{color:(o.vars||o).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:o.vars?"rgba(".concat(o.vars.palette.action.activeChannel," / ").concat(o.vars.palette.action.hoverOpacity,")"):(0,s.X4)(o.palette.action.active,o.palette.action.hoverOpacity)}}},...Object.entries(o.palette).filter((0,k.A)()).map(e=>{let[t]=e;return{props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:o.vars?"rgba(".concat(o.vars.palette[t].mainChannel," / ").concat(o.vars.palette.action.hoverOpacity,")"):(0,s.X4)(o.palette[t].main,o.palette.action.hoverOpacity)}}}}),...Object.entries(o.palette).filter((0,k.A)()).map(e=>{let[t]=e;return{props:{color:t},style:{["&.".concat(A.checked,", &.").concat(A.indeterminate)]:{color:(o.vars||o).palette[t].main},["&.".concat(A.disabled)]:{color:(o.vars||o).palette.action.disabled}}}}),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}})),R=(0,u.jsx)(m,{}),F=(0,u.jsx)(h,{}),P=(0,u.jsx)(x,{}),w=l.forwardRef(function(e,o){var t,s,d;const c=(0,D.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:h=R,color:m="primary",icon:x=F,indeterminate:v=!1,indeterminateIcon:f=P,inputProps:g,size:A="medium",disableRipple:y=!1,className:j,slots:k={},slotProps:w={}}=c,I=(0,i.A)(c,C),z=v?f:x,H=v?f:h,O=(0,n.A)((0,n.A)({},c),{},{disableRipple:y,color:m,indeterminate:v,size:A}),T=(e=>{const{classes:o,indeterminate:t,color:i,size:l}=e,r={root:["root",t&&"indeterminate","color".concat((0,p.A)(i)),"size".concat((0,p.A)(l))]},s=(0,a.A)(r,b,o);return(0,n.A)((0,n.A)({},o),s)})(O),N=null!==(t=w.input)&&void 0!==t?t:g,[W,B]=(0,S.A)("root",{ref:o,elementType:M,className:(0,r.A)(T.root,j),shouldForwardComponentProp:!0,externalForwardedProps:(0,n.A)({slots:k,slotProps:w},I),ownerState:O,additionalProps:{type:"checkbox",icon:l.cloneElement(z,{fontSize:null!==(s=z.props.fontSize)&&void 0!==s?s:A}),checkedIcon:l.cloneElement(H,{fontSize:null!==(d=H.props.fontSize)&&void 0!==d?d:A}),disableRipple:y,slots:k,slotProps:{input:(0,Y.A)("function"===typeof N?N(O):N,{"data-indeterminate":v})}}});return(0,u.jsx)(W,(0,n.A)((0,n.A)({},B),{},{classes:T}))})},53812:(e,o,t)=>{t.r(o),t.d(o,{calculatePriceBreakdown:()=>K,default:()=>Z});var i=t(89379),n=t(7353),l=t(12110),r=t(26494),a=t(94496),s=t(14194),d=t(11906),c=t(36591),u=t(67784),h=t(17392),m=t(53193),x=t(79190),p=t(57465),v=t(32143),f=t(74605),g=t(51962),b=t(39336),A=t(83462),y=t(26600),j=t(35316),k=t(29347),D=t(59662),Y=t(70579);const S=(0,D.A)((0,Y.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");var C=t(33438),M=t(83560);const R=(0,D.A)((0,Y.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonAdd"),F=(0,D.A)((0,Y.jsx)("path",{d:"m21.41 11.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58s1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41s-.23-1.06-.59-1.42M5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7"}),"LocalOffer");var P=t(60446),w=t.n(P),I=t(63516),z=t(65043),H=t(17195),O=t.n(H),T=t(73216),N=t(57488),W=t(80899),B=t(31716),G=t(69995),V=t(59007),L=t(33580),E=t(82533);const q=e=>{let{orderDetails:o,bookingDetails:t}=e;const[i,n]=(0,z.useState)(""),[l,r]=(0,z.useState)(""),[a,s]=((0,T.Zp)(),(0,z.useState)(!0));console.log(t),(0,z.useEffect)(()=>{var e;"hourly"!==(null===t||void 0===t?void 0:t.bookingType)&&(0,G.ge)(null===t||void 0===t||null===(e=t.room)||void 0===e?void 0:e.id).then(e=>{var o,t,i,l;n((null===e||void 0===e||null===(o=e.data)||void 0===o||null===(t=o.data)||void 0===t?void 0:t.checkInTime)||""),r((null===e||void 0===e||null===(i=e.data)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.checkOutTime)||"")})},[t]);const c=()=>s(!1);return(0,Y.jsx)("div",{children:(0,Y.jsxs)(A.A,{open:a,onClose:c,maxWidth:"xs",fullWidth:!0,sx:{"& .MuiPaper-root":{padding:"8px",borderRadius:"16px"}},children:[(0,Y.jsx)(y.A,{children:"Complete Your Payment"}),(0,Y.jsx)(j.A,{children:(0,Y.jsx)("p",{children:"Ensure your payment details are correct before proceeding."})}),(0,Y.jsxs)(k.A,{style:{display:"flex",justifyContent:"flex-end"},children:[(0,Y.jsx)(d.A,{style:{textTransform:"none",color:"black"},onClick:c,children:"Cancel"}),(0,Y.jsx)(d.A,{onClick:async()=>{var e,n,r;var a;if(!await(a="https://checkout.razorpay.com/v1/checkout.js",new Promise(e=>{const o=document.createElement("script");o.src=a,o.onload=()=>e(!0),o.onerror=()=>e(!1),document.body.appendChild(o)}))||!window.Razorpay)return void alert("Failed to load Razorpay SDK.");const s=(()=>{var e,o,n,r;return"hourly"===(null===t||void 0===t?void 0:t.bookingType)?{checkInTime:null===t||void 0===t||null===(e=t.timing)||void 0===e?void 0:e.checkInTime,checkOutTime:null===t||void 0===t||null===(o=t.timing)||void 0===o?void 0:o.checkOutTime}:{checkInTime:i||(null===t||void 0===t||null===(n=t.timing)||void 0===n?void 0:n.checkInTime),checkOutTime:l||(null===t||void 0===t||null===(r=t.timing)||void 0===r?void 0:r.checkOutTime)}})(),d={key:V.tz||"",amount:o.data.amount,currency:o.data.currency,order_id:o.data.id,prefill:{name:null===t||void 0===t||null===(e=t.guestInfo)||void 0===e?void 0:e.name,email:null===t||void 0===t||null===(n=t.guestInfo)||void 0===n?void 0:n.email,contact:null===t||void 0===t||null===(r=t.guestInfo)||void 0===r?void 0:r.phoneNumber},handler:async e=>{try{var i,n,l,r,a,d,c,u;const h=await(0,G.KF)({orderId:e.razorpay_order_id,paymentId:e.razorpay_payment_id,signature:e.razorpay_signature});console.log(h),alert("Payment Successful");const m={userId:(0,E.F6)(),hotelId:null===t||void 0===t||null===(i=t.hotel)||void 0===i?void 0:i.id,roomId:null===t||void 0===t||null===(n=t.room)||void 0===n?void 0:n.id,geustName:null===t||void 0===t||null===(l=t.guestInfo)||void 0===l?void 0:l.name,amountPaid:o.data.amount,checkInDate:null===t||void 0===t||null===(r=t.timing)||void 0===r?void 0:r.checkInDate,checkInTime:s.checkInTime,checkOutTime:s.checkOutTime,checkOutDate:null===t||void 0===t||null===(a=t.timing)||void 0===a?void 0:a.checkOutDate,bookingType:null===t||void 0===t?void 0:t.bookingType,geustDetails:null===t||void 0===t?void 0:t.guestInfo,adults:null===t||void 0===t?void 0:t.adults,children:null===t||void 0===t?void 0:t.children,hotelName:null===t||void 0===t||null===(d=t.hotel)||void 0===d?void 0:d.propertyName,status:"pending",paymentId:null===h||void 0===h||null===(c=h.data)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.id,rooms:null===t||void 0===t?void 0:t.rooms};console.log(m),(0,G.UY)(m).then(e=>{var i,n,l,r,a,d,c,u,h,m,x,p,v,f,g,b,A,y,j,k,D,Y,S,C,M,R,F,P,I,z,H,O,T,W,B,V,L,q,U,_,X,K,Z,$,J,Q,ee;const oe={userId:(0,E.F6)(),paymentId:null===e||void 0===e||null===(i=e.data)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.id,hotelId:null===t||void 0===t||null===(l=t.hotel)||void 0===l?void 0:l.id,roomId:null===t||void 0===t||null===(r=t.room)||void 0===r?void 0:r.id,bookingId:null===e||void 0===e||null===(a=e.data)||void 0===a||null===(d=a.data)||void 0===d?void 0:d.id,amountPaise:o.data.amount,feePaise:100*((null===t||void 0===t||null===(c=t.pricingDetails)||void 0===c?void 0:c.platformFee)+(null===t||void 0===t||null===(u=t.pricingDetails)||void 0===u?void 0:u.gstOnPlatform)),netAmountPaise:100*((null===t||void 0===t||null===(h=t.pricingDetails)||void 0===h?void 0:h.basePrice)+(null===t||void 0===t||null===(m=t.pricingDetails)||void 0===m?void 0:m.gstOnBase)),currency:"INR",bookingsIncluded:[{id:null===e||void 0===e||null===(x=e.data)||void 0===x||null===(p=x.data)||void 0===p?void 0:p.id,bookingDate:null===e||void 0===e||null===(v=e.data)||void 0===v||null===(f=v.data)||void 0===f?void 0:f.checkInDate}],scheduledAt:w()(null===t||void 0===t||null===(g=t.timing)||void 0===g?void 0:g.checkInDate,"DD MMM YYYY").toDate(),status:"pending",transactionRef:null,gatewayResponse:null,failureReason:null,processedBy:null,note:"Daily PayOut "},te={userId:(0,E.F6)(),paymentId:null===e||void 0===e||null===(b=e.data)||void 0===b||null===(A=b.data)||void 0===A?void 0:A.id,hotelId:null===t||void 0===t||null===(y=t.hotel)||void 0===y?void 0:y.id,bookingId:null===e||void 0===e||null===(j=e.data)||void 0===j||null===(k=j.data)||void 0===k?void 0:k.id,roomId:null===t||void 0===t||null===(D=t.room)||void 0===D?void 0:D.id,amountPaise:o.data.amount,feePaise:100*((null===t||void 0===t||null===(Y=t.pricingDetails)||void 0===Y?void 0:Y.platformFee)+(null===t||void 0===t||null===(S=t.pricingDetails)||void 0===S?void 0:S.gstOnPlatform)),netmyAmountPaise:100*((null===t||void 0===t||null===(C=t.pricingDetails)||void 0===C?void 0:C.platformFee)+(null===t||void 0===t||null===(M=t.pricingDetails)||void 0===M?void 0:M.gstOnPlatform)),currency:"INR",bookingsIncluded:[null===e||void 0===e||null===(R=e.data)||void 0===R||null===(F=R.data)||void 0===F?void 0:F.id],scheduledAt:w()(null===t||void 0===t||null===(P=t.timing)||void 0===P?void 0:P.checkInDate,"DD MMM YYYY").toDate(),initiatedAt:new Date,processedAt:null,status:"pending",transactionRef:null,gatewayResponse:null,failureReason:null,processedBy:null,note:"Auto payout settlement"};console.log(te),(0,G.VL)(te).then(e=>{console.log("My Payment is scheduled")}).catch(e=>{console.log("error while creating the mypayment",e)}),console.log(oe),(0,G.fT)(oe).then(e=>{console.log("My Payout is scheduled")}).catch(e=>{console.log("error while creating the PayOut ",e)}),(0,N.oR)(null===e||void 0===e||null===(I=e.data)||void 0===I?void 0:I.msg);const ie={guestName:null===t||void 0===t||null===(z=t.guestInfo)||void 0===z?void 0:z.name,location:null===t||void 0===t||null===(H=t.hotel)||void 0===H?void 0:H.address,hotelName:null===t||void 0===t||null===(O=t.hotel)||void 0===O?void 0:O.propertyName,checkInDate:w()(null===t||void 0===t||null===(T=t.timing)||void 0===T?void 0:T.checkInDate,"DD MMM YYYY").format("DD MMM YYYY"),checkInTime:s.checkInTime,phone:null===t||void 0===t||null===(W=t.guestInfo)||void 0===W?void 0:W.phoneNumber,amountPaid:(null===t||void 0===t||null===(B=t.pricingDetails)||void 0===B?void 0:B.basePrice)+(null===t||void 0===t||null===(V=t.pricingDetails)||void 0===V?void 0:V.gstOnBase),basePrice:null===t||void 0===t||null===(L=t.pricingDetails)||void 0===L?void 0:L.basePrice,gstOnBase:null===t||void 0===t||null===(q=t.pricingDetails)||void 0===q?void 0:q.gstOnBase,razorpayfee:(null===t||void 0===t||null===(U=t.pricingDetails)||void 0===U?void 0:U.gstTotal)-((null===t||void 0===t||null===(_=t.pricingDetails)||void 0===_?void 0:_.gstOnBase)+(null===t||void 0===t||null===(X=t.pricingDetails)||void 0===X?void 0:X.gstOnPlatform)),platformFee:null===t||void 0===t||null===(K=t.pricingDetails)||void 0===K?void 0:K.platformFee,gstOnPlatform:null===t||void 0===t||null===(Z=t.pricingDetails)||void 0===Z?void 0:Z.gstOnPlatform,totalPrice:null===t||void 0===t||null===($=t.pricingDetails)||void 0===$?void 0:$.totalPrice,adults:null===t||void 0===t?void 0:t.adults,children:null===t||void 0===t?void 0:t.children,rooms:1,checkOutTime:s.checkOutTime,checkOutDate:w()(null===t||void 0===t||null===(J=t.timing)||void 0===J?void 0:J.checkOutDate,"DD MMM YYYY").format("DD MMM YYYY"),hotelEmail:null===t||void 0===t||null===(Q=t.hotel)||void 0===Q?void 0:Q.receptionEmail,receptionistPhone:null===t||void 0===t||null===(ee=t.hotel)||void 0===ee?void 0:ee.receptionMobile};console.log(ie),(0,G.Ud)(ie).then(e=>{console.log("message send to the wp",e)}).catch(e=>{console.log(e)}),window.location.href="/my-bookings"}).catch(e=>{console.log(e)})}catch(h){alert("Payment verification failed. Please try again.")}}};new window.Razorpay(d).open()},variant:"contained",style:{background:L.A.firstColor,fontSize:"18px",textTransform:"none",border:"solid 1px white"},sx:{padding:"2px 10px",transition:"all 0.4s ease","&:hover":{paddingRight:"20px"}},children:"Proceed to Pay"})]})]})})};var U=t(61968),_=t(88553);const X=W.Ik({name:W.Yj().required("Guest name is required"),email:W.Yj().email("Invalid email").optional(),phoneNumber:W.Yj().required("Phone number is required").test("is-valid-phone","Enter a valid phone number",e=>{if(!e)return!1;return e.slice(2).length>=10})}),K=function(e){let o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const t=Number(e)||0;if(!t||t<=0)return{basePrice:0,gstOnBase:0,platformFee:0,gstOnPlatform:0,convenienceFee:0,gstOnConvenience:0,totalWithoutDiscount:0,couponDiscount:0,finalPrice:0};const i=.05*t,n=.13*(t+i),l=.18*n,r=t+i+n+l,a=.02*r,s=.18*a,d=r+a+s;let c=0;o&&(c=.05*d);return{basePrice:t,gstOnBase:i,platformFee:n,gstOnPlatform:l,convenienceFee:a,gstOnConvenience:s,totalWithoutDiscount:d,couponDiscount:c,finalPrice:d-c}},Z=()=>{var e,o,t,D,P,H,W;const V=(0,T.zy)(),Z=null===(e=V.state)||void 0===e?void 0:e.hotelData,J=null===(o=V.state)||void 0===o?void 0:o.selectedRoom,Q=null===(t=V.state)||void 0===t?void 0:t.selectedSlot,ee=(null===(D=V.state)||void 0===D||D.pricingDetails,(null===(P=V.state)||void 0===P?void 0:P.inventoryData)||[]),oe=new URLSearchParams(V.search),te=oe.get("bookingType"),ie=oe.get("time"),ne=oe.get("checkinDate"),le=oe.get("checkOutDate"),re=oe.get("rooms"),ae=oe.get("adults"),se=oe.get("children"),[de,ce]=(0,z.useState)(te),[ue,he]=(0,z.useState)(ie||"12:00"),[me,xe]=(0,z.useState)(ne||w()().format("YYYY-MM-DD")),[pe,ve]=(0,z.useState)(le||w()().add(1,"day").format("YYYY-MM-DD")),[fe,ge]=(0,z.useState)(re||"1"),[be,Ae]=(0,z.useState)(ae||"1"),[ye,je]=(0,z.useState)(se||"0"),[ke,De]=(0,z.useState)(!1),[Ye,Se]=(0,z.useState)(!1),[Ce,Me]=(0,z.useState)(!1),[Re,Fe]=(0,z.useState)(ne||w()().format("YYYY-MM-DD")),[Pe,we]=(0,z.useState)(le||w()().add(1,"day").format("YYYY-MM-DD")),[Ie,ze]=(0,z.useState)(ie||"12:00"),He=null===Q||void 0===Q?void 0:Q.slot,Oe=null===He||void 0===He||null===(H=He.match(/\d+/))||void 0===H?void 0:H[0],Te=Oe?parseInt(Oe,10):3,[Ne,We]=(0,z.useState)(Te),[Be,Ge]=(0,z.useState)(Te),[Ve,Le]=(0,z.useState)({}),[Ee,qe]=(0,z.useState)(!1),[Ue,_e]=(0,z.useState)({phone:"",name:"",email:"",token:""}),[Xe,Ke]=(0,z.useState)(null),[Ze,$e]=(0,z.useState)(!1),[Je,Qe]=(0,z.useState)(!1),[eo,oo]=(0,z.useState)("HUTS4U"),[to,io]=(0,z.useState)(!0),[no,lo]=(0,z.useState)(""),[ro,ao]=(0,z.useState)(null),so=(0,z.useRef)(null),co=(0,z.useRef)(null),uo=((e,o,t,i)=>{let n=0,l=0,r=0;const a=[];if(e<=0)return{requiredRooms:1,extraGuestCount:0,extraGuestCharge:0,guestsPerRoom:[0]};n=Math.ceil(e/t);let s=e;for(let c=0;c<n;c++)s>=o?(a[c]=o,s-=o):(a[c]=s,s=0);let d=0;for(;s>0&&d<n;)a[d]<t&&(a[d]+=1,s-=1),d++,d>=n&&s>0&&(d=0);return a.forEach(e=>{if(e>o){const t=e-o;l+=t,r+=t*i}}),{requiredRooms:n,extraGuestCount:l,extraGuestCharge:r,guestsPerRoom:a}})(Number(be)+Number(ye),(null===J||void 0===J?void 0:J.standardRoomOccupancy)||1,(null===J||void 0===J?void 0:J.maxRoomOccupancy)||1,(null===J||void 0===J?void 0:J.additionalGuestRate)||0),{requiredRooms:ho,extraGuestCount:mo,extraGuestCharge:xo,guestsPerRoom:po}=uo,vo=e=>{if(!J||!me||!e)return 0;const o=w()(me).format("YYYY-MM-DD"),t=null===ee||void 0===ee?void 0:ee.find(e=>w()(e.date).format("YYYY-MM-DD")===o);if(!t)switch(e){case"rateFor1Night":return J.rateFor1Night||0;case"rateFor3Hour":return J.rateFor3Hour||0;case"rateFor6Hour":return J.rateFor6Hour||0;case"rateFor12Hour":return J.rateFor12Hour||0;default:return 0}switch(e){case"rateFor1Night":return t.overnightRate||J.rateFor1Night||0;case"rateFor3Hour":return t.threeHourRate||J.rateFor3Hour||0;case"rateFor6Hour":return t.sixHourRate||J.rateFor6Hour||0;case"rateFor12Hour":return t.twelveHourRate||J.rateFor12Hour||0;default:return 0}},fo=()=>{if("hourly"!==de)return"rateFor1Night";switch(Ne){case 3:default:return"rateFor3Hour";case 6:return"rateFor6Hour";case 12:return"rateFor12Hour"}},go=(e=>{var o;if(!J||!me||!e)return!1;const t=null===(o=J.status)||void 0===o?void 0:o.toLowerCase();if("available"!==t&&"active"!==t)return!1;const i=w()(me).format("YYYY-MM-DD"),n=null===ee||void 0===ee?void 0:ee.find(e=>w()(e.date).format("YYYY-MM-DD")===i);if(!n)return!0;if(n.isBlocked)return!1;switch(e){case"rateFor1Night":return n.overnightAvailable>n.overnightBooked;case"rateFor3Hour":return n.threeHourAvailable>n.threeHourBooked;case"rateFor6Hour":return n.sixHourAvailable>n.sixHourBooked;case"rateFor12Hour":return n.twelveHourAvailable>n.twelveHourBooked;default:return!0}})(fo())?{isAvailable:!0,message:"Available"}:{isAvailable:!1,message:"The selected room/slot is no longer available. Please go back and select another room or date."},bo=Number((()=>{const e=fo();return vo(e)})());(0,z.useEffect)(()=>{Number(fe)!==ho&&ge(ho.toString())},[be,ye,J]),(0,z.useEffect)(()=>{(0,E.M3)()&&(0,G.E$)().then(e=>{var o;Le(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.data)}).catch(e=>{console.log(e)})},[]);const Ao=()=>{if(!me||!pe)return 1;const e=w()(me,"YYYY-MM-DD",!0),o=w()(pe,"YYYY-MM-DD",!0);if(!e.isValid()||!o.isValid())return 1;const t=o.diff(e,"day");return Math.max(1,t)},yo=Ao(),jo=(()=>{let e;if("hourly"===de){e=ho*(Ne/3)}else e=ho*yo;const o=K(bo*e,to);return(0,i.A)((0,i.A)({},o),{},{nights:yo,totalMultiplier:e,bookingType:de,slotDuration:Ne,requiredRooms:ho,unitBase:bo})})(),{basePrice:ko,gstOnBase:Do,platformFee:Yo,gstOnPlatform:So,convenienceFee:Co,gstOnConvenience:Mo,totalWithoutDiscount:Ro,couponDiscount:Fo,finalPrice:Po,unitBase:wo}=jo,Io=ko,zo=Io+700,Ho=ko+Yo,Oo=Do+So+Co+Mo,To=Number(Po.toFixed(2)),No=Yo,Wo=So/2,Bo=So/2,Go=Co+Mo,Vo=To,Lo=async()=>{try{if(!Vo||Vo<=0)return void alert("Booking amount cannot be zero.");const e={amount:Math.round(Vo),currency:"INR"},o=await(0,G.fS)(e);null!==o&&void 0!==o&&o.data?Ke(o.data):alert("Payment failed. Please try again.")}catch(e){console.error("Error during payment:",e),alert("Payment failed. Please try again.")}},Eo=(0,T.Zp)(),qo=(0,I.Wx)({initialValues:{name:Ve.userName||"",email:Ve.email||"",phoneNumber:Ve.phoneNumber?"91".concat(Ve.phoneNumber):"91"},validationSchema:X,enableReinitialize:!0,onSubmit:e=>{if(ao(null),go.isAvailable){var o,t,i;if(!e.name.trim())return ao("Guest name is required"),null===(o=so.current)||void 0===o||o.focus(),void(null===(t=so.current)||void 0===t||t.scrollIntoView({behavior:"smooth",block:"center"}));if(!e.phoneNumber||"91"===e.phoneNumber||e.phoneNumber.length<12)return ao("Valid phone number is required"),void(null===(i=co.current)||void 0===i||i.scrollIntoView({behavior:"smooth",block:"center"}));if(Ze)if((0,E.M3)())Lo();else{const o={name:e.name,email:e.email,phone:e.phoneNumber.slice(2)};(0,G.AJ)(o).then(o=>{var t;console.log(o),qe(!0),(0,N.oR)("OTP sent successfully. Please verify the OTP."),_e({phone:e.phoneNumber.slice(2),name:e.name,email:e.email,token:null===o||void 0===o||null===(t=o.data)||void 0===t?void 0:t.data})}).catch(e=>{console.log(e)})}else ao("Please accept Terms & Conditions before proceeding.")}else ao(go.message)}}),Uo=(0,z.useRef)(null),[_o,Xo]=(0,z.useState)("auto");(0,z.useEffect)(()=>{Uo.current&&Xo("".concat(Uo.current.clientHeight,"px"))},[Z,yo,Ne]);const Ko=(()=>{const e=[];for(let o=0;o<24;o++)for(let t=0;t<60;t+=30){const i="".concat(o.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"));e.push({value:i,label:w()(i,"HH:mm").format("hh:mm A")})}return e})(),Zo=(()=>{const e=[],o=(e,o)=>{var t;if(!J)return!1;const i=null===(t=J.status)||void 0===t?void 0:t.toLowerCase();if(!("available"===i||"active"===i))return!1;const n=w()(me).format("YYYY-MM-DD"),l=null===ee||void 0===ee?void 0:ee.find(e=>w()(e.date).format("YYYY-MM-DD")===n);if(l&&l.isBlocked)return!1;if(l)switch(e){case"rateFor3Hour":return l.threeHourAvailable>l.threeHourBooked;case"rateFor6Hour":return l.sixHourAvailable>l.sixHourBooked;case"rateFor12Hour":return l.twelveHourAvailable>l.twelveHourBooked;default:return!0}return!0};return null!==J&&void 0!==J&&J.rateFor3Hour&&J.rateFor3Hour>0&&o("rateFor3Hour")&&e.push({value:3,label:"3 hrs",price:vo("rateFor3Hour")}),null!==J&&void 0!==J&&J.rateFor6Hour&&J.rateFor6Hour>0&&o("rateFor6Hour")&&e.push({value:6,label:"6 hrs",price:vo("rateFor6Hour")}),null!==J&&void 0!==J&&J.rateFor12Hour&&J.rateFor12Hour>0&&o("rateFor12Hour")&&e.push({value:12,label:"12 hrs",price:vo("rateFor12Hour")}),e})(),$o=()=>{const e=""!==qo.values.name.trim(),o=qo.values.phoneNumber&&"91"!==qo.values.phoneNumber&&qo.values.phoneNumber.length>=12;return e&&o&&Ze&&go.isAvailable},Jo=(e,o)=>{qo.setFieldValue(e,o),qo.setFieldTouched(e,!0),ro&&ao(null)},Qo=()=>{const e=w()(me).format("YYYY-MM-DD");return(null===ee||void 0===ee?void 0:ee.find(o=>w()(o.date).format("YYYY-MM-DD")===e))?"Dynamic Inventory Pricing":"Standard Rate"};return(0,Y.jsxs)(n.A,{sx:(0,i.A)((0,i.A)({},U.VX),{},{background:"#f6f6f6",mt:0,py:4,px:{xs:1,md:3},display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"center",gap:"20px"}),children:[(0,Y.jsx)(l.A,{sx:{p:1,background:"white",maxWidth:"700px",border:"none",boxShadow:0,borderRadius:"12px"},children:(0,Y.jsxs)(r.A,{children:[(0,Y.jsx)(a.A,{variant:"h6",gutterBottom:!0,sx:{color:L.A.firstColor,fontWeight:"bold"},children:"Your Booking Summary"}),!go.isAvailable&&(0,Y.jsxs)(s.A,{severity:"error",sx:{mb:2,borderRadius:2,"& .MuiAlert-message":{fontSize:"14px",fontWeight:500}},children:[go.message,(0,Y.jsx)(d.A,{variant:"outlined",size:"small",sx:{ml:2},onClick:()=>Eo(-1),children:"Go Back"})]}),(0,Y.jsxs)(n.A,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:{xs:0,md:2},position:"relative",mt:2,height:"fit-content",alignItems:"stretch"},children:[(0,Y.jsx)(c.A,{component:"img",sx:{width:{xs:"100%",md:"250px"},borderRadius:"12px",objectFit:"cover",height:_o,transition:"height 0.3s ease"},image:null===Z||void 0===Z||null===(W=Z.propertyImages)||void 0===W?void 0:W[0]}),(0,Y.jsxs)("div",{style:{height:"fit-content"},ref:Uo,children:[(0,Y.jsx)(a.A,{sx:{fontSize:"20px",fontWeight:600,color:L.A.firstColor,mt:{xs:1.5,md:1},display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitLineClamp:1,WebkitBoxOrient:"vertical"},children:null===Z||void 0===Z?void 0:Z.propertyName}),(0,Y.jsx)(a.A,{sx:{fontFamily:"CustomFontSB",fontSize:{xs:"12px",md:"14px"},display:"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitLineClamp:1,WebkitBoxOrient:"vertical"},children:null===Z||void 0===Z?void 0:Z.address}),(0,Y.jsxs)("div",{style:{marginTop:"10px",display:"flex",flexWrap:"wrap",flexDirection:"column",gap:"4px"},children:[(0,Y.jsx)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:ke?(0,Y.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Y.jsx)(u.A,{type:"date",size:"small",value:Re,onChange:e=>Fe(e.target.value),InputLabelProps:{shrink:!0},sx:{width:150},InputProps:{sx:{height:36}}}),(0,Y.jsx)(h.A,{size:"small",onClick:()=>{if(Re)if(w()(Re,"YYYY-MM-DD",!0).isValid())if("hourly"===de)xe(Re),De(!1),N.oR.success("Check-in date updated");else{if(w()(Re).isAfter(w()(Pe)))return void N.oR.error("Check-in date cannot be after check-out date");xe(Re),De(!1),N.oR.success("Check-in date updated")}else N.oR.error("Invalid date format. Please use YYYY-MM-DD format");else N.oR.error("Please select a check-in date")},sx:{color:"green"},children:(0,Y.jsx)(S,{})}),(0,Y.jsx)(h.A,{size:"small",onClick:()=>{Fe(me),De(!1)},sx:{color:"red"},children:(0,Y.jsx)(C.A,{})})]}):(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(a.A,{sx:$,children:[(0,Y.jsx)("strong",{children:"Check-In Date:"})," ",w()(me,"YYYY-MM-DD").format("DD MMM YYYY")]}),(0,Y.jsx)(h.A,{size:"small",onClick:()=>{Fe(me),De(!0)},sx:{ml:-1},children:(0,Y.jsx)(M.A,{fontSize:"small"})})]})}),"hourly"===de&&(0,Y.jsx)(n.A,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:Ce?(0,Y.jsxs)(n.A,{sx:{display:"flex",flexDirection:"column",gap:1,width:"100%"},children:[(0,Y.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Y.jsxs)(m.A,{size:"small",sx:{minWidth:120},children:[(0,Y.jsx)(x.A,{children:"Time"}),(0,Y.jsx)(p.A,{value:Ie,onChange:e=>ze(e.target.value),label:"Time",children:Ko.map(e=>(0,Y.jsx)(v.A,{value:e.value,children:e.label},e.value))})]}),(0,Y.jsxs)(m.A,{size:"small",sx:{minWidth:100},children:[(0,Y.jsx)(x.A,{children:"Duration"}),(0,Y.jsx)(p.A,{value:Be,onChange:e=>Ge(e.target.value),label:"Duration",children:Zo.map(e=>(0,Y.jsxs)(v.A,{value:e.value,children:[e.label," - \u20b9",e.price]},e.value))})]})]}),(0,Y.jsxs)(n.A,{sx:{display:"flex",gap:1},children:[(0,Y.jsx)(h.A,{size:"small",onClick:()=>{Ie?Ie.match(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/)?(he(Ie),We(Be),Me(!1),N.oR.success("Check-in time and duration updated")):N.oR.error("Invalid time format. Please use HH:mm format"):N.oR.error("Please select a check-in time")},sx:{color:"green"},children:(0,Y.jsx)(S,{})}),(0,Y.jsx)(h.A,{size:"small",onClick:()=>{ze(ue),Ge(Ne),Me(!1)},sx:{color:"red"},children:(0,Y.jsx)(C.A,{})})]})]}):(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(a.A,{sx:$,children:[(0,Y.jsx)("strong",{children:"Check-In Time:"})," ",ue?w()(ue,"HH:mm").format("hh:mm A"):"Not set"]}),(0,Y.jsx)(h.A,{size:"small",onClick:()=>{ze(ue),Ge(Ne),Me(!0)},sx:{ml:-1},children:(0,Y.jsx)(M.A,{fontSize:"small"})})]})}),"hourly"!==de&&(0,Y.jsx)(n.A,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:Ye?(0,Y.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Y.jsx)(u.A,{type:"date",size:"small",value:Pe,onChange:e=>we(e.target.value),InputLabelProps:{shrink:!0},sx:{width:150},InputProps:{sx:{height:36}}}),(0,Y.jsx)(h.A,{size:"small",onClick:()=>{Pe?w()(Pe,"YYYY-MM-DD",!0).isValid()?w()(Pe).isBefore(w()(Re))?N.oR.error("Check-out date cannot be before check-in date"):(ve(Pe),Se(!1),N.oR.success("Check-out date updated")):N.oR.error("Invalid date format. Please use YYYY-MM-DD format"):N.oR.error("Please select a check-out date")},sx:{color:"green"},children:(0,Y.jsx)(S,{})}),(0,Y.jsx)(h.A,{size:"small",onClick:()=>{we(pe),Se(!1)},sx:{color:"red"},children:(0,Y.jsx)(C.A,{})})]}):(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(a.A,{sx:$,children:[(0,Y.jsx)("strong",{children:"Check-Out Date:"})," ",w()(pe,"YYYY-MM-DD").format("DD MMM YYYY")]}),(0,Y.jsx)(h.A,{size:"small",onClick:()=>{we(pe),Se(!0)},sx:{ml:-1},children:(0,Y.jsx)(M.A,{fontSize:"small"})})]})}),"hourly"===de?(0,Y.jsxs)(a.A,{sx:$,children:[(0,Y.jsx)("strong",{children:"Duration: "}),Ne," hrs"]}):(0,Y.jsxs)(a.A,{sx:$,children:[(0,Y.jsx)("strong",{children:"Nights: "}),yo," night",yo>1?"s":""]}),(0,Y.jsxs)(a.A,{sx:$,children:[(0,Y.jsx)("strong",{children:"Room type:"})," ",null===J||void 0===J?void 0:J.roomCategory]}),(0,Y.jsx)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:(0,Y.jsxs)(a.A,{sx:$,children:[(0,Y.jsx)("strong",{children:"Room Info: "}),ho," Room",ho&&ho>1?"s":"",",",be," Adult",be&&Number(be)>1?"s":"",",",ye," Child",ye&&Number(ye)>1?"ren":""]})}),(0,Y.jsxs)(a.A,{sx:{fontSize:12,color:L.A.forthColor,mt:1,fontStyle:"italic"},children:[Qo()," \u2022 Price may vary by date and availability"]})]})]})]}),(0,Y.jsxs)(n.A,{sx:{mt:2,p:1.5,bgcolor:"#f5f5f5",borderRadius:"8px",border:"1px solid #e0e0e0"},children:[(0,Y.jsx)(a.A,{variant:"caption",sx:{fontWeight:600,color:L.A.forthColor,display:"block",mb:.5},children:"Room Occupancy Rules"}),(0,Y.jsxs)(n.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:[(0,Y.jsxs)(a.A,{variant:"caption",sx:{bgcolor:"#e3f2fd",color:"#1976d2",px:1,py:.5,borderRadius:"4px"},children:["Standard: ",(null===J||void 0===J?void 0:J.standardRoomOccupancy)||1," guest",(null===J||void 0===J?void 0:J.standardRoomOccupancy)>1?"s":""]}),(0,Y.jsxs)(a.A,{variant:"caption",sx:{bgcolor:"#fff3e0",color:"#f57c00",px:1,py:.5,borderRadius:"4px"},children:["Maximum: ",(null===J||void 0===J?void 0:J.maxRoomOccupancy)||1," guest",(null===J||void 0===J?void 0:J.maxRoomOccupancy)>1?"s":""]}),(0,Y.jsxs)(a.A,{variant:"caption",sx:{bgcolor:"#e8f5e9",color:"#2e7d32",px:1,py:.5,borderRadius:"4px"},children:["Your Guest: ",Number(be)+Number(ye)," guest",Number(be)+Number(ye)>1?"s":""]}),(0,Y.jsxs)(a.A,{variant:"caption",sx:{bgcolor:"#f3e5f5",color:"#7b1fa2",px:1,py:.5,borderRadius:"4px"},children:["Rooms needed: ",ho]})]}),po&&po.length>0&&(0,Y.jsxs)(n.A,{sx:{mt:2},children:[(0,Y.jsx)(a.A,{variant:"caption",sx:{fontWeight:600,color:L.A.forthColor,display:"block",mb:.5},children:"Room-wise Guest Distribution:"}),(0,Y.jsx)(n.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:po.map((e,o)=>{const t=(null===J||void 0===J?void 0:J.standardRoomOccupancy)||1,i=e>t?e-t:0;return(0,Y.jsxs)(a.A,{variant:"caption",sx:{bgcolor:i>0?"#ffebee":"#e8f5e9",color:i>0?"#c62828":"#2e7d32",px:1,py:.5,borderRadius:"4px"},children:["Room ",o+1,": ",e," guest",1!==e?"s":"",i>0&&" (+".concat(i," extra)")]},o)})})]}),mo>0&&(0,Y.jsxs)(n.A,{sx:{mt:1.5,p:1,bgcolor:"#fff3e0",borderRadius:"6px",border:"1px solid #ffcc80"},children:[(0,Y.jsxs)(a.A,{variant:"caption",sx:{fontWeight:600,color:"#e65100",display:"flex",alignItems:"center",gap:.5,mb:1},children:[(0,Y.jsx)(R,{fontSize:"small"}),"Additional Guest Charges (Payable at Property):"]}),(0,Y.jsxs)(n.A,{sx:{ml:2,mt:.5},children:[(0,Y.jsxs)(a.A,{variant:"caption",sx:{display:"block"},children:["\u2022 ",mo," extra guest",mo>1?"s":""," across ",ho," room",ho>1?"s":"","(Standard occupancy: ",(null===J||void 0===J?void 0:J.standardRoomOccupancy)||1," guest",(null===J||void 0===J?void 0:J.standardRoomOccupancy)>1?"s":""," per room)"]}),po&&po.length>0&&(0,Y.jsxs)(n.A,{sx:{mt:.5},children:[(0,Y.jsx)(a.A,{variant:"caption",sx:{display:"block",fontWeight:500},children:"Room-wise breakdown:"}),po.map((e,o)=>{const t=e-((null===J||void 0===J?void 0:J.standardRoomOccupancy)||1),i=(null===J||void 0===J?void 0:J.additionalGuestRate)||0;return t>0?(0,Y.jsxs)(a.A,{variant:"caption",sx:{display:"block",ml:1},children:["\u2022 Room ",o+1,": ",t," extra guest",t>1?"s":""," = \u20b9 ",(t*i).toFixed(2)]},o):null})]}),(0,Y.jsxs)(a.A,{variant:"caption",sx:{display:"block",fontWeight:600,color:"#e65100",mt:.5},children:["\u2022 Total extra charge: \u20b9 ",xo.toFixed(2)]}),(0,Y.jsx)(a.A,{variant:"caption",sx:{display:"block",color:"#666",mt:.5},children:"Note: This amount will be collected directly by the property during check-in."})]})]})]}),ro&&(0,Y.jsx)(s.A,{severity:"error",sx:{mt:3,mb:2,borderRadius:2,"& .MuiAlert-message":{fontSize:"14px",fontWeight:500}},onClose:()=>ao(null),children:ro}),(0,Y.jsxs)("form",{onSubmit:qo.handleSubmit,children:[(0,Y.jsx)(a.A,{variant:"h6",mt:4,sx:{color:L.A.firstColor,fontWeight:"bold"},children:"Guest Information"}),(0,Y.jsx)(U.XY,{label:"Guest Name *",name:"name",fullWidth:!0,margin:"normal",value:qo.values.name,onChange:e=>Jo("name",e.target.value),onBlur:qo.handleBlur,error:qo.touched.name&&Boolean(qo.errors.name),helperText:qo.touched.name&&qo.errors.name?String(qo.errors.name):" ",inputRef:so,sx:{"& .MuiFormHelperText-root":{color:"red",fontSize:"12px",marginLeft:1,marginTop:.5,fontWeight:500},"& .MuiOutlinedInput-root":{"&.Mui-error fieldset":{borderColor:"red",borderWidth:"2px"}}}}),(0,Y.jsxs)(n.A,{sx:{display:"flex",flexDirection:"column"},children:[(0,Y.jsx)(O(),{country:"in",enableSearch:!1,value:qo.values.phoneNumber,placeholder:"Phone Number",onChange:e=>qo.setFieldValue("phoneNumber",e),onBlur:()=>qo.setFieldTouched("phoneNumber",!0),inputStyle:{width:"100%",height:"56px",borderRadius:"52px",border:"none",outline:"none",boxShadow:"4px 4px 10px rgba(104, 39, 184, 0.17)",color:L.A.firstColor,paddingLeft:"60px",fontSize:"16px",backgroundColor:"white"},buttonStyle:{borderRadius:"52px 0 0 52px",backgroundColor:"white",marginLeft:"5px",border:"none"},containerStyle:{width:"100%"},dropdownStyle:{borderRadius:"12px"}}),qo.touched.phoneNumber&&qo.errors.phoneNumber&&(0,Y.jsx)(a.A,{sx:{color:"red",fontSize:"12px",mt:.5,ml:"14px"},children:qo.errors.phoneNumber})]}),(0,Y.jsx)(U.XY,{label:"Email Address (Optional)",name:"email",fullWidth:!0,margin:"normal",value:qo.values.email,onChange:e=>Jo("email",e.target.value),onBlur:qo.handleBlur,error:qo.touched.email&&Boolean(qo.errors.email),helperText:qo.touched.email&&qo.errors.email?String(qo.errors.email):" ",sx:{"& .MuiFormHelperText-root":{fontSize:"12px",marginLeft:1,marginTop:.5}}}),(0,Y.jsxs)(n.A,{sx:{mt:3,mb:2},children:[(0,Y.jsx)(a.A,{variant:"subtitle1",sx:{color:L.A.firstColor,fontWeight:"bold",mb:1},children:"Huts4u Discount"}),to?(0,Y.jsxs)(n.A,{sx:{p:2,borderRadius:2,bgcolor:"#e8f5e9",border:"1px solid #c8e6c9",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,Y.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Y.jsx)(F,{color:"success"}),(0,Y.jsxs)(n.A,{children:[(0,Y.jsx)(a.A,{sx:{fontWeight:600,color:"#2e7d32"},children:"HUTS4U Discount Applied"}),(0,Y.jsx)(a.A,{variant:"body2",sx:{color:"#388e3c"},children:"discount on total amount"}),(0,Y.jsxs)(a.A,{variant:"caption",sx:{color:"#666",display:"block",mt:.5},children:["You saved \u20b9 ",Fo.toFixed(2)]})]})]}),(0,Y.jsx)(d.A,{variant:"outlined",color:"error",size:"small",onClick:()=>{io(!1),N.oR.info("Huts4u Discount removed. Prices updated.")},children:"Remove"})]}):(0,Y.jsxs)(n.A,{sx:{p:2,borderRadius:2,bgcolor:"#fff3e0",border:"1px solid #ffcc80",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,Y.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Y.jsx)(F,{color:"warning"}),(0,Y.jsx)(n.A,{children:(0,Y.jsx)(a.A,{sx:{fontWeight:600,color:"#e65100"},children:"Huts4u Discount Available"})})]}),(0,Y.jsx)(d.A,{variant:"contained",sx:{background:L.A.firstColor},size:"small",onClick:()=>{io(!0),N.oR.success("Huts4u Discount applied!")},children:"Apply"})]}),to&&(0,Y.jsx)(a.A,{sx:{color:"green",fontSize:12,mt:1,textAlign:"center"},children:"\u2713  Huts4u Discount automatically applied to your booking"})]}),(0,Y.jsx)(n.A,{sx:{mt:2},children:(0,Y.jsx)(f.A,{control:(0,Y.jsx)(g.A,{checked:Ze,onChange:e=>{$e(e.target.checked),ro&&e.target.checked&&ao(null)},color:"primary"}),label:(0,Y.jsxs)("span",{children:["I accept the"," ",(0,Y.jsx)("span",{style:{color:L.A.firstColor,cursor:"pointer",textDecoration:"underline"},onClick:()=>Qe(!0),children:"Terms & Conditions"})]})})}),(0,Y.jsx)(B.A,{variant:"contained",color:"primary",fullWidth:!0,sx:{mt:2,opacity:$o()?1:.7,"&:disabled":{backgroundColor:"#e0e0e0",color:"#9e9e9e",cursor:"not-allowed"}},type:"submit",disabled:!$o(),children:(0,E.M3)()?"Pay Now":"Verify Phone & Pay"}),(0,Y.jsx)(_.A,{open:Ee,onClose:()=>qe(!1),onVerificationSuccess:()=>{qe(!1),Lo()},phone:Ue.phone,name:Ue.name,email:Ue.email,token:Ue.token}),Xe&&(0,Y.jsx)(q,{orderDetails:Xe,amount:Vo,bookingDetails:{hotel:Z,room:J,guestInfo:qo.values,timing:(()=>{if("hourly"===de&&ue&&me&&Ne){const e=w()("".concat(me," ").concat(ue),"YYYY-MM-DD HH:mm"),o=e.add(Ne,"hour");return{checkInDate:e.format("DD MMM YYYY"),checkInTime:e.format("hh:mm A"),checkOutDate:o.format("DD MMM YYYY"),checkOutTime:o.format("hh:mm A"),duration:"".concat(Ne," hrs")}}{const e=Ao();return{checkInDate:w()(me,"YYYY-MM-DD").format("DD MMM YYYY"),checkInTime:"12.00 PM",checkOutDate:w()(pe,"YYYY-MM-DD").format("DD MMM YYYY"),checkOutTime:"11.00 AM",duration:"".concat(e," night").concat(e>1?"s":"")}}})(),pricingDetails:(0,i.A)((0,i.A)({},jo),{},{nights:yo,rooms:ho.toString(),adults:be,children:ye,bookingType:de,checkinDate:me,checkOutDate:pe,checkinTime:ue,slotDuration:Ne,extraGuestCount:mo,extraGuestCharge:xo,guestsPerRoom:po,inventoryData:ee,unitBase:wo}),bookingType:de,rooms:ho.toString(),adults:be,children:ye}})]})]})}),(0,Y.jsx)(l.A,{sx:{p:1,background:"white",border:"none",boxShadow:0,borderRadius:"12px",height:"fit-content",minWidth:{md:"350px"}},children:(0,Y.jsxs)(r.A,{children:[(0,Y.jsx)(a.A,{variant:"h6",gutterBottom:!0,sx:{color:L.A.firstColor,fontWeight:"bold"},children:"Your Bill Summary"}),(0,Y.jsxs)(n.A,{sx:{mb:2,p:1,bgcolor:"#e8f5e9",borderRadius:1,border:"1px solid #c8e6c9"},children:[(0,Y.jsx)(a.A,{variant:"body2",sx:{fontWeight:600,color:"#2e7d32"},children:Qo()}),(0,Y.jsx)(a.A,{variant:"caption",sx:{color:"#388e3c",display:"block",mt:.5},children:"hourly"===de?"".concat(Ne," hrs \u2022 ").concat(ho," room").concat(ho&&ho>1?"s":""):"".concat(yo," night").concat(yo>1?"s":""," \u2022 ").concat(ho," room").concat(ho&&ho>1?"s":"")}),to&&(0,Y.jsx)(a.A,{variant:"body2",sx:{color:"green",fontWeight:600,mt:.5},children:"\u2713  Huts4u Discount Applied"})]}),mo>0&&(0,Y.jsxs)(n.A,{sx:{mb:2,p:1.5,bgcolor:"#fff3e0",borderRadius:"8px",border:"1px solid #ffcc80"},children:[(0,Y.jsxs)(a.A,{variant:"caption",sx:{fontWeight:600,color:"#e65100",display:"flex",alignItems:"center",gap:.5,mb:1},children:[(0,Y.jsx)(R,{fontSize:"small"}),"Additional Guest Charges"]}),(0,Y.jsxs)(a.A,{variant:"body2",sx:{ml:2},children:[mo," extra guest",mo>1?"s":"",": \u20b9 ",xo.toFixed(2)]}),(0,Y.jsx)(a.A,{variant:"caption",sx:{display:"block",color:"#666",mt:1,fontStyle:"italic"},children:"Note: This amount will be collected directly by the property during check-in."})]}),(0,Y.jsxs)("div",{style:{marginTop:"10px",display:"flex",flexWrap:"wrap",flexDirection:"column",gap:"8px",alignItems:"flex-end"},children:[(0,Y.jsx)(a.A,{sx:{fontSize:"16px",color:L.A.forthColor,textDecoration:"line-through",fontWeight:600,opacity:.95},children:Io>0?"\u20b9 ".concat(zo.toFixed(0)):"---"}),(0,Y.jsx)(a.A,{sx:{fontSize:"24px",color:L.A.firstColor,fontWeight:"bold"},children:Ho>0?"\u20b9 ".concat(Ho.toFixed(0)):"\u2014"}),(0,Y.jsx)(a.A,{sx:{fontSize:"13px",color:L.A.forthColor,textAlign:"right"},children:Oo>0?(0,Y.jsxs)(Y.Fragment,{children:["\u20b9",Oo.toFixed(0)," taxes & fees"]}):"\u2014"}),(0,Y.jsx)(b.A,{sx:{width:"100%",mt:1}}),(0,Y.jsxs)("div",{style:{width:"100%",textAlign:"right"},children:[Fo>0&&to&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsxs)(a.A,{sx:{fontSize:13,color:L.A.forthColor},children:["Subtotal before discount: \u20b9 ",Ro.toFixed(2)]}),(0,Y.jsxs)(a.A,{sx:{fontSize:14,color:"green",fontWeight:600},children:["Huts4u Discount: - \u20b9 ",Fo.toFixed(2)]})]}),(0,Y.jsx)(a.A,{sx:{fontSize:"16px",color:L.A.firstColor,fontWeight:"700",mt:Fo>0&&to?1:0},children:Po>0?"Final: \u20b9 ".concat(To.toFixed(2)):"---"})]})]}),(0,Y.jsxs)(n.A,{sx:{mt:3,borderRadius:2,border:"1px dashed #ddd",p:2,backgroundColor:"#fafafa"},children:[(0,Y.jsx)(a.A,{sx:{fontSize:13,fontWeight:600,mb:1,color:L.A.forthColor},children:"Detailed Breakup"}),(0,Y.jsxs)(a.A,{sx:{fontSize:13},children:[(0,Y.jsx)("strong",{children:"1. Base Price (Reimbursement)"})," ",(0,Y.jsx)("span",{style:{fontSize:11},children:"(HSN 9985)"}),(0,Y.jsxs)("span",{style:{float:"right"},children:["\u20b9 ",(ko+Do).toFixed(2)]})]}),(0,Y.jsxs)(a.A,{sx:{fontSize:13,mt:1},children:[(0,Y.jsx)("strong",{children:"2. Service Charges"})," ",(0,Y.jsx)("span",{style:{fontSize:11},children:"(HSN 996111)"}),(0,Y.jsxs)("span",{style:{float:"right"},children:["\u20b9 ",No.toFixed(2)]})]}),(0,Y.jsxs)(a.A,{sx:{fontSize:12,ml:2,mt:.3},children:["CGST @ 9% on Service",(0,Y.jsxs)("span",{style:{float:"right"},children:["\u20b9 ",Wo.toFixed(2)]})]}),(0,Y.jsxs)(a.A,{sx:{fontSize:12,ml:2},children:["SGST @ 9% on Service",(0,Y.jsxs)("span",{style:{float:"right"},children:["\u20b9 ",Bo.toFixed(2)]})]}),(0,Y.jsxs)(a.A,{sx:{fontSize:13,mt:1},children:[(0,Y.jsx)("strong",{children:"3. Convenience Fees (Incl. GST)"})," ",(0,Y.jsx)("span",{style:{fontSize:11},children:"(Reimbursement, HSN 9985)"}),(0,Y.jsxs)("span",{style:{float:"right"},children:["\u20b9 ",Go.toFixed(2)]})]}),(0,Y.jsx)(b.A,{sx:{my:1.5}}),(0,Y.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,Y.jsx)(a.A,{sx:{fontSize:14,fontWeight:600},children:"Subtotal:"}),(0,Y.jsxs)(a.A,{sx:{fontSize:14,fontWeight:600},children:["\u20b9 ",Ro.toFixed(2)]})]}),to&&Fo>0&&(0,Y.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",mb:1.5},children:[(0,Y.jsx)(a.A,{sx:{fontSize:14,fontWeight:600,color:"green"},children:"Huts4u Discount:"}),(0,Y.jsxs)(a.A,{sx:{fontSize:14,fontWeight:600,color:"green"},children:["- \u20b9 ",Fo.toFixed(2)]})]}),(0,Y.jsx)(b.A,{sx:{my:1}}),(0,Y.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:1.5},children:[(0,Y.jsx)(a.A,{sx:{fontSize:16,fontWeight:700,color:L.A.firstColor},children:"Total Payable"}),(0,Y.jsxs)(a.A,{sx:{fontSize:18,fontWeight:700,color:L.A.firstColor},children:["\u20b9 ",Vo.toFixed(2)]})]}),to&&Fo>0&&(0,Y.jsx)(n.A,{sx:{mt:1.5,p:1.5,bgcolor:"#e8f5e9",borderRadius:1},children:(0,Y.jsxs)(a.A,{sx:{fontSize:13,color:"#2e7d32",fontWeight:600,textAlign:"center"},children:["\ud83c\udf89 You saved \u20b9 ",Fo.toFixed(2)," with Huts4u Discount!"]})})]})]})}),(0,Y.jsxs)(A.A,{open:Je,onClose:()=>Qe(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Y.jsx)(y.A,{children:"Terms & Conditions"}),(0,Y.jsxs)(j.A,{children:[(0,Y.jsx)(a.A,{variant:"body2",sx:{whiteSpace:"pre-line"},children:"\nBy booking, you agree to the property's terms and conditions, cancellation policy, and house rules.\nYou also agree to follow Huts4u's official Terms & Conditions mentioned on the link below.\nPlease ensure you have read and understood all applicable policies.\n"}),(0,Y.jsx)(a.A,{variant:"body2",sx:{color:L.A.firstColor,textDecoration:"underline",cursor:"pointer",fontWeight:600},onClick:()=>window.open("https://huts4u.com/terms","_blank"),children:"Open Huts4u Terms & Conditions"})]}),(0,Y.jsx)(k.A,{children:(0,Y.jsx)(d.A,{onClick:()=>{Qe(!1)},children:"Close"})})]})]})},$={borderRadius:"52px",boxShadow:"4px 4px 10px rgba(104, 39, 184, 0.17)",color:L.A.firstColor,background:"white",fontSize:{xs:"12px",md:"14px"},width:"fit-content",p:1,px:2,mb:1}}}]);
//# sourceMappingURL=812.debb45c8.chunk.js.map